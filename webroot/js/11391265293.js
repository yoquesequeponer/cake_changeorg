!(function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)})([(function(e,t,i){function n(){function e(e){var t=i(148),n=[t];n.push(i(150)),n.push(i(156)),n.push(i(159)),n.push(i(162)),n.push(i(164)),n.push(i(173)),n.push(i(176)),n.push(i(178)),n.push(i(181)),n.push(i(185)),n.push(i(188)),n.push(i(192)),n.push(i(196)),n.push(i(201)),n.push(i(202)),n.push(i(205)),n.push(i(206)),n.push(i(207)),n.push(i(210)),n.push(i(211)),n.push(i(215)),n.push(i(220)),n.push(i(222)),n.push(i(223)),g.initializePlugins(n)}function t(e,t,i){return"/dist/preview_data.js?token=__TOKEN__&preview_layer_ids=__PREVIEW_LAYER_IDS__".replace("__TOKEN__",e).replace("__PROJECT_ID__",t).replace("__PREVIEW_LAYER_IDS__",i.join(",")).replace("__GET_ONLY_PREVIEW_LAYERS__",!0)}window.performance&&window.performance.mark&&window.performance.mark("optimizely:blockBegin");var n=i(1);n.initialize();var r=i(83),a=i(23),o=i(16);i(129);var s=o.get("stores/directive"),c=i(91);if(!c.isCORSSupported())throw new Error("CORS is not supported on this browser, aborting.");var u,l=i(131),d=i(118),f=i(132),p={"layers": [{"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["18195000979"], "experiments": [{"weightDistributions": [{"entityId": "18181173080", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Dashboard - Petition Update Advice", "bucketingStrategy": null, "variations": [{"id": "18144820738", "actions": [], "name": "Original"}, {"id": "18181173080", "actions": [{"viewId": "18195000979", "changes": [{"value": function($){var utils = window.optimizely.get("utils");
var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';

window.onload = function () {
  utils.waitForElement('#page > .bg-default > .bg-brighter').then(function(topBar) {
            
      var petitionURL = window.location.href.split('/dashboard')[0];
      var adviceURL = petitionURL + '/u/new?source_location=petition_update_advice';

      var postUpdate = document.querySelector('[data-testid="update-petition"]');
      var advice = document.createElement('div');
      advice.classList = 'advice-wrap';
      advice.innerHTML = '<div class="advice-card"><a id="advice-close" class="link-stealth position-absolute position-right position-top pas"><span class="symbol symbol-close symbol-compact"></span></a><div class="left">'+faded+animated+'</div><div class="right"><h4>You’re doing great ' + fname + '! Now let’s ask your supporters to spread the word</h4><p>Now that you have a ton of supporters, we recommend that you send them an update. It’s an opportunity to thank them for signing and to ask them to share your petition with more people they know so you can keep up the momentum!</p><a id="advice-btn" href="'+adviceURL+'" class="btn btn-action btn-big">Post an update</a></div></div>';
      
      topBar.parentNode.insertBefore(advice, topBar.nextSibling);
      window.trackEvent('petition_update_advice_prompt');
      
      document.getElementById("advice-btn").onclick = function() {
        window.trackEvent('petition_update_advice_prompt_click');
        window.localStorage.setItem('dashboard_post_update', 'true');
      };
      
      document.getElementById("advice-close").onclick = function() {
        advice.classList.add('hide-fully');
        if (window.localStorage.getItem('dashboard_post_update_close')) {
          var closeCount = parseInt(window.localStorage.getItem('dashboard_post_update_close'));
          window.localStorage.setItem('dashboard_post_update_close', (closeCount+1).toLocaleString());
        } else {
        	window.localStorage.setItem('dashboard_post_update_close', '1');
      	}
      };
      
  });
};

var animated = '<svg width="138" height="126" viewBox="0 0 138 126" fill="none" xmlns="http://www.w3.org/2000/svg" style=""> <path d="M128.93 8.55888C130.742 8.55888 132.21 7.09063 132.21 5.27944C132.21 3.46826 130.742 2 128.93 2C127.119 2 125.651 3.46826 125.651 5.27944C125.651 7.09063 127.119 8.55888 128.93 8.55888Z" stroke="#037171" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" class="OycdGxBv_0"></path> <path d="M104.878 105.906C106.418 108.472 110.202 114.045 113.017 115.814" stroke="#D4603C" stroke-width="3" stroke-linecap="round" class="OycdGxBv_1"></path> <path d="M81.5917 82.1749C81.2821 81.0837 81.1365 79.303 80.2073 79.3708C78.9215 79.4646 78.3408 82.6332 78.3408 83.9476C78.3408 85.8122 78.8386 90.4737 80.0414 94.7962C79.8617 97.5084 80.1685 104.854 84.6455 110.137C87.5905 113.612 88.0467 112.722 90.0377 115.434C91.6304 117.604 94.2961 121.819 95.6787 123.952" stroke="#D4603C" stroke-width="3" stroke-linecap="round" class="OycdGxBv_2"></path> <path d="M41.542 91.0456C42.9408 88.6829 45.648 82.9583 46.5614 79.2464C47.9191 73.7289 48.7419 68.4728 48.9888 68.4235C49.8391 68.2538 51.8852 69.0092 52.1156 70.673C52.4036 72.7527 51.1282 85.3158 50.1819 86.8437C49.8528 87.2257 49.4002 87.1408 48.9888 87.1408" stroke="#D4603C" stroke-width="3" stroke-linecap="round" class="OycdGxBv_3"></path> <path d="M51.9805 74.9459C52.1574 74.0613 52.1965 73.3876 52.3343 72.2921C52.6365 69.8901 53.0441 67.0646 53.3736 67.0035C54.287 66.8341 56.3847 67.8174 56.6322 69.4774C56.9416 71.5524 56.7648 84.8914 55.0854 88.6179C54.7318 88.999 54.2456 88.9143 53.8037 88.9143" stroke="#D4603C" stroke-width="3" stroke-linecap="round" class="OycdGxBv_4"></path> <path d="M57.4644 71.255C58.2388 71.0895 59.7503 71.7514 60.3499 73.7785C60.9256 75.7251 60.6122 86.9754 59.9002 91.1019C59.6004 91.4742 59.1882 91.3915 58.8134 91.3915" stroke="#D4603C" stroke-width="3" stroke-linecap="round" class="OycdGxBv_5"></path> <path d="M30.2192 115.106L37.6498 104.491" stroke="#D4603C" stroke-width="3" stroke-linecap="round" class="OycdGxBv_6"></path> <path d="M39.866 106.614C38.304 105.041 36.1424 101.642 35.5985 98.144C34.9511 93.9807 35.4311 93.5507 35.4311 91.4015C35.4311 90.142 34.2317 84.8136 33.7576 82.8471C33.7576 81.92 36.9122 80.6137 38.9874 84.322C41.0626 88.0303 41.414 90.1093 41.4977 90.9801C42.3763 93.2557 43.1712 91.9072 46.1418 95.5734" stroke="#D4603C" stroke-width="3" stroke-linecap="round" class="OycdGxBv_7"></path> <path d="M60.8 80.7735C60.8705 80.3952 61.2032 79.7227 61.9847 79.7227C65.3271 79.7227 63.9451 92.5776 63.677 94.0979C61.35 107.296 59.9115 107.927 51.0265 117.09C49.7568 118.399 48.5444 121.167 47.5571 122.89" stroke="#D4603C" stroke-width="3" stroke-linecap="round" class="OycdGxBv_8"></path> <path d="M102.047 93.1685C101.737 90.5529 100.196 87.7477 99.5498 86.8419C98.1288 84.1669 96.4607 80.9399 95.7175 78.0527C94.2965 72.5328 93.3494 67.7651 93.091 67.7158C92.2011 67.5459 90.0596 68.3017 89.8184 69.9662C89.5773 71.6306 89.689 73.2971 89.689 73.2971" stroke="#D4603C" stroke-width="3" stroke-linecap="round" class="OycdGxBv_9"></path> <path d="M94.2632 87.3295C92.0619 84.0264 90.3778 76.9586 89.811 73.8375C88.795 68.192 88.706 66.6144 88.4367 66.4076C87.7252 65.8615 84.8406 67.1029 84.6035 68.7544C84.439 69.5302 84.3605 73.6045 84.7247 75.1691M89.1577 88.5513C88.1982 86.543 86.1098 81.7177 85.4324 78.4821C84.7551 75.2464 84.36 73.4545 84.1201 72.7523C83.9474 72.2468 83.6513 71.4884 83.1041 71.4884C82.4268 71.4884 80.8182 72.5417 80.4795 75.4908C80.2416 77.5627 82.7373 86.8801 83.8661 91.7532" stroke="#D4603C" stroke-width="3" stroke-linecap="round" class="OycdGxBv_10"></path> <path d="M100.633 88.514C100.605 87.2798 101.179 85.5267 101.976 84.4327C103.201 82.7512 104.691 81.5095 105.877 81.2349C106.968 80.9825 107.975 81.2349 108.059 81.8661C108.143 82.4972 106.8 85.2742 106.549 86.5365C106.297 87.7988 105.877 89.2714 105.877 90.7861C105.877 91.7118 106.591 96.5926 106.591 98.1915C106.591 101.137 105.29 106.354 103.57 107.322" stroke="#D4603C" stroke-width="3" stroke-linecap="round" class="OycdGxBv_11"></path> <path d="M71.376 53.4877L71.376 41.3533M108.926 65.6201L115.813 63.3245M106.075 60.8292L112.533 55.1259M65.637 54.4705L61.3737 46.2714M36.1222 65.6204L29.2354 63.3248M38.9726 60.8296L32.5148 55.1262M77.115 54.4705L81.3784 46.2714" stroke="#F9D266" stroke-width="3" stroke-linecap="round" class="OycdGxBv_12"></path> <path d="M95.4805 25.6121C96.8537 24.4598 97.8748 25.6766 99.2307 24.5388C100.604 23.3865 99.5829 22.1697 100.939 21.032C102.312 19.8797 103.333 21.0965 104.706 19.9442C106.08 18.7919 105.059 17.5751 106.432 16.4228" stroke="#037171" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" class="OycdGxBv_13"></path> <path d="M37.7622 43.321C39.1355 42.1687 40.1565 43.3856 41.5124 42.2478C42.8857 41.0955 41.8646 39.8787 43.2205 38.741C44.5938 37.5887 45.6148 38.8055 46.9881 37.6532C48.3613 36.5009 47.3403 35.2841 48.7136 34.1318" stroke="#037171" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" class="OycdGxBv_14"></path> <path d="M4.021 16.4294C5.39426 17.5818 4.37323 18.7986 5.72911 19.9363C7.10238 21.0886 8.12342 19.8718 9.4793 21.0095C10.8526 22.1618 9.83154 23.3786 11.2048 24.5309C12.5781 25.6832 13.5991 24.4664 14.9724 25.6187" stroke="#D4603C" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" class="OycdGxBv_15"></path> <path d="M124.048 34.1384C125.422 35.2907 124.401 36.5076 125.756 37.6453C127.13 38.7976 128.151 37.5808 129.507 38.7185C130.88 39.8708 129.859 41.0876 131.232 42.2399C132.605 43.3922 133.626 42.1754 135 43.3277" stroke="#EBB3A9" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" class="OycdGxBv_16"></path> <path d="M33.8266 8.55888C35.6377 8.55888 37.106 7.09063 37.106 5.27944C37.106 3.46826 35.6377 2 33.8266 2C32.0154 2 30.5471 3.46826 30.5471 5.27944C30.5471 7.09063 32.0154 8.55888 33.8266 8.55888Z" stroke="#F9D266" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" class="OycdGxBv_17"></path> <path d="M129.003 82.8192C129.767 82.8192 130.387 82.1995 130.387 81.435C130.387 80.6705 129.767 80.0508 129.003 80.0508C128.238 80.0508 127.619 80.6705 127.619 81.435C127.619 82.1995 128.238 82.8192 129.003 82.8192Z" stroke="#F9D266" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" class="OycdGxBv_18"></path> <path d="M8.97553 51.9923C9.74001 51.9923 10.3597 51.3726 10.3597 50.6081C10.3597 49.8436 9.74001 49.2239 8.97553 49.2239C8.21104 49.2239 7.59131 49.8436 7.59131 50.6081C7.59131 51.3726 8.21104 51.9923 8.97553 51.9923Z" stroke="#037171" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" class="OycdGxBv_19"></path> <style data-made-with="vivus-instant">.OycdGxBv_0{stroke-dasharray:21 23;stroke-dashoffset:22;animation:OycdGxBv_draw 866ms ease-in-out 0ms forwards;}.OycdGxBv_1{stroke-dasharray:13 15;stroke-dashoffset:14;animation:OycdGxBv_draw 866ms ease-in-out 22ms forwards;}.OycdGxBv_2{stroke-dasharray:54 56;stroke-dashoffset:55;animation:OycdGxBv_draw 866ms ease-in-out 45ms forwards;}.OycdGxBv_3{stroke-dasharray:46 48;stroke-dashoffset:47;animation:OycdGxBv_draw 866ms ease-in-out 68ms forwards;}.OycdGxBv_4{stroke-dasharray:34 36;stroke-dashoffset:35;animation:OycdGxBv_draw 866ms ease-in-out 91ms forwards;}.OycdGxBv_5{stroke-dasharray:23 25;stroke-dashoffset:24;animation:OycdGxBv_draw 866ms ease-in-out 114ms forwards;}.OycdGxBv_6{stroke-dasharray:13 15;stroke-dashoffset:14;animation:OycdGxBv_draw 866ms ease-in-out 136ms forwards;}.OycdGxBv_7{stroke-dasharray:46 48;stroke-dashoffset:47;animation:OycdGxBv_draw 866ms ease-in-out 159ms forwards;}.OycdGxBv_8{stroke-dasharray:51 53;stroke-dashoffset:52;animation:OycdGxBv_draw 866ms ease-in-out 182ms forwards;}.OycdGxBv_9{stroke-dasharray:35 37;stroke-dashoffset:36;animation:OycdGxBv_draw 866ms ease-in-out 205ms forwards;}.OycdGxBv_10{stroke-dasharray:74 76;stroke-dashoffset:75;animation:OycdGxBv_draw 866ms ease-in-out 228ms forwards;}.OycdGxBv_11{stroke-dasharray:39 41;stroke-dashoffset:40;animation:OycdGxBv_draw 866ms ease-in-out 250ms forwards;}.OycdGxBv_12{stroke-dasharray:63 65;stroke-dashoffset:64;animation:OycdGxBv_draw 866ms ease-in-out 273ms forwards;}.OycdGxBv_13{stroke-dasharray:17 19;stroke-dashoffset:18;animation:OycdGxBv_draw 866ms ease-in-out 296ms forwards;}.OycdGxBv_14{stroke-dasharray:17 19;stroke-dashoffset:18;animation:OycdGxBv_draw 866ms ease-in-out 319ms forwards;}.OycdGxBv_15{stroke-dasharray:17 19;stroke-dashoffset:18;animation:OycdGxBv_draw 866ms ease-in-out 342ms forwards;}.OycdGxBv_16{stroke-dasharray:17 19;stroke-dashoffset:18;animation:OycdGxBv_draw 866ms ease-in-out 364ms forwards;}.OycdGxBv_17{stroke-dasharray:21 23;stroke-dashoffset:22;animation:OycdGxBv_draw 866ms ease-in-out 387ms forwards;}.OycdGxBv_18{stroke-dasharray:9 11;stroke-dashoffset:10;animation:OycdGxBv_draw 866ms ease-in-out 410ms forwards;}.OycdGxBv_19{stroke-dasharray:9 11;stroke-dashoffset:10;animation:OycdGxBv_draw 866ms ease-in-out 433ms forwards;}@keyframes OycdGxBv_draw{100%{stroke-dashoffset:0;}}@keyframes OycdGxBv_fade{0%{stroke-opacity:1;}92.72727272727273%{stroke-opacity:1;}100%{stroke-opacity:0;}}</style></svg>';

var faded = '<svg width="138" height="126" viewBox="0 0 138 126" fill="none" xmlns="http://www.w3.org/2000/svg"> <g opacity="0.3"> <path d="M128.93 8.55888C130.742 8.55888 132.21 7.09063 132.21 5.27944C132.21 3.46826 130.742 2 128.93 2C127.119 2 125.651 3.46826 125.651 5.27944C125.651 7.09063 127.119 8.55888 128.93 8.55888Z" stroke="#037171" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/> <path d="M104.878 105.906C106.418 108.472 110.202 114.045 113.017 115.814" stroke="#D4603C" stroke-width="3" stroke-linecap="round"/> <path d="M81.5917 82.1749C81.2821 81.0837 81.1365 79.303 80.2073 79.3708C78.9215 79.4646 78.3408 82.6332 78.3408 83.9476C78.3408 85.8122 78.8386 90.4737 80.0414 94.7962C79.8617 97.5084 80.1685 104.854 84.6455 110.137C87.5905 113.612 88.0467 112.722 90.0377 115.434C91.6304 117.604 94.2961 121.819 95.6787 123.952" stroke="#D4603C" stroke-width="3" stroke-linecap="round"/> <path d="M41.542 91.0456C42.9408 88.6829 45.648 82.9583 46.5614 79.2464C47.9191 73.7289 48.7419 68.4728 48.9888 68.4235C49.8391 68.2538 51.8852 69.0092 52.1156 70.673C52.4036 72.7527 51.1282 85.3158 50.1819 86.8437C49.8528 87.2257 49.4002 87.1408 48.9888 87.1408" stroke="#D4603C" stroke-width="3" stroke-linecap="round"/> <path d="M51.9805 74.9459C52.1574 74.0613 52.1965 73.3876 52.3343 72.2921C52.6365 69.8901 53.0441 67.0646 53.3736 67.0035C54.287 66.8341 56.3847 67.8174 56.6322 69.4774C56.9416 71.5524 56.7648 84.8914 55.0854 88.6179C54.7318 88.999 54.2456 88.9143 53.8037 88.9143" stroke="#D4603C" stroke-width="3" stroke-linecap="round"/> <path d="M57.4644 71.255C58.2388 71.0895 59.7503 71.7514 60.3499 73.7785C60.9256 75.7251 60.6122 86.9754 59.9002 91.1019C59.6004 91.4742 59.1882 91.3915 58.8134 91.3915" stroke="#D4603C" stroke-width="3" stroke-linecap="round"/> <path d="M30.2192 115.106L37.6498 104.491" stroke="#D4603C" stroke-width="3" stroke-linecap="round"/> <path d="M39.866 106.614C38.304 105.041 36.1424 101.642 35.5985 98.144C34.9511 93.9807 35.4311 93.5507 35.4311 91.4015C35.4311 90.142 34.2317 84.8136 33.7576 82.8471C33.7576 81.92 36.9122 80.6137 38.9874 84.322C41.0626 88.0303 41.414 90.1093 41.4977 90.9801C42.3763 93.2557 43.1712 91.9072 46.1418 95.5734" stroke="#D4603C" stroke-width="3" stroke-linecap="round"/> <path d="M60.8 80.7735C60.8705 80.3952 61.2032 79.7227 61.9847 79.7227C65.3271 79.7227 63.9451 92.5776 63.677 94.0979C61.35 107.296 59.9115 107.927 51.0265 117.09C49.7568 118.399 48.5444 121.167 47.5571 122.89" stroke="#D4603C" stroke-width="3" stroke-linecap="round"/> <path d="M102.047 93.1685C101.737 90.5529 100.196 87.7477 99.5498 86.8419C98.1288 84.1669 96.4607 80.9399 95.7175 78.0527C94.2965 72.5328 93.3494 67.7651 93.091 67.7158C92.2011 67.5459 90.0596 68.3017 89.8184 69.9662C89.5773 71.6306 89.689 73.2971 89.689 73.2971" stroke="#D4603C" stroke-width="3" stroke-linecap="round"/> <path d="M94.2632 87.3295C92.0619 84.0264 90.3778 76.9586 89.811 73.8375C88.795 68.192 88.706 66.6144 88.4367 66.4076C87.7252 65.8615 84.8406 67.1029 84.6035 68.7544C84.439 69.5302 84.3605 73.6045 84.7247 75.1691M89.1577 88.5513C88.1982 86.543 86.1098 81.7177 85.4324 78.4821C84.7551 75.2464 84.36 73.4545 84.1201 72.7523C83.9474 72.2468 83.6513 71.4884 83.1041 71.4884C82.4268 71.4884 80.8182 72.5417 80.4795 75.4908C80.2416 77.5627 82.7373 86.8801 83.8661 91.7532" stroke="#D4603C" stroke-width="3" stroke-linecap="round"/> <path d="M100.633 88.514C100.605 87.2798 101.179 85.5267 101.976 84.4327C103.201 82.7512 104.691 81.5095 105.877 81.2349C106.968 80.9825 107.975 81.2349 108.059 81.8661C108.143 82.4972 106.8 85.2742 106.549 86.5365C106.297 87.7988 105.877 89.2714 105.877 90.7861C105.877 91.7118 106.591 96.5926 106.591 98.1915C106.591 101.137 105.29 106.354 103.57 107.322" stroke="#D4603C" stroke-width="3" stroke-linecap="round"/> <path d="M71.376 53.4877L71.376 41.3533M108.926 65.6201L115.813 63.3245M106.075 60.8292L112.533 55.1259M65.637 54.4705L61.3737 46.2714M36.1222 65.6204L29.2354 63.3248M38.9726 60.8296L32.5148 55.1262M77.115 54.4705L81.3784 46.2714" stroke="#F9D266" stroke-width="3" stroke-linecap="round"/> <path d="M95.4805 25.6121C96.8537 24.4598 97.8748 25.6766 99.2307 24.5388C100.604 23.3865 99.5829 22.1697 100.939 21.032C102.312 19.8797 103.333 21.0965 104.706 19.9442C106.08 18.7919 105.059 17.5751 106.432 16.4228" stroke="#037171" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/> <path d="M37.7622 43.321C39.1355 42.1687 40.1565 43.3856 41.5124 42.2478C42.8857 41.0955 41.8646 39.8787 43.2205 38.741C44.5938 37.5887 45.6148 38.8055 46.9881 37.6532C48.3613 36.5009 47.3403 35.2841 48.7136 34.1318" stroke="#037171" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/> <path d="M4.021 16.4294C5.39426 17.5818 4.37323 18.7986 5.72911 19.9363C7.10238 21.0886 8.12342 19.8718 9.4793 21.0095C10.8526 22.1618 9.83154 23.3786 11.2048 24.5309C12.5781 25.6832 13.5991 24.4664 14.9724 25.6187" stroke="#D4603C" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/> <path d="M124.048 34.1384C125.422 35.2907 124.401 36.5076 125.756 37.6453C127.13 38.7976 128.151 37.5808 129.507 38.7185C130.88 39.8708 129.859 41.0876 131.232 42.2399C132.605 43.3922 133.626 42.1754 135 43.3277" stroke="#EBB3A9" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/> <path d="M33.8266 8.55888C35.6377 8.55888 37.106 7.09063 37.106 5.27944C37.106 3.46826 35.6377 2 33.8266 2C32.0154 2 30.5471 3.46826 30.5471 5.27944C30.5471 7.09063 32.0154 8.55888 33.8266 8.55888Z" stroke="#F9D266" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/> <path d="M129.003 82.8192C129.767 82.8192 130.387 82.1995 130.387 81.435C130.387 80.6705 129.767 80.0508 129.003 80.0508C128.238 80.0508 127.619 80.6705 127.619 81.435C127.619 82.1995 128.238 82.8192 129.003 82.8192Z" stroke="#F9D266" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/> <path d="M8.97553 51.9923C9.74001 51.9923 10.3597 51.3726 10.3597 50.6081C10.3597 49.8436 9.74001 49.2239 8.97553 49.2239C8.21104 49.2239 7.59131 49.8436 7.59131 50.6081C7.59131 51.3726 8.21104 51.9923 8.97553 51.9923Z" stroke="#037171" stroke-width="3" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/> </g> </svg>';
}, "dependencies": [], "type": "custom_code", "id": "f66a4ed2e15a40f496514b6a7fa96a2f"}, {"value": "<style>.advice-wrap {\n  padding-top: 20px;\n  margin-left: auto;\n  margin-right: auto;\n  padding-left: 10px;\n  padding-right: 10px;\n}\n\n.advice-card {\n  background: #FFFCF7;\n\tborder: 1px solid #DBD9DB;\n\tbox-sizing: border-box;\n\tborder-radius: 5px;\n  padding: 20px 30px;\n  padding-top: 30px;\n  position: relative;\n}\n\n.advice-card:after {\n \tcontent: '';\n  display: table;\n  clear: both;\n}\n\n.advice-card .left, .advice-card .right {\n \tfloat: left; \n}\n\n.advice-card .left {\n  position: relative;\n\twidth: 15%;\n}\n\n.advice-card .left svg {\n  position: absolute;\n  width: 100%;\n  top: 28px;\n}\n\n.advice-card .right {\n\tleft: 15%;\n  width: 85%;\n  padding-left: 40px;\n  padding-right: 70px;\n  position: relative;\n}\n\n.advice-card .right h4 {\n \tmargin-top: 0; \n}\n\n.advice-card .right .btn {\n  margin-top: 15px;\n}\n\n@media (min-width: 768px) {\n  .advice-wrap {\n    width: 740px;\n  }\n}\n\n@media (min-width: 992px) {\n  .advice-wrap {\n    width: 960px;\n  }\n}\n\n@media (max-width: 767px) {\n  .advice-card {\n    padding-bottom: 50px;\n    text-align: center;\n  }\n  .advice-card .left {\n   \twidth: 100%;\n    height: 150px;\n  }\n  .advice-card .left svg {\n    top: 10px;\n    position: absolute;\n    width: auto;\n    height: 120px;\n    transform: translateX(-50%);\n  }\n  .advice-card .right {\n    left: auto;\n    width: 100%;\n    padding-left: 0;\n    padding-right: 0;\n    position: relative;\n    top: 30px;\n\t}\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "a3524e8d907c475892bbed1326bbca1f"}]}], "name": "Variation #1"}, {"id": "18156331058", "actions": [{"viewId": "18195000979", "changes": [{"value": function($){var utils = window.optimizely.get("utils");
var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';

window.onload = function () {
  utils.waitForElement('#page > .bg-default > .bg-brighter').then(function(topBar) {
		  
    	var petitionURL = window.location.href.split('/dashboard')[0];
      var adviceURL = petitionURL + '/u/new?source_location=petition_update_advice';

      var postUpdate = document.querySelector('[data-testid="update-petition"]');
      var advice = document.createElement('div');
      advice.classList = 'advice-wrap';
      advice.innerHTML = '<div class="advice-card"><a id="advice-close" class="link-stealth position-absolute position-right position-top pas"><span class="symbol symbol-close symbol-compact"></span></a><div class="left"><img src="https://static.change.org/psf-experiments/update-advice-v2.png"></div><div class="right"><h4>A message from our campaigns team: Great work so far ' + fname + '!</h4><p>To keep the momentum going, we recommend that you use the update tool to thank your supporters and ask them to share your petition with more people. Updating your supporters is super easy!</p><a id="advice-btn" href="' + adviceURL + '" class="btn btn-action btn-big">Post an update</a></div></div>';
      
      topBar.parentNode.insertBefore(advice, topBar.nextSibling);
      window.trackEvent('petition_update_advice_prompt');
      
      document.getElementById("advice-btn").onclick = function() {
        window.trackEvent('petition_update_advice_prompt_click');
        window.localStorage.setItem('dashboard_post_update', 'true');
      };
      
      document.getElementById("advice-close").onclick = function() {
        advice.classList.add('hide-fully');
        if (window.localStorage.getItem('dashboard_post_update_close')) {
          var closeCount = parseInt(window.localStorage.getItem('dashboard_post_update_close'));
          window.localStorage.setItem('dashboard_post_update_close', (closeCount+1).toLocaleString());
        } else {
        	window.localStorage.setItem('dashboard_post_update_close', '1');
      	}
      };
      
  });
};
}, "dependencies": [], "type": "custom_code", "id": "A8F7ADF8-C691-4D30-966F-81DBD8530B54"}, {"value": "<style>.advice-wrap {\n  padding-top: 20px;\n  margin-left: auto;\n  margin-right: auto;\n  padding-left: 10px;\n  padding-right: 10px;\n}\n\n.advice-card {\n  background: #FFFCF7;\n\tborder: 1px solid #DBD9DB;\n\tbox-sizing: border-box;\n\tborder-radius: 5px;\n  padding: 20px 30px;\n  padding-top: 30px;\n  position: relative;\n}\n\n.advice-card:after {\n \tcontent: '';\n  display: table;\n  clear: both;\n}\n\n.advice-card .left, .advice-card .right {\n \tfloat: left; \n}\n\n.advice-card .left {\n  position: relative;\n\twidth: 132px;\n}\n\n.advice-card .right {\n  width: calc(100% - 140px);\n  padding-left: 40px;\n  padding-right: 70px;\n  position: relative;\n}\n\n.advice-card .right h4 {\n \tmargin-top: 0; \n}\n\n.advice-card .right .btn {\n  margin-top: 15px;\n}\n\n@media (min-width: 768px) {\n  .advice-wrap {\n    width: 740px;\n  }\n}\n\n@media (min-width: 992px) {\n  .advice-wrap {\n    width: 960px;\n  }\n}\n\n@media (max-width: 767px) {\n  .advice-card {\n    padding-bottom: 50px;\n    text-align: center;\n\t}\n  .advice-card .left {\n    width: 100%;\n  }\n  .advice-card .left img {\n  \twidth: 132px;\n    margin: 0 auto;\n  }\n  .advice-card .right {\n      width: 100%;\n      padding-left: 0;\n      padding-right: 0;\n      position: relative;\n      top: 30px;\n    }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "2F98C978-9E5C-4AD5-A78B-CCDF09E33EF5"}]}], "name": "Variation #2"}, {"id": "18170000400", "actions": [{"viewId": "18195000979", "changes": [{"value": function($){var utils = window.optimizely.get("utils");
var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';

window.onload = function () {
  utils.waitForElement('#page > .bg-default > .bg-brighter').then(function(topBar) {
		  
    	var petitionURL = window.location.href.split('/dashboard')[0];
      var adviceURL = petitionURL + '/u/new?source_location=petition_update_advice';

      var postUpdate = document.querySelector('[data-testid="update-petition"]');
      var advice = document.createElement('div');
      advice.classList = 'advice-wrap';
      advice.innerHTML = '<div class="advice-card"><a id="advice-close" class="link-stealth position-absolute position-right position-top pas"><span class="symbol symbol-close symbol-compact"></span></a><div class="left"><img src="https://static.change.org/psf-experiments/update-advice-v3.png"></div><div class="right"><h4>Hi ' + fname + ', I’m Robin, on the Change.org campaigns team!</h4><p>Great work so far! Now that you have a ton of signatures, it’s time to reach out to your supporters to ask them to spread the word. Use this easy update tool 👇</p><a id="advice-btn" href="' + adviceURL + '" class="btn btn-action btn-big">Update your supporters</a></div></div>';
      
      topBar.parentNode.insertBefore(advice, topBar.nextSibling);
      window.trackEvent('petition_update_advice_prompt');
      
      document.getElementById("advice-btn").onclick = function() {
        window.trackEvent('petition_update_advice_prompt_click');
        window.localStorage.setItem('dashboard_post_update', 'true');
      };
      
      document.getElementById("advice-close").onclick = function() {
        advice.classList.add('hide-fully');
        if (window.localStorage.getItem('dashboard_post_update_close')) {
          var closeCount = parseInt(window.localStorage.getItem('dashboard_post_update_close'));
          window.localStorage.setItem('dashboard_post_update_close', (closeCount+1).toLocaleString());
        } else {
        	window.localStorage.setItem('dashboard_post_update_close', '1');
      	}
      };
      
  });
};
}, "dependencies": [], "type": "custom_code", "id": "9C30EC16-85A4-4110-9904-2EE1D9EE6974"}, {"value": "<style>.advice-wrap {\n  padding-top: 20px;\n  margin-left: auto;\n  margin-right: auto;\n  padding-left: 10px;\n  padding-right: 10px;\n}\n\n.advice-card {\n  background: #FFFCF7;\n\tborder: 1px solid #DBD9DB;\n\tbox-sizing: border-box;\n\tborder-radius: 5px;\n  padding: 20px 30px;\n  padding-top: 30px;\n  position: relative;\n}\n\n.advice-card:after {\n \tcontent: '';\n  display: table;\n  clear: both;\n}\n\n.advice-card .left, .advice-card .right {\n \tfloat: left; \n}\n\n.advice-card .left {\n  position: relative;\n\twidth: 132px;\n}\n\n.advice-card .right {\n  width: calc(100% - 140px);\n  padding-left: 40px;\n  padding-right: 70px;\n  position: relative;\n}\n\n.advice-card .right h4 {\n \tmargin-top: 0; \n}\n\n.advice-card .right .btn {\n  margin-top: 15px;\n}\n\n@media (min-width: 768px) {\n  .advice-wrap {\n    width: 740px;\n  }\n}\n\n@media (min-width: 992px) {\n  .advice-wrap {\n    width: 960px;\n  }\n}\n\n@media (max-width: 767px) {\n  .advice-card {\n    padding-bottom: 50px;\n    text-align: center;\n\t}\n  .advice-card .left {\n    width: 100%;\n  }\n  .advice-card .left img {\n  \twidth: 132px;\n    margin: 0 auto;\n  }\n  .advice-card .right {\n      width: 100%;\n      padding-left: 0;\n      padding-right: 0;\n      position: relative;\n      top: 30px;\n    }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "0C615043-538B-48EA-99A0-01F879FC54CE"}]}], "name": "Variation #3"}], "audienceIds": null, "changes": null, "id": "18191180873", "integrationSettings": null}], "id": "18159315806", "weightDistributions": null, "name": "[niftic] - Dashboard - Petition Update Advice", "groupId": null, "commitId": "20306781847", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["18158541004"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "[niftic] - Petition Update - Advice", "bucketingStrategy": null, "variations": [{"id": "18161083282", "actions": [{"viewId": "18158541004", "changes": [{"value": function($){var utils = window.optimizely.get("utils");


utils.waitForElement('#clientData').then(function(clientData) {
  utils.waitForElement('.input[data-view="components/mce"]').then(function(updateDescription) {

    var cData = JSON.parse(clientData.innerHTML);
    var petition = cData.bootstrapData.petition;
    var container = document.querySelector('.container .row .col-md-7.position-block-center');
    var infoBox = document.createElement('div');
    infoBox.classList = 'update-info-box';
    infoBox.innerHTML = 'This tool will email your supporters, and is a great way to thank them, keep them informed, and tell them what else they can do to help! Feel free to change the text / tell your story / put it in your own words!';

    container.insertBefore(infoBox, container.firstChild);

    var headline = document.getElementById("js-update-headline");
    var sigCount = petition.data.total_signature_count;
    var petitionURL = window.location.href.split('/u/new')[0];

    setTimeout(function(){
      headline.value = "Let’s take this campaign to the next level";
      tinyMCE.activeEditor.setContent('Hi all, I just wanted to reach out to let you know we’ve just passed ' + sigCount.toLocaleString() + ' signatures on our petition! Thank you so much for your support! Will you help me to get more support by sharing this petition with ten other people? If enough of us sign we can’t be ignored! Here’s a link to share <a href="' + petitionURL + '">' + petitionURL + '</a>');
    }, 3000);
  });
});
}, "dependencies": [], "type": "custom_code", "id": "3b253a6b096948b3b29f85a4cbddc568"}, {"value": "<style>.update-info-box {\n \tpadding: 17px 20px;\n  background: #FDF9F3;\n\tborder: 1px solid #D6CBBA;\n\tbox-sizing: border-box;\n\tborder-radius: 4px;\n  margin-bottom: 40px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "3326AB99-4C21-453C-B689-3D8DB421F9CC"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "18170600465", "integrationSettings": null}], "id": "18160041265", "weightDistributions": null, "name": "[niftic] - Petition Update - Advice", "groupId": null, "commitId": "18253872146", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["18570393140"], "experiments": [{"weightDistributions": [{"entityId": "18587662828", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - SUPA - 5 Month Milestone", "bucketingStrategy": null, "variations": [{"id": "18564543345", "actions": [{"viewId": "18570393140", "changes": [{"dependencies": [], "type": "custom_code", "id": "8a10891154a74bda9c7295be6a2ecdf1", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('div.modal.in[data-name="signed_interrupt"] .modal-dialog').then(function(signedModal) {
  
  utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent('optly_interrupt_show');
  });
  
});
}}]}], "name": "Original"}, {"id": "18587662828", "actions": [{"viewId": "18570393140", "changes": [{"dependencies": [], "type": "custom_code", "id": "64a1928a8386441b8eda9efae602aac4", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/show"]').then(function(show) {
  
  var modalInner = '<h1 class="mtn">Breonna Taylor was killed 5 months ago. <span class="type-branded">Can you do more to demand justice?</span></h1>' + 
      '<div id="slider" class="txt-c">' + 
      '<img id="slider-image" src="https://static.change.org/psf-experiments/breonna-slider-1.png"><div class="dots"><span class="red"></span><span></span><span></span><span></span></div></div>' +
      '<p class="mtn position-relative">In the early morning hours of March 13, 2020, three officers used a controversial “no-knock warrant” to enter Breonna’s Taylor’s apartment. More than 20 shots were fired, killing Breonna Taylor. People have taken to the streets to demand justice. Oprah Winfrey put Breonna Taylor on the cover of her magazine’s August issue and has taken out 26 billboards in Kentucky demanding justice <span class="fade-bottom-white"></span></p>' + 
      '<a class="btn btn-action btn-full btn-big mvs" href="https://www.change.org/l/us/breonna-taylor-was-killed-5-months-ago-can-you-do-more-to-demand-justice" target="_blank">Read the full update</a>' +
      '<div class="bottom-section bg-default"><p>Every voice makes a difference. Can you take the next step in demanding justice for Breonna Taylor?</p><a id="start" href="https://p2a.co/CatJUmt?fbclid=IwAR00OulYlX3ja7DcgOj9IGjAMm0OACUU03pUIEh0Gv28XQfLxR0NZ5REUsQ" target="_blank" class="btn btn-big btn-full mtm">Yes, I’m ready to call for Breonna!</a></div>';
  
  var m = document.createElement('div');
  m.classList = 'modal';
  m.innerHTML = '<div id="monument-modal" class="modal-dialog animate animate-zoom-in modal-medium">' +
      '<button class="modal-close link-stealth position-absolute position-right position-top pas monument-modal-close"><span class="symbol symbol-close symbol-compact"></span></button>' +
			modalInner +
    '</div>';
  
  show.insertBefore(m, show.firstChild);
  
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent('monument_popup_show');
  });
  
  document.querySelector('.monument-modal-close').onclick = function() {
    	m.classList.add('hide-fully');
    	m.remove();
      utils.waitUntil(function() { return !!window.App; }).then(function() {
      	window.App.trackEvent('monument_popup_close');
    	});
  };
  
  document.getElementById('start').addEventListener('click', function() {
    utils.waitUntil(function() { return !!window.App; }).then(function() {
      window.App.trackEvent('monument_popup_start_petition');
    });
  }, false);
  
  var slider = document.getElementById('slider');
  var sliderImage = document.getElementById('slider-image');
  var ind = 1;
  var dots = document.querySelectorAll('.dots > span');
  
  setInterval(function() {
    if (ind === 4) {
      ind = 1;
    } else {
      ind++;
    }
    for (var i = 0; i < dots.length; i++) {
     	dots[i].classList.remove('red');
      if (ind === i+1) {
       	dots[i].classList.add('red'); 
      }
    }
    slider.classList.add('fadeout');
    setTimeout(function(){
      sliderImage.src = 'https://static.change.org/psf-experiments/breonna-slider-'+ind+'.png';
      slider.classList.remove('fadeout');
    }, 500);
  }, 3000);
  
  window.localStorage.setItem('breonna_milestone', 'true');
  
});

utils.waitForElement('div.modal.in[data-name="signed_interrupt"] .modal-dialog').then(function(signedModal) {
  signedModal.parentNode.classList.add('hide-fully');
  signedModal.parentNode.remove();
});
}}, {"value": "<style>#slider {\n \topacity: 1;\n  transition: .5s ease opacity;\n}\n\n#slider.fadeout {\n \topacity: 0;\n}\n\n.scrolling-wrapper {\n  display: flex;\n  flex-wrap: nowrap;\n  overflow-x: auto;\n}\n\n.card-item {\n\tflex: 0 0 auto;\n  max-width: 100%;\n  margin-right: 20px;\n}\n\n.dots {\n  position: relative;\n  top: -35px;\n}\n\n.dots span {\n \tdisplay: inline-block;\n  margin: 0 8px;\n  background: #FFF;\n  width: 10px;\n  height: 10px;\n  border-radius: 100%;\n}\n\n.dots span.red {\n  background: #EC2C22;\n}\n\n.bottom-section {\n  margin-top: 18px;\n  margin-left: -15px;\n  margin-right: -15px;\n  padding: 22px 17px;\n  margin-bottom: -15px;\n  border-radius: 0px 0px 5px 5px;\n}\n\n.bg-new .line {\n  display: block;\n  margin-top: 24px;\n  margin-left: -15px;\n  margin-right: -15px;\n  height: 1px;\n  background: #DBD9DB;\n}\n\n.fade-bottom-white {\n  display: block;\n \tposition: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: linear-gradient(180deg, rgba(255, 255, 255, 0) 0%, #FFFFFF 100%);\n  height: 100px;\n}\n\n@media (min-width: 780px) {\n  .bottom-section {\n    margin-top: 18px;\n    margin-left: -30px;\n    margin-right: -30px;\n    padding: 25px 30px;\n    margin-bottom: -30px;\n  }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "72818c6d21044f71a9485ffd67a60277"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "18598952654", "integrationSettings": null}], "id": "18578142176", "weightDistributions": null, "name": "[niftic] - SUPA - 5 Month Milestone", "groupId": null, "commitId": "18576362569", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["18728650009"], "experiments": [{"weightDistributions": [{"entityId": "18747290014", "endOfRange": 5000}, {"entityId": "18792183881", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Petition Update - Elijah McClain", "bucketingStrategy": null, "variations": [{"id": "18724750009", "actions": [{"viewId": "18728650009", "changes": [{"dependencies": [], "type": "custom_code", "id": "4001b21c293e40c0a3680602f2e3dee8", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('div.modal.in[data-name="signed_interrupt"] .modal-dialog').then(function(signedModal) {
  
  utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent('optly_interrupt_show');
  });
  
});
}}]}], "name": "Original"}, {"id": "18747290014", "actions": [{"viewId": "18728650009", "changes": [{"dependencies": [], "type": "custom_code", "id": "987e0bc20ed841d48f372ba75c6ccdcc", "value": function($){var utils = window.optimizely.get("utils");
var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';

function rNum(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

utils.waitForElement('.js-sign-and-share-components').then(function(share) {
  
  var r = rNum(1, 47);
  var firstCaller = shareUsers[r];
  var secondCaller = shareUsers[r+1];
  var mins = rNum(1, 59);
  var hours = rNum(2, 5);
  
  var ww = window.innerWidth;
  if (ww > 767) {
   	// desktop
    share.classList.add('new-bg-box', 'optly-call-cta');
    var oldShares = share.querySelector('.pvm.xs-ptn');
    //var gtherm = oldShares.querySelector('[data-view="petitions/show/components/gradient_thermometer"]');
    //gtherm.parentNode.classList.add('hide-fully');

    var callCTA = document.createElement('div');
    callCTA.classList = 'ptm';
    callCTA.innerHTML = '<h3 class="mtn">A year later, Elijah’s killers still walk free.</h3><p>It’s been too long. Decision-makers will have to listen if enough of us tie up their phone lines. Can you go a step further and speak up for Elijah McClain?</p>' +
      '<div class="mvm"><p class="mbxs"><strong>14,602 have called.</strong> Let’s get to 20,000!</p><div class="gradient-thermometer"><div class="bg-light-gray type-m fit-finish-thermometer-bg border-rounded-circle"><div class="gradient-thermometer-fill fit-finish-thermometer-fill-height display-inline-block" style="width: 75%;"></div><div class="arrow-right-fit-finish display-inline-block position-relative"></div></div></div>' +
    '<div class="call-feed"><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+firstCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + firstCaller.first_name + ' ' + firstCaller.last_name + '</strong> called '+mins+' min ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+secondCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + secondCaller.first_name + ' ' + secondCaller.last_name + '</strong> called '+hours+' hrs ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div></div></div>' +
      '<a id="call-launch" class="btn btn-action btn-big btn-full mts" target="_blank">Yes, I’ll call lawmakers now!</a>';

    oldShares.parentNode.insertBefore(callCTA, oldShares);
    oldShares.classList.add('hide-fully');

    var url = 'change.org/ElijahMcClain';
    var copyBox = document.createElement('div');
    copyBox.className = 'niftic-copy-box box box-basic bg-brighter mtl pam xs-mhs mbn';
    copyBox.innerHTML = '<div class="copy-link txt-c mbs"><span class="type-branded" style="text-decoration: underline;">' + url + '</span></div><div class="copy-btn-wrap"><button class="btn btn-big btn-full"><span class="symbol symbol-link"></span>Copy Petition Link</button></div>';

    share.parentNode.insertBefore(copyBox, share.nextSibling);

    var copyBtn = copyBox.querySelector('button');
    copyBtn.addEventListener('click', copyToClipboard);

    function copyToClipboard() {
        var el = document.createElement('textarea');
        el.value = url;
        el.setAttribute('readonly', '');
        el.style.position = 'absolute';
        el.style.left = '-9999px';
        document.body.appendChild(el);
        el.select();
        document.execCommand('copy');
        document.body.removeChild(el);

      copyBtn.innerHTML = '<span class="symbol symbol-link"></span>Copied!';

      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('supa_vanity_copy');
      });
    }
    /*
    <div class="advocacy-actionwidget" data-domain="p2a.co" data-shorturl="A7rCUcv" data-responsive="true" style=""></div>
    <script>
    (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'advocacy-actionwidget-code'));
    </script>
    */
    
    var p2a = document.createElement('div');
    p2a.classList = 'advocacy-actionwidget mtl hide-call';
    p2a.setAttribute('data-domain', 'p2a.co');
    p2a.setAttribute('data-shorturl', 'ui6tot5');
    p2a.setAttribute('data-responsive', 'true');
    p2a.setAttribute('style', '');
    
    share.parentNode.appendChild(p2a);
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'advocacy-actionwidget-code'));
    
    document.getElementById('call-launch').addEventListener('click', function() {
        p2a.classList.remove('hide-call');
        p2a.scrollIntoView();
        window.App.trackEvent('call_launched');
  	});
  } else {
    // mobile      

    console.error('ctmobile');
    var callCtaMobile = document.createElement('div');
    callCtaMobile.classList = 'new-bg-mobile optly-call-cta new-bg-box';
    callCtaMobile.innerHTML = '<div class="mobile-cta-inner"><button id="close-mobile-cta" class="link-stealth position-absolute position-right position-top pas"><span class="symbol symbol-close symbol-compact"></span></button><h3 class="mtn">A year later, Elijah’s killers still walk free.</h3><p>It’s been too long. Decision-makers will have to listen if enough of us tie up their phone lines. Can you go a step further and speak up for Elijah McClain?</p>' +
      '<div class="mtm"><p class="mbxs"><strong>14,602 have called.</strong> Let’s get to 20,000!</p><div class="gradient-thermometer"><div class="bg-light-gray type-m fit-finish-thermometer-bg border-rounded-circle"><div class="gradient-thermometer-fill fit-finish-thermometer-fill-height display-inline-block" style="width: 75%;"></div><div class="arrow-right-fit-finish display-inline-block position-relative"></div></div></div>' +
    '<div class="call-feed"><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+firstCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + firstCaller.first_name + ' ' + firstCaller.last_name + '</strong> called '+mins+' min ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+secondCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + secondCaller.first_name + ' ' + secondCaller.last_name + '</strong> called '+hours+' hrs ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div></div></div>' +
      '<a id="mobile-call-launch" class="btn btn-action btn-big btn-full mts">Yes, I’ll call lawmakers now!</a></div>';
    
    var topBar = document.querySelector('.js-update-content div ul.list-inline.mts.mbxxxs');
    topBar.parentNode.insertBefore(callCtaMobile, topBar.nextSibling);
    
    document.getElementById('close-mobile-cta').onclick = function() {
      callCtaMobile.classList.add('hide-fully');
    };
    
    var p2a = document.createElement('div');
    p2a.classList = 'advocacy-actionwidget mtl hide-call';
    p2a.setAttribute('data-domain', 'p2a.co');
    p2a.setAttribute('data-shorturl', 'ui6tot5');
    p2a.setAttribute('data-responsive', 'true');
    p2a.setAttribute('style', '');
    
    callCtaMobile.appendChild(p2a);
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'advocacy-actionwidget-code'));
    
    document.getElementById('mobile-call-launch').addEventListener('click', function() {
      callCtaMobile.querySelector('.mobile-cta-inner').classList.add('hide-fully');
        p2a.classList.remove('hide-call');
        p2a.scrollIntoView();
        window.App.trackEvent('call_launched');
  	});
    
    document.getElementById('mobile-call-launch').addEventListener('click', function() {
        window.App.trackEvent('call_launched');
      });
      
  }
  
 	var optlyCallCtas = document.querySelectorAll('.optly-call-cta');
	console.warn(optlyCallCtas);
    
  var nextSteps = document.createElement('div');
  nextSteps.className = 'optly-next-steps pbm ptxxl';
  nextSteps.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12 txt-c">' +
    '        <div class="megaphone">' + megaphoneSvg + '</div>' +
    '        <h1>Take the next step to demand justice</h1>' +
    '        <p class="mbxl type-l">Here’s what you can do next to help this campaign grow:</p>' +
    '        <div class="new-bg-box pvs phm txt-l border-rounded">' +
    '            <h3 class="mtn mbs">Tweet at Aurora City Council today. </h3>' +
    '            <p class="mbs type-l">In just a few days, city council members will vote on whether to temporarily stop law enforcement from using ketamine, the drug which killed Elijah McClain. <strong>Can you tweet to support this vote?</strong></p>' +
    '            <button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Send a tweet to lawmakers</button>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  optlyCallCtas.forEach(function(el) {
		console.warn(el);
  	//el.parentNode.insertBefore(nextSteps, el);
  });
  
  /*
  var tweetBtn = document.querySelector('.optly-tweet');
  tweetBtn.addEventListener('click', function() {
    var tweet = 'Ketamine killed #ElijahMcClain & left Elijah McKnight on life support. Aurora City Council should vote to ban this powerful drug while @CDPHE investigates. @marsha_berzins @nicoleforaurora @marcano4aurora @coombsforaurora @gruberforaurora @allisonhiltz https://twitter.com/Change/status/1304489936511410176';
    utils.waitUntil(function() { return !!window.App; }).then(function() {
  		window.App.trackEvent('optly_tweet_dm');
  	});
		window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');

  });
  */
  
});

utils.waitUntil(function() { return !!window.hj; }).then(function() {
        window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
        hj('trigger', 'elijah_tweet_dm_control');
      });

var megaphoneSvg = '<svg width="69" height="62" viewBox="0 0 69 62" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.4828 9.17065L21.5388 7.91988L20.6106 10.1402C20.3813 10.689 20.5313 11.3231 20.9824 11.7109L22.8072 13.2797L20.4088 13.0831C19.8159 13.0345 19.2593 13.3732 19.0299 13.922L18.1018 16.1423L17.5475 13.8005C17.4105 13.2217 16.9164 12.7969 16.3236 12.7483L13.9251 12.5518L15.9811 11.301C16.4892 10.9918 16.7405 10.3907 16.6036 9.81184L16.0493 7.47001L17.8742 9.03882C18.3252 9.42658 18.9747 9.4798 19.4828 9.17065Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M55.059 46.4412L57.1149 45.1904L56.1868 47.4107C55.9574 47.9595 56.1075 48.5936 56.5585 48.9814L58.3834 50.5502L55.9849 50.3536C55.3921 50.305 54.8354 50.6437 54.606 51.1925L53.6779 53.4128L53.1237 51.071C52.9867 50.4922 52.4926 50.0674 51.8998 50.0188L49.5013 49.8223L51.5573 48.5715C52.0654 48.2624 52.3167 47.6612 52.1797 47.0824L51.6255 44.7405L53.4504 46.3093C53.9014 46.6971 54.5508 46.7503 55.059 46.4412Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M11.4711 28.6531L13.527 27.4023L12.5989 29.6227C12.3695 30.1714 12.5196 30.8055 12.9706 31.1933L14.7955 32.7621L12.397 32.5655C11.8042 32.5169 11.2475 32.8556 11.0182 33.4044L10.09 35.6248L9.53581 33.2829C9.39883 32.7041 8.90472 32.2793 8.3119 32.2307L5.91342 32.0342L7.96937 30.7834C8.47752 30.4743 8.72882 29.8731 8.59183 29.2943L8.0376 26.9524L9.86248 28.5212C10.3135 28.909 10.9629 28.9622 11.4711 28.6531Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M35.452 43.1402C40.4368 38.106 49.666 33.6148 56.2302 34.4045L34.7117 12.886C35.5014 19.4008 31.0101 28.63 25.976 33.6641" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M15.3647 48.5692L20.5469 53.7514C21.7807 52.5176 23.2613 51.3331 24.8407 50.1979L18.9182 44.2754C17.783 45.8547 16.5985 47.3354 15.3647 48.5692Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M25.9869 33.681L17.1576 42.5103L26.6151 51.9677L35.4444 43.1384L25.9869 33.681Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M40.6834 55.4788L35.6986 60.4636L29.3319 49.2602L34.2674 44.2754L40.6834 55.4788Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M46.0064 12.54L49.3268 2.10681" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M57.0537 23.3997L67.6414 20.7783" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M51.4348 17.3115L59.5051 9.92984" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/></svg>';

var shareUsers = [
  {
    "amount": 300,
    "first_name": "Mark",
    "last_name": "Hampton",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 1000,
    "first_name": "Molly",
    "last_name": "Roberts",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 500,
    "first_name": "Jeremy",
    "last_name": "Hughes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Andy",
    "last_name": "Peterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 2000,
    "first_name": "Holland",
    "last_name": "Walker",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Brinley",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 300,
    "first_name": "Ioannis",
    "last_name": "Martin",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 2000,
    "first_name": "Brenda",
    "last_name": "Johnson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 500,
    "first_name": "Jorge",
    "last_name": "Lopez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 300,
    "first_name": "Bill",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  },
  {
    "amount": 2000,
    "first_name": "Chyanna",
    "last_name": "Kelly",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 300,
    "first_name": "Doug",
    "last_name": "Lee",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M06.png"
  },
  {
    "amount": 1000,
    "first_name": "Susannah",
    "last_name": "Collins",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 200,
    "first_name": "Andrew",
    "last_name": "Gray",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M07.png"
  },
  {
    "amount": 500,
    "first_name": "Juli",
    "last_name": "Roland",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 2500,
    "first_name": "Bernadette",
    "last_name": "Lynn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 1000,
    "first_name": "Angelica",
    "last_name": "Perez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Tamara",
    "last_name": "Ward",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 500,
    "first_name": "Leslie",
    "last_name": "Butler",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F14.png"
  },
  {
    "amount": 1500,
    "first_name": "Kevin",
    "last_name": "Wurz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M08.png"
  },
  {
    "amount": 2500,
    "first_name": "Amanda",
    "last_name": "A",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F15.png"
  },
  {
    "amount": 500,
    "first_name": "Karen",
    "last_name": "Flores",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F16.png"
  },
  {
    "amount": 300,
    "first_name": "Mary Jo",
    "last_name": "Long",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F17.png"
  },
  {
    "amount": 1000,
    "first_name": "Sean",
    "last_name": "Morris",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M09.png"
  },
  {
    "amount": 500,
    "first_name": "Christopher",
    "last_name": "Fultz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M10.png"
  },
  {
    "amount": 2000,
    "first_name": "Dori",
    "last_name": "Price",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 300,
    "first_name": "Kellie",
    "last_name": "Patterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Judy",
    "last_name": "Young",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 5000,
    "first_name": "Ludwin",
    "last_name": "Alvarez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M11.png"
  },
  {
    "amount": 300,
    "first_name": "Jorge",
    "last_name": "Reyna",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M12.png"
  },
  {
    "amount": 2000,
    "first_name": "Brittany",
    "last_name": "Allen",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F04.png"
  },
  {
    "amount": 400,
    "first_name": "Arianne",
    "last_name": "James",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 500,
    "first_name": "Ryan",
    "last_name": "Nelson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M13.png"
  },
  {
    "amount": 2000,
    "first_name": "Emily",
    "last_name": "Wright",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 2000,
    "first_name": "John",
    "last_name": "Sanders",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M14.png"
  },
  {
    "amount": 300,
    "first_name": "Haydee",
    "last_name": "Lewis",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 500,
    "first_name": "Jamie",
    "last_name": "Diaz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M15.png"
  },
  {
    "amount": 2000,
    "first_name": "Michael",
    "last_name": "Gibbs",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M16.png"
  },
  {
    "amount": 300,
    "first_name": "Kelly",
    "last_name": "Gomez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 1000,
    "first_name": "Katy",
    "last_name": "Boyd",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 300,
    "first_name": "Elaine",
    "last_name": "Henry",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 2000,
    "first_name": "Gary",
    "last_name": "Richards",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 300,
    "first_name": "Harrison",
    "last_name": "Finn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Lorri",
    "last_name": "Ramos",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Frances",
    "last_name": "Dixon",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 500,
    "first_name": "Deniz",
    "last_name": "Holmes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 500,
    "first_name": "Lisa",
    "last_name": "Shaw",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 1000,
    "first_name": "Barbara",
    "last_name": "Daniels",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F13.png"
  },
  {
    "amount": 5000,
    "first_name": "John",
    "last_name": "Black",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  }
];
}}, {"value": "<style>.new-bg-box {\n  background: #FFFCF7;\n  border: 1px solid #FFE9AA;\n  box-sizing: border-box;\n  border-radius: 5px;\n  padding: 24px 20px;\n}\n\n.new-bg-box > div > .hidden-xs:nth-of-type(2),\n.new-bg-box [data-view=\"petitions/show/components/recent_signers\"] {\n \tdisplay: none; \n}\n\n.new-bg-mobile {\n  position: relative;\n  background: #FFFCF7;\n  padding-top: 26px;\n  padding-left: 15px;\n  padding-right: 15px;\n  padding-bottom: 32px;\n}\n\n.advocacy-actionwidget {\n \topacity: 1;\n  transition: opacity ease .5s;\n}\n.advocacy-actionwidget iframe {\n  min-height: 1520px !important;\n}\n\n.hide-call {\n\tvisibility: hidden;\n  opacity: 0;\n  height: 0;\n  margin-top: 0 !important;\n}\n\n@media (min-width: 768px) {\n  .new-bg-mobile {\n   \tdisplay: none; \n  }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "42daaadb0d774a2ca7f65df73f1afd60"}]}], "name": "Variation #1"}, {"id": "18792183881", "actions": [{"viewId": "18728650009", "changes": [{"dependencies": [], "type": "custom_code", "id": "F94AE739-ECA4-4CBC-83DE-91BE0E5B2750", "value": function($){var utils = window.optimizely.get("utils");
var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';

function rNum(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

utils.waitForElement('.js-sign-and-share-components').then(function(share) {
  
  var r = rNum(1, 47);
  var firstCaller = shareUsers[r];
  var secondCaller = shareUsers[r+1];
  var mins = rNum(1, 59);
  var hours = rNum(2, 5);
  
  var ww = window.innerWidth;
  if (ww > 767) {
   	// desktop
    share.classList.add('new-bg-box', 'optly-call-cta');
    var oldShares = share.querySelector('.pvm.xs-ptn');
    //var gtherm = oldShares.querySelector('[data-view="petitions/show/components/gradient_thermometer"]');
    //gtherm.parentNode.classList.add('hide-fully');

    var callCTA = document.createElement('div');
    callCTA.classList = 'ptm';
    callCTA.innerHTML = '<h3 class="mtn">A year later, Elijah’s killers still walk free.</h3><p>It’s been too long. Decision-makers will have to listen if enough of us tie up their phone lines. Can you go a step further and speak up for Elijah McClain?</p>' +
      '<div class="mvm"><p class="mbxs"><strong>14,602 have called.</strong> Let’s get to 20,000!</p><div class="gradient-thermometer"><div class="bg-light-gray type-m fit-finish-thermometer-bg border-rounded-circle"><div class="gradient-thermometer-fill fit-finish-thermometer-fill-height display-inline-block" style="width: 75%;"></div><div class="arrow-right-fit-finish display-inline-block position-relative"></div></div></div>' +
    '<div class="call-feed"><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+firstCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + firstCaller.first_name + ' ' + firstCaller.last_name + '</strong> called '+mins+' min ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+secondCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + secondCaller.first_name + ' ' + secondCaller.last_name + '</strong> called '+hours+' hrs ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div></div></div>' +
      '<a id="call-launch" class="btn btn-action btn-big btn-full mts" target="_blank">Yes, I’ll call lawmakers now!</a>';

    oldShares.parentNode.insertBefore(callCTA, oldShares);
    oldShares.classList.add('hide-fully');

    var url = 'change.org/ElijahMcClain';
    var copyBox = document.createElement('div');
    copyBox.className = 'niftic-copy-box box box-basic bg-brighter mtl pam xs-mhs mbn';
    copyBox.innerHTML = '<div class="copy-link txt-c mbs"><span class="type-branded" style="text-decoration: underline;">' + url + '</span></div><div class="copy-btn-wrap"><button class="btn btn-big btn-full"><span class="symbol symbol-link"></span>Copy Petition Link</button></div>';

    share.parentNode.insertBefore(copyBox, share.nextSibling);

    var copyBtn = copyBox.querySelector('button');
    copyBtn.addEventListener('click', copyToClipboard);

    function copyToClipboard() {
        var el = document.createElement('textarea');
        el.value = url;
        el.setAttribute('readonly', '');
        el.style.position = 'absolute';
        el.style.left = '-9999px';
        document.body.appendChild(el);
        el.select();
        document.execCommand('copy');
        document.body.removeChild(el);

      copyBtn.innerHTML = '<span class="symbol symbol-link"></span>Copied!';

      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('supa_vanity_copy');
      });
    }
    /*
    <div class="advocacy-actionwidget" data-domain="p2a.co" data-shorturl="A7rCUcv" data-responsive="true" style=""></div>
    <script>
    (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'advocacy-actionwidget-code'));
    </script>
    */
    
    var p2a = document.createElement('div');
    p2a.classList = 'advocacy-actionwidget mtl hide-call';
    p2a.setAttribute('data-domain', 'p2a.co');
    p2a.setAttribute('data-shorturl', 'ui6tot5');
    p2a.setAttribute('data-responsive', 'true');
    p2a.setAttribute('style', '');
    
    share.parentNode.appendChild(p2a);
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'advocacy-actionwidget-code'));
    
    document.getElementById('call-launch').addEventListener('click', function() {
        p2a.classList.remove('hide-call');
        p2a.scrollIntoView();
        window.App.trackEvent('call_launched');
  	});
  } else {
    // mobile      

    console.error('ctmobile');
    var callCtaMobile = document.createElement('div');
    callCtaMobile.classList = 'new-bg-mobile optly-call-cta new-bg-box';
    callCtaMobile.innerHTML = '<div class="mobile-cta-inner"><button id="close-mobile-cta" class="link-stealth position-absolute position-right position-top pas"><span class="symbol symbol-close symbol-compact"></span></button><h3 class="mtn">A year later, Elijah’s killers still walk free.</h3><p>It’s been too long. Decision-makers will have to listen if enough of us tie up their phone lines. Can you go a step further and speak up for Elijah McClain?</p>' +
      '<div class="mtm"><p class="mbxs"><strong>14,602 have called.</strong> Let’s get to 20,000!</p><div class="gradient-thermometer"><div class="bg-light-gray type-m fit-finish-thermometer-bg border-rounded-circle"><div class="gradient-thermometer-fill fit-finish-thermometer-fill-height display-inline-block" style="width: 75%;"></div><div class="arrow-right-fit-finish display-inline-block position-relative"></div></div></div>' +
    '<div class="call-feed"><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+firstCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + firstCaller.first_name + ' ' + firstCaller.last_name + '</strong> called '+mins+' min ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+secondCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + secondCaller.first_name + ' ' + secondCaller.last_name + '</strong> called '+hours+' hrs ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div></div></div>' +
      '<a id="mobile-call-launch" class="btn btn-action btn-big btn-full mts">Yes, I’ll call lawmakers now!</a></div>';
    
    var topBar = document.querySelector('.js-update-content div ul.list-inline.mts.mbxxxs');
    topBar.parentNode.insertBefore(callCtaMobile, topBar.nextSibling);
    
    document.getElementById('close-mobile-cta').onclick = function() {
      callCtaMobile.classList.add('hide-fully');
    };
    
    var p2a = document.createElement('div');
    p2a.classList = 'advocacy-actionwidget mtl hide-call';
    p2a.setAttribute('data-domain', 'p2a.co');
    p2a.setAttribute('data-shorturl', 'ui6tot5');
    p2a.setAttribute('data-responsive', 'true');
    p2a.setAttribute('style', '');
    
    callCtaMobile.appendChild(p2a);
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'advocacy-actionwidget-code'));
    
    document.getElementById('mobile-call-launch').addEventListener('click', function() {
      callCtaMobile.querySelector('.mobile-cta-inner').classList.add('hide-fully');
        p2a.classList.remove('hide-call');
        p2a.scrollIntoView();
        window.App.trackEvent('call_launched');
  	});
    
    document.getElementById('mobile-call-launch').addEventListener('click', function() {
        window.App.trackEvent('call_launched');
      });
      
  }
  
 	var optlyCallCtas = document.querySelectorAll('.optly-call-cta');
	console.warn(optlyCallCtas);
    
  var nextSteps = document.createElement('div');
  nextSteps.className = 'optly-next-steps pbm ptxxl';
  nextSteps.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12 txt-c">' +
    '        <div class="megaphone">' + megaphoneSvg + '</div>' +
    '        <h1>Take the next step to demand justice</h1>' +
    '        <p class="mbxl type-l">New actions are available that you can take to help this petition make moves.</p>' +
    '        <div class="new-bg-box pvs phm txt-l border-rounded">' +
    '            <h3 class="mtn mbs">Join the calls for justice on twitter.</h3>' +
    '            <p class="mbs type-l">Tweeting in numbers helps make this issue impossible to ignore. Will you take the next step and <strong>send a tweet to demand justice for Elijah?</strong></p>' +
    '            <button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Yes, I’ll tweet lawmakers now!</button>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  optlyCallCtas.forEach(function(el) {
		console.warn(el);
  	el.parentNode.insertBefore(nextSteps, el);
  });
  
  var tweetBtn = document.querySelector('.optly-tweet');
  tweetBtn.addEventListener('click', function() {
    var tweet = 'It’s been more than a year since Elijah McClain was killed by @AuroraPD. @COAttnyGeneral @pweiser @GovofCO @jaredpolis It’s time to take action. I stand with 5 million people demanding #JusticeforElijahMcClain → change.org/ElijahMcClain';
    utils.waitUntil(function() { return !!window.App; }).then(function() {
  		window.App.trackEvent('optly_tweet_dm');
  	});
		window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');

  });
    
  
});

utils.waitUntil(function() { return !!window.hj; }).then(function() {
        window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
        hj('trigger', 'elijah_tweet_dm');
      });

var megaphoneSvg = '<svg width="69" height="62" viewBox="0 0 69 62" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.4828 9.17065L21.5388 7.91988L20.6106 10.1402C20.3813 10.689 20.5313 11.3231 20.9824 11.7109L22.8072 13.2797L20.4088 13.0831C19.8159 13.0345 19.2593 13.3732 19.0299 13.922L18.1018 16.1423L17.5475 13.8005C17.4105 13.2217 16.9164 12.7969 16.3236 12.7483L13.9251 12.5518L15.9811 11.301C16.4892 10.9918 16.7405 10.3907 16.6036 9.81184L16.0493 7.47001L17.8742 9.03882C18.3252 9.42658 18.9747 9.4798 19.4828 9.17065Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M55.059 46.4412L57.1149 45.1904L56.1868 47.4107C55.9574 47.9595 56.1075 48.5936 56.5585 48.9814L58.3834 50.5502L55.9849 50.3536C55.3921 50.305 54.8354 50.6437 54.606 51.1925L53.6779 53.4128L53.1237 51.071C52.9867 50.4922 52.4926 50.0674 51.8998 50.0188L49.5013 49.8223L51.5573 48.5715C52.0654 48.2624 52.3167 47.6612 52.1797 47.0824L51.6255 44.7405L53.4504 46.3093C53.9014 46.6971 54.5508 46.7503 55.059 46.4412Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M11.4711 28.6531L13.527 27.4023L12.5989 29.6227C12.3695 30.1714 12.5196 30.8055 12.9706 31.1933L14.7955 32.7621L12.397 32.5655C11.8042 32.5169 11.2475 32.8556 11.0182 33.4044L10.09 35.6248L9.53581 33.2829C9.39883 32.7041 8.90472 32.2793 8.3119 32.2307L5.91342 32.0342L7.96937 30.7834C8.47752 30.4743 8.72882 29.8731 8.59183 29.2943L8.0376 26.9524L9.86248 28.5212C10.3135 28.909 10.9629 28.9622 11.4711 28.6531Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M35.452 43.1402C40.4368 38.106 49.666 33.6148 56.2302 34.4045L34.7117 12.886C35.5014 19.4008 31.0101 28.63 25.976 33.6641" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M15.3647 48.5692L20.5469 53.7514C21.7807 52.5176 23.2613 51.3331 24.8407 50.1979L18.9182 44.2754C17.783 45.8547 16.5985 47.3354 15.3647 48.5692Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M25.9869 33.681L17.1576 42.5103L26.6151 51.9677L35.4444 43.1384L25.9869 33.681Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M40.6834 55.4788L35.6986 60.4636L29.3319 49.2602L34.2674 44.2754L40.6834 55.4788Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M46.0064 12.54L49.3268 2.10681" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M57.0537 23.3997L67.6414 20.7783" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M51.4348 17.3115L59.5051 9.92984" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/></svg>';

var shareUsers = [
  {
    "amount": 300,
    "first_name": "Mark",
    "last_name": "Hampton",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 1000,
    "first_name": "Molly",
    "last_name": "Roberts",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 500,
    "first_name": "Jeremy",
    "last_name": "Hughes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Andy",
    "last_name": "Peterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 2000,
    "first_name": "Holland",
    "last_name": "Walker",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Brinley",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 300,
    "first_name": "Ioannis",
    "last_name": "Martin",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 2000,
    "first_name": "Brenda",
    "last_name": "Johnson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 500,
    "first_name": "Jorge",
    "last_name": "Lopez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 300,
    "first_name": "Bill",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  },
  {
    "amount": 2000,
    "first_name": "Chyanna",
    "last_name": "Kelly",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 300,
    "first_name": "Doug",
    "last_name": "Lee",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M06.png"
  },
  {
    "amount": 1000,
    "first_name": "Susannah",
    "last_name": "Collins",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 200,
    "first_name": "Andrew",
    "last_name": "Gray",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M07.png"
  },
  {
    "amount": 500,
    "first_name": "Juli",
    "last_name": "Roland",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 2500,
    "first_name": "Bernadette",
    "last_name": "Lynn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 1000,
    "first_name": "Angelica",
    "last_name": "Perez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Tamara",
    "last_name": "Ward",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 500,
    "first_name": "Leslie",
    "last_name": "Butler",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F14.png"
  },
  {
    "amount": 1500,
    "first_name": "Kevin",
    "last_name": "Wurz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M08.png"
  },
  {
    "amount": 2500,
    "first_name": "Amanda",
    "last_name": "A",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F15.png"
  },
  {
    "amount": 500,
    "first_name": "Karen",
    "last_name": "Flores",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F16.png"
  },
  {
    "amount": 300,
    "first_name": "Mary Jo",
    "last_name": "Long",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F17.png"
  },
  {
    "amount": 1000,
    "first_name": "Sean",
    "last_name": "Morris",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M09.png"
  },
  {
    "amount": 500,
    "first_name": "Christopher",
    "last_name": "Fultz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M10.png"
  },
  {
    "amount": 2000,
    "first_name": "Dori",
    "last_name": "Price",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 300,
    "first_name": "Kellie",
    "last_name": "Patterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Judy",
    "last_name": "Young",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 5000,
    "first_name": "Ludwin",
    "last_name": "Alvarez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M11.png"
  },
  {
    "amount": 300,
    "first_name": "Jorge",
    "last_name": "Reyna",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M12.png"
  },
  {
    "amount": 2000,
    "first_name": "Brittany",
    "last_name": "Allen",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F04.png"
  },
  {
    "amount": 400,
    "first_name": "Arianne",
    "last_name": "James",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 500,
    "first_name": "Ryan",
    "last_name": "Nelson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M13.png"
  },
  {
    "amount": 2000,
    "first_name": "Emily",
    "last_name": "Wright",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 2000,
    "first_name": "John",
    "last_name": "Sanders",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M14.png"
  },
  {
    "amount": 300,
    "first_name": "Haydee",
    "last_name": "Lewis",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 500,
    "first_name": "Jamie",
    "last_name": "Diaz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M15.png"
  },
  {
    "amount": 2000,
    "first_name": "Michael",
    "last_name": "Gibbs",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M16.png"
  },
  {
    "amount": 300,
    "first_name": "Kelly",
    "last_name": "Gomez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 1000,
    "first_name": "Katy",
    "last_name": "Boyd",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 300,
    "first_name": "Elaine",
    "last_name": "Henry",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 2000,
    "first_name": "Gary",
    "last_name": "Richards",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 300,
    "first_name": "Harrison",
    "last_name": "Finn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Lorri",
    "last_name": "Ramos",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Frances",
    "last_name": "Dixon",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 500,
    "first_name": "Deniz",
    "last_name": "Holmes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 500,
    "first_name": "Lisa",
    "last_name": "Shaw",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 1000,
    "first_name": "Barbara",
    "last_name": "Daniels",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F13.png"
  },
  {
    "amount": 5000,
    "first_name": "John",
    "last_name": "Black",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  }
];
}}, {"value": "<style>.new-bg-box {\n  background: #FFFCF7;\n  border: 1px solid #FFE9AA;\n  box-sizing: border-box;\n  border-radius: 5px;\n  padding: 24px 20px;\n}\n\n.new-bg-box > div > .hidden-xs:nth-of-type(2),\n.new-bg-box [data-view=\"petitions/show/components/recent_signers\"] {\n \tdisplay: none; \n}\n\n.new-bg-mobile {\n  position: relative;\n  background: #FFFCF7;\n  padding-top: 26px;\n  padding-left: 15px;\n  padding-right: 15px;\n  padding-bottom: 32px;\n}\n\n.advocacy-actionwidget {\n \topacity: 1;\n  transition: opacity ease .5s;\n}\n.advocacy-actionwidget iframe {\n  min-height: 1520px !important;\n}\n\n.hide-call {\n\tvisibility: hidden;\n  opacity: 0;\n  height: 0;\n  margin-top: 0 !important;\n}\n\n@media (min-width: 768px) {\n  .new-bg-mobile {\n   \tdisplay: none; \n  }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "FA597BBE-3944-4DD3-96EC-1298DC53D5A4"}]}], "name": "Variation #2"}], "audienceIds": null, "changes": null, "id": "18737900006", "integrationSettings": null}], "id": "18748980016", "weightDistributions": null, "name": "[niftic] - Petition Update - Elijah McClain", "groupId": null, "commitId": "18922820868", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["18800260352"], "experiments": [{"weightDistributions": [{"entityId": "18805710311", "endOfRange": 5000}, {"entityId": "18817220272", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[nifitc] - Member - MA Landing", "bucketingStrategy": null, "variations": [{"id": "18805710311", "actions": [], "name": "Original"}, {"id": "18817220272", "actions": [{"viewId": "18800260352", "changes": [{"dependencies": [], "type": "custom_code", "id": "9539218b4b6a4235b797643897bee0f2", "value": function($){var utils = window.optimizely.get("utils");

var user = window.changeTargetingData.viewer.user;
var appStateLocale = window.changeTargetingData.appState.locale;
var locale = '';
var lang = '';
if (appStateLocale) {
  // based on settings
  locale = appStateLocale.split('-')[1];
  lang = appStateLocale.split('-')[0];
} else {
  // based on browser
    var browserLocale = window.navigator.userLanguage || window.navigator.language;
  if (!!browserLocale.locale) {
		locale = browserLocale.locale.split('-')[1];
		lang = browserLocale.locale.split('-')[0];
  } else {
		locale = browserLocale.split('-')[1];
   	lang = browserLocale.split('-')[0];
  }
}
lang = lang.toLowerCase();
locale = locale.toLowerCase();

if (window.location.href.indexOf("members-canada") > -1) {
    locale = 'ca';
} else if (window.location.href.indexOf("member?") > -1) {
    locale = 'us';
}

var translations = {
  us: {
    heading: 'Change.org wouldn’t exist without our supporters.',
    underHeading: 'Without them we couldn’t be 100% independent or help hundreds of petition starters each week.',
    counter: 'We need 1,000 members this month',
    ask: 'Only with the support of our monthly contributors can we continue to help more petitions that fight against injustice and give a voice to the voiceless.<br><br>Chip in $3 per month and help create more change.',
  	copy: 'Thank you to our new Change.org Members. Change.org is 100% people powered!',
    img: 'https://static.change.org/psf-experiments/uk-supporter.jpg',
    joinHtml: 'joined <span class="minutes"></span> mins ago',
    names: {
      male: ['Sean V.','Simon P.','Joseph W.','Nicholas M.','Connor C.','Thomas W.','Steven E.','Carl H.','Warren T.','Gavin E.'],
      female: ['Wanda N.','Ella M.','Rebecca W.','Jan B.','Carolyn E.','Abigail H.','Audrey F.','Michelle U.','Alison N.','Fiona H.']
    }  
  },
  ca: {
    heading: 'Change.org wouldn’t exist without our supporters.',
    underHeading: 'Without them we couldn’t be 100% independent or help hundreds of petition starters each week.',
    counter: 'We need 188 members this month',
    ask: 'Only with the support of our monthly contributors can we continue to help more petitions that fight against injustice and give a voice to the voiceless.<br><br>Chip in $3 per month and help create more change.',
    img: 'https://static.change.org/psf-experiments/uk-supporter.jpg',
    joinHtml: 'joined <span class="minutes"></span> mins ago',
    names: {
      male: ['Sean V.','Simon P.','Joseph W.','Nicholas M.','Connor C.','Thomas W.','Steven E.','Carl H.','Warren T.','Gavin E.'],
      female: ['Wanda N.','Ella M.','Rebecca W.','Jan B.','Carolyn E.','Abigail H.','Audrey F.','Michelle U.','Alison N.','Fiona H.']
    }  
  }
};

function randomize(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;
  while (0 !== currentIndex) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }
  return array;
}
var socialFeedHtml = '<div class="social-feed xs-mbs sm-mbs">' +
'        <ul id="social-feed-inner"></ul>' +
'    </div>';

var renderFeedItem = function(name, i, gender) {
  var nameArray = name.split(" ");
  name = nameArray[0] + ' ' + nameArray[1].charAt(0) + '.';
	return '<div class="arrange arrange-middle">' +
        '    <div class="arrange-fit prxs mrxxxs mvxxxs">' +
        '        <div class="media-profile-small-height">' +
        '            <div class="media-profile-img">' +
        '                <div class="flex-embed border-rounded-circle">' +
        '                    <div class="flex-embed-ratio">' +
        '                        <div class="flex-embed-content">' +
        '                            <img alt="' + name + '" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="https://static.change.org/psf-experiments/N-MF-' + gender + (i < 9 ? '0' + (i + 1) : i + 1) + '.png">' +
        '                            <img class="optly-img-confetti" src="https://static.change.org/psf-experiments/MF-Confetti-blank-' + Math.round((Math.random() * (2 - 1) + 1)) + '.png">' +
        '                        </div>' +
        '                    </div>' +
        '                </div>' +
        '            </div>' +
        '        </div>' +
        '    </div>' +
        '    <div class="arrange-fill">' + //class="hide-overflow" style="overflow: hidden; text-overflow: ellipsis; -webkit-box-orient: vertical; display: -webkit-box; -webkit-line-clamp: 41;"
        '        <div>' +
        '            <span class="optly-item-content">' +
        '<strong title="' + name + '">' + name + '</strong><br> ' +
        '                <span class="type-s display-block">' + translations[locale].joinHtml + '</span>' +
        '            </span>' +
        '        </div>' +
        '    </div>' +
        '</div>'; 
};

var createFeedItems = function(array, parent, gender) {
  array.forEach(function(el, i) {
    var item = document.createElement('div');
    item.className = 'optly-feed-item type-m pvxxxs';
    if (i === 0) {
        item.style['margin-left'] = '0';
    }
    item.innerHTML = renderFeedItem(el,i, gender);
    parent.appendChild(item);
  });
};

function getThermometer(w) {
  return '<div class="gradient-thermometer"><div class="bg-light-gray type-m fit-finish-thermometer-bg border-rounded-circle"><div id="therm-width" class="gradient-thermometer-fill fit-finish-thermometer-fill-height display-inline-block" style="width: '+w+'%;"></div><div class="arrow-right-fit-finish display-inline-block position-relative"></div></div></div>';
}

if (locale === 'us' || locale === 'ca') {

	utils.waitForElement('.js-landing-header.js-contribute-box').then(function(contributeBox) {
    
    var leftCol = contributeBox.querySelector('.row .col-md-7');
    var rightCol = contributeBox.querySelector('.row .col-md-5');
    
    var currentHeading = leftCol.querySelector('h1.mtn.mbm');
    var currentSub = leftCol.querySelector('p.mbxl');
    
    currentHeading.innerHTML = translations[locale].heading;
    currentSub.innerHTML = translations[locale].underHeading;
    
    contributeBox.classList.remove('mtxxxl');
    contributeBox.classList.add('mtl');
  	
    var socialFeed = document.createElement('div');
    socialFeed.setAttribute("id", "social-feed-wrap");
    socialFeed.classList.add('row', 'ptm');
    socialFeed.innerHTML = socialFeedHtml;
    
    // above thermometer (counter)
    var counter = document.createElement('p');
    // counter.innerHTML = translations[locale].counter;
    counter.classList = 'mtm mbs';
    leftCol.appendChild(counter);
    // thermometer
    var therm = document.createElement('div');
    therm.innerHTML = getThermometer(75);
    therm.classLIst = 'mbl';
    leftCol.appendChild(therm);
    // social feed
    leftCol.appendChild(socialFeed);
    
    // ask
    var ask = document.createElement('p');
    ask.innerHTML = translations[locale].ask;
    ask.classList = 'mvxl';
    leftCol.appendChild(ask);
    
    // Styling
    leftCol.classList.remove('bg-inverted', 'match-content-height');
    leftCol.classList.add('type-default');
    
    rightCol.classList.remove('match-content-height');
    rightCol.classList.add('type-default', 'mtxxl');
    
    var leftColImg = leftCol.querySelector('.flex-embed-content img');
    leftColImg.src = translations[locale].img;
    
    var flexEmbedRatio = leftCol.querySelector('.flex-embed .flex-embed-ratio');
    flexEmbedRatio.classList.remove('flex-embed-16x9');
    
    var socialInner = document.getElementById('social-feed-inner');
    
    createFeedItems(translations[locale].names.male, socialInner, 'M');
    createFeedItems(translations[locale].names.female, socialInner, 'F');
    
    for (var j = socialInner.children.length; j >= 0; j--) {
    	socialInner.appendChild(socialInner.children[Math.random() * j | 0]);
    }
    
    var min = 2;
    var minutes = socialInner.querySelectorAll('.minutes');
    minutes.forEach(function(el){
      el.innerText = min;
    	min = min + Math.round((Math.random() * (4 - 1) + 1));
    });
    
    var firstSocialItem = socialInner.firstChild;
    var margin = 0;
    setInterval(function() {
      if (margin > ((minutes.length * -200) + 400)) {
				margin -= 200;
    		firstSocialItem.style.marginLeft = margin + 'px'; 	   
      }
    }, 3000);
    
  });
  
}
utils.waitForElement('.js-submit-payment').then(function() {
  var stripe = document.querySelector('.js-payment-copy-stripe');
  stripe.innerHTML = '<img src="https://static.change.org/psf-experiments/security-badge.png"> ' + stripe.innerHTML;
});
utils.waitForElement('.js-identified-log-in').then(function() {
  var stripe = document.querySelector('.js-payment-copy-stripe');
  stripe.innerHTML = '<img src="https://static.change.org/psf-experiments/security-badge.png"> ' + stripe.innerHTML;
});
}}, {"value": "<style>.row.type-brighter .col-md-7 .flex-embed {\n      max-height: 300px;\n}\n@media (max-width: 500px) {\n .row.type-brighter .col-md-7 .flex-embed {\n      max-height: 200px;\n\t} \n}\n.social-feed-msg .arrange-fit img{\n\tmax-width: 40px !important;\n}\n#social-feed-wrap {\n\n}\n#social-feed-inner {\n\tdisplay: flex;\n  padding-left: 15px;\n  overflow: hidden;\n}\n.optly-feed-item {\n    min-width: 190px;\n    max-width: 190px;\n    transition: all .8s ease-in-out;\n    margin-right: 10px;\n}\n#social-feed-inner > div:first-of-type {\n\tmargin-left: 30px;\n}\n.optly-feed-item .flex-embed {\n    overflow: visible;\n}\n.optly-feed-item .flex-embed-content > img:first-of-type {\n\tborder: 1px #ec2c22 solid;\n  z-index: 2;\n}\n.optly-img-confetti {\n    position: absolute;\n    max-width: 180%;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n.js-payment-copy-stripe {\n \tcolor: #737273; \n\tdisplay: inline-block;\n}\n.js-payment-copy-stripe img {\n  display: inline-block;\n  width: 34px;\n  vertical-align: middle;\n  margin-right: 14px;\n}\n#social-feed-inner:before, #social-feed-inner:after {\n    content: '';\n    position: absolute;\n    display: block;\n    width: 30px;\n    top: 0;\n    height: 100%;\n  z-index: 1;\n}\n#social-feed-inner:before {\n  left: 10px;\nbackground: -moz-linear-gradient(left,  rgba(255,255,255,1) 1%, rgba(255,255,255,1) 18%, rgba(255,255,255,0) 100%); /* FF3.6-15 */\nbackground: -webkit-linear-gradient(left,  rgba(255,255,255,1) 1%,rgba(255,255,255,1) 18%,rgba(255,255,255,0) 100%); /* Chrome10-25,Safari5.1-6 */\nbackground: linear-gradient(to right,  rgba(255,255,255,1) 1%,rgba(255,255,255,1) 18%,rgba(255,255,255,0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\nfilter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#00ffffff',GradientType=1 ); /* IE6-9 */\n\n}\n#social-feed-inner:after {\n \tright: 10px;\nbackground: -moz-linear-gradient(left,  rgba(255,255,255,0) 0%, rgba(255,255,255,0.01) 1%, rgba(255,255,255,1) 86%, rgba(255,255,255,1) 100%); /* FF3.6-15 */\nbackground: -webkit-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.01) 1%,rgba(255,255,255,1) 86%,rgba(255,255,255,1) 100%); /* Chrome10-25,Safari5.1-6 */\nbackground: linear-gradient(to right,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.01) 1%,rgba(255,255,255,1) 86%,rgba(255,255,255,1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\nfilter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=1 ); /* IE6-9 */\n}\n.optly-item-content {\n    width: 140px;\n    display: block;\n}\n\n.member-landing-page .col-md-5.open-payment-variant-right-side {\n    border-radius: 15px;\n  \tborder: solid 1px #e5e2e2;\n  \tbackground-color: #f9f9f9 !important;\n}\n.js-payment-container .type-invert, .js-payment-container .type-brighter {\n  \tcolor: #737273 !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "5e3f40cff8f04a188e9d6493e9b83864"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "18805820321", "integrationSettings": null}], "id": "18778770324", "weightDistributions": null, "name": "[nifitc] - Member - MA Landing", "groupId": null, "commitId": "18815282244", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["18805870182"], "experiments": [{"weightDistributions": [{"entityId": "18815020437", "endOfRange": 5000}, {"entityId": "18819000488", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - PUPA - Tweet DM - Save USPS", "bucketingStrategy": null, "variations": [{"id": "18815020437", "actions": [{"viewId": "18805870182", "changes": [{"dependencies": [], "type": "custom_code", "id": "50b9c2bb9da14fbdab34d389f18557c3", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('div.modal.in[data-name="signed_interrupt"] .modal-dialog').then(function(signedModal) {
  
  utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent('optly_interrupt_show');
  });
  
});
}}]}], "name": "Original"}, {"id": "18819000488", "actions": [{"viewId": "18805870182", "changes": [{"dependencies": [], "type": "custom_code", "id": "63cee8e14da742e4a21c5af6460e17f8", "value": function($){var utils = window.optimizely.get("utils");
var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';


utils.waitForElement('[data-view="petitions/updates/components/rendr_comments"] > h3').then(function(){
utils.waitForElement('[data-view="petitions/updates/show"] .js-update-content').then(function(updates) {
  utils.waitForElement('.js-sign-and-share-components .hidden-xs > .bg-default.pam.mtm.border-rounded').then(function(signShare) {
    utils.waitForElement('[data-view="petitions/updates/components/membership_ask"]').then(function(membershipAsk) {
      try {

      var nextSteps = document.createElement('div');
      nextSteps.className = 'optly-next-steps pbxs desktop';
      nextSteps.innerHTML = '' +
        '<div class="row">' +
        '    <div class="txt-c">' +
        '        <div class="megaphone">' + megaphoneSvg + '</div>' +
        '        <h1>Take the next steps for this petition</h1>' +
        '        <p class="mbxl">New actions are available that you can take to help this petition make moves.</p>' +
        '        <div class="bg-highlight pvs phm txt-l border-rounded row" style="border: 1px solid #FFE9AA;">' +
        '            <h3 class="mtn mbs">Join the call to save the U.S. Postal Service.</h3>' +
        '            <p class="mbs type-l">Directly tag decision makers with the power to pass a critical funding bill in the Senate. Tweeting in numbers helps make this issue impossible to ignore. <strong>Can you tweet to Mitch McConnell and Chuck Schumer?</strong></p>' +
        '            <button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Send a tweet to lawmakers</button>' +
        '        </div>' +
        '    </div>' +
        '</div>';

      signShare.innerHTML = '';
      signShare.classList.remove('pam', 'bg-default');
      signShare.appendChild(nextSteps);

      var nextStepsMobile = nextSteps.cloneNode(true);
      nextStepsMobile.classList.add('visible-xs', 'mobile', 'container', 'mtxxl');
      nextStepsMobile.classList.remove('desktop');
      nextStepsMobile.querySelector('.bg-highlight').className = 'bg-highlight pvs phxs txt-l border-rounded';
      membershipAsk.parentNode.insertBefore(nextStepsMobile, membershipAsk);

      var tweetBtns = document.querySelectorAll('.optly-tweet');
      tweetBtns.forEach(function(tweetBtn) {
          tweetBtn.addEventListener('click', function() {
          var tweet = 'I\'m calling on @senmajldr @senschumer @donaldtrump to fund the @USPS so that Americans can get their medicines, checks, and absentee ballots delivered safely and securely. It\'s time to step up and take action! Change.org/saveusps';
          window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
        });
      });

      } catch(err) {console.error(err);}
    });
  });
});
});


var megaphoneSvg = '<svg width="69" height="62" viewBox="0 0 69 62" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.4828 9.17065L21.5388 7.91988L20.6106 10.1402C20.3813 10.689 20.5313 11.3231 20.9824 11.7109L22.8072 13.2797L20.4088 13.0831C19.8159 13.0345 19.2593 13.3732 19.0299 13.922L18.1018 16.1423L17.5475 13.8005C17.4105 13.2217 16.9164 12.7969 16.3236 12.7483L13.9251 12.5518L15.9811 11.301C16.4892 10.9918 16.7405 10.3907 16.6036 9.81184L16.0493 7.47001L17.8742 9.03882C18.3252 9.42658 18.9747 9.4798 19.4828 9.17065Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M55.059 46.4412L57.1149 45.1904L56.1868 47.4107C55.9574 47.9595 56.1075 48.5936 56.5585 48.9814L58.3834 50.5502L55.9849 50.3536C55.3921 50.305 54.8354 50.6437 54.606 51.1925L53.6779 53.4128L53.1237 51.071C52.9867 50.4922 52.4926 50.0674 51.8998 50.0188L49.5013 49.8223L51.5573 48.5715C52.0654 48.2624 52.3167 47.6612 52.1797 47.0824L51.6255 44.7405L53.4504 46.3093C53.9014 46.6971 54.5508 46.7503 55.059 46.4412Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M11.4711 28.6531L13.527 27.4023L12.5989 29.6227C12.3695 30.1714 12.5196 30.8055 12.9706 31.1933L14.7955 32.7621L12.397 32.5655C11.8042 32.5169 11.2475 32.8556 11.0182 33.4044L10.09 35.6248L9.53581 33.2829C9.39883 32.7041 8.90472 32.2793 8.3119 32.2307L5.91342 32.0342L7.96937 30.7834C8.47752 30.4743 8.72882 29.8731 8.59183 29.2943L8.0376 26.9524L9.86248 28.5212C10.3135 28.909 10.9629 28.9622 11.4711 28.6531Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M35.452 43.1402C40.4368 38.106 49.666 33.6148 56.2302 34.4045L34.7117 12.886C35.5014 19.4008 31.0101 28.63 25.976 33.6641" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M15.3647 48.5692L20.5469 53.7514C21.7807 52.5176 23.2613 51.3331 24.8407 50.1979L18.9182 44.2754C17.783 45.8547 16.5985 47.3354 15.3647 48.5692Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M25.9869 33.681L17.1576 42.5103L26.6151 51.9677L35.4444 43.1384L25.9869 33.681Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M40.6834 55.4788L35.6986 60.4636L29.3319 49.2602L34.2674 44.2754L40.6834 55.4788Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M46.0064 12.54L49.3268 2.10681" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M57.0537 23.3997L67.6414 20.7783" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M51.4348 17.3115L59.5051 9.92984" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/></svg>';
}}, {"value": "<style>.optly-next-steps.desktop h1 {\n\tfont-size: 31.25px;\n  line-height: 38px;\n}\n.optly-next-steps .bg-highlight {\n\tbackground: #FFFCF7 !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "CD78A9E7-FA8D-4026-8889-C7F3CD545727"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "18800300311", "integrationSettings": null}], "id": "18786680391", "weightDistributions": null, "name": "[niftic] - PUPA - Tweet DM - Save USPS", "groupId": null, "commitId": "18856240346", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["18818611779"], "experiments": [{"weightDistributions": [{"entityId": "18798303649", "endOfRange": 5000}, {"entityId": "18860512077", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share - Elijah Call Tool Tweet DM", "bucketingStrategy": null, "variations": [{"id": "18796326434", "actions": [], "name": "Original"}, {"id": "18798303649", "actions": [{"viewId": "18818611779", "changes": [{"dependencies": [], "type": "custom_code", "id": "201c7ebed02f42a59c699272cf487c17", "value": function($){var utils = window.optimizely.get("utils");

function rNum(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

utils.waitForElement('.sharePage .contentShare').then(function(shareCard) {
  
  var r = rNum(1, 47);
  var firstCaller = shareUsers[r];
  var secondCaller = shareUsers[r+1];
  var mins = rNum(1, 59);
  var hours = rNum(2, 5);
  
  shareCard.classList.add('original', 'hide-fully');
  
  var callCard = document.createElement('div');
  callCard.classList = 'contentShare';
  callCard.innerHTML = '<div id="call-ask"><div class="flex-embed"><div class="flex-embed-ratio flex-embed-cinema"><div class="Image"><div data-view="psf/components/image" data-image="" data-view-attached="true"><img src="//assets.change.org/photos/0/mb/ft/DfmbfTcFeXGXJuD-800x450-noPad.jpg?1591128047" alt="header" class="sc-AxgMl cVmQYF"></div></div></div></div>' + 
   '<div class="contentShareText"><div class="xs-pan pal"><h1>A year later, Elijah’s killers still walk free.</h1><p class="type-l">It’s been too long. Decision-makers will have to listen if enough of us tie up their phone lines. Can you go a step further and speak up for Elijah McClain?</p>' +
    '<div class="mvm"><p class="mbxs"><strong>14,602 have called.</strong> Let’s get to 20,000!</p><div class="gradient-thermometer"><div class="bg-light-gray type-m fit-finish-thermometer-bg border-rounded-circle"><div class="gradient-thermometer-fill fit-finish-thermometer-fill-height display-inline-block" style="width: 75%;"></div><div class="arrow-right-fit-finish display-inline-block position-relative"></div></div></div>' +
    '<div class="call-feed"><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+firstCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + firstCaller.first_name + ' ' + firstCaller.last_name + '</strong> called '+mins+' min ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+secondCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + secondCaller.first_name + ' ' + secondCaller.last_name + '</strong> called '+hours+' hrs ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div></div></div>' +
   '<a id="call" class="btn btn-action btn-big btn-full mts">Yes, I’ll call lawmakers now!</a><a id="no-share" class="btn btn-big btn-full mts">No, I’ll share instead</a></div></div></div>';
  
  	var p2a = document.createElement('div');
    p2a.classList = 'advocacy-actionwidget mtl hide-call';
    p2a.setAttribute('data-domain', 'p2a.co');
    p2a.setAttribute('data-shorturl', 'ui6tot5');
    p2a.setAttribute('data-responsive', 'true');
    p2a.setAttribute('style', '');
  
  callCard.appendChild(p2a);
  (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'advocacy-actionwidget-code'));
  
  shareCard.parentNode.insertBefore(callCard, shareCard);
  
   document.getElementById('call').addEventListener('click', function() {
     	document.getElementById('call-ask').classList.add('hide-fully');
        p2a.classList.remove('hide-call');
        p2a.scrollIntoView();
        window.App.trackEvent('call_launched');
  	});
  
  document.getElementById('no-share').addEventListener('click', function() {
      callCard.classList.add('hide-fully');
    	shareCard.classList.remove('hide-fully');
      window.App.trackEvent('skip_call');
  	});
  
  
	/* var nextSteps = document.createElement('div');
  nextSteps.className = 'optly-next-steps pbm ptxxl xs-phxs';
  nextSteps.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12 txt-c">' +
    '        <h1>Take the next step to demand justice</h1>' +
    '        <p class="mbxl type-l">Here’s what you can do next to help this campaign grow:</p>' +
    '        <div class="new-bg-box pvs phm txt-l border-rounded">' +
    '            <h3 class="mtn mbs">Tweet at Aurora City Council today. </h3>' +
    '            <p class="mbs type-l">In just a few days, city council members will vote on whether to temporarily stop law enforcement from using ketamine, the drug which killed Elijah McClain. <strong>Can you tweet to support this vote?</strong></p>' +
    '            <button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Send a tweet to lawmakers</button>' +
    '        </div>' +
    '    </div>' +
    '</div>'; */
  

  
});

/*
utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>Join the calls for justice on twitter.</h1>' +
      '        <p class="mbxl type-l">Directly tag decision makers with the power to deliver justice for Breonna. Tweeting in numbers helps make this issue impossible to ignore. Can you send a tweet to demand justice?</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Send a tweet to lawmakers</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = 'It’s been more than a year since Elijah McClain was killed by @AuroraPD. @COAttnyGeneral @pweiser @GovofCO @jaredpolis It’s time to take action. I stand with 5 million people demanding #JusticeforElijahMcClain → change.org/ElijahMcClain';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');

    });
  });
});
*/

var shareUsers = [
  {
    "amount": 300,
    "first_name": "Mark",
    "last_name": "Hampton",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 1000,
    "first_name": "Molly",
    "last_name": "Roberts",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 500,
    "first_name": "Jeremy",
    "last_name": "Hughes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Andy",
    "last_name": "Peterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 2000,
    "first_name": "Holland",
    "last_name": "Walker",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Brinley",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 300,
    "first_name": "Ioannis",
    "last_name": "Martin",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 2000,
    "first_name": "Brenda",
    "last_name": "Johnson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 500,
    "first_name": "Jorge",
    "last_name": "Lopez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 300,
    "first_name": "Bill",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  },
  {
    "amount": 2000,
    "first_name": "Chyanna",
    "last_name": "Kelly",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 300,
    "first_name": "Doug",
    "last_name": "Lee",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M06.png"
  },
  {
    "amount": 1000,
    "first_name": "Susannah",
    "last_name": "Collins",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 200,
    "first_name": "Andrew",
    "last_name": "Gray",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M07.png"
  },
  {
    "amount": 500,
    "first_name": "Juli",
    "last_name": "Roland",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 2500,
    "first_name": "Bernadette",
    "last_name": "Lynn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 1000,
    "first_name": "Angelica",
    "last_name": "Perez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Tamara",
    "last_name": "Ward",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 500,
    "first_name": "Leslie",
    "last_name": "Butler",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F14.png"
  },
  {
    "amount": 1500,
    "first_name": "Kevin",
    "last_name": "Wurz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M08.png"
  },
  {
    "amount": 2500,
    "first_name": "Amanda",
    "last_name": "A",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F15.png"
  },
  {
    "amount": 500,
    "first_name": "Karen",
    "last_name": "Flores",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F16.png"
  },
  {
    "amount": 300,
    "first_name": "Mary Jo",
    "last_name": "Long",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F17.png"
  },
  {
    "amount": 1000,
    "first_name": "Sean",
    "last_name": "Morris",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M09.png"
  },
  {
    "amount": 500,
    "first_name": "Christopher",
    "last_name": "Fultz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M10.png"
  },
  {
    "amount": 2000,
    "first_name": "Dori",
    "last_name": "Price",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 300,
    "first_name": "Kellie",
    "last_name": "Patterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Judy",
    "last_name": "Young",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 5000,
    "first_name": "Ludwin",
    "last_name": "Alvarez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M11.png"
  },
  {
    "amount": 300,
    "first_name": "Jorge",
    "last_name": "Reyna",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M12.png"
  },
  {
    "amount": 2000,
    "first_name": "Brittany",
    "last_name": "Allen",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F04.png"
  },
  {
    "amount": 400,
    "first_name": "Arianne",
    "last_name": "James",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 500,
    "first_name": "Ryan",
    "last_name": "Nelson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M13.png"
  },
  {
    "amount": 2000,
    "first_name": "Emily",
    "last_name": "Wright",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 2000,
    "first_name": "John",
    "last_name": "Sanders",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M14.png"
  },
  {
    "amount": 300,
    "first_name": "Haydee",
    "last_name": "Lewis",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 500,
    "first_name": "Jamie",
    "last_name": "Diaz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M15.png"
  },
  {
    "amount": 2000,
    "first_name": "Michael",
    "last_name": "Gibbs",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M16.png"
  },
  {
    "amount": 300,
    "first_name": "Kelly",
    "last_name": "Gomez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 1000,
    "first_name": "Katy",
    "last_name": "Boyd",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 300,
    "first_name": "Elaine",
    "last_name": "Henry",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 2000,
    "first_name": "Gary",
    "last_name": "Richards",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 300,
    "first_name": "Harrison",
    "last_name": "Finn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Lorri",
    "last_name": "Ramos",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Frances",
    "last_name": "Dixon",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 500,
    "first_name": "Deniz",
    "last_name": "Holmes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 500,
    "first_name": "Lisa",
    "last_name": "Shaw",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 1000,
    "first_name": "Barbara",
    "last_name": "Daniels",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F13.png"
  },
  {
    "amount": 5000,
    "first_name": "John",
    "last_name": "Black",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  }
];

utils.waitUntil(function() { return !!window.hj; }).then(function() {
        window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
        hj('trigger', 'elijah_tweet_dm_control');
      });
}}, {"value": "<style>.advocacy-actionwidget {\n \topacity: 1;\n  transition: opacity ease .5s;\n}\n.advocacy-actionwidget iframe {\n  min-height: 1520px !important;\n}\n\n.hide-call {\n\tvisibility: hidden;\n  opacity: 0;\n  height: 0;\n}\n.contentShareText {\n    margin: 16px auto 0 auto;\n    max-width: 432px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "401e03369bfa49229e29ea3204b9eee9"}]}], "name": "Variation #1"}, {"id": "18860512077", "actions": [{"viewId": "18818611779", "changes": [{"dependencies": [], "type": "custom_code", "id": "252B6687-027B-44D5-A2A0-458727D1A0F0", "value": function($){var utils = window.optimizely.get("utils");

function rNum(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

utils.waitForElement('.sharePage .contentShare').then(function(shareCard) {
  
  var r = rNum(1, 47);
  var firstCaller = shareUsers[r];
  var secondCaller = shareUsers[r+1];
  var mins = rNum(1, 59);
  var hours = rNum(2, 5);
  
  shareCard.classList.add('original', 'hide-fully');
  
  var callCard = document.createElement('div');
  callCard.classList = 'contentShare';
  callCard.innerHTML = '<div id="call-ask"><div class="flex-embed"><div class="flex-embed-ratio flex-embed-cinema"><div class="Image"><div data-view="psf/components/image" data-image="" data-view-attached="true"><img src="//assets.change.org/photos/0/mb/ft/DfmbfTcFeXGXJuD-800x450-noPad.jpg?1591128047" alt="header" class="sc-AxgMl cVmQYF"></div></div></div></div>' + 
   '<div class="contentShareText"><div class="xs-pan pal"><h1>A year later, Elijah’s killers still walk free.</h1><p class="type-l">It’s been too long. Decision-makers will have to listen if enough of us tie up their phone lines. Can you go a step further and speak up for Elijah McClain?</p>' +
    '<div class="mvm"><p class="mbxs"><strong>14,602 have called.</strong> Let’s get to 20,000!</p><div class="gradient-thermometer"><div class="bg-light-gray type-m fit-finish-thermometer-bg border-rounded-circle"><div class="gradient-thermometer-fill fit-finish-thermometer-fill-height display-inline-block" style="width: 75%;"></div><div class="arrow-right-fit-finish display-inline-block position-relative"></div></div></div>' +
    '<div class="call-feed"><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+firstCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + firstCaller.first_name + ' ' + firstCaller.last_name + '</strong> called '+mins+' min ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+secondCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + secondCaller.first_name + ' ' + secondCaller.last_name + '</strong> called '+hours+' hrs ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div></div></div>' +
   '<a id="call" class="btn btn-action btn-big btn-full mts">Yes, I’ll call lawmakers now!</a><a id="no-share" class="btn btn-big btn-full mts">No, I’ll share instead</a></div></div></div>';
  
  	var p2a = document.createElement('div');
    p2a.classList = 'advocacy-actionwidget mtl hide-call';
    p2a.setAttribute('data-domain', 'p2a.co');
    p2a.setAttribute('data-shorturl', 'ui6tot5');
    p2a.setAttribute('data-responsive', 'true');
    p2a.setAttribute('style', '');
  
  callCard.appendChild(p2a);
  (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'advocacy-actionwidget-code'));
  
  shareCard.parentNode.insertBefore(callCard, shareCard);
  
   document.getElementById('call').addEventListener('click', function() {
     	document.getElementById('call-ask').classList.add('hide-fully');
        p2a.classList.remove('hide-call');
        p2a.scrollIntoView();
        window.App.trackEvent('call_launched');
  	});
  
  document.getElementById('no-share').addEventListener('click', function() {
      callCard.classList.add('hide-fully');
    	shareCard.classList.remove('hide-fully');
      window.App.trackEvent('skip_call');
  	});
  
  
	/* var nextSteps = document.createElement('div');
  nextSteps.className = 'optly-next-steps pbm ptxxl xs-phxs';
  nextSteps.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12 txt-c">' +
    '        <h1>Take the next step to demand justice</h1>' +
    '        <p class="mbxl type-l">Here’s what you can do next to help this campaign grow:</p>' +
    '        <div class="new-bg-box pvs phm txt-l border-rounded">' +
    '            <h3 class="mtn mbs">Tweet at Aurora City Council today. </h3>' +
    '            <p class="mbs type-l">In just a few days, city council members will vote on whether to temporarily stop law enforcement from using ketamine, the drug which killed Elijah McClain. <strong>Can you tweet to support this vote?</strong></p>' +
    '            <button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Send a tweet to lawmakers</button>' +
    '        </div>' +
    '    </div>' +
    '</div>'; */
  

  
});

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>Join the calls for justice on twitter.</h1>' +
      '        <p class="mbxl type-l">Directly tag decision makers with the power to deliver justice for Elijah. Tweeting in numbers helps make this issue impossible to ignore. Can you send a tweet to demand justice?</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Send a tweet to lawmakers</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = 'It’s been more than a year since Elijah McClain was killed by @AuroraPD. @COAttnyGeneral @pweiser @GovofCO @jaredpolis It’s time to take action. I stand with 5 million people demanding #JusticeforElijahMcClain → change.org/ElijahMcClain';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');

    });
  });
});


var shareUsers = [
  {
    "amount": 300,
    "first_name": "Mark",
    "last_name": "Hampton",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 1000,
    "first_name": "Molly",
    "last_name": "Roberts",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 500,
    "first_name": "Jeremy",
    "last_name": "Hughes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Andy",
    "last_name": "Peterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 2000,
    "first_name": "Holland",
    "last_name": "Walker",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Brinley",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 300,
    "first_name": "Ioannis",
    "last_name": "Martin",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 2000,
    "first_name": "Brenda",
    "last_name": "Johnson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 500,
    "first_name": "Jorge",
    "last_name": "Lopez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 300,
    "first_name": "Bill",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  },
  {
    "amount": 2000,
    "first_name": "Chyanna",
    "last_name": "Kelly",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 300,
    "first_name": "Doug",
    "last_name": "Lee",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M06.png"
  },
  {
    "amount": 1000,
    "first_name": "Susannah",
    "last_name": "Collins",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 200,
    "first_name": "Andrew",
    "last_name": "Gray",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M07.png"
  },
  {
    "amount": 500,
    "first_name": "Juli",
    "last_name": "Roland",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 2500,
    "first_name": "Bernadette",
    "last_name": "Lynn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 1000,
    "first_name": "Angelica",
    "last_name": "Perez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Tamara",
    "last_name": "Ward",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 500,
    "first_name": "Leslie",
    "last_name": "Butler",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F14.png"
  },
  {
    "amount": 1500,
    "first_name": "Kevin",
    "last_name": "Wurz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M08.png"
  },
  {
    "amount": 2500,
    "first_name": "Amanda",
    "last_name": "A",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F15.png"
  },
  {
    "amount": 500,
    "first_name": "Karen",
    "last_name": "Flores",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F16.png"
  },
  {
    "amount": 300,
    "first_name": "Mary Jo",
    "last_name": "Long",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F17.png"
  },
  {
    "amount": 1000,
    "first_name": "Sean",
    "last_name": "Morris",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M09.png"
  },
  {
    "amount": 500,
    "first_name": "Christopher",
    "last_name": "Fultz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M10.png"
  },
  {
    "amount": 2000,
    "first_name": "Dori",
    "last_name": "Price",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 300,
    "first_name": "Kellie",
    "last_name": "Patterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Judy",
    "last_name": "Young",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 5000,
    "first_name": "Ludwin",
    "last_name": "Alvarez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M11.png"
  },
  {
    "amount": 300,
    "first_name": "Jorge",
    "last_name": "Reyna",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M12.png"
  },
  {
    "amount": 2000,
    "first_name": "Brittany",
    "last_name": "Allen",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F04.png"
  },
  {
    "amount": 400,
    "first_name": "Arianne",
    "last_name": "James",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 500,
    "first_name": "Ryan",
    "last_name": "Nelson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M13.png"
  },
  {
    "amount": 2000,
    "first_name": "Emily",
    "last_name": "Wright",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 2000,
    "first_name": "John",
    "last_name": "Sanders",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M14.png"
  },
  {
    "amount": 300,
    "first_name": "Haydee",
    "last_name": "Lewis",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 500,
    "first_name": "Jamie",
    "last_name": "Diaz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M15.png"
  },
  {
    "amount": 2000,
    "first_name": "Michael",
    "last_name": "Gibbs",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M16.png"
  },
  {
    "amount": 300,
    "first_name": "Kelly",
    "last_name": "Gomez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 1000,
    "first_name": "Katy",
    "last_name": "Boyd",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 300,
    "first_name": "Elaine",
    "last_name": "Henry",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 2000,
    "first_name": "Gary",
    "last_name": "Richards",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 300,
    "first_name": "Harrison",
    "last_name": "Finn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Lorri",
    "last_name": "Ramos",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Frances",
    "last_name": "Dixon",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 500,
    "first_name": "Deniz",
    "last_name": "Holmes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 500,
    "first_name": "Lisa",
    "last_name": "Shaw",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 1000,
    "first_name": "Barbara",
    "last_name": "Daniels",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F13.png"
  },
  {
    "amount": 5000,
    "first_name": "John",
    "last_name": "Black",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  }
];

utils.waitUntil(function() { return !!window.hj; }).then(function() {
        window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
        hj('trigger', 'elijah_tweet_dm');
      });
}}, {"value": "<style>.advocacy-actionwidget {\n \topacity: 1;\n  transition: opacity ease .5s;\n}\n.advocacy-actionwidget iframe {\n  min-height: 1520px !important;\n}\n\n.hide-call {\n\tvisibility: hidden;\n  opacity: 0;\n  height: 0;\n}\n.contentShareText {\n    margin: 16px auto 0 auto;\n    max-width: 432px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "4474028E-6B5A-4052-9A25-BB068FB65301"}]}], "name": "Variation #2"}], "audienceIds": null, "changes": null, "id": "18809103319", "integrationSettings": null}], "id": "18792193157", "weightDistributions": null, "name": "[niftic] - Share - Elijah Call Tool Tweet DM", "groupId": null, "commitId": "18939341424", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["18788454631"], "experiments": [{"weightDistributions": [{"entityId": "18805802755", "endOfRange": 5000}, {"entityId": "18780573769", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - SUPA - Elijah McClain - R3", "bucketingStrategy": null, "variations": [{"id": "18843240812", "actions": [{"viewId": "18788454631", "changes": [{"dependencies": [], "type": "custom_code", "id": "72e59289cc534bf28f092ecd2091b1e1", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('div.modal.in[data-name="signed_interrupt"] .modal-dialog').then(function(signedModal) {
  
  utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent('optly_interrupt_show');
  });
  
});
}}]}], "name": "Original"}, {"id": "18805802755", "actions": [{"viewId": "18788454631", "changes": [{"dependencies": [], "type": "custom_code", "id": "e5f62edb20874dd0bcc8c5c100e7ec58", "value": function($){var utils = window.optimizely.get("utils");
var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';

function rNum(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

utils.waitForElement('.js-sign-and-share-components').then(function(share) {
  
  var r = rNum(1, 47);
  var firstCaller = shareUsers[r];
  var secondCaller = shareUsers[r+1];
  var mins = rNum(1, 59);
  var hours = rNum(2, 5);
  
  var ww = window.innerWidth;
  if (ww > 767) {
   	// desktop
    share.classList.add('new-bg-box', 'optly-call-cta');
    var oldShares = share.querySelector('.pvm.xs-ptn');
    //var gtherm = oldShares.querySelector('[data-view="petitions/show/components/gradient_thermometer"]');
    //gtherm.parentNode.classList.add('hide-fully');

    var callCTA = document.createElement('div');
    callCTA.classList = 'ptm';
    callCTA.innerHTML = '<h3 class="mtn">A year later, Elijah’s killers still walk free.</h3><p>It’s been too long. Decision-makers will have to listen if enough of us tie up their phone lines. Can you go a step further and speak up for Elijah McClain?</p>' +
      '<div class="mvm"><p class="mbxs"><strong>14,602 have called.</strong> Let’s get to 20,000!</p><div class="gradient-thermometer"><div class="bg-light-gray type-m fit-finish-thermometer-bg border-rounded-circle"><div class="gradient-thermometer-fill fit-finish-thermometer-fill-height display-inline-block" style="width: 75%;"></div><div class="arrow-right-fit-finish display-inline-block position-relative"></div></div></div>' +
    '<div class="call-feed"><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+firstCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + firstCaller.first_name + ' ' + firstCaller.last_name + '</strong> called '+mins+' min ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+secondCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + secondCaller.first_name + ' ' + secondCaller.last_name + '</strong> called '+hours+' hrs ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div></div></div>' +
      '<a id="call-launch" class="btn btn-action btn-big btn-full mts" target="_blank">Yes, I’ll call lawmakers now!</a>';

    oldShares.parentNode.insertBefore(callCTA, oldShares);
    oldShares.classList.add('hide-fully');

    var url = 'change.org/ElijahMcClain';
    var copyBox = document.createElement('div');
    copyBox.className = 'niftic-copy-box box box-basic bg-brighter mtl pam xs-mhs mbn';
    copyBox.innerHTML = '<div class="copy-link txt-c mbs"><span class="type-branded" style="text-decoration: underline;">' + url + '</span></div><div class="copy-btn-wrap"><button class="btn btn-big btn-full"><span class="symbol symbol-link"></span>Copy Petition Link</button></div>';

    share.parentNode.insertBefore(copyBox, share.nextSibling);

    var copyBtn = copyBox.querySelector('button');
    copyBtn.addEventListener('click', copyToClipboard);

    function copyToClipboard() {
        var el = document.createElement('textarea');
        el.value = url;
        el.setAttribute('readonly', '');
        el.style.position = 'absolute';
        el.style.left = '-9999px';
        document.body.appendChild(el);
        el.select();
        document.execCommand('copy');
        document.body.removeChild(el);

      copyBtn.innerHTML = '<span class="symbol symbol-link"></span>Copied!';

      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('supa_vanity_copy');
      });
    }
    /*
    <div class="advocacy-actionwidget" data-domain="p2a.co" data-shorturl="A7rCUcv" data-responsive="true" style=""></div>
    <script>
    (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'advocacy-actionwidget-code'));
    </script>
    */
    
    var p2a = document.createElement('div');
    p2a.classList = 'advocacy-actionwidget mtl hide-call';
    p2a.setAttribute('data-domain', 'p2a.co');
    p2a.setAttribute('data-shorturl', 'ui6tot5');
    p2a.setAttribute('data-responsive', 'true');
    p2a.setAttribute('style', '');
    
    share.parentNode.appendChild(p2a);
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'advocacy-actionwidget-code'));
    
    document.getElementById('call-launch').addEventListener('click', function() {
        p2a.classList.remove('hide-call');
        p2a.scrollIntoView();
        window.App.trackEvent('call_launched');
  	});
  } else {
    // mobile      
    console.error('ctmobile');
    var callCtaMobile = document.createElement('div');
    callCtaMobile.classList = 'new-bg-mobile new-bg-box optly-call-cta mhxs mbs';
    callCtaMobile.innerHTML = '<div class="mobile-cta-inner"><button id="close-mobile-cta" class="link-stealth position-absolute position-right position-top pas"><span class="symbol symbol-close symbol-compact"></span></button><h3 class="mtn">A year later, Elijah’s killers still walk free.</h3><p>It’s been too long. Decision-makers will have to listen if enough of us tie up their phone lines. Can you go a step further and speak up for Elijah McClain?</p>' +
      '<div class="mtm"><p class="mbxs"><strong>14,602 have called.</strong> Let’s get to 20,000!</p><div class="gradient-thermometer"><div class="bg-light-gray type-m fit-finish-thermometer-bg border-rounded-circle"><div class="gradient-thermometer-fill fit-finish-thermometer-fill-height display-inline-block" style="width: 75%;"></div><div class="arrow-right-fit-finish display-inline-block position-relative"></div></div></div>' +
    '<div class="call-feed"><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+firstCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + firstCaller.first_name + ' ' + firstCaller.last_name + '</strong> called '+mins+' min ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+secondCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + secondCaller.first_name + ' ' + secondCaller.last_name + '</strong> called '+hours+' hrs ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div></div></div>' +
      '<a id="mobile-call-launch" class="btn btn-action btn-big btn-full mts">Yes, I’ll call lawmakers now!</a></div>';
    
    var topBar = document.querySelector('[data-view="petitions/components/tabs_header"]');
    topBar.parentNode.insertBefore(callCtaMobile, topBar.nextSibling);
    
    document.getElementById('close-mobile-cta').onclick = function() {
      callCtaMobile.classList.add('hide-fully');
    };
    
    var p2a = document.createElement('div');
    p2a.classList = 'advocacy-actionwidget mtl hide-call';
    p2a.setAttribute('data-domain', 'p2a.co');
    p2a.setAttribute('data-shorturl', 'ui6tot5');
    p2a.setAttribute('data-responsive', 'true');
    p2a.setAttribute('style', '');
    
    callCtaMobile.appendChild(p2a);
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'advocacy-actionwidget-code'));
    
    document.getElementById('mobile-call-launch').addEventListener('click', function() {
      callCtaMobile.querySelector('.mobile-cta-inner').classList.add('hide-fully');
        p2a.classList.remove('hide-call');
        p2a.scrollIntoView();
        window.App.trackEvent('call_launched');
  	});
    
    document.getElementById('mobile-call-launch').addEventListener('click', function() {
        window.App.trackEvent('call_launched');
      });
  }
  
var optlyCallCtas = document.querySelectorAll('.optly-call-cta');

  var nextSteps = document.createElement('div');
  nextSteps.className = 'optly-next-steps pbm ptxxl xs-phxs';
  nextSteps.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12 txt-c">' +
    '        <div class="megaphone">' + megaphoneSvg + '</div>' +
    '        <h1>Take the next step to demand justice</h1>' +
    '        <p class="mbxl type-l">Here’s what you can do next to help this campaign grow:</p>' +
    '        <div class="new-bg-box pvs phm txt-l border-rounded">' +
    '            <h3 class="mtn mbs">Tweet at Aurora City Council today. </h3>' +
    '            <p class="mbs type-l">In just a few days, city council members will vote on whether to temporarily stop law enforcement from using ketamine, the drug which killed Elijah McClain. <strong>Can you tweet to support this vote?</strong></p>' +
    '            <button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Send a tweet to lawmakers</button>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  optlyCallCtas.forEach(function(el) {
  	//el.parentNode.insertBefore(nextSteps, el);
  });
  /*
  var tweetBtn = document.querySelector('.optly-tweet');
  tweetBtn.addEventListener('click', function() {
    var tweet = 'Ketamine killed #ElijahMcClain & left Elijah McKnight on life support. Aurora City Council should vote to ban this powerful drug while @CDPHE investigates. @marsha_berzins @nicoleforaurora @marcano4aurora @coombsforaurora @gruberforaurora @allisonhiltz https://twitter.com/Change/status/1304489936511410176';
    utils.waitUntil(function() { return !!window.App; }).then(function() {
  		window.App.trackEvent('optly_tweet_dm');
  	});
		window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');

  });
  */
});

utils.waitUntil(function() { return !!window.hj; }).then(function() {
        window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
        hj('trigger', 'elijah_tweet_dm_control');
      });

var megaphoneSvg = '<svg width="69" height="62" viewBox="0 0 69 62" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.4828 9.17065L21.5388 7.91988L20.6106 10.1402C20.3813 10.689 20.5313 11.3231 20.9824 11.7109L22.8072 13.2797L20.4088 13.0831C19.8159 13.0345 19.2593 13.3732 19.0299 13.922L18.1018 16.1423L17.5475 13.8005C17.4105 13.2217 16.9164 12.7969 16.3236 12.7483L13.9251 12.5518L15.9811 11.301C16.4892 10.9918 16.7405 10.3907 16.6036 9.81184L16.0493 7.47001L17.8742 9.03882C18.3252 9.42658 18.9747 9.4798 19.4828 9.17065Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M55.059 46.4412L57.1149 45.1904L56.1868 47.4107C55.9574 47.9595 56.1075 48.5936 56.5585 48.9814L58.3834 50.5502L55.9849 50.3536C55.3921 50.305 54.8354 50.6437 54.606 51.1925L53.6779 53.4128L53.1237 51.071C52.9867 50.4922 52.4926 50.0674 51.8998 50.0188L49.5013 49.8223L51.5573 48.5715C52.0654 48.2624 52.3167 47.6612 52.1797 47.0824L51.6255 44.7405L53.4504 46.3093C53.9014 46.6971 54.5508 46.7503 55.059 46.4412Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M11.4711 28.6531L13.527 27.4023L12.5989 29.6227C12.3695 30.1714 12.5196 30.8055 12.9706 31.1933L14.7955 32.7621L12.397 32.5655C11.8042 32.5169 11.2475 32.8556 11.0182 33.4044L10.09 35.6248L9.53581 33.2829C9.39883 32.7041 8.90472 32.2793 8.3119 32.2307L5.91342 32.0342L7.96937 30.7834C8.47752 30.4743 8.72882 29.8731 8.59183 29.2943L8.0376 26.9524L9.86248 28.5212C10.3135 28.909 10.9629 28.9622 11.4711 28.6531Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M35.452 43.1402C40.4368 38.106 49.666 33.6148 56.2302 34.4045L34.7117 12.886C35.5014 19.4008 31.0101 28.63 25.976 33.6641" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M15.3647 48.5692L20.5469 53.7514C21.7807 52.5176 23.2613 51.3331 24.8407 50.1979L18.9182 44.2754C17.783 45.8547 16.5985 47.3354 15.3647 48.5692Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M25.9869 33.681L17.1576 42.5103L26.6151 51.9677L35.4444 43.1384L25.9869 33.681Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M40.6834 55.4788L35.6986 60.4636L29.3319 49.2602L34.2674 44.2754L40.6834 55.4788Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M46.0064 12.54L49.3268 2.10681" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M57.0537 23.3997L67.6414 20.7783" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M51.4348 17.3115L59.5051 9.92984" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/></svg>';


var shareUsers = [
  {
    "amount": 300,
    "first_name": "Mark",
    "last_name": "Hampton",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 1000,
    "first_name": "Molly",
    "last_name": "Roberts",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 500,
    "first_name": "Jeremy",
    "last_name": "Hughes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Andy",
    "last_name": "Peterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 2000,
    "first_name": "Holland",
    "last_name": "Walker",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Brinley",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 300,
    "first_name": "Ioannis",
    "last_name": "Martin",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 2000,
    "first_name": "Brenda",
    "last_name": "Johnson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 500,
    "first_name": "Jorge",
    "last_name": "Lopez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 300,
    "first_name": "Bill",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  },
  {
    "amount": 2000,
    "first_name": "Chyanna",
    "last_name": "Kelly",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 300,
    "first_name": "Doug",
    "last_name": "Lee",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M06.png"
  },
  {
    "amount": 1000,
    "first_name": "Susannah",
    "last_name": "Collins",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 200,
    "first_name": "Andrew",
    "last_name": "Gray",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M07.png"
  },
  {
    "amount": 500,
    "first_name": "Juli",
    "last_name": "Roland",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 2500,
    "first_name": "Bernadette",
    "last_name": "Lynn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 1000,
    "first_name": "Angelica",
    "last_name": "Perez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Tamara",
    "last_name": "Ward",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 500,
    "first_name": "Leslie",
    "last_name": "Butler",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F14.png"
  },
  {
    "amount": 1500,
    "first_name": "Kevin",
    "last_name": "Wurz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M08.png"
  },
  {
    "amount": 2500,
    "first_name": "Amanda",
    "last_name": "A",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F15.png"
  },
  {
    "amount": 500,
    "first_name": "Karen",
    "last_name": "Flores",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F16.png"
  },
  {
    "amount": 300,
    "first_name": "Mary Jo",
    "last_name": "Long",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F17.png"
  },
  {
    "amount": 1000,
    "first_name": "Sean",
    "last_name": "Morris",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M09.png"
  },
  {
    "amount": 500,
    "first_name": "Christopher",
    "last_name": "Fultz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M10.png"
  },
  {
    "amount": 2000,
    "first_name": "Dori",
    "last_name": "Price",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 300,
    "first_name": "Kellie",
    "last_name": "Patterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Judy",
    "last_name": "Young",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 5000,
    "first_name": "Ludwin",
    "last_name": "Alvarez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M11.png"
  },
  {
    "amount": 300,
    "first_name": "Jorge",
    "last_name": "Reyna",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M12.png"
  },
  {
    "amount": 2000,
    "first_name": "Brittany",
    "last_name": "Allen",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F04.png"
  },
  {
    "amount": 400,
    "first_name": "Arianne",
    "last_name": "James",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 500,
    "first_name": "Ryan",
    "last_name": "Nelson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M13.png"
  },
  {
    "amount": 2000,
    "first_name": "Emily",
    "last_name": "Wright",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 2000,
    "first_name": "John",
    "last_name": "Sanders",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M14.png"
  },
  {
    "amount": 300,
    "first_name": "Haydee",
    "last_name": "Lewis",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 500,
    "first_name": "Jamie",
    "last_name": "Diaz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M15.png"
  },
  {
    "amount": 2000,
    "first_name": "Michael",
    "last_name": "Gibbs",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M16.png"
  },
  {
    "amount": 300,
    "first_name": "Kelly",
    "last_name": "Gomez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 1000,
    "first_name": "Katy",
    "last_name": "Boyd",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 300,
    "first_name": "Elaine",
    "last_name": "Henry",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 2000,
    "first_name": "Gary",
    "last_name": "Richards",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 300,
    "first_name": "Harrison",
    "last_name": "Finn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Lorri",
    "last_name": "Ramos",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Frances",
    "last_name": "Dixon",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 500,
    "first_name": "Deniz",
    "last_name": "Holmes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 500,
    "first_name": "Lisa",
    "last_name": "Shaw",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 1000,
    "first_name": "Barbara",
    "last_name": "Daniels",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F13.png"
  },
  {
    "amount": 5000,
    "first_name": "John",
    "last_name": "Black",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  }
];
}}, {"value": "<style>.new-bg-box {\n  background: #FFFCF7;\n  border: 1px solid #FFE9AA;\n  box-sizing: border-box;\n  border-radius: 5px;\n  padding: 24px 20px;\n}\n\n.new-bg-box > div > .hidden-xs:nth-of-type(2),\n.new-bg-box [data-view=\"petitions/show/components/recent_signers\"] {\n \tdisplay: none; \n}\n\n.new-bg-mobile {\n  position: relative;\n  background: #FFFCF7;\n  padding-top: 26px;\n  padding-left: 15px;\n  padding-right: 15px;\n  padding-bottom: 32px;\n}\n\n.advocacy-actionwidget {\n \topacity: 1;\n  transition: opacity ease .5s;\n}\n.advocacy-actionwidget iframe {\n  min-height: 1520px !important;\n}\n\n.hide-call {\n\tvisibility: hidden;\n  opacity: 0;\n  height: 0;\n  margin-top: 0 !important;\n}\n\n@media (min-width: 768px) {\n  .new-bg-mobile {\n   \tdisplay: none; \n  }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "621dbb2189c6473c8d6b50b28d05d9bb"}]}], "name": "Variation #1"}, {"id": "18780573769", "actions": [{"viewId": "18788454631", "changes": [{"dependencies": [], "type": "custom_code", "id": "096b80202a3a4d358eb75627166080f9", "value": function($){var utils = window.optimizely.get("utils");
var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';

function rNum(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

utils.waitForElement('.js-sign-and-share-components').then(function(share) {
  
  var r = rNum(1, 47);
  var firstCaller = shareUsers[r];
  var secondCaller = shareUsers[r+1];
  var mins = rNum(1, 59);
  var hours = rNum(2, 5);
  
  var ww = window.innerWidth;
  if (ww > 767) {
   	// desktop
    share.classList.add('new-bg-box', 'optly-call-cta');
    var oldShares = share.querySelector('.pvm.xs-ptn');
    //var gtherm = oldShares.querySelector('[data-view="petitions/show/components/gradient_thermometer"]');
    //gtherm.parentNode.classList.add('hide-fully');

    var callCTA = document.createElement('div');
    callCTA.classList = 'ptm';
    callCTA.innerHTML = '<h3 class="mtn">Call lawmakers for Elijah McClain. </h3><p>It’s been too long. Decision-makers will have to listen if enough of us tie up their phone lines. Can you go a step further and speak up for Elijah McClain?</p>' +
      '<div class="mvm"><p class="mbxs"><strong>14,602 have called.</strong> Let’s get to 20,000!</p><div class="gradient-thermometer"><div class="bg-light-gray type-m fit-finish-thermometer-bg border-rounded-circle"><div class="gradient-thermometer-fill fit-finish-thermometer-fill-height display-inline-block" style="width: 75%;"></div><div class="arrow-right-fit-finish display-inline-block position-relative"></div></div></div>' +
    '<div class="call-feed"><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+firstCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + firstCaller.first_name + ' ' + firstCaller.last_name + '</strong> called '+mins+' min ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+secondCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + secondCaller.first_name + ' ' + secondCaller.last_name + '</strong> called '+hours+' hrs ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div></div></div>' +
      '<a id="call-launch" class="btn btn-action btn-big btn-full mts" target="_blank">Yes, I’ll call lawmakers now!</a>';

    oldShares.parentNode.insertBefore(callCTA, oldShares);
    oldShares.classList.add('hide-fully');

    var url = 'change.org/ElijahMcClain';
    var copyBox = document.createElement('div');
    copyBox.className = 'niftic-copy-box box box-basic bg-brighter mtl pam xs-mhs mbn';
    copyBox.innerHTML = '<div class="copy-link txt-c mbs"><span class="type-branded" style="text-decoration: underline;">' + url + '</span></div><div class="copy-btn-wrap"><button class="btn btn-big btn-full"><span class="symbol symbol-link"></span>Copy Petition Link</button></div>';

    share.parentNode.insertBefore(copyBox, share.nextSibling);

    var copyBtn = copyBox.querySelector('button');
    copyBtn.addEventListener('click', copyToClipboard);

    function copyToClipboard() {
        var el = document.createElement('textarea');
        el.value = url;
        el.setAttribute('readonly', '');
        el.style.position = 'absolute';
        el.style.left = '-9999px';
        document.body.appendChild(el);
        el.select();
        document.execCommand('copy');
        document.body.removeChild(el);

      copyBtn.innerHTML = '<span class="symbol symbol-link"></span>Copied!';

      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('supa_vanity_copy');
      });
    }
    /*
    <div class="advocacy-actionwidget" data-domain="p2a.co" data-shorturl="A7rCUcv" data-responsive="true" style=""></div>
    <script>
    (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'advocacy-actionwidget-code'));
    </script>
    */
    
    var p2a = document.createElement('div');
    p2a.classList = 'advocacy-actionwidget mtl hide-call';
    p2a.setAttribute('data-domain', 'p2a.co');
    p2a.setAttribute('data-shorturl', 'ui6tot5');
    p2a.setAttribute('data-responsive', 'true');
    p2a.setAttribute('style', '');
    
    share.parentNode.appendChild(p2a);
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'advocacy-actionwidget-code'));
    
    document.getElementById('call-launch').addEventListener('click', function() {
        p2a.classList.remove('hide-call');
        p2a.scrollIntoView();
        window.App.trackEvent('call_launched');
  	});
  } else {
    // mobile      
    console.error('ctmobile');
    var callCtaMobile = document.createElement('div');
    callCtaMobile.classList = 'new-bg-mobile new-bg-box optly-call-cta mhxs mbs';
    callCtaMobile.innerHTML = '<div class="mobile-cta-inner"><button id="close-mobile-cta" class="link-stealth position-absolute position-right position-top pas"><span class="symbol symbol-close symbol-compact"></span></button><h3 class="mtn">A year later, Elijah’s killers still walk free.</h3><p>It’s been too long. Decision-makers will have to listen if enough of us tie up their phone lines. Can you go a step further and speak up for Elijah McClain?</p>' +
      '<div class="mtm"><p class="mbxs"><strong>14,602 have called.</strong> Let’s get to 20,000!</p><div class="gradient-thermometer"><div class="bg-light-gray type-m fit-finish-thermometer-bg border-rounded-circle"><div class="gradient-thermometer-fill fit-finish-thermometer-fill-height display-inline-block" style="width: 75%;"></div><div class="arrow-right-fit-finish display-inline-block position-relative"></div></div></div>' +
    '<div class="call-feed"><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+firstCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + firstCaller.first_name + ' ' + firstCaller.last_name + '</strong> called '+mins+' min ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div><div class="phxxs pvxs arrange arrange-middle"><div class="arrange-fit prs"><div class="media-profile-small-height"><div class="media-profile-img"><div class="flex-embed border-rounded-circle"><div class="flex-embed-ratio"><div class="flex-embed-content"><img alt="Stephanie Vangronigen" class="image-cropper-nodrag position-absolute-center border-rounded-circle" src="'+secondCaller.profile_image+'"></div></div></div></div></div></div><div class="arrange-fill"><div class=""><div class="type-break-word type-faded"><span><strong>' + secondCaller.first_name + ' ' + secondCaller.last_name + '</strong> called '+hours+' hrs ago</span></div><div class="type-break-word type-xs type-faded"></div></div></div></div></div></div>' +
      '<a id="mobile-call-launch" class="btn btn-action btn-big btn-full mts">Yes, I’ll call lawmakers now!</a></div>';
    
    var topBar = document.querySelector('[data-view="petitions/components/tabs_header"]');
    topBar.parentNode.insertBefore(callCtaMobile, topBar.nextSibling);
    
    document.getElementById('close-mobile-cta').onclick = function() {
      callCtaMobile.classList.add('hide-fully');
    };
    
    var p2a = document.createElement('div');
    p2a.classList = 'advocacy-actionwidget mtl hide-call';
    p2a.setAttribute('data-domain', 'p2a.co');
    p2a.setAttribute('data-shorturl', 'ui6tot5');
    p2a.setAttribute('data-responsive', 'true');
    p2a.setAttribute('style', '');
    
    callCtaMobile.appendChild(p2a);
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'advocacy-actionwidget-code'));
    
    document.getElementById('mobile-call-launch').addEventListener('click', function() {
      callCtaMobile.querySelector('.mobile-cta-inner').classList.add('hide-fully');
        p2a.classList.remove('hide-call');
        p2a.scrollIntoView();
        window.App.trackEvent('call_launched');
  	});
    
    document.getElementById('mobile-call-launch').addEventListener('click', function() {
        window.App.trackEvent('call_launched');
      });
  }
  
var optlyCallCtas = document.querySelectorAll('.optly-call-cta');

  var nextSteps = document.createElement('div');
  nextSteps.className = 'optly-next-steps pbm ptxxl xs-phxs';
  nextSteps.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12 txt-c">' +
    '        <div class="megaphone">' + megaphoneSvg + '</div>' +
    '        <h1>Take the next step to demand justice</h1>' +
    '        <p class="mbxl type-l">New actions are available that you can take to help this petition make moves.</p>' +
    '        <div class="new-bg-box pvs phm txt-l border-rounded">' +
    '            <h3 class="mtn mbs">Join the calls for justice on twitter.</h3>' +
    '            <p class="mbs type-l">Tweeting in numbers helps make this issue impossible to ignore. Will you take the next step and <strong>send a tweet to demand justice for Elijah?</strong></p>' +
    '            <button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Yes, I’ll tweet lawmakers now!</button>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  optlyCallCtas.forEach(function(el) {
  	el.parentNode.insertBefore(nextSteps, el);
  });
  
  var tweetBtn = document.querySelector('.optly-tweet');
  tweetBtn.addEventListener('click', function() {
    var tweet = 'It’s been more than a year since Elijah McClain was killed by @AuroraPD. @COAttnyGeneral @pweiser @GovofCO @jaredpolis It’s time to take action. I stand with 5 million people demanding #JusticeforElijahMcClain → change.org/ElijahMcClain';
    utils.waitUntil(function() { return !!window.App; }).then(function() {
  		window.App.trackEvent('optly_tweet_dm');
  	});
		window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');

  });
  
});

utils.waitUntil(function() { return !!window.hj; }).then(function() {
        window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
        hj('trigger', 'elijah_tweet_dm');
      });

var megaphoneSvg = '<svg width="69" height="62" viewBox="0 0 69 62" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.4828 9.17065L21.5388 7.91988L20.6106 10.1402C20.3813 10.689 20.5313 11.3231 20.9824 11.7109L22.8072 13.2797L20.4088 13.0831C19.8159 13.0345 19.2593 13.3732 19.0299 13.922L18.1018 16.1423L17.5475 13.8005C17.4105 13.2217 16.9164 12.7969 16.3236 12.7483L13.9251 12.5518L15.9811 11.301C16.4892 10.9918 16.7405 10.3907 16.6036 9.81184L16.0493 7.47001L17.8742 9.03882C18.3252 9.42658 18.9747 9.4798 19.4828 9.17065Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M55.059 46.4412L57.1149 45.1904L56.1868 47.4107C55.9574 47.9595 56.1075 48.5936 56.5585 48.9814L58.3834 50.5502L55.9849 50.3536C55.3921 50.305 54.8354 50.6437 54.606 51.1925L53.6779 53.4128L53.1237 51.071C52.9867 50.4922 52.4926 50.0674 51.8998 50.0188L49.5013 49.8223L51.5573 48.5715C52.0654 48.2624 52.3167 47.6612 52.1797 47.0824L51.6255 44.7405L53.4504 46.3093C53.9014 46.6971 54.5508 46.7503 55.059 46.4412Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M11.4711 28.6531L13.527 27.4023L12.5989 29.6227C12.3695 30.1714 12.5196 30.8055 12.9706 31.1933L14.7955 32.7621L12.397 32.5655C11.8042 32.5169 11.2475 32.8556 11.0182 33.4044L10.09 35.6248L9.53581 33.2829C9.39883 32.7041 8.90472 32.2793 8.3119 32.2307L5.91342 32.0342L7.96937 30.7834C8.47752 30.4743 8.72882 29.8731 8.59183 29.2943L8.0376 26.9524L9.86248 28.5212C10.3135 28.909 10.9629 28.9622 11.4711 28.6531Z" stroke="#FFCE47" stroke-width="1.69411"/><path d="M35.452 43.1402C40.4368 38.106 49.666 33.6148 56.2302 34.4045L34.7117 12.886C35.5014 19.4008 31.0101 28.63 25.976 33.6641" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M15.3647 48.5692L20.5469 53.7514C21.7807 52.5176 23.2613 51.3331 24.8407 50.1979L18.9182 44.2754C17.783 45.8547 16.5985 47.3354 15.3647 48.5692Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M25.9869 33.681L17.1576 42.5103L26.6151 51.9677L35.4444 43.1384L25.9869 33.681Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M40.6834 55.4788L35.6986 60.4636L29.3319 49.2602L34.2674 44.2754L40.6834 55.4788Z" stroke="#EC2C22" stroke-width="2.46771" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M46.0064 12.54L49.3268 2.10681" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M57.0537 23.3997L67.6414 20.7783" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M51.4348 17.3115L59.5051 9.92984" stroke="#EC2C22" stroke-width="2.10726" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/></svg>';


var shareUsers = [
  {
    "amount": 300,
    "first_name": "Mark",
    "last_name": "Hampton",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 1000,
    "first_name": "Molly",
    "last_name": "Roberts",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 500,
    "first_name": "Jeremy",
    "last_name": "Hughes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Andy",
    "last_name": "Peterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 2000,
    "first_name": "Holland",
    "last_name": "Walker",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Brinley",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 300,
    "first_name": "Ioannis",
    "last_name": "Martin",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 2000,
    "first_name": "Brenda",
    "last_name": "Johnson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 500,
    "first_name": "Jorge",
    "last_name": "Lopez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 300,
    "first_name": "Bill",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  },
  {
    "amount": 2000,
    "first_name": "Chyanna",
    "last_name": "Kelly",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 300,
    "first_name": "Doug",
    "last_name": "Lee",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M06.png"
  },
  {
    "amount": 1000,
    "first_name": "Susannah",
    "last_name": "Collins",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 200,
    "first_name": "Andrew",
    "last_name": "Gray",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M07.png"
  },
  {
    "amount": 500,
    "first_name": "Juli",
    "last_name": "Roland",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 2500,
    "first_name": "Bernadette",
    "last_name": "Lynn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 1000,
    "first_name": "Angelica",
    "last_name": "Perez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Tamara",
    "last_name": "Ward",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 500,
    "first_name": "Leslie",
    "last_name": "Butler",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F14.png"
  },
  {
    "amount": 1500,
    "first_name": "Kevin",
    "last_name": "Wurz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M08.png"
  },
  {
    "amount": 2500,
    "first_name": "Amanda",
    "last_name": "A",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F15.png"
  },
  {
    "amount": 500,
    "first_name": "Karen",
    "last_name": "Flores",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F16.png"
  },
  {
    "amount": 300,
    "first_name": "Mary Jo",
    "last_name": "Long",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F17.png"
  },
  {
    "amount": 1000,
    "first_name": "Sean",
    "last_name": "Morris",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M09.png"
  },
  {
    "amount": 500,
    "first_name": "Christopher",
    "last_name": "Fultz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M10.png"
  },
  {
    "amount": 2000,
    "first_name": "Dori",
    "last_name": "Price",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 300,
    "first_name": "Kellie",
    "last_name": "Patterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Judy",
    "last_name": "Young",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 5000,
    "first_name": "Ludwin",
    "last_name": "Alvarez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M11.png"
  },
  {
    "amount": 300,
    "first_name": "Jorge",
    "last_name": "Reyna",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M12.png"
  },
  {
    "amount": 2000,
    "first_name": "Brittany",
    "last_name": "Allen",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F04.png"
  },
  {
    "amount": 400,
    "first_name": "Arianne",
    "last_name": "James",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 500,
    "first_name": "Ryan",
    "last_name": "Nelson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M13.png"
  },
  {
    "amount": 2000,
    "first_name": "Emily",
    "last_name": "Wright",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 2000,
    "first_name": "John",
    "last_name": "Sanders",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M14.png"
  },
  {
    "amount": 300,
    "first_name": "Haydee",
    "last_name": "Lewis",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 500,
    "first_name": "Jamie",
    "last_name": "Diaz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M15.png"
  },
  {
    "amount": 2000,
    "first_name": "Michael",
    "last_name": "Gibbs",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M16.png"
  },
  {
    "amount": 300,
    "first_name": "Kelly",
    "last_name": "Gomez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 1000,
    "first_name": "Katy",
    "last_name": "Boyd",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 300,
    "first_name": "Elaine",
    "last_name": "Henry",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 2000,
    "first_name": "Gary",
    "last_name": "Richards",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 300,
    "first_name": "Harrison",
    "last_name": "Finn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Lorri",
    "last_name": "Ramos",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Frances",
    "last_name": "Dixon",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 500,
    "first_name": "Deniz",
    "last_name": "Holmes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 500,
    "first_name": "Lisa",
    "last_name": "Shaw",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 1000,
    "first_name": "Barbara",
    "last_name": "Daniels",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F13.png"
  },
  {
    "amount": 5000,
    "first_name": "John",
    "last_name": "Black",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  }
];
}}, {"value": "<style>.new-bg-box {\n  background: #FFFCF7;\n  border: 1px solid #FFE9AA;\n  box-sizing: border-box;\n  border-radius: 5px;\n  padding: 24px 20px;\n}\n\n.new-bg-box > div > .hidden-xs:nth-of-type(2),\n.new-bg-box [data-view=\"petitions/show/components/recent_signers\"] {\n \tdisplay: none; \n}\n\n.new-bg-mobile {\n  position: relative;\n  background: #FFFCF7;\n  padding-top: 26px;\n  padding-left: 15px;\n  padding-right: 15px;\n  padding-bottom: 32px;\n}\n\n.advocacy-actionwidget {\n \topacity: 1;\n  transition: opacity ease .5s;\n}\n.advocacy-actionwidget iframe {\n  min-height: 1520px !important;\n}\n\n.hide-call {\n\tvisibility: hidden;\n  opacity: 0;\n  height: 0;\n  margin-top: 0 !important;\n}\n\n@media (min-width: 768px) {\n  .new-bg-mobile {\n   \tdisplay: none; \n  }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "b09ed46614df43f7bf47c05c2cc1b525"}]}], "name": "Variation #2"}], "audienceIds": null, "changes": null, "id": "18780744605", "integrationSettings": null}], "id": "18796244070", "weightDistributions": null, "name": "[niftic] - SUPA - Elijah McClain - R3", "groupId": null, "commitId": "18910241617", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["18807865535"], "experiments": [{"weightDistributions": [{"entityId": "18821134363", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM", "bucketingStrategy": null, "variations": [{"id": "18809175807", "actions": [{"viewId": "18807865535", "changes": [{"dependencies": [], "type": "custom_code", "id": "AB221BFC-F3C1-484F-B9C1-8638F063F43E", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
  window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
  hj('trigger', 'tweet_dm_control');
});
}}]}], "name": "Original"}, {"id": "18821134363", "actions": [{"viewId": "18807865535", "changes": [{"dependencies": [], "type": "custom_code", "id": "d1d9263531df40788f31062b5849cedb", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
    
    
    var isCruise = (parseInt(window.changeTargetingData.petition.id) === 16651316) ? true : false;
    
    var cruiseCopy = 'We’ve prepared a tweet for you. Click on the button below to directly tag Disney on Twitter. Tweeting in numbers make this issue impossible to ignore. Can you send a tweet to demand change?';
		var taskforceCopy = 'Directly tag Joe Biden and his transition team to ensure they see this petition. Tweeting in numbers helps make this issue impossible to ignore. <strong>Can you send a tweet to demand they add a nurse to their COVID-19 task force?';
    
    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>Join a public call for change</h1>' +
      '        <p class="mbxl type-l"></strong>'+(isCruise ? cruiseCopy : taskforceCopy)+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Send a tweet to Disney</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = getTweet();
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      utils.waitUntil(function() { return !!window.hj; }).then(function() {
        window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
        // hj('trigger', 'tweet_dm_control');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "AE19E7B6-260C-4E55-AFDA-E525976A4646"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "18825174119", "integrationSettings": null}], "id": "18829093598", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM", "groupId": null, "commitId": "19539300188", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "53CD125F-58A2-48EB-804C-797B44A324AE", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["18874232428"], "experiments": [{"weightDistributions": [{"entityId": "18870022385", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Thank You - R12", "bucketingStrategy": null, "variations": [{"id": "18891122899", "actions": [], "name": "Original"}, {"id": "18870022385", "actions": [{"viewId": "18874232428", "changes": [{"dependencies": [], "type": "custom_code", "id": "864276b68d5c44f69d42cffea9058c3e", "value": function($){var utils = window.optimizely.get("utils");

utils.waitUntil(function() { return !!window.hj; }).then(function() {
  var combinedExperiment = window.localStorage.getItem('transparency_r12');
  var hjTrigger = 'transparency_r12_' + combinedExperiment;

  window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
  hj('trigger', hjTrigger);

  window.localStorage.removeItem('transparency_r12');
});
}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "18905290714", "integrationSettings": null}], "id": "18869952161", "weightDistributions": null, "name": "[niftic] - Thank You - R12", "groupId": null, "commitId": "18883442602", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["18944910005"], "experiments": [{"weightDistributions": [{"entityId": "18933982344", "endOfRange": 5000}, {"entityId": "18918801944", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - SAP - Transparency", "bucketingStrategy": null, "variations": [{"id": "18933982344", "actions": [{"viewId": "18944910005", "changes": [{"dependencies": [], "type": "custom_code", "id": "A5DBD08F-3649-4BF1-82E0-0CDD683699EE", "value": function($){window.localStorage.setItem('sap_transparency_view', 'starter_transparency_control');
}}]}], "name": "Original"}, {"id": "18918801944", "actions": [{"viewId": "18944910005", "changes": [{"dependencies": [], "type": "custom_code", "id": "bc47b4aa0f42486b88fce1289ccd111f", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/preview"]').then(function(preview){
  
  var optlyModal = document.createElement('div');
	optlyModal.className = 'hide-fully optly-modal';
  optlyModal.innerHTML = '' +
    '<div class="modal">' +
    '    <div id="modal-demo-dialog" class="modal-dialog modal-small animate animate-zoom-in">' +
    '      <button class="modal-close link-stealth position-absolute position-right position-top pas optly-toggle-modal">' +
    '        <span class="symbol symbol-close symbol-compact"></span>' +
    '      </button>' +
    '      <h2 class="mtn mbs"><b>Almost done! Here’s how Change.org works✨</b></h2>' +
    '        <div class="modal-section mbm">' +
    '            <div class="section-heading arrange arrange-middle mbxxs">' +
    '                <div class="arrange-fit">' +
    '                    <div class="symbol-round bg-brand type-brighter mrxs"><b>1</b></div>' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <strong class="type-m">Share your petition</strong>' +
    '                </div>' +
    '            </div>' +
    '            <p>You or your supporters can share this petition with friends and family directly, or to a wider audience via social media.</p>' +
    '        </div>' +
    '        <div class="modal-section mbm">' +
    '            <div class="section-heading arrange arrange-middle mbxxs">' +
    '                <div class="arrange-fit mrxs">' +
    '                    <div class="symbol-round bg-brand type-brighter mrxs"><b>2</b></div>' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <strong class="type-m">Promote your petition</strong>' +
    '                </div>' +
    '            </div>' +
    '            <p>You or your supporters can chip in to advertise this petition on Change.org. This is the <strong>easiest</strong> and <strong>fastest</strong> way to reach <strong>beyond</strong> your network, and get your petition in front of the millions of people on Change.org.</p>' +
    '        </div>' +
    '        <div class="modal-footer border-rounded-b" style="background: #F6F4F6;">' +
    '            <p class="mbs"><b>Get the ball rolling!</b> Be the first to share or promote so others can catch on and do the same.</p>' +
    '        </div>' +
    '    </div>' +
    '  </div>' +
    '</div>';
  
    preview.appendChild(optlyModal);
  
  var closeBtns = optlyModal.querySelectorAll('.optly-toggle-modal');
	closeBtns.forEach(function(btn) {
    btn.addEventListener('click', function() {
  		if (optlyModal.classList.contains('hide-fully')) {
      	optlyModal.classList.remove('hide-fully');
      } else {
      	optlyModal.classList.add('hide-fully');        
      }
    });
  });
  
  
  var publishBtns = [preview.querySelector('input[name="publish-petition-btn"]'), preview.querySelector('input[value="Publish this petition"]')];
  publishBtns.forEach(function(btn, i) {
    var newBtn = document.createElement('button');
    newBtn.className = 'btn-action btn';
    btn.parentNode.insertBefore(newBtn, btn);

    newBtn.addEventListener('click', function() {
      optlyModal.classList.remove('hide-fully');
      
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_sap_continue_modal_launched');
      });
      window.localStorage.setItem('sap_transparency_view', 'starter_transparency');
    });

    if (i === 0) {
      var modalFooter = optlyModal.querySelector('.modal-footer');
      modalFooter.appendChild(btn);
      btn.innerText = "Got it! Publish my petition";
      btn.value = "Got it! Publish my petition";
			btn.classList.add('btn-full', 'type-m');
      newBtn.innerText = 'Continue';
    } else {
      btn.remove();
      newBtn.innerText = 'Looks good! Continue';
      newBtn.classList.add('type-m');
    }
  });
  
});
}}, {"value": "<style>.sap-landing-wrap {\n  background: #F6F4F6;\n  width: 100%;\n  max-width: 880px;\n  margin: 0 auto;\n  padding: 10px;\n}\n\n.sap-landing-wrap .start-card {\n  background: #FFFFFF;\n\tbox-shadow: 0px 2px 6px rgba(0, 0, 0, 0.1);\n\tborder-radius: 5px;\n  padding-bottom: 30px;\n}\n\n.sap-landing-wrap .start-card .bg-new {\n\tbackground: #FFFCF7;\n  padding-top: 30px;\n  padding-left: 20px;\n  padding-right: 20px;\n}\n\n.sap-landing-wrap .start-card .bg-new .top-img {\n \twidth: 180px;\n  display: inline-block;\n}\n\n.sap-landing-wrap .start-card .narrow {\n  max-width: 540px;\n  margin: auto;\n}\n\n.sap-landing-wrap .start-card .extra-narrow {\n  max-width: 380px;\n  margin: auto;\n}\n\n.start-card .start-list {\n  text-align: left;\n  padding-left: 10px;\n  margin-top: 20px;\n}\n\n.start-card .start-list .list-item {\n  margin-bottom: 25px;\n  font-size: 18px;\n\tline-height: 30px;\n}\n\n.start-card .start-list .list-item .num {\n  position: relative;\n  display: inline-block;\n  color: #EC2C22;\n  vertical-align: middle;\n\tborder: 2px solid #EC2C22;\n  width: 25px;\n  height: 25px;\n  border-radius: 50%;\n  font-weight: bold;\n  font-size: 12.8px;\n  line-height: 20px;\n  margin-right: 10px;\n  text-align: center;\n}\n\n.start-card .start-list .list-item .num.la::after {\n \tdisplay: block;\n  position: absolute;\n  content: \"\";\n  height: 15px;\n  width: 2px;\n  background: #DBD9DB;\n  top: 30px;\n  left: 10px;\n}\n\n.start-card .transition {\n  width: 100%;\n  height: 120px;\n  background: url(https://static.change.org/psf-experiments/sem-bg.png);\n  background-size: 110%;\n  background-repeat: no-repeat;\n  background-position: center bottom;\n  margin-top: -20px;\n}\n\n.start-card .transition img {\n  width: 223px;\n  display: inline-block;\n  position: relative;\n  top: 50px;\n}\n\n@media (min-width: 778px) {\n  .sap-landing-wrap {\n    padding: 46px 80px;\n    margin-top: 20px;\n    margin-bottom: 55px;\n  }\n  .sap-landing-wrap .start-card .bg-new {\n    padding-top: 60px;\n    padding-left: 60px;\n    padding-right: 60px;\n  }\n  .start-card .start-list {\n    padding-left: 20px;\n    margin-top: 36px;\n  }\n  .start-card .start-list .list-item {\n  \tfont-size: 20px;\n  }\n  .start-card .start-list .list-item .num {\n  \tmargin-right: 20px;\n  }\n  .start-card .transition {\n\t\tmargin-top: 0;\n  }\n  .start-card .transition img {\n    top: 40px;\n  }\n}\n\n.victory-wrap {\n\tbackground: transparent;\n  position: relative;\n \toverflow: hidden; \n  padding-top: 14px;\n}\n.victory-wrap::after, .victory-wrap:before {\n    content: \"\";\n    width: 35px;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    z-index: 5;\n    background: linear-gradient(270deg, #f6f4f6 0%, rgba(255, 255, 255, 0) 100%);\n}\n.victory-wrap:before {\n\tleft: -35px;\n  right: unset;\n}\n.victory-wrap h3 {\n    margin-top: 40px;\n    margin-bottom: 36px;\n}\n.victory-header {\n  width: 450px;\n  max-width: 100%;\n  margin: auto;\n}\n.victory-header .icon-wrap img {\n    width: 96px;\n    margin: auto;\n}\n#victory-append {\n\tdisplay: flex; \n}\n.victory-card {\n\t\tposition: relative;\n    box-sizing: border-box;\n    height: 226px;\n    width: 280px;\n  min-width: 280px;\n    margin-right: 10px;\n    white-space: normal !important;\n    text-align: left;\n    transition: margin-left 2000ms cubic-bezier(0.4, 0.45, 0.35, 1) 0s;\n    overflow: hidden;\n  border-radius: 5px;\n  background: white;\n}\n.victory-img-wrap {\n    position: relative;\n    width: 100%;\n    height: 50%;\n    overflow: hidden;\n}\n\n.victory-img-wrap .badge {\n    position: absolute;\n    top: 10px;\n    left: 10px;\n}\n.victory-img-wrap img {\n\t\theight: 100%;\n    object-fit: cover;\n    width: 100%;\n    object-position: top;\n}\n.victory-content {\n\tpadding: 15px;\n}\n.victory-content a {\n    display: block;\n    max-height: 52px;\n    overflow: hidden;\n}\n.victory-content h3 {\n    font-size: 20px;\n    line-height: 26px;\n  height: 52px;\n    overflow: hidden;\n}\n.card-content .psf-combo-embedded-card > .photo-component {\n  display: none !important;\n}\n\n  .optly-modal .modal-footer {\n    margin-left: -30px;\n    margin-right: -30px;\n    margin-bottom: -30px;\n    padding: 30px;\n    background: #F6F4F6;\n  }\n@media (max-width: 767px) {\n  .optly-modal .modal-footer {\n  \tmargin-left: -15px;\n    margin-right: -15px;\n    margin-bottom: -15px;\n    padding: 15px;\n  }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "9bbaca6468674883a91778a5b03ba21d"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "18925642928", "integrationSettings": null}], "id": "18918762097", "weightDistributions": null, "name": "[niftic] - SAP - Transparency", "groupId": null, "commitId": "19109562094", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["18916522267"], "experiments": [{"weightDistributions": [{"entityId": "18981240373", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Dashboard - Transparency Survey", "bucketingStrategy": null, "variations": [{"id": "18993020132", "actions": [], "name": "Original"}, {"id": "18981240373", "actions": [{"viewId": "18916522267", "changes": [{"value": function($){var utils = window.optimizely.get("utils");

utils.waitUntil(function() { return !!window.hj; }).then(function() {

  var hjValue = window.localStorage.getItem('sap_transparency_view');
  
  window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
  hj('trigger', hjValue);

  window.localStorage.removeItem('sap_transparency_view');
});
}, "dependencies": [], "type": "custom_code", "id": "1e8cb29971134be4afeec7d876eaf28e"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "18932072709", "integrationSettings": null}], "id": "18943582695", "weightDistributions": null, "name": "[niftic] - Dashboard - Transparency Survey", "groupId": null, "commitId": "19059792739", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19079550993"], "experiments": [{"weightDistributions": [{"entityId": "19052600835", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Combo / Share - SMS, Call Tool, Sharable", "bucketingStrategy": null, "variations": [{"id": "19077480856", "actions": [{"viewId": "19079550993", "changes": [{"dependencies": [], "type": "custom_code", "id": "2f114117c7e148468b3ae5b7f80c186d", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "19052600835", "actions": [{"viewId": "19079550993", "changes": [{"dependencies": [], "type": "custom_code", "id": "c652b88ce57f495e93db0d750e7c959b", "value": function($){var utils = window.optimizely.get("utils");

var templateData = getTemplateData();
var isAd = window.location.href.indexOf('elp=1') !== -1;
if (isAd) {
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent('optly_election_ad_view');
  });
}
function fireFBQ(isAction) {
  var ev = isAction ? 'election_petition_action' : 'election_petition_sign';
	utils.waitUntil(function() { return !!window.fbq; }).then(function() {
    window.fbq('trackCustom', ev, {petition_id: window.changeTargetingData.petition.id});
  });  
}
fireFBQ(false);

if (templateData.callTool || templateData.sms) {
   utils.waitForElement('.row.match-height > .psf-combo-shaded-round-border').then(function(card) {
    utils.waitForElement('.btn.js-share-btn').then(function(shareBtn) {
      
      var cardContent = card.querySelector('.phxxl.ptl.xs-pam');
      var therm = cardContent.querySelector('.col-xs-12.phn.mbm');
      var comboButtons = card.querySelector('.psf-combo-buttons');
      therm.classList.add('hide-fully');
      var promoteBtn = document.querySelector('.js-promote');
      promoteBtn.classList.remove('btn-action');
      promoteBtn.classList.add('mtxs', 'btn-outline');
      // document.querySelector('[data-view="psf/combo/components/accepted_payment_types"]').classList.add('hide-fully');
      shareBtn.innerText = 'Yes, I’ll share this petition';
      shareBtn.parentNode.insertBefore(promoteBtn, shareBtn.nextSibling);
      
      // SMS Collection
      if (templateData.sms) {
       	var hs = card.querySelectorAll('h1');
        hs.forEach(function(h){
          if (isAd) {
            h.innerHTML = 'Welcome back! Thanks for signing — here’s what you can do now:';
          } else {
        		h.innerHTML = '<span class="type-branded">Stay informed</span> with voting updates for your state';  
          }
        });
        var smsCall = document.createElement('div');
        
        var paragraphs = card.querySelectorAll('.phxxl.ptl.xs-pam div > p');
        var first = true;
        paragraphs.forEach(function(p){
          if (first) {
           	p.innerText = 'From local voting changes to tips on how you can help protect democracy – we’ll make sure you don’t miss a beat this election season.';
            first = false;
            smsCall.innerHTML = '<div class="psf-combo-buttons position-block-center">' + 
          	'<a id="sms-btn" class="btn btn-action btn-big btn-full mvxs">Yes, I want text updates</a>' + 
          '</div>';
        		p.parentNode.insertBefore(smsCall, p.nextSibling);
          } else {
          	p.classList.add('hide-fully');
          }
        });
        card.querySelector('.phxxl.ptl.xs-pam div > ul').classList.add('hide-fully');
        
        // SMS P2A
        var p2a = document.createElement('div');
        p2a.classList = 'advocacy-actionwidget mtl hide-call';
        p2a.setAttribute('data-domain', 'p2a.co');
        p2a.setAttribute('data-shorturl', templateData.smsShortUrl);
        p2a.setAttribute('data-responsive', 'true');
        p2a.setAttribute('style', '');

        var smsCallCard = card.cloneNode(true);
        smsCallCard.innerHTML = '';
        smsCallCard.appendChild(p2a);
        (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'advocacy-actionwidget-code'));

        smsCallCard.classList.add('hide-fully', 'call-card');
        card.parentNode.insertBefore(smsCallCard, card);

        document.getElementById('sms-btn').onclick = function() {
          card.classList.add('hide-fully');
          smsCallCard.classList.remove('hide-fully');
					window.scrollTo(0,0);
          utils.waitForElement('.advocacy-actionwidget iframe').then(function(iframe) {
            iframe.setAttribute('scrolling', 'yes');
          });

          utils.waitUntil(function() { return !!window.App; }).then(function() {
            window.App.trackEvent('optly_sms_collection');
          });
          fireFBQ(true);
        };
      }
      // Call Tool
      if (templateData.callTool) {
        
        var callDescription = document.createElement('div');
        callDescription.innerHTML = '<h1 style="font-size: 31.3px" class="mtm">Take your signature further</h1><p>Lawmakers and your community need to hear directly from you. Can you take action to ensure voting is safe and accessible to everyone?</p>';
        
        comboButtons.parentNode.insertBefore(callDescription, comboButtons);

       	var callBtn = document.createElement('a');
        callBtn.classList = 'btn btn-action btn-big btn-full mbxs';
        if (isAd) {
          callBtn.innerText = 'I’ll make a call to lawmakers now';
        } else {
          callBtn.innerText = 'Yes, I’ll call lawmakers';
        }
        callBtn.id = 'call-lawmakers-btn';

        shareBtn.parentNode.insertBefore(callBtn, shareBtn);
        
				// Call Tool P2A
        var p2a = document.createElement('div');
        p2a.classList = 'advocacy-actionwidget mtl hide-call';
        p2a.setAttribute('data-domain', 'p2a.co');
        p2a.setAttribute('data-shorturl', templateData.callShortUrl);
        p2a.setAttribute('data-responsive', 'true');
        p2a.setAttribute('style', '');

        var callCard = card.cloneNode(true);
        callCard.innerHTML = '';
        callCard.appendChild(p2a);
        (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'advocacy-actionwidget-code'));

        callCard.classList.add('hide-fully', 'call-card');
        card.parentNode.insertBefore(callCard, card);

        document.getElementById('call-lawmakers-btn').onclick = function() {
          card.classList.add('hide-fully');
          callCard.classList.remove('hide-fully');
					window.scrollTo(0,0);
          utils.waitForElement('.advocacy-actionwidget iframe').then(function(iframe) {
            iframe.setAttribute('scrolling', 'yes');
          });

          utils.waitUntil(function() { return !!window.App; }).then(function() {
            window.App.trackEvent('optly_call_launched');
          });
          fireFBQ(true);
        }; 
      }
    });
     
     document.querySelector('.js-share-btn').onclick = function(){
       	fireFBQ(true);
     };
  });

  /*
  // Desktop Feed
  var feedIndex = 0;
  var nextCall = 1;
  function getRandomInt(min, max) {
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(Math.random() * (max - min + 1)) + min;
  }
  utils.observeSelector('.visible-lg [data-view="psf/combo/components/combo_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(feedItem) {
    var feedInner = feedItem.querySelector('.arrange-fill .type-break-word > span');
    var name = feedInner.querySelector('strong').innerText;
    feedIndex++;
    if (feedIndex === nextCall) {
      feedInner.innerHTML = '<strong>' + name + '</strong> called lawmakers';
      nextCall = nextCall + getRandomInt(2, 4);
    }
  }, {
      "timeout": 60000,
      "once": false,
  });

  // Mobile Feed
  var mobileFeedIndex = 0;
  var mobileNextCall = 1;
  utils.observeSelector('.hidden-lg [data-view="psf/combo/components/combo_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(feedItem) {
    var feedInner = feedItem.querySelector('.arrange-fill .type-break-word > span');
    var name = feedInner.querySelector('strong').innerText;
    mobileFeedIndex++;
    if (mobileFeedIndex === mobileNextCall) {
      feedInner.innerHTML = '<strong>' + name + '</strong> called lawmakers';
      mobileNextCall = mobileNextCall + getRandomInt(2, 4);
    }
  }, {
      "timeout": 60000,
      "once": false,
  });
  */
}

utils.waitForElement('.js-combo-skip-footer-link.js-skip').then(function(skip) {
  skip.href = 'https://change.org/yourdemocracy';
  skip.innerText = 'Sorry, I can’t take these actions. Show me more petitions to sign.';
});

if (templateData.sharables) {
  utils.waitForElement('.sharePage .contentShare').then(function(shareCard) {
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
    var heading = shareCard.querySelector('[data-view="psf/components/text"] h1');
    var p = shareCard.querySelector('[data-view="psf/components/text"] span');
    var shares = shareCard.querySelector('.col-sm-9.position-block-center.pbs');
    var simg = shareCard.querySelector('.flex-embed');
    simg.classList.add('hide-fully');

    p.innerHTML = fname+', share these images and help more people take action! Here is how it works:<br><strong>1)</strong> Download share images<br><strong>2)</strong> Share on your timelines and stories';

    var scroller = document.createElement('div');
    scroller.classList = 'shareable-scroller';
    templateData.sharableImages.forEach(function(si){
      scroller.innerHTML += '<div class="scroll-item"><img src="' + si + '"><a href="' + si + '" target="_blank">Download Image</a></div>';
    });

    shares.parentNode.insertBefore(scroller, shares);
		
    var shareDescription = document.createElement('p');
    shareDescription.classList = 'mvm';
    shareDescription.innerHTML = 'Or share this petition with friends';
    
    shares.parentNode.insertBefore(shareDescription, shares);

    var imageDownloads = document.querySelectorAll('.shareable-scroller .scroll-item a');
    for (var i = 0; i < imageDownloads.length; i++) {
      imageDownloads[i].addEventListener('click', function() {
        utils.waitUntil(function() { return !!window.App; }).then(function() {
        	window.App.trackEvent('optly_shareable_download');
      	});
      }, false);
    }

  });
}
}}, {"value": "<style>.shareable-scroller {\n  overflow: hidden;\n  overflow-x: scroll;\n  overflow-y: hidden;\n  white-space: nowrap;\n  padding: 25px;\n}\n\n.shareable-scroller .scroll-item {\n  max-width: 220px;\n  text-align: center;\n}\n\n.shareable-scroller .scroll-item {\n \tdisplay: inline-block;\n  vertical-align: top;\n  margin-right: 25px;\n}\n\n.shareable-scroller .scroll-item img {\n  box-shadow: 0px 1px 6px rgba(115, 114, 115, 0.4);\n}\n\n.shareable-scroller .scroll-item a {\n  margin-top: 20px;\n  display: inline-block;\n  text-decoration: none;\n  font-weight: bold;\n  padding: 8px 20px;\n  border: 2px solid;\n  border-radius: 5px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "BE5261B0-A716-465A-B87B-08DDB76DDB37"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19077680663", "integrationSettings": null}], "id": "19075740869", "weightDistributions": null, "name": "[niftic] - Combo / Share - SMS, Call Tool, Sharable", "groupId": null, "commitId": "19178042195", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "27850657648b4a6baad413a20a4ce83a", "value": function($){window.getTemplateData = function() {
  var pId = parseInt(window.changeTargetingData.petition.id);
  var d = {
   	24144610: {
      callTool: true,
      sharables: true,
      sms: true,
    	callShortUrl: 'puguOG8',
      copylink: 'http://chng.it/9StkRYrG',
      sharableImages: ['https://change-assets.s3.amazonaws.com/psf-experiments/ohio-dates.png', 'https://change-assets.s3.amazonaws.com/psf-experiments/Ohio_VU.png'],
      smsShortUrl: 'E9vEPdZ'
    },
    25251556: {
      callTool: false,
      sharables: true,
      sms: true,
    	callShortUrl: 'lSqyCs0',
      copylink: 'http://chng.it/wh7RNJW2',
      sharableImages: ['https://change-assets.s3.amazonaws.com/psf-experiments/Nevada_Dates.png', 'https://change-assets.s3.amazonaws.com/psf-experiments/nevada-cev.png'],
      smsShortUrl: 'E9vEPdZ'
    },
    25145269: {
      callTool: true,
      sharables: true,
      sms: true,
    	callShortUrl: 'pm2ge7f',
      copylink: 'http://chng.it/XrdN6DmB',
      sharableImages: ['https://change-assets.s3.amazonaws.com/psf-experiments/texas_vu.png'],
      smsShortUrl: 'E9vEPdZ'
    },
    25360347: {
      callTool: true,
      sharables: true,
      sms: true,
    	callShortUrl: 'PnOwhkd',
      copylink: 'http://chng.it/XrdN6DmB',
      sharableImages: ['https://change-assets.s3.amazonaws.com/psf-experiments/Arizona_Dates.png', 'https://change-assets.s3.amazonaws.com/psf-experiments/Arizona_VU.png'],
      smsShortUrl: 'E9vEPdZ'
    },
    25360361: {
      callTool: true,
      sharables: true,
      sms: true,
    	callShortUrl: 'z2xy3IR',
      copylink: 'http://chng.it/XrdN6DmB',
      sharableImages: ['https://change-assets.s3.amazonaws.com/psf-experiments/Montana_Dates.png', 'https://change-assets.s3.amazonaws.com/psf-experiments/Montana_VU.png'],
      smsShortUrl: 'E9vEPdZ'
    },
    25360366: {
      callTool: true,
      sharables: true,
      sms: true,
    	callShortUrl: 'hM1TUZk',
      copylink: 'http://chng.it/XrdN6DmB',
      sharableImages: ['https://change-assets.s3.amazonaws.com/psf-experiments/Wisconsin_Dates.png', 'https://change-assets.s3.amazonaws.com/psf-experiments/Wisconsin_VU.png'],
      smsShortUrl: 'E9vEPdZ'
    },
    25360369: {
      callTool: true,
      sharables: true,
      sms: true,
    	callShortUrl: 'cGlrDwr',
      copylink: 'http://chng.it/XrdN6DmB',
      sharableImages: ['https://change-assets.s3.amazonaws.com/psf-experiments/Pennsylvania_Dates.png', 'https://change-assets.s3.amazonaws.com/psf-experiments/Pennsylvania_VU.png'],
      smsShortUrl: 'E9vEPdZ'
    },
    25360377: {
      callTool: true,
      sharables: true,
      sms: true,
    	callShortUrl: 'yCegTIx',
      copylink: 'http://chng.it/XrdN6DmB',
      sharableImages: ['https://change-assets.s3.amazonaws.com/psf-experiments/NorthCarolina_Dates.png', 'https://change-assets.s3.amazonaws.com/psf-experiments/NorthCarolina_VU.png'],
      smsShortUrl: 'E9vEPdZ'
    },
    13292213: {
      callTool: true,
      sharables: true,
      sms: true,
    	callShortUrl: 'hIzCySw',
      copylink: 'chng.it/TCXfMKWr',
      sharableImages: ['https://change-assets.s3.amazonaws.com/psf-experiments/crystal-mason-3.png'],
      smsShortUrl: 'E9vEPdZ'
    },
    25301534: {
      callTool: true,
      sharables: true,
      sms: true,
    	callShortUrl: 'HOFhKm7',
      copylink: 'chng.it/TCXfMKWr',
      sharableImages: ['https://change-assets.s3.amazonaws.com/psf-experiments/texas_dates.png'],
      smsShortUrl: 'E9vEPdZ'
    },
    25399759: {
      callTool: true,
      sharables: false,
      sms: true,
    	callShortUrl: 'BIRGb39',
      copylink: 'chng.it/TCXfMKWr',
      sharableImages: [],
      smsShortUrl: 'E9vEPdZ'
    },
    25410185: {
      callTool: false,
      sharables: true,
      sms: true,
    	callShortUrl: 'BIRGb39',
      copylink: 'chng.it/TCXfMKWr',
      sharableImages: ['https://change-assets.s3.amazonaws.com/psf-experiments/UPenn_1.png', 'https://change-assets.s3.amazonaws.com/psf-experiments/Pennsylvania_Dates.png'],
      smsShortUrl: 'E9vEPdZ'
    },
    25421018: {
      callTool: true,
      sharables: true,
      sms: true,
    	callShortUrl: '6U78OhR',
      copylink: 'chng.it/TCXfMKWr',
      sharableImages: ['https://change-assets.s3.amazonaws.com/psf-experiments/Delaware_Mask.png', 'https://change-assets.s3.amazonaws.com/psf-experiments/Delaware_Dates.png'],
      smsShortUrl: 'E9vEPdZ'
    },
    23575754: {
      callTool: false,
      sharables: false,
      sms: true,
    	callShortUrl: '',
      copylink: 'chng.it/KTv8PpXJ',
      sharableImages: [],
      smsShortUrl: 'E9vEPdZ'
    },
    20778358: {
      callTool: false,
      sharables: false,
      sms: true,
    	callShortUrl: '',
      copylink: 'chng.it/KTv8PpXJ',
      sharableImages: [],
      smsShortUrl: 'E9vEPdZ'
    },
    21131660: {
      callTool: false,
      sharables: false,
      sms: true,
    	callShortUrl: '',
      copylink: 'chng.it/KTv8PpXJ',
      sharableImages: [],
      smsShortUrl: 'E9vEPdZ'
    },
    22240670: {
      callTool: false,
      sharables: false,
      sms: true,
    	callShortUrl: '',
      copylink: 'chng.it/KTv8PpXJ',
      sharableImages: [],
      smsShortUrl: 'E9vEPdZ'
    },
    25468570: {
      callTool: false,
      sharables: true,
      sms: true,
    	callShortUrl: '',
      copylink: 'chng.it/KTv8PpXJ',
      sharableImages: ['https://change-assets.s3.amazonaws.com/psf-experiments/teen_vote.png'],
      smsShortUrl: 'E9vEPdZ'
    },
    24817440: {
      callTool: false,
      sharables: false,
      sms: true,
    	callShortUrl: '',
      copylink: 'chng.it/WMWCFs2Q',
      sharableImages: [],
      smsShortUrl: 'E9vEPdZ'
    },
    25621755: {
      callTool: false,
      sharables: false,
      sms: true,
    	callShortUrl: '',
      copylink: 'chng.it/WMWCFs2Q',
      sharableImages: [],
      smsShortUrl: 'E9vEPdZ'
    },
    25649738: {
      callTool: false,
      sharables: true,
      sms: true,
    	callShortUrl: '',
      copylink: 'chng.it/kdCvHyhJ',
      sharableImages: ['https://change-assets.s3.amazonaws.com/psf-experiments/Pennsylvania-count-every-vote.png'],
      smsShortUrl: 'E9vEPdZ'
    },
  };
  return d[pId];
};
}}]}, {"holdback": 5000, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19224590105"], "experiments": [{"weightDistributions": [{"entityId": "19186012489", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Payment - HJ Recording id-ID", "bucketingStrategy": null, "variations": [{"id": "19241350091", "actions": [{"viewId": "19224590105", "changes": []}], "name": "Original"}, {"id": "19186012489", "actions": [{"viewId": "19224590105", "changes": [{"dependencies": [], "type": "custom_code", "id": "714483d679424493b756f1b9831a2b6a", "value": function($){var utils = window.optimizely.get("utils");

utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
  hj('trigger', 'payment_recording');
});
}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19210070213", "integrationSettings": null}], "id": "19179551808", "weightDistributions": null, "name": "[niftic] - Payment - HJ Recording id-ID", "groupId": null, "commitId": "19227400563", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19164361492"], "experiments": [{"weightDistributions": [{"entityId": "19187430764", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Voting - Landing Page", "bucketingStrategy": null, "variations": [{"id": "19195160883", "actions": [], "name": "Original"}, {"id": "19187430764", "actions": [{"viewId": "19164361492", "changes": [{"dependencies": [], "type": "custom_code", "id": "B43BEF01-9819-4CEC-9322-654728C911C5", "value": function($){var utils = window.optimizely.get("utils");
var userState = window.changeTargetingData.viewer.loginState.toLocaleLowerCase();
var oneClick = userState !== 'guest';
var isSafari = !!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/);

function fireEvent(ev) {
  if (!!window.App) {
    window.App.trackEvent(ev);
  } else {
    window.trackEvent(ev);
  }
}
fireEvent('dd_view');

function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  while (0 !== currentIndex) {

    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }
  
  return array;
}

function init() {
utils.waitForElement('#app.type-loaded').then(function() {
  utils.waitForElement('#yourdemocracy').then(function(democracyContainer) {
 
      democracyContainer.className = 'optly';
      democracyContainer.innerHTML = pageHTML;
      
      var updatesForm = democracyContainer.querySelector('.updates-form');
      
      var p2a = document.createElement('div');
      p2a.classList = 'advocacy-actionwidget mtl hide-call';
      p2a.setAttribute('data-domain', 'p2a.co');
      p2a.setAttribute('data-shorturl', 'exouk6u');
      p2a.setAttribute('data-responsive', 'true');
      p2a.setAttribute('style', '');
      
      updatesForm.appendChild(p2a);
      
      (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'advocacy-actionwidget-code'));

      
      // Timer
      var votingDay = new Date(2020, 10, 3, 0, 0, 0, 0);
      var now = new Date();
      var seconds = (votingDay.getTime() / 1000) - (now.getTime() / 1000);

      function timer() {
        var days        = Math.floor(seconds/24/60/60);
        var hoursLeft   = Math.floor((seconds) - (days*86400));
        var hours       = Math.floor(hoursLeft/3600);
        var minutesLeft = Math.floor((hoursLeft) - (hours*3600));
        var minutes     = Math.floor(minutesLeft/60);
        var remainingSeconds = Math.floor(seconds % 60);

        function pad(n) {
          return (n < 10 ? "0" + n : n) + '';
        }

      if (document.querySelector('.countdown-section .days')) { 
        document.querySelector('.countdown-section .days').innerText = pad(days); }
      if (document.querySelector('.countdown-section .hours')) { 
        document.querySelector('.countdown-section .hours').innerText = pad(hours); }
      if (document.querySelector('.countdown-section .minutes')) { 
        document.querySelector('.countdown-section .minutes').innerText = pad(minutes); }
      if (document.querySelector('.countdown-section .seconds')) { 
        document.querySelector('.countdown-section .seconds').innerText = pad(remainingSeconds); }

        if (seconds == 0) {
          clearInterval(countdownTimer);
        } else {
          seconds--;
        }

      }
      // var countdownTimer = setInterval(timer, 1000);
      
      
    	// Petition Cards
    	petitions = shuffle(petitions);
      petitions.forEach(function(petition, i){
        try {

          var newPetition = document.createElement('div');
          newPetition.className = 'petition-card-wrap col-xs-12 col-md-6' + 
            (i > 3 ? 
             	(i > 5 ? ' hide-fully' : ' hide-fully-mobile')
             : '') ;
          newPetition.innerHTML = suggestedPetition(petition);
          document.querySelector('.optly .petitions-section .petitions').appendChild(newPetition);
          
          // Truncate description
          var desc = newPetition.querySelector('.petition-description');
          while (parseInt(desc.clientHeight) > 58) {
            desc.innerText = desc.innerText.replace(/\W*\s(\S)*$/, '');
          }
          // Truncate a little more for read more link.
          for (var j = 0; j < 3; j++) {
            desc.innerText = desc.innerText.replace(/\W*\s(\S)*$/, '... ');
          }

          // Truncate heading
          var petitionHeading = newPetition.querySelector('.js-title-text').parentNode;
          while (parseInt(petitionHeading.clientHeight) > 42) {
              petitionHeading.querySelector('a').innerText = petitionHeading.querySelector('a').innerText.replace(/\W*\s(\S)*$/, '...');
          }

          var readMoreLink = document.createElement('a');
          readMoreLink.className = 'type-s type-weak';
          readMoreLink.innerText = 'Read More';
          readMoreLink.href = petition.fullURL;
          desc.appendChild(readMoreLink);


          // Call Tool
          if (petition.callUrl && petition.callUrl.length) {

            // Call Tool P2A
            var p2a = document.createElement('div');
            p2a.classList = 'advocacy-actionwidget mtl hide-call';
            p2a.setAttribute('data-domain', 'p2a.co');
            p2a.setAttribute('data-shorturl', petition.callUrl);
            p2a.setAttribute('data-responsive', 'true');
            p2a.setAttribute('style', '');
            
            document.querySelector('#call-modal-' + petition.id + ' .p2a-container').appendChild(p2a);

            document.getElementById('call-btn-' + petition.id).onclick = function () {
              document.getElementById('call-modal-' + petition.id).classList.remove('hide-fully');

              utils.waitForElement('.advocacy-actionwidget iframe').then(function (iframe) {
                iframe.setAttribute('scrolling', 'yes');
              });

              fireEvent('optly_call_launched');
            };
          }

        } catch(err) {console.error(err);}

      });
    
    	/* Event Listeners & Such */
          var closeBtns = document.querySelectorAll('.js-toggle-modal');
          closeBtns.forEach(function(btn) {
          	btn.addEventListener('click', function(){
            	btn.closest('.modal-wrap').classList.add('hide-fully');
            });
          });
          
          var cardWraps = document.querySelectorAll('.petition-card-wrap');
					document.querySelector('.optly-load-more-petitions').onclick = function() {
          	cardWraps.forEach(function(w) {
            	w.classList.remove('hide-fully', 'hide-fully-mobile');
              document.querySelector('.optly-load-more-petitions').classList.add('hide-fully');
            });
          };
          
          var signBtns = document.querySelectorAll('.js-sign-now');
          signBtns.forEach(function(btn) {
          	btn.addEventListener('click', function() {
            	btn.disabled = true;
              btn.innerText = 'Signed';
              fireEvent('voting_lp_sign_now');
            });
          });
          
          
          var sourceIsSMS = window.location.href.indexOf('sms') !== -1 ? true : false;
          if (sourceIsSMS) {
          	document.querySelector('.optly .voting-updates-section').classList.add('hide-fully');
            var sections = document.querySelectorAll('.optly .section');
            sections.forEach(function(s) {
            	if (s.classList.contains('bg-yellowish')){ 
                s.classList.remove('bg-yellowish'); 
              } else if (!s.classList.contains('countdown-section')) {
                s.classList.add('bg-yellowish'); 
              }
            });
           	var progressNum = document.querySelector('.optly .first-step .progress-num');
            progressNum.classList.add('hide-fully');
            progressNum.nextElementSibling.classList.remove('hide-fully');            
          }
          
          var sapBtn = document.getElementById('sap-btn');
          sapBtn.onclick = function() {
						if (sourceIsSMS) {
              fireEvent('sms_dd_starter');
            } else {
              fireEvent('dd_starter');
            }
          };
          
          var igFilter = document.getElementById('ig-filter');
          var fbFilter = document.getElementById('fb-filter');
					igFilter.onclick = function() { fireEvent('ig_filter'); };
          fbFilter.onclick = function() { fireEvent('fb_filter'); };
    
    
    
    
    //Slider 
    var currentSlide = 0;
    var slides = document.querySelectorAll('.optly-slider .slide');
    var iconsContainer = document.querySelector('.optly-slider-icons');
    var slideIcons = [];
    var prev = document.querySelector('.optly-slider-container .slide-prev');
    var next = document.querySelector('.optly-slider-container .slide-next');    
    
    slides.forEach(function(s,i) {
        var slideIcon = document.createElement('div');
        slideIcon.className = 'optly-slide-icon' + (i === 0 ? ' active' : '');
        iconsContainer.appendChild(slideIcon);
      	slideIcon.addEventListener('click', function() {
        	changeSlide(i);
        });
      slideIcons.push(slideIcon);
    });
    
    prev.addEventListener('click', prevSlide);
    next.addEventListener('click', nextSlide);
    
    function prevSlide() {
    	if (currentSlide === 0) {
      	currentSlide = slides.length - 1;
      } else {
      	currentSlide--;
      }
      changeSlide(currentSlide);
    }
    
    function nextSlide() {
    	if (currentSlide === slides.length - 1) {
      	currentSlide = 0;
      } else {
      	currentSlide++;
      }
      changeSlide(currentSlide);
    }
    
    function changeSlide(index) {
    	currentSlide = index;
			slides[0].style.marginLeft = '-' + index * 100 + '%';
      slideIcons.forEach(function(icon) {icon.classList.remove('active');});
      slideIcons[index].classList.add('active');
    }
      
  });
});
}

function checkLoad() {
    if (window.domCompleteTime && window.domCompleteTime < Date.now()) {
      setTimeout(function(){
        init();
      }, 500);
    } else {
        setTimeout(function(){
            checkLoad();
        }, 100);
    }
}
checkLoad();

function suggestedPetition(p) {
  return '' +
    '<div class="petition-card border-a">' +
    '   <div class="petition-list-item box box-basic bg-brighter mvn pan border-none-a">' +
    '       <div class="flex-embed  ">' +
    '           <div class="flex-embed-ratio flex-embed-16x9">' +
    '               <div class="flex-embed-content"><img src="' + p.image + '" alt="" class="image-cropper-nodrag position-absolute-center  "></div>' +
    '           </div>' +
    '       </div>' +
    '       <div data-view="petitions/show/components/gradient_thermometer" data-displayed_count="' + p.supporters + '"' +
    '           data-milestone_goal="' + p.goal + '" data-petition_status="active"' +
    '           data-is_in_signable_petition_card="true" data-render="true">' +
    '           <div class="gradient-thermometer">' +
    '               <div class="bg-light-gray type-m fit-finish-thermometer-bg ">' +
    '                   <div class="gradient-thermometer-fill fit-finish-thermometer-fill-height display-inline-block"' +
    '                       style="transition-duration: 0s; width: ' + (p.supporters / p.goal) * 100 + '%;"></div>' +
    '                   <div class="arrow-right-fit-finish display-inline-block position-relative"></div>' +
    '               </div>' +
    '           </div>' +
    '       </div>' +
     //'			 <div class="supporters-label" style="width: ' + (p.supporters / p.goal) * 100 + '%;">' + p.supporters.toLocaleString() + '</div>' +
    '       <div class="pts phs">' +
    '           <div style="height: 7.5em;" class="hide-overflow">' +
    '               <h4 class="mtn">' +
    '                   <a href="' + p.fullURL + '?utm_source=grow_us&utm_campaign=petitions_trend&source_location=petitions_show" class="link link-stealth js-title-text js-petition-card js-promoted-card display-block">' +
    '                       ' + p.heading + '' +
    '                   </a>' +
    '               </h4>' +
    '               <p class="type-s petition-description">' + p.description + '</p>' +
    '           </div>' +
    '           <div class="row pts pbm">' +
    '               <div class="col-xs-12">' +
    '                   <a class="btn btn-big btn-full btn-outline js-signable-petition-card-btn js-promoted-card js-sign-now" href="' + (oneClick ? p.fullURL + '/sign-now' : p.url) + '" target="_blank">' +
    '                       Sign the petition' +
    '                   </a>' +
    '               </div>' +
                    ( p.callUrl && p.callUrl.length ? (
    '               <div class="col-xs-12">' +
    '                   <a class="btn btn-big btn-full btn-outline js-signable-petition-card-btn js-promoted-card" id="call-btn-' + p.id + '">' +
    '                       Call' +
    '                   </a>' +
    '               </div>' 
                    ) : '' ) +
    '           </div>' +
    '       </div>' +
    '   </div>' +
    ( p.callUrl && p.callUrl.length ? (
    '<div class="hide-fully modal-wrap" id="call-modal-' + p.id + '">' +
    '  <div class="modal">' +
    '    <div id="call-modal-' + p.id + '-dialog" class="modal-dialog modal-big animate animate-zoom-in">' +
    '      <button class="modal-close link-stealth position-absolute position-right position-top pas js-toggle-modal">' +
    '        <span class="symbol symbol-close symbol-compact"></span>' +
    '      </button>' +
    '      <div class="p2a-container"></div>' +
    '    </div>' +
    '  </div>' +
    '</div>' 
    ) : '' ) +
    '</div>';
}

var pageHTML = '' +
    '<div class="emergency-banner pvs hide-fully">' +
'    <div class="container">' +
'        <div class="banner-inner"> <img src="https://static.change.org/psf-experiments/Excla.svg" alt="" class="mrxs"><b' +
'                class="type-brighter"> Need immediate voting assistance? Contact the Election' +
'                Protection Hotline: <a href="tel:+18666878683" class="type-brighter">866-OUR-VOTE</a> </b> </div>' +
'    </div>' +
'</div>' +
'<div class="page-hero">' +
'    <div class="container txt-c">' +
'        <h1 class="type-brighter">Join the thousands taking action every day</h1>' +
'    </div>' +
'</div>' +
'<div class="progress-stepper pvxxxl">' +
'    <div class="container">' +
'        <div class="row">' +
'            <div class="col-xs-12 col-lg-10 ' + (isSafari ? 'safari-steps' : '') + '">' +
'                <div class="progress-steps">' +
'                    <div class="progress-step arrange arrange-middle first-step">' +
'                        <div class="arrange-fit">' +
'                           <div class="mrxs progress-num type-subtle"> 1 </div>' +
'														<div class="mrxs progress-check hide-fully"><span class="symbol symbol-check type-brighter"></span></div>' +
'                        </div>' +
'                        <div class="arrange-fill"> <b>Sign up for text updates</b> </div>' +
'                    </div>' +
'                    <div class="progress-separator mhs"></div>' +
'                    <div class="progress-step arrange arrange-middle">' +
'                        <div class="arrange-fit">' +
'                            <div class="progress-num mrxs type-subtle"> 2 </div>' +
'                        </div>' +
'                        <div class="arrange-fill"> <b>Support election petitions</b> </div>' +
'                    </div>' +
'                    <div class="progress-separator mhs"></div>' +
'                    <div class="progress-step arrange arrange-middle">' +
'                        <div class="arrange-fit">' +
'                            <div class="progress-num mrxs type-subtle"> 3 </div>' +
'                        </div>' +
'                        <div class="arrange-fill"> <b>Take actions</b> </div>' +
'                    </div>' +
'                </div>' +
'            </div>' +
'        </div>' +
'    </div>' +
'</div>' +
'<div class="voting-updates-section section pvxxxl bg-yellowish">' +
'    <div class="container">' +
'        <div class="row">' +
'            <div class="col-xs-12 col-lg-8">' +
'                <div class="updates-heading txt-c"> <img src="https://static.change.org/psf-experiments/USA.svg" alt=""' +
'                        class="mbl">' +
'                    <h2 class="mtn mbxxl"><span class="type-branded">Stay informed</span> with voting updates for your' +
'                        state</h2>' +
'                </div>' +
'                <div class="updates-form"></div>' +
'            </div>' +
'        </div>' +
'    </div>' +
'</div>' +
'<div class="petitions-section section pvxxxl">' +
    '<div class="container">' +
    	'<div class="row">' +
    		'<div class="col-xs-12 col-lg-10 txt-c">' +
    			'<h2 class="mtn mbxxl"><span class="type-branded">No matter who wins </span> change happens every day</h2>' +
    		'</div>' +
    	'</div>' +
    	'<div class="row pbxxxl display-block">' +
    		'<div class="col-xs-4 txt-c milestone mbs"><img src="https://static.change.org/psf-experiments/voting-sign.png"><h1>86M+</h1><p>Election petition signatures</p></div>' +
        '<div class="col-xs-4 txt-c milestone mbs"><img src="https://static.change.org/psf-experiments/voting-created.png"><h1>49K+</h1><p>Election petitions created</p></div>' +
        '<div class="col-xs-4 txt-c milestone mbs"><img src="https://static.change.org/psf-experiments/voting-victory.png"><h1>562</h1><p>Election petition victories</p></div>' +
    	'</div>' +
    '</div>' +
'    <div class="container">' +
'        <div class="row">' +
'            <div class="col-xs-12 col-lg-10 txt-c">' +
'                <h2 class="mtn mbxxl"><span class="type-branded">Sign election petitions</span> that still need more support' +
'                </h2>' +
'            </div>' +
'        </div>' +
'        <div class="row petitions"> </div>' +
'        <div class="row load-more">' +
'            <div class="col-xs-12 col-lg-10">' +
'                <button class="btn btn-full btn-big optly-load-more-petitions">Load More</button>' +
'            </div>' +
'        </div>' +
'        <div class="row milestones hide-fully">' +
'            <div class="col-xs-12 txt-c">' +
'                <h3 class="mtn">Milestones</h3>' +
'            </div>' +
'        </div>' +
'        <div class="row load-more hide-fully"> <button class="btn btn-full btn-big">Load More</button> </div>' +
'    </div>' +
'</div>' +
'<div class="start-petition-section section bg-yellowish pvxxxl">' +
'    <div class="container">' +
'        <div class="row">' +
'            <div class="col-xs-12 col-lg-8 offset-lg-2 txt-c">' +
'                <h2 class="mtn"><span class="type-branded">Protect democracy.</span> Start a petition for your community and it could be featured here</h2> <a id="sap-btn" href="https://www.change.org/start-a-petition" ' +
'                    class="start-btn btn btn-big type-branded bg-brighter border-a border-branded"> I’m ready to' +
'                    start a petition </a>' +
'            </div>' +
'        </div>' +
'    </div>' +
'</div>' +
'<div class="petition-starters-section section pvxxxl">' +
'    <div class="container">' +
'        <div class="row">' +
'            <div class="col-xs-12 col-lg-8 offset-lg-2 txt-c">' +
'                <h2 class="mtn">Hear from petition starters</h2>' +
'            </div>' +
'        </div>' +
    '<div class="row"><div class="col-xs-12 col-lg-8 offset-lg-2 txt-c mvxl">' + 

    '<div class="optly-slider-container"><div class="optly-slider-control slide-prev"><span class="symbol symbol-bracket-left type-branded mrn"></span></div>' +
    '<div class="optly-slider">' +
    //'<div class="embed-container slide"><iframe class="pstarter-video" src="https://www.youtube.com/embed/VOJTtkmLuFk" frameborder="0" allowfullscreen></iframe></div>' +
    '<div class="embed-container slide"><iframe class="pstarter-video" width="560" height="315" src="https://www.youtube.com/embed/QUMCfAQUNxg" frameborder="0" allowfullscreen></iframe></div>' +
    '<div class="embed-container slide"><iframe class="pstarter-video" width="560" height="315" src="https://www.youtube.com/embed/VM4cSg-SLrg" frameborder="0" allowfullscreen></iframe></div>' +
    '<div class="embed-container slide"><iframe class="pstarter-video" width="560" height="315" src="https://www.youtube.com/embed/86nKZH1N8pM" frameborder="0"  allowfullscreen></iframe></div>' +
    '</div>' +
    '<div class="optly-slider-control slide-next"><span class="symbol symbol-bracket-right type-branded mrn"></span></div>' +
    '</div><div class="optly-slider-icons"></div></div>' +
'    </div>' +
'</div>' +
'<div class="voted-section bg-yellowish section pvxxxl hide-fully">' +
'    <div class="container">' +
'        <div class="row">' +
'            <div class="col-xs-12 col-lg-8 offset-lg-2 txt-c voted-inner">' +
'                <h2 class="mtn"><span class="type-branded">Show your friends you believe every vote counts.</span> Try our Instagram filter</h2>' +
'                <div class="voted-sticker-new">' +
'                    <img src="https://static.change.org/psf-experiments/BallotBox.png" alt="">' +
'                </div> <a id="ig-filter" class="voted-btn btn btn-big type-branded bg-brighter display-block" href="https://www.instagram.com/ar/377968406853732/" target="_blank"> Open Instagram </a> <a id="fb-filter" class="voted-btn btn btn-big type-branded bg-brighter mts display-block" href="https://www.facebook.com/fbcameraeffects/tryit/377968406853732/" target="_blank"> Open Facebook </a>' +
'            </div>' +
'        </div>' +
'    </div>' +
'</div>' +
'<div class="countdown-section section hide-fully">' +
'    <div class="container">' +
'        <div class="row">' +
'            <div class="col-xs-12 col-lg-8 offset-lg-2 txt-c countdown-heading"> <img' +
'                    src="https://static.change.org/psf-experiments/Countdown.svg" alt="" class="mbs">' +
'                <h2 class="mtn type-brighter mbxxl">Countdown to November 3rd</h2>' +
'            </div>' +
'        </div>' +
'        <div class="row display-block">' +
'            <div class="col-xs-6 txt-c countdown-box-wrap">' +
'                <div class="countdown-box">' +
'                    <h1 class="days">0</h1>' +
'                </div>' +
'                <h5 class="type-brighter">Days</h5>' +
'            </div>' +
'            <div class="col-xs-6 txt-c countdown-box-wrap">' +
'                <div class="countdown-box">' +
'                    <h1 class="hours">0</h1>' +
'                </div>' +
'                <h5 class="type-brighter">Hours</h5>' +
'            </div>' +
'            <div class="col-xs-6 txt-c countdown-box-wrap">' +
'                <div class="countdown-box">' +
'                    <h1 class="minutes">0</h1>' +
'                </div>' +
'                <h5 class="type-brighter">minutes</h5>' +
'            </div>' +
'            <div class="col-xs-6 txt-c countdown-box-wrap">' +
'                <div class="countdown-box">' +
'                    <h1 class="seconds">0</h1>' +
'                </div>' +
'                <h5 class="type-brighter">seconds</h5>' +
'            </div>' +
'        </div>' +
'    </div>' +
'</div>';

var petitions = [
  {
    heading: "Justice for Crystal Mason",
    image: "https://assets.change.org/photos/9/qk/um/hsQKUmSFVBrJNRd-800x450-noPad.jpg?1564487702",
    description: "Texas resident Crystal Mason is one of the most recent victims of voter disenfranchisement, a form of voter suppression that affects more than six million Americans. On March 28, 2018, Judge Ruben Gonzalez sentenced Ms. Mason to five years in prison for “voting illegally as a felon on probation,” and more recently turned down Ms. Mason’s bid for a new trial. Ms. Mason has always maintained that she was unaware that her name had been purged from electoral roll and was ineligible to vote in the 2016 presidential election. Ms. Mason and her legal team are working together to appeal the decision to a higher court.",
    url: "chng.it/TCXfMKWr",
    fullURL: "https://www.change.org/p/greg-abbott-stop-gov-greg-abbott-from-limiting-ballot-drop-boxes-to-1-per-county-in-texas-4ec30f7a-0433-4146-b4f4-a9c650b708f6",
    supporters: 574047,
    goal: 1000000,
    id: 13292213,
    callUrl: "hIzCySw"
  },
  {
    heading: "Teens 16 and Older Want To Vote",
    image: "https://assets.change.org/photos/1/bn/ll/lgbnLLEvOoNZFmY-800x450-noPad.jpg?1603636586",
    description: "Hello! I am a 15 year old girl from the United States and I refuse to not be heard anymore. Teens 16 and older deserve to be able to vote. With the up coming climate crisis the ability to decide how it’s going to be taken care of should be in the hands of those who are going to live through it. Also we need more funding being directed towards education, all educations, child daycare through college. We need an opportunity to decide. The youth is fierce when it comes to changing the world, we have already seen that to be true. We will change it, the only thing is a matter of how. We could be allowed to vote, or we can clog your streets, and yell outside your town halls, and scream for what we want, what we need.",
    url: "chng.it/LZjTWcCW",
    fullURL: "https://www.change.org/p/alexandria-ocasio-cortez-teens-16-and-older-want-to-vote",
    supporters: 1536,
    goal: 2500,
    id: 25468570,
    callUrl: ""
  },
  {
    heading: "Count every vote in the 2020 election",
    image: "https://assets.change.org/photos/6/ct/cc/JpcTccRQKfkxoKI-800x450-noPad.jpg?1604330808",
    description: "Most of us believe everyone counts—no matter our race, accent, or zip code. We don't get to pick who can vote and choose how votes are counted. When voter intimidation sows chaos and stokes fear, it can stop us from voting at all.  But you can stand up for Democracy by demanding that your secretary of state counts every vote in your state.",
    url: "chng.it/nfX7hbbR",
    fullURL: "https://www.change.org/p/secretaries-of-state-count-every-vote",
    supporters: 4454,
    goal: 5000,
    id: 25621755,
    callUrl: ""
  }
];
}}, {"value": "<style>html, body {\n\toverflow-x: hidden;\n}\n.optly h2 {\n\tfont-weight: bold;\n}\n.optly .emergency-banner {\n\tbackground: #B32C0E;\n}\n.optly .emergency-banner .banner-inner {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.optly .page-hero {\n    height: 230px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-image: url(https://static.change.org/psf-experiments/Hero_Sticker_Desk.png);\n    background-size: cover;\n    background-position: center;\n}\n@media screen and (max-width: 991px) {\n  .optly .page-hero {\n\t\tbackground-image: url(https://static.change.org/psf-experiments/Hero-Sticker-Mobile.png);\n  }\n}\n.optly .progress-stepper .row,\n.optly .voting-updates-section .row,\n.optly .petitions-section .row,\n.optly .petition-starters-section .row,\n.optly .start-petition-section .row,\n.optly .voted-section .row, \n.optly .countdown-section .row {\n    display: flex;\n    justify-content: center;\n}\n.optly .petitions-section .petitions.row {\n\tdisplay: block;\n}\n.optly .progress-steps {\n    display: flex;\n    align-items: center;\n  justify-content: center;\n}\n.optly .progress-num {\n    border: 2px solid #DBD9DB;\n    box-sizing: border-box;\n    height: 24px;\n    width: 24px;\n    border-radius: 50%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-weight: bold;\n    font-size: 12.8px;\n    line-height: 19px;\n    color: #ADACAD;\n}\n.optly .progress-check {\n\t  background: #3ECA8A;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 24px;\n    width: 24px;\n    left: 0px;\n    top: 0px;\n    border-radius: 50%;\n}\n.optly .progress-check span {\n \t  margin: 0 !important;\n    font-size: 12px;\n}\n.optly .progress-step b {\n    font-weight: bold;\n    font-size: 12.8px;\n    line-height: 19px;\n}\n.optly .progress-separator {\n    background: #DBD9DB;\n    height: 2px;\n    width: 48px;\n    border-radius: 22px;\n}\n.optly .petition-card {\n\tborder-radius: 5px;\n    overflow: hidden;\n}\n.optly .start-btn {\n\tborder-color: #ec2c22 !important;\n}\n.optly .voting-updates-section .updates-heading {\n\tdisplay: flex;\n    flex-direction: column;\n    justify-content: center;\n}\n.optly .voted-petition-section .voted-inner {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n.optly .voted-sticker {\n  max-height: \n\tposition: relative;\n    display: flex;\n    justify-content: center;\n    padding: 35px 0;\n    margin-bottom: -15px;\n    margin-top: -15px;\n}\n.optly .voted-sticker svg {\n\tposition: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%,-50%);\n    height: 100%;\n}\n.optly .voted-sticker img {\n    position: relative;\n}\n.optly .voted-btn {\n    position: relative;\n    border-color: #ec2c22 !important;\n    padding-right: 40px;\n    padding-left: 40px;\n}\n.optly .countdown-section {\n\tbackground: #B32C0E;\n}\n@media screen and (max-width: 991px) {\n\t.optly .countdown-section .row {\n    flex-wrap: wrap;\n  }\n}\n.optly .countdown-heading {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n}\n.optly .countdown-box-wrap {\n    width: auto;\n}\n.optly .countdown-box {\n    width: 148px;\n    height: 146px;\n    background: #FFFFFF;\n    border-radius: 4px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n.optly .countdown-box h1 {\n    font-weight: bold;\n    font-size: 73.8636px;\n}\n\n.optly .advocacy-actionwidget {\n    border: 0 !important;\n    box-shadow: none !important;\n}\n.optly .modal-dialog {\n \tbackground: #dad9db; \n}\n.optly .section {\n\tpadding-top: 72px !important;\n\tpadding-bottom: 72px !important;  \n}\n\n.pstarter-video {\n\tborder-radius: 5px;\n  margin-bottom: 20px;\n}\n@media screen and (max-width: 991px) {\n  .hide-fully-mobile {\n  \tdisplay: none !important;\n  }\n  .optly .section {\n\tpadding-top: 48px !important;\n\tpadding-bottom: 48px !important;  \n}\n}\n\n.voted-btn {\n\tmax-width: 300px;\n  margin: 0 auto;\n}\n\n.milestone img {\n \tdisplay: block;\n  max-width: 150px;\n  margin: 0 auto;\n}\n\n.embed-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 600px; margin: 0 auto; } .embed-container iframe, .embed-container object, .embed-container embed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }\n\n.safari-steps {\n  max-width: 200px;\n}\n\n.optly-slider-container {\n\t  display: flex;\n    justify-content: center;\n}\n.optly-slider-control {\n    display: flex;\n    align-items: center;\n    padding: 0 30px;\n    cursor: pointer;\n}\n\n.optly-slider {\n\t\twidth: 600px;\n    display: flex;\n    max-width: 100%;\n    overflow: hidden;\n}\n.optly-slider .slide {\n    position: relative;\n    padding-bottom: 56.25%;\n    height: 0;\n    overflow: hidden;\n    max-width: 600px;\n    margin: 0;\n    min-width: 100%;\n    transition: margin-left .5s ease-in-out;\n}\n\n.optly-slider-icons {\n    display: flex;\n    justify-content: center;\n    margin-top: 24px;\n}\n\n.optly-slide-icon {\n    width: 10px;\n    height: 10px;\n    background: #DBD9DB;\n    border-radius: 50%;\n    margin: 0 4px;\n    cursor: pointer;\n}\n.optly-slide-icon.active {\n    background: #EC2C22;\n}\n\n@media (max-width: 767px) {\n  .safari-steps {\n    max-width: 150px;\n  }\n}\n\n@media (max-width: 420px) {\n  .safari-steps {\n    max-width: 120px;\n  }\n  .optly-slider-control {\n    padding: 0px 9px;\n\t}\n  .optly-slider .slide {\n    padding-bottom: 117.25%;\n\t}\n}\n\n.voted-sticker-new img {\n  display: block;\n  max-width: 300px;\n  margin: 20px auto;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "831338CC-7BC6-48D2-828C-EF3EC597982F"}, {"selector": "#embed-frame-6izqt", "dependencies": [], "attributes": {}, "type": "attribute", "id": "0FB72B84-1B3F-4AA7-A7BA-B993479672F3", "css": {}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19175860632", "integrationSettings": null}], "id": "19183870655", "weightDistributions": null, "name": "[niftic] - Voting - Landing Page", "groupId": null, "commitId": "19323641949", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19178110517"], "experiments": [{"weightDistributions": [{"entityId": "19187810228", "endOfRange": 5000}, {"entityId": "19187430208", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[nifitc] - MA Landing - Weekly Breakdowns", "bucketingStrategy": null, "variations": [{"id": "19187810228", "actions": [], "name": "Original"}, {"id": "19187430208", "actions": [{"viewId": "19178110517", "changes": [{"dependencies": [], "type": "custom_code", "id": "c274bcb3cc6a4568819f1a84a5358d07", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('label[for="use_custom_amount"]').then(function(customAmount) {
  
  var amountContainer = customAmount.parentNode;
  var firstAmount = document.querySelector('.js-subscription-plan-0 [data-testid="subscription-plan-label-amount"]');
  var value = firstAmount.innerText.match(/\d+/);
  var currencySymbol = firstAmount.innerText[value.index - 1];
  
  var weeklyBreakdown = document.createElement('div');
  weeklyBreakdown.classList = 'weekly-breakdown';
  function adjustBreakdown(amt) {
    var selectedAmount = parseInt(amt);
    var weekly = (selectedAmount/4).toFixed(2);
  	weeklyBreakdown.innerHTML = 'Contributing ' + currencySymbol + selectedAmount + ' works out to only <strong>' + currencySymbol + weekly + '/week!</strong>';
  }
  
  adjustBreakdown(value[0]);
  
  amountContainer.appendChild(weeklyBreakdown);
  
  /* Adjust Dynamically */
  document.querySelectorAll('input[name="amount"]').forEach(function(radio) {
    radio.addEventListener("change", function(event) {
      var amt = event.target.value;
      adjustBreakdown((amt/100));
    });
  });
  
  var amountInput = document.getElementById('custom_amount');
  amountInput.addEventListener('input', function() {
  	setTimeout(function() {
    	adjustBreakdown(amountInput.value);
    }, 50);
  }, false);
  
});
}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19170350345", "integrationSettings": null}], "id": "19201140593", "weightDistributions": null, "name": "[nifitc] - MA Landing - Weekly Breakdowns", "groupId": null, "commitId": "19177840780", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 5000, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19224620759"], "experiments": [{"weightDistributions": [{"entityId": "19225591031", "endOfRange": 1000}, {"entityId": "19224620760", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Home - SAP Awareness", "bucketingStrategy": null, "variations": [{"id": "19225591031", "actions": [{"viewId": "19224620759", "changes": [{"dependencies": [], "type": "custom_code", "id": "744CAA69-716D-485F-A6C4-D1F27C6103C5", "value": function($){var utils = window.optimizely.get("utils");

window.localStorage.setItem('home_sap_awareness', 'control');
}}]}], "name": "Original"}, {"id": "19224620760", "actions": [{"viewId": "19224620759", "changes": [{"dependencies": [], "type": "custom_code", "id": "933ef2df98db47cbb91aa375c03cea12", "value": function($){var utils = window.optimizely.get("utils");

function fireEvent(ev, sub){
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent(ev, sub);
  });
}

utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('.home-intro').then(function(homeIntro) {
    
    var sapCallout = document.createElement('div');
    sapCallout.classList = 'sap-callout xs-mbxl';
    sapCallout.innerHTML = '<h5 class="type-branded">NEW!</h5>' + 
      '<img class="campaigners" src="https://static.change.org/psf-experiments/sap-support.png">' +
      '<h4 class="mts">Our petition experts are waiting to support you</h4>' + 
      '<p>Our team of petition experts are live now, ready to look at your petition and give you personalized advice over SMS. They’ve already helped 3,462 petition starters over SMS this week!</p>';
      
    homeIntro.appendChild(sapCallout);
    
  });
});

window.localStorage.setItem('home_sap_awareness', 'v1');
}}, {"value": "<style>.sap-callout {\n \tmax-width: 550px;\n  margin: 0 auto;\n}\n\n.sap-callout .campaigners {\n \tdisplay: block;\n  max-width: 100px;\n  margin: 0 auto;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "5CF3DFB2-FF53-404F-A188-E628562ABCB6"}]}], "name": "Variation #1"}, {"id": "19201474503", "actions": [{"viewId": "19224620759", "changes": [{"dependencies": [], "type": "custom_code", "id": "E4EA1434-D3B3-42AE-A117-CB1C034A60A2", "value": function($){var utils = window.optimizely.get("utils");

function fireEvent(ev, sub){
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent(ev, sub);
  });
}

utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('.home-intro').then(function(homeIntro) {
    
    var sapCallout = document.createElement('div');
    sapCallout.classList = 'sap-callout xs-mbxl';
    sapCallout.innerHTML = '<h5 class="type-branded">NEW!</h5>' + 
      '<img class="campaigners" src="https://static.change.org/psf-experiments/sap-support.png">' +
      '<h4 class="mts">Our petition experts are waiting to support you</h4>' + 
      '<p>Start your petition now and get free expert petition support from a team with +100 years of experience.  Our staff will reach out to you via SMS and help you pursue your goals every day.</p>';
      
    homeIntro.appendChild(sapCallout);
    
  });
});

window.localStorage.setItem('home_sap_awareness', 'v2');
}}, {"value": "<style>.sap-callout {\n \tmax-width: 550px;\n  margin: 0 auto;\n}\n\n.sap-callout .campaigners {\n \tdisplay: block;\n  max-width: 100px;\n  margin: 0 auto;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "2A8410C0-30EC-452D-82EA-3672B1BBFC9B"}]}], "name": "Variation #2"}, {"id": "19235311949", "actions": [{"viewId": "19224620759", "changes": [{"dependencies": [], "type": "custom_code", "id": "7122EAD7-08EA-418A-80EB-4AD22941EC68", "value": function($){var utils = window.optimizely.get("utils");

function fireEvent(ev, sub){
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent(ev, sub);
  });
}

utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('.home-intro').then(function(homeIntro) {
    
    var sapCallout = document.createElement('div');
    sapCallout.classList = 'sap-callout xs-mbxl';
    sapCallout.innerHTML = '<h5 class="type-branded">NEW!</h5>' + 
      '<h4 class="mts">Get Free Expert Support</h4>' + 
      '<p>We have helped thousands of petition starters to find more signers and reach victory.  We can help you as well.</p>';
      
    homeIntro.appendChild(sapCallout);
    
  });
});

window.localStorage.setItem('home_sap_awareness', 'v3');
}}, {"value": "<style>.sap-callout {\n \tmax-width: 550px;\n  margin: 0 auto;\n}\n\n.sap-callout .campaigners {\n \tdisplay: block;\n  max-width: 100px;\n  margin: 0 auto;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "36EE8EF8-7D50-46FA-BB2A-CC9164C0FACA"}]}], "name": "Variation #3"}], "audienceIds": null, "changes": null, "id": "19232541140", "integrationSettings": null}], "id": "19225591030", "weightDistributions": null, "name": "[niftic] - Home - SAP Awareness", "groupId": null, "commitId": "19320172162", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19202872745"], "experiments": [{"weightDistributions": [{"entityId": "19253790493", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Combo - Emergency Money", "bucketingStrategy": null, "variations": [{"id": "19225473041", "actions": [{"viewId": "19202872745", "changes": [{"dependencies": [], "type": "custom_code", "id": "f4af1e1d6fd9446d974a8a7f217e5731", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "19253790493", "actions": [{"viewId": "19202872745", "changes": [{"dependencies": [], "type": "custom_code", "id": "125b7b209f3c4e76ae9c7b7c5a785f02", "value": function($){var utils = window.optimizely.get("utils");

var templateData = getTemplateData();

if (templateData.callTool || templateData.sms) {
   utils.waitForElement('.row.match-height > .psf-combo-shaded-round-border').then(function(card) {
    utils.waitForElement('.btn.js-share-btn').then(function(shareBtn) {
      
      var cardContent = card.querySelector('.phxxl.ptl.xs-pam');
      var therm = cardContent.querySelector('.col-xs-12.phn.mbm');
      var comboButtons = card.querySelector('.psf-combo-buttons');
      therm.classList.add('hide-fully');
      var promoteBtn = document.querySelector('.js-promote');
      promoteBtn.classList.remove('btn-action');
      promoteBtn.classList.add('mtxs', 'btn-outline');
      promoteBtn.innerText = promoteBtn.innerText.replace('Yes, ', '');
      // document.querySelector('[data-view="psf/combo/components/accepted_payment_types"]').classList.add('hide-fully');
      shareBtn.innerText = 'I’ll share this petition';
      shareBtn.parentNode.insertBefore(promoteBtn, shareBtn.nextSibling);
      
      // SMS Collection
      if (templateData.sms) {
       	var hs = card.querySelectorAll('h1');
        hs.forEach(function(h){
          h.innerHTML = '<span class="type-branded">Stay informed</span> on actions to help this petition win!';  
        });
        var smsCall = document.createElement('div');
        
        var paragraphs = card.querySelectorAll('.phxxl.ptl.xs-pam div > p');
        var first = true;
        paragraphs.forEach(function(p){
          if (first) {
           	p.innerHTML = 'Right now, millions of Americans are hurting financially from the COVID-19 pandemic. We’re relying on Congress to provide more relief – because one $1,200 check wasn’t nearly enough.<br><br>Lawmakers need to hear directly from you. We can text you with timely actions to this petition. Can you join the thousands of heroes taking the next step?';
            first = false;
            smsCall.innerHTML = '<div class="psf-combo-buttons position-block-center">' + 
          	'<a id="sms-btn" class="btn btn-action btn-big btn-full mvxs">I want text updates</a>' + 
          '</div>';
        		p.parentNode.insertBefore(smsCall, p.nextSibling);
          } else {
          	p.classList.add('hide-fully');
          }
        });
        card.querySelector('.phxxl.ptl.xs-pam div > ul').classList.add('hide-fully');
        
        // SMS P2A
        var p2a = document.createElement('div');
        p2a.classList = 'advocacy-actionwidget mtl hide-call';
        p2a.setAttribute('data-domain', 'p2a.co');
        p2a.setAttribute('data-shorturl', templateData.smsShortUrl);
        p2a.setAttribute('data-responsive', 'true');
        p2a.setAttribute('style', '');

        var smsCallCard = card.cloneNode(true);
        smsCallCard.innerHTML = '';
        smsCallCard.appendChild(p2a);
        (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'advocacy-actionwidget-code'));

        smsCallCard.classList.add('hide-fully', 'call-card');
        card.parentNode.insertBefore(smsCallCard, card);

        document.getElementById('sms-btn').onclick = function() {
          card.classList.add('hide-fully');
          smsCallCard.classList.remove('hide-fully');
					window.scrollTo(0,0);
          utils.waitForElement('.advocacy-actionwidget iframe').then(function(iframe) {
            iframe.setAttribute('scrolling', 'yes');
          });

          utils.waitUntil(function() { return !!window.App; }).then(function() {
            window.App.trackEvent('optly_sms_collection');
          });
        };
      }
    });
  });
}
}}, {"value": "<style>.shareable-scroller {\n  overflow: hidden;\n  overflow-x: scroll;\n  overflow-y: hidden;\n  white-space: nowrap;\n  padding: 25px;\n}\n\n.shareable-scroller .scroll-item {\n  max-width: 220px;\n  text-align: center;\n}\n\n.shareable-scroller .scroll-item {\n \tdisplay: inline-block;\n  vertical-align: top;\n  margin-right: 25px;\n}\n\n.shareable-scroller .scroll-item img {\n  box-shadow: 0px 1px 6px rgba(115, 114, 115, 0.4);\n}\n\n.shareable-scroller .scroll-item a {\n  margin-top: 20px;\n  display: inline-block;\n  text-decoration: none;\n  font-weight: bold;\n  padding: 8px 20px;\n  border: 2px solid;\n  border-radius: 5px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "ea0cee16099f426196c9265294cd025f"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19273350741", "integrationSettings": null}], "id": "19263430867", "weightDistributions": null, "name": "[niftic] - Combo - Emergency Money", "groupId": null, "commitId": "19197125083", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "dc9bfba8799d4f6f8119af19c0212c8e", "value": function($){window.getTemplateData = function() {
  var pId = parseInt(window.changeTargetingData.petition.id);
  var d = {
   	20990048: {
      callTool: false,
      sharables: false,
      sms: true,
    	callShortUrl: '',
      copylink: 'http://chng.it/9StkRYrG',
      sharableImages: [],
      smsShortUrl: '88RDvxC'
    }
  };
  return d[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19320090372"], "experiments": [{"weightDistributions": [{"entityId": "19310490589", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Dashboard - Awareness Survey", "bucketingStrategy": null, "variations": [{"id": "19341690180", "actions": [], "name": "Original"}, {"id": "19310490589", "actions": [{"viewId": "19320090372", "changes": [{"value": function($){var utils = window.optimizely.get("utils");

utils.waitUntil(function() { return !!window.hj; }).then(function() {

  var hjValue = window.localStorage.getItem('home_sap_awareness');
  
  window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
  hj('trigger', 'sap_awareness_' + hjValue);

  window.localStorage.removeItem('home_sap_awareness');
});
}, "dependencies": [], "type": "custom_code", "id": "bf7717e8c05f4e798ccfcd5066a48fb3"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19331380727", "integrationSettings": null}], "id": "19314450404", "weightDistributions": null, "name": "[niftic] - Dashboard - Awareness Survey", "groupId": null, "commitId": "19337150133", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19338570141"], "experiments": [{"weightDistributions": [{"entityId": "19332010378", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Video Submission - Landing Page", "bucketingStrategy": null, "variations": [{"id": "19290881159", "actions": [], "name": "Original"}, {"id": "19332010378", "actions": [{"viewId": "19338570141", "changes": [{"dependencies": [], "type": "custom_code", "id": "cd4f55eda05b48f5bd6246f5132d4c03", "value": function($){var utils = window.optimizely.get("utils");

function fireEvent(ev, sub) {
  if (!!window.App) {
    window.App.trackEvent(ev, sub);
  } else {
    window.trackEvent(ev, sub);
  }
}

var formHTML = '<div class="container"><h3><span style="background: yellow">What do you want the new administration to focus on in its first 100 days?</span></h3> <p id="subcopy">Your video will make an impact!</p><div class="video-form mtl pbxl"> <div class="control-group"> <label for="first_name"><strong>First Name<span class="type-branded">*</span></strong></label> <div class="control"> <div class="input"> <input type="text" name="first_name"/> </div></div></div><div class="control-group"> <label for="last_name"><strong>Last Name<span class="type-branded">*</span></strong></label> <div class="control"> <div class="input"> <input type="text" name="last_name"/> </div></div></div><div class="control-group"> <label for="zip"><strong>Zip Code<span class="type-branded">*</span></strong></label> <div class="control"> <div class="input"> <input type="text" name="zip"/> </div></div></div><p id="age-ask" class="mbxs"><strong>Are you over 18?<span class="type-branded">*</span></strong></p><button id="over-18" class="btn btn-action btn-big mrxxs">Yes</button> <button id="under-18" class="btn btn-big">No</button> <p id="redirect-disclaimer" class="mtl">Great! We’ll direct you to another site where you can upload your story.</p><div class="consent-form hide-fully mtl"><p>If you’re under 18, please email the signed consent form and your submission to <a href="mailto:stories@change.org">stories@change.org</a>.</p></div><a id="submit" class="btn btn-action btn-big mts">Continue to upload on Box</a> <div id="acknowledge" class="mtm"> <div class="type-s type-weak"><div id="video-acknowledge" class="control-group mvxxs"><div class="control"><div class="check "><label id="disclaimer-label" class=""><input type="checkbox" name="video" id="video" checked="checked" class="mrxxs mtxxxs">I acknowledge that by submitting this video it becomes the property of Change.org, and I grant a worldwide and perpetual license for it to be used, modified and publicly distributed for promotional and marketing purposes. I also acknowledge that some of my information may be made public, and I agree to receive the consent of anyone who appears in or is heard in my video.</label></div></div></div></div></div></div></div>';

function createInput(label, name) {
  var cg = document.createElement('div');
  cg.classList = 'control-group';
  cg.innerHTML = '<label for="'+name+'"><strong>'+label+'<span class="type-branded">*</span></strong></label> <div class="control"> <div class="input"> <input type="text" name="'+name+'"/> </div></div>';
  return cg;
}

function init() {
utils.waitForElement('#app.type-loaded').then(function() {
  utils.waitForElement('#yourdemocracy').then(function(storyContainer) {
		//document.body.classList.remove('loading');
    
    var form = document.createElement('div');
    form.innerHTML = formHTML;
    storyContainer.appendChild(form);


    var windowTopic = "";

    if(window.location.search && window.location.search.includes('topic=')) {
      windowTopic = window.location.search.substring(1).split('topic=')[1];
      if (windowTopic.includes('&')) {
        windowTopic = windowTopic.split('&')[0];
      }
    }

    var headline = storyContainer.querySelector('h3');
    var videoForm = storyContainer.querySelector('.video-form');
    var over18 = true;
    var over18Btn = document.getElementById('over-18');
    var under18Btn = document.getElementById('under-18');
    var redirectDisclaimer = document.getElementById('redirect-disclaimer');
    var consentForm = storyContainer.querySelector('.consent-form');
    var acknowledge = document.getElementById('acknowledge');
    var checkbox = storyContainer.querySelector('input[name="video"]');
    var boxUrl = 'https://change.app.box.com/f/2ce4d8f185554a99b53e25593041fb76';

    switch (windowTopic) {
      case 'taskforcenurse':
        boxUrl = 'https://change.app.box.com/f/6bfe499ed7e148e89c957bd9012cf45b';
    	  headline.querySelector('span').innerText = 'Why do you want a nurse appointed to the Covid-19 task force?';
        break;
      
      case 'cancel-student-loans':
        boxUrl = 'https://change.app.box.com/f/0e7941678b394590b24a0942cb0983da';
        headline.querySelector('span').innerText = 'How has student loan debt affected you, and what would it mean for all your debt to be cancelled?';
        break;
      
      case 'emergencymoney':
        boxUrl = 'https://change.app.box.com/f/013f8a5424504bc79eb86aeb59b14210';
    	  headline.querySelector('span').innerText = 'How is COVID-19 affecting your family’s finances and why do you need a monthly check until this crisis is over?';
        document.getElementById('subcopy').innerHTML = 'Record a 30-second video to share your story. Phone videos work great!';
        break;

      case 'freerebekah':
        boxUrl = 'https://change.app.box.com/f/b78a7dee31fb4920b31fbb60fbc28587';
    	  headline.querySelector('span').innerText = 'Tell us why you believe people like Rebekah should be allowed to tell the truth without retribution.';
        document.getElementById('subcopy').innerHTML = 'In your video you can answer the questions:<br />Rebekah Jones should be free because _______.<br />I am a data scientist, and I think it’s wrong to imprison people for telling the truth because ____.';
        break;
        
      case 'end-probation-for-wallace':
        boxUrl = 'https://change.app.box.com/f/66250d5d4eb445949073da05f883b9b5';
        headline.querySelector('span').innerText = 'How does Wallace inspire you and why should his probation be over?';
        break;
        
      case 'tell-our-stories':
        boxUrl = 'https://change.app.box.com/f/ae257f44854a4254b8413a294c1f8ed5';
        headline.querySelector('span').innerText = 'Why is it important to you to #TellOurStories, stories of Asian American communities?';
        document.getElementById('subcopy').innerHTML = 'Click <a href="https://youtu.be/6EvZInT1cH4" target="_blank">here</a> to watch an example';
        document.getElementById('disclaimer-label').innerText = 'I acknowledge that by submitting this video it becomes the property of Change.org, and I grant a worldwide, perpetual, sublicenseable license for it to be used, modified and publicly distributed for promotional and marketing purposes. I also acknowledge that some of my information may be made public, and I agree to receive the consent of anyone who appears in or is heard in my video.';
        break;
        
      case 'protect-trans-youth':
        boxUrl = 'https://change.app.box.com/f/9ae1d92a5b194425ac0f88e709e670e7';
        headline.querySelector('span').innerText = 'Why do you want your state legislators to protect trans youth? What’s at risk for you if your state passes anti-trans legislation?';
        break;
      
      case 'pride':
        boxUrl = 'https://change.app.box.com/f/1423ae32398044d1b0fae0f19556852d';
        headline.querySelector('span').innerText = 'What does Pride mean to you?';
        document.querySelector('label[for="zip"]').innerHTML = '<strong>Postal Code<span class="type-branded">*</span></strong>';
        break;
        
      case 'ethiopia':
        boxUrl = 'https://change.app.box.com/f/f77d7efc064e4498bed48d82142cd852';
        headline.querySelector('span').innerText = 'Can you record a video of you telling Congresswoman Karen Bass that what is happening in Ethiopia IS a genocide, and ask her to protect the people of Tigray?';
        document.getElementById('subcopy').innerHTML = 'If you have family in Tigray or have seen images of the genocide, please share what you have witnessed.';
        break;
        
      case 'emilys-wonder-lab':
        boxUrl = 'https://change.app.box.com/f/23df296cb67b47769326c471578960f0';
        headline.querySelector('span').innerText = 'Why do you want Netflix to continue making episodes of Emily’s Wonder Lab?';
        document.getElementById('subcopy').innerHTML = 'What is your favorite part of the show (think: the best experiments, why you find it inspiring, etc.)?';
        break;
        
      case 'canada-wildfires':
        boxUrl = 'https://change.app.box.com/f/a62f535481264e988aceefc4f919937b';
        headline.querySelector('span').innerText = 'How are the wildfires in BC affecting you and why do you think a state of emergency needs to be declared?';
        document.getElementById('subcopy').innerHTML = 'Record a 30-second video to share with Premier Horgan and Emergency Management BC. Phone videos work great!';
        document.querySelector('label[for="zip"]').innerHTML = '<strong>Postal Code<span class="type-branded">*</span></strong>';
        break;
        
      case 'riis-beach':
        boxUrl = 'https://change.app.box.com/f/163742b0d2a14d05a2a499f690a259f7';
        headline.querySelector('span').innerText = 'Can you take a moment to share your connection to Riis and your thoughts on what you want to see happen to the land that shelters our beach?';
        document.getElementById('subcopy').innerHTML = 'Please share your thoughts in writing below, or record a quick selfie video vocalizing why Riis matters to you.';
        var inputFour = createInput('What does Riis mean to you?', 'mean_to_you');
        var inputFive = createInput('When the old hospital buildings are demolished, what is your vision for this space?', 'vision');
        var ageAsk = document.getElementById('age-ask');
        ageAsk.parentNode.insertBefore(inputFour, ageAsk);
        ageAsk.parentNode.insertBefore(inputFive, ageAsk);
        var submitWrittenWrap = document.createElement('div');
        submitWrittenWrap.classList = 'mtl';
        submitWrittenWrap.innerHTML = '<a id="submit-written" class="btn btn-action btn-big">Submit form</a>';
        var defaultSubmit = document.getElementById('submit');
        defaultSubmit.innerHTML = 'Submit form and upload video';
        defaultSubmit.parentNode.insertBefore(submitWrittenWrap, defaultSubmit);
        redirectDisclaimer.classList.add('hide-fully');
        document.getElementById('video-acknowledge').classList.add('hide-fully');
        var zipLabel = document.querySelector('label[for="zip"]');
        zipLabel.innerHTML = '<strong>Email Address<span class="type-branded">*</span></strong>';
        break;
        
    }

    
    var submitBtn = document.getElementById('submit');

    over18Btn.onclick = function() {
      over18 = true;
      over18Btn.classList.add('btn-action');
      under18Btn.classList.remove('btn-action');
      redirectDisclaimer.classList.remove('hide-fully');
      consentForm.classList.add('hide-fully');
      acknowledge.classList.remove('hide-fully');
      submitBtn.innerText = 'Continue to upload on Box';
    };
    
    under18Btn.onclick = function() {
      over18 = false;
      over18Btn.classList.remove('btn-action');
      under18Btn.classList.add('btn-action');
      redirectDisclaimer.classList.add('hide-fully');
      consentForm.classList.remove('hide-fully');
      acknowledge.classList.add('hide-fully');
      submitBtn.innerText = 'Download Consent Form';
    };
    
    submitBtn.onclick = function() {
      	if (over18) {
          if (checkbox.checked) {
          	// get values & fireEvent
            var fname = storyContainer.querySelector('input[name="first_name"]').value;
            var lname = storyContainer.querySelector('input[name="last_name"]').value;
            var zip = storyContainer.querySelector('input[name="zip"]').value;
            var means = storyContainer.querySelector('input[name="mean_to_you"]').value;
            var vision = storyContainer.querySelector('input[name="vision"]').value;
            if (!!fname && !!lname && !!zip) {
              if (means && vision) {
                fireEvent('video_submission_submit', {'first_name': fname, 'last_name': lname, 'email_address': zip, 'means_to_you': means, 'vision': vision});
              } else {
              	fireEvent('video_submission_submit', {'first_name': fname, 'last_name': lname, 'zip': zip});
              }
              window.open(boxUrl, '_blank');
              headline.innerText = 'Thanks for your submission!';
              document.getElementById('subcopy').classList.add('hide-fully');
              videoForm.classList.add('hide-fully');
          	} else {
             	alert('Please complete all required fields'); 
            }
          } else {
            alert('Please acknowledge the terms');
          }
        } else {
         	// redirect to PDF
          fireEvent('video_submission_consent_download', {});
          window.open('https://drive.google.com/file/d/13PV2obDwMwCD1-HXRvoZhfHURtDu6Kz8/view', '_blank');
          headline.innerText = 'Thanks for your submission!';
          videoForm.classList.add('hide-fully');
        }
    };
    
    var submitWrittenBtn = document.getElementById('submit-written');
    if (submitWrittenBtn) {
      submitWrittenBtn.onclick = function() {
      	if (over18) {
          if (checkbox.checked) {
          	// get values & fireEvent
            var fname = storyContainer.querySelector('input[name="first_name"]').value;
            var lname = storyContainer.querySelector('input[name="last_name"]').value;
            var zip = storyContainer.querySelector('input[name="zip"]').value;
            var means = storyContainer.querySelector('input[name="mean_to_you"]').value;
            var vision = storyContainer.querySelector('input[name="vision"]').value;
            if (!!fname && !!lname && !!zip && !!means && !!vision) {
              fireEvent('video_submission_submit', {'first_name': fname, 'last_name': lname, 'email_address': zip, 'means_to_you': means, 'vision': vision});
              headline.innerText = 'Thanks for your submission!';
              document.getElementById('subcopy').classList.add('hide-fully');
              videoForm.classList.add('hide-fully');
          	} else {
             	alert('Please complete all required fields'); 
            }
          } else {
            alert('Please acknowledge the terms');
          }
        } else {
         	// redirect to PDF
          fireEvent('video_submission_consent_download', {});
          window.open('https://drive.google.com/file/d/13PV2obDwMwCD1-HXRvoZhfHURtDu6Kz8/view', '_blank');
          headline.innerText = 'Thanks for your submission!';
          videoForm.classList.add('hide-fully');
        }
    	};
    }
      
  });
});
}

function checkLoad() {
    if (window.domCompleteTime && window.domCompleteTime < Date.now()) {
      setTimeout(function(){
        init();
      }, 2000);
    } else {
        setTimeout(function(){
            checkLoad();
        }, 100);
    }
}
checkLoad();
// document.body.classList.add('loading');
}}, {"selector": "#embed-frame-6izqt", "dependencies": [], "attributes": {}, "type": "attribute", "id": "67104a1cd4f9445db9ac77b303362942", "css": {}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19329710519", "integrationSettings": null}], "id": "19323620939", "weightDistributions": null, "name": "[niftic] - Video Submission - Landing Page", "groupId": null, "commitId": "20636160581", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 1000, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19357731136"], "experiments": [{"weightDistributions": [{"entityId": "19368730172", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - SAP - Pre-SAP Support Awareness", "bucketingStrategy": null, "variations": [{"id": "19321662769", "actions": [{"viewId": "19357731136", "changes": [{"dependencies": [], "type": "custom_code", "id": "EC2D02B2-8B4D-4A29-8B80-DD34925C9558", "value": function($){window.localStorage.setItem('pre_sap_awareness', 'control');
}}]}], "name": "Original"}, {"id": "19321401356", "actions": [{"viewId": "19357731136", "changes": [{"dependencies": [], "type": "custom_code", "id": "b1149f97caa64885856754596faf6272", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){
 if (!(!!document.querySelector('.sap-landing-wrap'))) {
	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <div class="landing-header arrange arrange-middle">' +
    '            <div class="arrange-fit">' +
    '                <img src="https://static.change.org/psf-experiments/pre-sap-v1.png" alt="" class="coach-avatar mrs">' +
    '            </div>' +
    '            <div class="arrange-fill">' +
    '                <h3 class="mtn mbn">Anna</h3>' +
    '                <div class="arrange arrange-middle">' +
    '                    <div class="arrange-fit">' +
    '                        <div class="coach-icon ptxs prxs border-rounded-circle mrxs" style="background-color: #3ECA8A"></div>' +
    '                    </div>' +
    '                    <div class="arrange-fill">' +
    '                        <div class="mbxxxs"><small class="type-weak">Petition Coach</small></div>' +
    '                    </div>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <div class="landing-main">' +
    '            <h2 class="mtxxl mbs"><b>👋 Welcome! I’m here to help with your petition</b></h2>' +
    '            <p class="mtn mbs">I’m one of Change.org’s petition coaches. Last month we supported +16,000 starters just like you. </p>' +
    '            <p class="mtn mbs">Best of all it’s 100% free, just make sure you provide us with a valid phone number so we can reach out via text.</p>' +
    '            <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
    sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
 }
});

window.localStorage.setItem('pre_sap_awareness', 'v1');
}}, {"value": "<style>.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.coach-avatar {\n      height: 92px;\n    border: 3px solid #F6F4F6;\n    border-radius: 50%;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "65DAA04A-D26D-410B-88BA-717A0BEFE007"}]}], "name": "Variation #1"}, {"id": "19323812206", "actions": [{"viewId": "19357731136", "changes": [{"dependencies": [], "type": "custom_code", "id": "D9320C29-245E-4E7F-8846-7B23852EEA77", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){
 if (!(!!document.querySelector('.sap-landing-wrap'))) {
	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap';
  landingPage.innerHTML = '' +
    '<div class="landing-header">' +
    '    <img src="https://static.change.org/psf-experiments/pre-sap-bg.png" class="header-bg">' +
    '    <div class="header-content">' +
    '        <h5 class="type-branded mtn mbxxxs">NEW!</h5>' +
    '        <h3 class="mtn mbs">Get campaign advice</h3>' +
    '    </div>' +
    '    <img src="https://static.change.org/psf-experiments/pre-sap-v2.png" class="header-avatars">' +
    '</div>' +
    '<div class="container pbxxxl">' +
    '    <div class="row">' +
    '        <div class="col-xs-12">' +
    '            <div class="landing-main">' +
    '                <h2 class="mtxxl mbs"><b>👋 Welcome! I’m here to help with your petition</b></h2>' +
    '                <p class="mtn mbs">I’m one of Change.org’s petition coaches. Last month we supported +16,000' +
    '                    starters just like you. </p>' +
    '                <p class="mtn mbs">Best of all it’s 100% free, just make sure you provide us with a valid phone' +
    '                    number so we can reach out via text.</p> <button class="btn btn-action btn-big btn-full">Got it!' +
    '                    I\'m ready to create my petition</button>' +
    '            </div>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
 }
});

window.localStorage.setItem('pre_sap_awareness', 'v2');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap .container {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap .container {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "341EDF81-0356-47DD-A500-67E3F742CFF5"}]}], "name": "Variation #2"}, {"id": "19368730172", "actions": [{"viewId": "19357731136", "changes": [{"dependencies": [], "type": "custom_code", "id": "FBA6D117-E18D-4E9B-AC7C-C2DE8E3FA8CA", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){
 if (!(!!document.querySelector('.sap-landing-wrap'))) {
	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Here’s how Change.org petitions work ✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Create your petition</h3>' +
    '                    <p class="type-l man">Try your best but don\'t worry if it\'s not perfect yet! You can edit your petition later.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Build support</h3>' +
    '                    <p class="type-l mtn mbs">Change.org has tools to help you  build support for your cause. </p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-v3.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Our team of petition experts are live now, ready to look at your petition and give you personalized advice over SMS.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Change the world</h3>' +
    '                    <p class="type-l man">Change.org is proven to influence politicians, public officials and business leaders. Work with your decision maker to reach an outcome that solves your problem.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
 }
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "A6D0DC2B-CB19-4B48-AED3-9E46095B2137"}]}], "name": "Variation #3"}], "audienceIds": null, "changes": null, "id": "19337591810", "integrationSettings": null}], "id": "19326382146", "weightDistributions": null, "name": "[niftic] - SAP - Pre-SAP Support Awareness", "groupId": null, "commitId": "20448089365", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19413320262"], "experiments": [{"weightDistributions": [{"entityId": "19328214899", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Dashboard - Pre-Sap Awareness Survey", "bucketingStrategy": null, "variations": [{"id": "19409500479", "actions": [], "name": "Original"}, {"id": "19328214899", "actions": [{"viewId": "19413320262", "changes": [{"value": function($){var utils = window.optimizely.get("utils");

utils.waitUntil(function() { return !!window.hj; }).then(function() {

  var hjValue = window.localStorage.getItem('pre_sap_awareness');
  
  window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
  hj('trigger', 'pre_sap_awareness_' + hjValue);

  window.localStorage.removeItem('pre_sap_awareness');
});
}, "dependencies": [], "type": "custom_code", "id": "0fb46178333744eda076621fe25df113"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19314222489", "integrationSettings": null}], "id": "19340372367", "weightDistributions": null, "name": "[niftic] - Dashboard - Pre-Sap Awareness Survey", "groupId": null, "commitId": "19316822141", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19616943486"], "experiments": [{"weightDistributions": [{"entityId": "19587855152", "endOfRange": 5000}, {"entityId": "19591335469", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Combo - NJ Sharables", "bucketingStrategy": null, "variations": [{"id": "19587855152", "actions": [{"viewId": "19616943486", "changes": [{"dependencies": [], "type": "custom_code", "id": "972aed3937f84b90b17690fe098234f8", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "19591335469", "actions": [{"viewId": "19616943486", "changes": [{"dependencies": [], "type": "custom_code", "id": "1d30463fee64447fb8561612288e6a48", "value": function($){var utils = window.optimizely.get("utils");
var templateData = getTemplateData();

if (templateData.sharables) {
  utils.waitForElement('.sharePage .contentShare').then(function(shareCard) {
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
    var heading = shareCard.querySelector('[data-view="psf/components/text"] h1');
    var p = shareCard.querySelector('[data-view="psf/components/text"] span');
    var shares = shareCard.querySelector('.col-sm-9.position-block-center.pbs');
    var simg = shareCard.querySelector('.flex-embed');
    simg.classList.add('hide-fully');

    p.innerHTML = fname+', share these images and help more people take action! Here is how it works:<br><strong>1)</strong> Download share images<br><strong>2)</strong> Share on your timelines and stories';

    var scroller = document.createElement('div');
    scroller.classList = 'shareable-scroller';
    templateData.sharableImages.forEach(function(si){
      scroller.innerHTML += '<div class="scroll-item"><img src="' + si + '"><a href="' + si + '" target="_blank">Download Image</a></div>';
    });

    shares.parentNode.insertBefore(scroller, shares);
		
    var shareDescription = document.createElement('p');
    shareDescription.classList = 'mvm';
    shareDescription.innerHTML = 'Or share this petition with friends';
    
    shares.parentNode.insertBefore(shareDescription, shares);

    var imageDownloads = document.querySelectorAll('.shareable-scroller .scroll-item a');
    for (var i = 0; i < imageDownloads.length; i++) {
      imageDownloads[i].addEventListener('click', function() {
        utils.waitUntil(function() { return !!window.App; }).then(function() {
        	window.App.trackEvent('optly_shareable_download');
      	});
      }, false);
    }

  });
}
}}, {"value": "<style>.shareable-scroller {\n  overflow: hidden;\n  overflow-x: scroll;\n  overflow-y: hidden;\n  white-space: nowrap;\n  padding: 25px;\n}\n\n.shareable-scroller .scroll-item {\n  max-width: 220px;\n  text-align: center;\n}\n\n.shareable-scroller .scroll-item {\n \tdisplay: inline-block;\n  vertical-align: top;\n  margin-right: 25px;\n}\n\n.shareable-scroller .scroll-item img {\n  box-shadow: 0px 1px 6px rgba(115, 114, 115, 0.4);\n}\n\n.shareable-scroller .scroll-item a {\n  margin-top: 20px;\n  display: inline-block;\n  text-decoration: none;\n  font-weight: bold;\n  padding: 8px 20px;\n  border: 2px solid;\n  border-radius: 5px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "375b96056fab49948672676262f77c6a"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19679361054", "integrationSettings": null}], "id": "19562194670", "weightDistributions": null, "name": "[niftic] - Combo - NJ Sharables", "groupId": null, "commitId": "19659860840", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "44d56f18a5ca465ebc125789f260de60", "value": function($){window.getTemplateData = function() {
  var pId = parseInt(window.changeTargetingData.petition.id);
  var d = {
    25826794: {
      callTool: false,
      sharables: true,
      sms: false,
    	callShortUrl: '',
      copylink: '',
      sharableImages: [
      'https://change-assets.s3.amazonaws.com/psf-experiments/NJMJ1.png',
      'https://change-assets.s3.amazonaws.com/psf-experiments/NJMJ3.png',
      'https://change-assets.s3.amazonaws.com/psf-experiments/NJMJ4.png',
      'https://change-assets.s3.amazonaws.com/psf-experiments/NJMJ5.png'
      ],
      smsShortUrl: ''
    }
  };
  return d[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19572452266"], "experiments": [{"weightDistributions": [{"entityId": "19613411335", "endOfRange": 5000}, {"entityId": "19570591630", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM Cancel Student Loans", "bucketingStrategy": null, "variations": [{"id": "19613411335", "actions": [{"viewId": "19572452266", "changes": [{"dependencies": [], "type": "custom_code", "id": "44ca40a408ca4750a6b58b62130c7129", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
  window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
  hj('trigger', 'tweet_dm_control');
});
}}]}], "name": "Original"}, {"id": "19570591630", "actions": [{"viewId": "19572452266", "changes": [{"dependencies": [], "type": "custom_code", "id": "48fd697af69b4784994b79609925c887", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
    
    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>Join a public call to cancel student loans</h1>' +
      '        <p class="mbxl type-l">We’ve prepared a tweet for you to directly tag Joe Biden’s Twitter and show your support for cancelling student loans. Tweeting in numbers makes this issue impossible to ignore. Can you send a tweet to President-elect Biden?</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Yes, I’ll tweet President-elect Biden</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = getTweet();
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      utils.waitUntil(function() { return !!window.hj; }).then(function() {
        window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
        // hj('trigger', 'tweet_dm_control');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "cafa8113925d4054bb8281f4c59189fc"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19590361632", "integrationSettings": null}], "id": "19579992482", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM Cancel Student Loans", "groupId": null, "commitId": "19562214145", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "4bfcc4a2c681414098aa3d1a5e7fc8db", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    20818498: 'I’m one of almost 1 million signers calling on you, @JoeBiden to use your executive power to #cancelstudentloans. It’s good for American families & good for the economy - change.org/CancelStudentLoans https://twitter.com/Change/status/1336170455955345409'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19625082556"], "experiments": [{"weightDistributions": [{"entityId": "19576343291", "endOfRange": 10000}], "audienceName": "Everyone else", "name": " [niftic] - Combo - Call Tool - Greg Mingo", "bucketingStrategy": null, "variations": [{"id": "19580913995", "actions": [{"viewId": "19625082556", "changes": [{"dependencies": [], "type": "custom_code", "id": "06469ededce44fbc9be20eb959cf0618", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "19576343291", "actions": [{"viewId": "19625082556", "changes": [{"dependencies": [], "type": "custom_code", "id": "f6bb155786e04834b191f4c60ab791c1", "value": function($){var utils = window.optimizely.get("utils");

var templateData = getTemplateData();
var isAd = window.location.href.indexOf('elp=1') !== -1;
if (isAd) {
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent('optly_election_ad_view');
  });
}
function fireFBQ(isAction) {
  var ev = isAction ? 'election_petition_action' : 'election_petition_sign';
	utils.waitUntil(function() { return !!window.fbq; }).then(function() {
    window.fbq('trackCustom', ev, {petition_id: window.changeTargetingData.petition.id});
  });  
}
fireFBQ(false);

if (templateData.callTool || templateData.sms) {
   utils.waitForElement('.row.match-height > .psf-combo-shaded-round-border').then(function(card) {
    utils.waitForElement('.btn.js-share-btn').then(function(shareBtn) {
      
      var cardContent = card.querySelector('.phxxl.ptl.xs-pam');
      var therm = cardContent.querySelector('.col-xs-12.phn.mbm');
      var comboButtons = card.querySelector('.psf-combo-buttons');
      therm.classList.add('hide-fully');
      var promoteBtn = document.querySelector('.js-promote');
      promoteBtn.classList.remove('btn-action');
      promoteBtn.classList.add('mtxs', 'btn-outline');
      // document.querySelector('[data-view="psf/combo/components/accepted_payment_types"]').classList.add('hide-fully');
      shareBtn.innerText = 'Yes, I’ll share this petition';
      shareBtn.parentNode.insertBefore(promoteBtn, shareBtn.nextSibling);
      
      // SMS Collection
      if (templateData.sms) {
       	var hs = card.querySelectorAll('h1');
        hs.forEach(function(h){
          if (isAd) {
            h.innerHTML = 'Welcome back! Thanks for signing — here’s what you can do now:';
          } else {
        		h.innerHTML = '<span class="type-branded">Stay informed</span> with voting updates for your state';  
          }
        });
        var smsCall = document.createElement('div');
        
        var paragraphs = card.querySelectorAll('.phxxl.ptl.xs-pam div > p');
        var first = true;
        paragraphs.forEach(function(p){
          if (first) {
           	p.innerText = 'From local voting changes to tips on how you can help protect democracy – we’ll make sure you don’t miss a beat this election season.';
            first = false;
            smsCall.innerHTML = '<div class="psf-combo-buttons position-block-center">' + 
          	'<a id="sms-btn" class="btn btn-action btn-big btn-full mvxs">Yes, I want text updates</a>' + 
          '</div>';
        		p.parentNode.insertBefore(smsCall, p.nextSibling);
          } else {
          	p.classList.add('hide-fully');
          }
        });
        card.querySelector('.phxxl.ptl.xs-pam div > ul').classList.add('hide-fully');
        
        // SMS P2A
        var p2a = document.createElement('div');
        p2a.classList = 'advocacy-actionwidget mtl hide-call';
        p2a.setAttribute('data-domain', 'p2a.co');
        p2a.setAttribute('data-shorturl', templateData.smsShortUrl);
        p2a.setAttribute('data-responsive', 'true');
        p2a.setAttribute('style', '');

        var smsCallCard = card.cloneNode(true);
        smsCallCard.innerHTML = '';
        smsCallCard.appendChild(p2a);
        (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'advocacy-actionwidget-code'));

        smsCallCard.classList.add('hide-fully', 'call-card');
        card.parentNode.insertBefore(smsCallCard, card);

        document.getElementById('sms-btn').onclick = function() {
          card.classList.add('hide-fully');
          smsCallCard.classList.remove('hide-fully');
					window.scrollTo(0,0);
          utils.waitForElement('.advocacy-actionwidget iframe').then(function(iframe) {
            iframe.setAttribute('scrolling', 'yes');
          });

          utils.waitUntil(function() { return !!window.App; }).then(function() {
            window.App.trackEvent('optly_sms_collection');
          });
          fireFBQ(true);
        };
      }
      // Call Tool
      if (templateData.callTool) {
        
        var callDescription = document.createElement('div');
        callDescription.innerHTML = '<h1 style="font-size: 31.3px" class="mtm">Take your signature further</h1><p>Lawmakers and your community need to hear directly from you. Can you take a few minutes now to call for  justice?</p>';
        
        comboButtons.parentNode.insertBefore(callDescription, comboButtons);

       	var callBtn = document.createElement('a');
        callBtn.classList = 'btn btn-action btn-big btn-full mbxs';
        if (isAd) {
          callBtn.innerText = 'I’ll make a call to lawmakers now';
        } else {
          callBtn.innerText = 'Yes, I’ll call lawmakers';
        }
        callBtn.id = 'call-lawmakers-btn';

        shareBtn.parentNode.insertBefore(callBtn, shareBtn);
        
				// Call Tool P2A
        var p2a = document.createElement('div');
        p2a.classList = 'advocacy-actionwidget mtl hide-call';
        p2a.setAttribute('data-domain', 'p2a.co');
        p2a.setAttribute('data-shorturl', templateData.callShortUrl);
        p2a.setAttribute('data-responsive', 'true');
        p2a.setAttribute('style', '');

        var callCard = card.cloneNode(true);
        callCard.innerHTML = '';
        callCard.appendChild(p2a);
        (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'advocacy-actionwidget-code'));

        callCard.classList.add('hide-fully', 'call-card');
        card.parentNode.insertBefore(callCard, card);

        document.getElementById('call-lawmakers-btn').onclick = function() {
          card.classList.add('hide-fully');
          callCard.classList.remove('hide-fully');
					window.scrollTo(0,0);
          utils.waitForElement('.advocacy-actionwidget iframe').then(function(iframe) {
            iframe.setAttribute('scrolling', 'yes');
          });

          utils.waitUntil(function() { return !!window.App; }).then(function() {
            window.App.trackEvent('optly_call_launched');
          });
          fireFBQ(true);
        }; 
      }
    });
     
     document.querySelector('.js-share-btn').onclick = function(){
       	fireFBQ(true);
     };
  });

  /*
  // Desktop Feed
  var feedIndex = 0;
  var nextCall = 1;
  function getRandomInt(min, max) {
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(Math.random() * (max - min + 1)) + min;
  }
  utils.observeSelector('.visible-lg [data-view="psf/combo/components/combo_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(feedItem) {
    var feedInner = feedItem.querySelector('.arrange-fill .type-break-word > span');
    var name = feedInner.querySelector('strong').innerText;
    feedIndex++;
    if (feedIndex === nextCall) {
      feedInner.innerHTML = '<strong>' + name + '</strong> called lawmakers';
      nextCall = nextCall + getRandomInt(2, 4);
    }
  }, {
      "timeout": 60000,
      "once": false,
  });

  // Mobile Feed
  var mobileFeedIndex = 0;
  var mobileNextCall = 1;
  utils.observeSelector('.hidden-lg [data-view="psf/combo/components/combo_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(feedItem) {
    var feedInner = feedItem.querySelector('.arrange-fill .type-break-word > span');
    var name = feedInner.querySelector('strong').innerText;
    mobileFeedIndex++;
    if (mobileFeedIndex === mobileNextCall) {
      feedInner.innerHTML = '<strong>' + name + '</strong> called lawmakers';
      mobileNextCall = mobileNextCall + getRandomInt(2, 4);
    }
  }, {
      "timeout": 60000,
      "once": false,
  });
  */
}

utils.waitForElement('.js-combo-skip-footer-link.js-skip').then(function(skip) {
  skip.href = 'https://change.org/yourdemocracy';
  skip.innerText = 'Sorry, I can’t take these actions. Show me more petitions to sign.';
});

if (templateData.sharables) {
  utils.waitForElement('.sharePage .contentShare').then(function(shareCard) {
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
    var heading = shareCard.querySelector('[data-view="psf/components/text"] h1');
    var p = shareCard.querySelector('[data-view="psf/components/text"] span');
    var shares = shareCard.querySelector('.col-sm-9.position-block-center.pbs');
    var simg = shareCard.querySelector('.flex-embed');
    simg.classList.add('hide-fully');

    p.innerHTML = fname+', share these images and help more people take action! Here is how it works:<br><strong>1)</strong> Download share images<br><strong>2)</strong> Share on your timelines and stories';

    var scroller = document.createElement('div');
    scroller.classList = 'shareable-scroller';
    templateData.sharableImages.forEach(function(si){
      scroller.innerHTML += '<div class="scroll-item"><img src="' + si + '"><a href="' + si + '" target="_blank">Download Image</a></div>';
    });

    shares.parentNode.insertBefore(scroller, shares);
		
    var shareDescription = document.createElement('p');
    shareDescription.classList = 'mvm';
    shareDescription.innerHTML = 'Or share this petition with friends';
    
    shares.parentNode.insertBefore(shareDescription, shares);

    var imageDownloads = document.querySelectorAll('.shareable-scroller .scroll-item a');
    for (var i = 0; i < imageDownloads.length; i++) {
      imageDownloads[i].addEventListener('click', function() {
        utils.waitUntil(function() { return !!window.App; }).then(function() {
        	window.App.trackEvent('optly_shareable_download');
      	});
      }, false);
    }

  });
}
}}, {"value": "<style>.shareable-scroller {\n  overflow: hidden;\n  overflow-x: scroll;\n  overflow-y: hidden;\n  white-space: nowrap;\n  padding: 25px;\n}\n\n.shareable-scroller .scroll-item {\n  max-width: 220px;\n  text-align: center;\n}\n\n.shareable-scroller .scroll-item {\n \tdisplay: inline-block;\n  vertical-align: top;\n  margin-right: 25px;\n}\n\n.shareable-scroller .scroll-item img {\n  box-shadow: 0px 1px 6px rgba(115, 114, 115, 0.4);\n}\n\n.shareable-scroller .scroll-item a {\n  margin-top: 20px;\n  display: inline-block;\n  text-decoration: none;\n  font-weight: bold;\n  padding: 8px 20px;\n  border: 2px solid;\n  border-radius: 5px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "0e7075d3ef5449b197c8aa4670fceb3a"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19609373128", "integrationSettings": null}], "id": "19580913994", "weightDistributions": null, "name": " [niftic] - Combo - Call Tool - Greg Mingo", "groupId": null, "commitId": "19574783869", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "815ae01fef02485e8142bc0e16d82ed6", "value": function($){window.getTemplateData = function() {
  var pId = parseInt(window.changeTargetingData.petition.id);
  var d = {
    25360449: {
      callTool: true,
      sharables: false,
      sms: false,
    	callShortUrl: 'wL6ogUZ',
      copylink: 'chng.it/WMWCFs2Q',
      sharableImages: [],
      smsShortUrl: ''
    }
  };
  return d[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19601693844"], "experiments": [{"weightDistributions": [{"entityId": "19589483977", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Combo - Call Tool - Greg Mingo Email", "bucketingStrategy": null, "variations": [{"id": "19593313898", "actions": [{"viewId": "19601693844", "changes": [{"dependencies": [], "type": "custom_code", "id": "3f9661e2adad4623af53fa82bb1220a1", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "19589483977", "actions": [{"viewId": "19601693844", "changes": [{"dependencies": [], "type": "custom_code", "id": "68b1bb7e627349b1906ba5fcef3e71d6", "value": function($){var utils = window.optimizely.get("utils");

var templateData = getTemplateData();
var isAd = window.location.href.indexOf('elp=1') !== -1;
if (isAd) {
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent('optly_election_ad_view');
  });
}
function fireFBQ(isAction) {
  var ev = isAction ? 'election_petition_action' : 'election_petition_sign';
	utils.waitUntil(function() { return !!window.fbq; }).then(function() {
    window.fbq('trackCustom', ev, {petition_id: window.changeTargetingData.petition.id});
  });  
}
fireFBQ(false);

if (templateData.callTool || templateData.sms) {
   utils.waitForElement('.row.match-height > .psf-combo-shaded-round-border').then(function(card) {
    utils.waitForElement('.btn.js-share-btn').then(function(shareBtn) {
      
      var cardContent = card.querySelector('.phxxl.ptl.xs-pam');
      var therm = cardContent.querySelector('.col-xs-12.phn.mbm');
      var comboButtons = card.querySelector('.psf-combo-buttons');
      therm.classList.add('hide-fully');
      var promoteBtn = document.querySelector('.js-promote');
      promoteBtn.classList.remove('btn-action');
      promoteBtn.classList.add('mtxs', 'btn-outline');
      // document.querySelector('[data-view="psf/combo/components/accepted_payment_types"]').classList.add('hide-fully');
      shareBtn.innerText = 'Yes, I’ll share this petition';
      shareBtn.parentNode.insertBefore(promoteBtn, shareBtn.nextSibling);
      
      // SMS Collection
      if (templateData.sms) {
       	var hs = card.querySelectorAll('h1');
        hs.forEach(function(h){
          if (isAd) {
            h.innerHTML = 'Welcome back! Thanks for signing — here’s what you can do now:';
          } else {
        		h.innerHTML = '<span class="type-branded">Stay informed</span> with voting updates for your state';  
          }
        });
        var smsCall = document.createElement('div');
        
        var paragraphs = card.querySelectorAll('.phxxl.ptl.xs-pam div > p');
        var first = true;
        paragraphs.forEach(function(p){
          if (first) {
           	p.innerText = 'From local voting changes to tips on how you can help protect democracy – we’ll make sure you don’t miss a beat this election season.';
            first = false;
            smsCall.innerHTML = '<div class="psf-combo-buttons position-block-center">' + 
          	'<a id="sms-btn" class="btn btn-action btn-big btn-full mvxs">Yes, I want text updates</a>' + 
          '</div>';
        		p.parentNode.insertBefore(smsCall, p.nextSibling);
          } else {
          	p.classList.add('hide-fully');
          }
        });
        card.querySelector('.phxxl.ptl.xs-pam div > ul').classList.add('hide-fully');
        
        // SMS P2A
        var p2a = document.createElement('div');
        p2a.classList = 'advocacy-actionwidget mtl hide-call';
        p2a.setAttribute('data-domain', 'p2a.co');
        p2a.setAttribute('data-shorturl', templateData.smsShortUrl);
        p2a.setAttribute('data-responsive', 'true');
        p2a.setAttribute('style', '');

        var smsCallCard = card.cloneNode(true);
        smsCallCard.innerHTML = '';
        smsCallCard.appendChild(p2a);
        (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'advocacy-actionwidget-code'));

        smsCallCard.classList.add('hide-fully', 'call-card');
        card.parentNode.insertBefore(smsCallCard, card);

        document.getElementById('sms-btn').onclick = function() {
          card.classList.add('hide-fully');
          smsCallCard.classList.remove('hide-fully');
					window.scrollTo(0,0);
          utils.waitForElement('.advocacy-actionwidget iframe').then(function(iframe) {
            iframe.setAttribute('scrolling', 'yes');
          });

          utils.waitUntil(function() { return !!window.App; }).then(function() {
            window.App.trackEvent('optly_sms_collection');
          });
          fireFBQ(true);
        };
      }
      // Call Tool
      if (templateData.callTool) {
        
        var callDescription = document.createElement('div');
        callDescription.innerHTML = '<h1 style="font-size: 31.3px" class="mtm">Take your signature further</h1><p>Lawmakers and your community need to hear directly from you. Can you take a few minutes now to call for  justice?</p>';
        
        comboButtons.parentNode.insertBefore(callDescription, comboButtons);

       	var callBtn = document.createElement('a');
        callBtn.classList = 'btn btn-action btn-big btn-full mbxs';
        if (isAd) {
          callBtn.innerText = 'I’ll make a call to lawmakers now';
        } else {
          callBtn.innerText = 'Yes, I’ll call lawmakers';
        }
        callBtn.id = 'call-lawmakers-btn';

        shareBtn.parentNode.insertBefore(callBtn, shareBtn);
        
				// Call Tool P2A
        var p2a = document.createElement('div');
        p2a.classList = 'advocacy-actionwidget mtl hide-call';
        p2a.setAttribute('data-domain', 'p2a.co');
        p2a.setAttribute('data-shorturl', templateData.callShortUrl);
        p2a.setAttribute('data-responsive', 'true');
        p2a.setAttribute('style', '');

        var callCard = card.cloneNode(true);
        callCard.innerHTML = '';
        callCard.appendChild(p2a);
        (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'advocacy-actionwidget-code'));

        callCard.classList.add('hide-fully', 'call-card');
        card.parentNode.insertBefore(callCard, card);

        document.getElementById('call-lawmakers-btn').onclick = function() {
          card.classList.add('hide-fully');
          callCard.classList.remove('hide-fully');
					window.scrollTo(0,0);
          utils.waitForElement('.advocacy-actionwidget iframe').then(function(iframe) {
            iframe.setAttribute('scrolling', 'yes');
          });

          utils.waitUntil(function() { return !!window.App; }).then(function() {
            window.App.trackEvent('optly_call_launched');
          });
          fireFBQ(true);
        }; 
      }
    });
     
     document.querySelector('.js-share-btn').onclick = function(){
       	fireFBQ(true);
     };
  });

  /*
  // Desktop Feed
  var feedIndex = 0;
  var nextCall = 1;
  function getRandomInt(min, max) {
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(Math.random() * (max - min + 1)) + min;
  }
  utils.observeSelector('.visible-lg [data-view="psf/combo/components/combo_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(feedItem) {
    var feedInner = feedItem.querySelector('.arrange-fill .type-break-word > span');
    var name = feedInner.querySelector('strong').innerText;
    feedIndex++;
    if (feedIndex === nextCall) {
      feedInner.innerHTML = '<strong>' + name + '</strong> called lawmakers';
      nextCall = nextCall + getRandomInt(2, 4);
    }
  }, {
      "timeout": 60000,
      "once": false,
  });

  // Mobile Feed
  var mobileFeedIndex = 0;
  var mobileNextCall = 1;
  utils.observeSelector('.hidden-lg [data-view="psf/combo/components/combo_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(feedItem) {
    var feedInner = feedItem.querySelector('.arrange-fill .type-break-word > span');
    var name = feedInner.querySelector('strong').innerText;
    mobileFeedIndex++;
    if (mobileFeedIndex === mobileNextCall) {
      feedInner.innerHTML = '<strong>' + name + '</strong> called lawmakers';
      mobileNextCall = mobileNextCall + getRandomInt(2, 4);
    }
  }, {
      "timeout": 60000,
      "once": false,
  });
  */
}

utils.waitForElement('.js-combo-skip-footer-link.js-skip').then(function(skip) {
  skip.href = 'https://change.org/yourdemocracy';
  skip.innerText = 'Sorry, I can’t take these actions. Show me more petitions to sign.';
});

if (templateData.sharables) {
  utils.waitForElement('.sharePage .contentShare').then(function(shareCard) {
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
    var heading = shareCard.querySelector('[data-view="psf/components/text"] h1');
    var p = shareCard.querySelector('[data-view="psf/components/text"] span');
    var shares = shareCard.querySelector('.col-sm-9.position-block-center.pbs');
    var simg = shareCard.querySelector('.flex-embed');
    simg.classList.add('hide-fully');

    p.innerHTML = fname+', share these images and help more people take action! Here is how it works:<br><strong>1)</strong> Download share images<br><strong>2)</strong> Share on your timelines and stories';

    var scroller = document.createElement('div');
    scroller.classList = 'shareable-scroller';
    templateData.sharableImages.forEach(function(si){
      scroller.innerHTML += '<div class="scroll-item"><img src="' + si + '"><a href="' + si + '" target="_blank">Download Image</a></div>';
    });

    shares.parentNode.insertBefore(scroller, shares);
		
    var shareDescription = document.createElement('p');
    shareDescription.classList = 'mvm';
    shareDescription.innerHTML = 'Or share this petition with friends';
    
    shares.parentNode.insertBefore(shareDescription, shares);

    var imageDownloads = document.querySelectorAll('.shareable-scroller .scroll-item a');
    for (var i = 0; i < imageDownloads.length; i++) {
      imageDownloads[i].addEventListener('click', function() {
        utils.waitUntil(function() { return !!window.App; }).then(function() {
        	window.App.trackEvent('optly_shareable_download');
      	});
      }, false);
    }

  });
}
}}, {"value": "<style>.shareable-scroller {\n  overflow: hidden;\n  overflow-x: scroll;\n  overflow-y: hidden;\n  white-space: nowrap;\n  padding: 25px;\n}\n\n.shareable-scroller .scroll-item {\n  max-width: 220px;\n  text-align: center;\n}\n\n.shareable-scroller .scroll-item {\n \tdisplay: inline-block;\n  vertical-align: top;\n  margin-right: 25px;\n}\n\n.shareable-scroller .scroll-item img {\n  box-shadow: 0px 1px 6px rgba(115, 114, 115, 0.4);\n}\n\n.shareable-scroller .scroll-item a {\n  margin-top: 20px;\n  display: inline-block;\n  text-decoration: none;\n  font-weight: bold;\n  padding: 8px 20px;\n  border: 2px solid;\n  border-radius: 5px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "576e6bb66cbd42e6a67fde2f84cd66cc"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19613174333", "integrationSettings": null}], "id": "19582924305", "weightDistributions": null, "name": "[niftic] - Combo - Call Tool - Greg Mingo Email", "groupId": null, "commitId": "19591156260", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "a9ad555a7bde4490ae6bcf0641678899", "value": function($){window.getTemplateData = function() {
  var pId = parseInt(window.changeTargetingData.petition.id);
  var d = {
    25360449: {
      callTool: true,
      sharables: false,
      sms: false,
    	callShortUrl: 'wL6ogUZ',
      copylink: 'chng.it/WMWCFs2Q',
      sharableImages: [],
      smsShortUrl: ''
    }
  };
  return d[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19707200112"], "experiments": [{"weightDistributions": [{"entityId": "19708950089", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Combo - NJ Sharables Email", "bucketingStrategy": null, "variations": [{"id": "19677310936", "actions": [{"viewId": "19707200112", "changes": [{"dependencies": [], "type": "custom_code", "id": "621537049df34c0989f504da3fe5d407", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "19708950089", "actions": [{"viewId": "19707200112", "changes": [{"dependencies": [], "type": "custom_code", "id": "57d46690b2fe48cabcb81e8fd518b9a0", "value": function($){var utils = window.optimizely.get("utils");
var templateData = getTemplateData();

if (templateData.sharables) {
  utils.waitForElement('.sharePage .contentShare').then(function(shareCard) {
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
    var heading = shareCard.querySelector('[data-view="psf/components/text"] h1');
    var p = shareCard.querySelector('[data-view="psf/components/text"] span');
    var shares = shareCard.querySelector('.col-sm-9.position-block-center.pbs');
    var simg = shareCard.querySelector('.flex-embed');
    simg.classList.add('hide-fully');

    p.innerHTML = fname+', share these images and help more people take action! Here is how it works:<br><strong>1)</strong> Download share images<br><strong>2)</strong> Share on your timelines and stories';

    var scroller = document.createElement('div');
    scroller.classList = 'shareable-scroller';
    templateData.sharableImages.forEach(function(si){
      scroller.innerHTML += '<div class="scroll-item"><img src="' + si + '"><a href="' + si + '" target="_blank">Download Image</a></div>';
    });

    shares.parentNode.insertBefore(scroller, shares);
		
    var shareDescription = document.createElement('p');
    shareDescription.classList = 'mvm';
    shareDescription.innerHTML = 'Or share this petition with friends';
    
    shares.parentNode.insertBefore(shareDescription, shares);

    var imageDownloads = document.querySelectorAll('.shareable-scroller .scroll-item a');
    for (var i = 0; i < imageDownloads.length; i++) {
      imageDownloads[i].addEventListener('click', function() {
        utils.waitUntil(function() { return !!window.App; }).then(function() {
        	window.App.trackEvent('optly_shareable_download');
      	});
      }, false);
    }

  });
}
}}, {"value": "<style>.shareable-scroller {\n  overflow: hidden;\n  overflow-x: scroll;\n  overflow-y: hidden;\n  white-space: nowrap;\n  padding: 25px;\n}\n\n.shareable-scroller .scroll-item {\n  max-width: 220px;\n  text-align: center;\n}\n\n.shareable-scroller .scroll-item {\n \tdisplay: inline-block;\n  vertical-align: top;\n  margin-right: 25px;\n}\n\n.shareable-scroller .scroll-item img {\n  box-shadow: 0px 1px 6px rgba(115, 114, 115, 0.4);\n}\n\n.shareable-scroller .scroll-item a {\n  margin-top: 20px;\n  display: inline-block;\n  text-decoration: none;\n  font-weight: bold;\n  padding: 8px 20px;\n  border: 2px solid;\n  border-radius: 5px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "2b3f6bcee1764d459c985434231527df"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19579983438", "integrationSettings": null}], "id": "19585646446", "weightDistributions": null, "name": "[niftic] - Combo - NJ Sharables Email", "groupId": null, "commitId": "19592233600", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "e1c0ad86e7b84f3a805f993d6e4e9697", "value": function($){window.getTemplateData = function() {
  var pId = parseInt(window.changeTargetingData.petition.id);
  var d = {
    25826794: {
      callTool: false,
      sharables: true,
      sms: false,
    	callShortUrl: '',
      copylink: '',
      sharableImages: [
      'https://change-assets.s3.amazonaws.com/psf-experiments/NJMJ1.png',
      'https://change-assets.s3.amazonaws.com/psf-experiments/NJMJ3.png',
      'https://change-assets.s3.amazonaws.com/psf-experiments/NJMJ4.png',
      'https://change-assets.s3.amazonaws.com/psf-experiments/NJMJ5.png'
      ],
      smsShortUrl: ''
    }
  };
  return d[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19577780796"], "experiments": [{"weightDistributions": [{"entityId": "19581800281", "endOfRange": 5000}, {"entityId": "19570380793", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - SUPA - Emergency Money Popup", "bucketingStrategy": null, "variations": [{"id": "19581800281", "actions": [{"viewId": "19577780796", "changes": [{"dependencies": [], "type": "custom_code", "id": "81d8dc8cfafd42f58d49818445618d39", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('div.modal.in[data-name="signed_interrupt"] .modal-dialog').then(function(signedModal) {
  
  utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent('optly_interrupt_show');
  });
  
});
}}]}], "name": "Original"}, {"id": "19570380793", "actions": [{"viewId": "19577780796", "changes": [{"dependencies": [], "type": "custom_code", "id": "40014c7112b145329c6800d3588f11e4", "value": function($){var utils = window.optimizely.get("utils");

var embedHTML = '';

utils.waitForElement('body.type-loaded').then(function(){
  utils.waitForElement('[data-view="petitions/show/components/signed_interrupt_modal"]').then(function(modal) {

    var h = modal.querySelector('h2');
    var content = document.querySelector('[data-view="petitions/show/components/signed_interrupt_modal"] > div:nth-of-type(3)');
    var chipInBtn = document.querySelector('[data-view="petitions/show/components/signed_interrupt_modal"] > button:nth-of-type(1)');

    h.innerText = h.innerText.split('–')[0] + '– can you send a letter to congress?';
    content.innerHTML = 'Right now, your story can make a difference. You’ll have talking points to get you started. Can you join the letter campaign?';

    var letterBtn = document.createElement('button');
    letterBtn.classList = chipInBtn.classList;
    letterBtn.innerHTML = '<span>Yes, I’ll send a letter!</span>';

    chipInBtn.parentNode.insertBefore(letterBtn, chipInBtn);
    chipInBtn.classList.add('hide-fully');
    
    letterBtn.onclick = function() {

      modal.classList.add('hide-fully');
      
      var actionDiv = document.createElement('div');
			modal.parentNode.insertBefore(actionDiv, modal);
      
      var embedDiv = document.createElement('div');
      embedDiv.id = 'can-petition-area-this-holiday-season-tell-congress-to-support-additional-direct-cash-payments-to-all-or-most-americans';
      embedDiv.style.width = '100%';
      actionDiv.appendChild(embedDiv);

      var link = document.createElement('link');
      link.href = 'https://actionnetwork.org/css/style-embed-v3.css';
      link.rel = 'stylesheet';
      link.type = 'text/css';
      actionDiv.appendChild(link);
      
      var script = document.createElement('script');
      script.src = 'https://actionnetwork.org/widgets/v3/petition/this-holiday-season-tell-congress-to-support-additional-direct-cash-payments-to-all-or-most-americans?format=js&source=widget';
      actionDiv.appendChild(script);
      
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_send_letter_click');
      });
      
    };

  });
});
}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19562670042", "integrationSettings": null}], "id": "19601080132", "weightDistributions": null, "name": "[niftic] - SUPA - Emergency Money Popup", "groupId": null, "commitId": "19568521741", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 7500, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19702290236"], "experiments": [{"weightDistributions": [{"entityId": "19578784579", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Thank You - Non-EN Survey", "bucketingStrategy": null, "variations": [{"id": "19615015051", "actions": [], "name": "Original"}, {"id": "19578784579", "actions": [{"viewId": "19702290236", "changes": [{"dependencies": [], "type": "custom_code", "id": "c07948769d16447f9fb1ea9e821ce7b9", "value": function($){var utils = window.optimizely.get("utils");

var appStateLocale = window.changeTargetingData.appState.locale;
var lang = '';
var locale = '';
if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
} else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
}
lang = lang.toLowerCase();

utils.waitUntil(function() { return !!window.hj; }).then(function() {
    
    window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
    hj('trigger', 'promote_thank_you_'+lang);

});
}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19592285314", "integrationSettings": null}], "id": "19651372034", "weightDistributions": null, "name": "[niftic] - Thank You - Non-EN Survey", "groupId": null, "commitId": "19679372290", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19753146908"], "experiments": [{"weightDistributions": [{"entityId": "19750995582", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Impact Template - Combo/Share - Call Tool + Tweet DM", "bucketingStrategy": null, "variations": [{"id": "19751377693", "actions": [{"viewId": "19753146908", "changes": [{"dependencies": [], "type": "custom_code", "id": "d9c3bdc46b9a4af790005207b83c2d8b", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "19750995582", "actions": [{"viewId": "19753146908", "changes": [{"dependencies": [], "type": "custom_code", "id": "7d4124f691cd4c7c8e98ffff236e4c37", "value": function($){var utils = window.optimizely.get("utils");
var templateData = getTemplateData();

if (templateData.callTool) {
   utils.waitForElement('.row.match-height > .psf-combo-shaded-round-border').then(function(card) {
    utils.waitForElement('.btn.js-share-btn').then(function(shareBtn) {
      
      var cardContent = card.querySelector('.phxxl.ptl.xs-pam');
      var therm = cardContent.querySelector('.col-xs-12.phn.mbm');
      var comboButtons = card.querySelector('.psf-combo-buttons');
      therm.classList.add('hide-fully');
      var promoteBtn = document.querySelector('.js-promote');
      promoteBtn.classList.remove('btn-action');
      promoteBtn.classList.add('mtxs', 'btn-outline');
      // document.querySelector('[data-view="psf/combo/components/accepted_payment_types"]').classList.add('hide-fully');
      shareBtn.innerText = 'Yes, I’ll share this petition';
      shareBtn.parentNode.insertBefore(promoteBtn, shareBtn.nextSibling);
      
      if (!!templateData.heading) {
       	var hs = card.querySelectorAll('h1');
        hs.forEach(function(h){
          h.innerHTML = templateData.heading;
        });
      }
      
      var textDiv = document.querySelector('.bg-brighter.psf-combo-shaded-round-border > .phxxl.ptl.xs-pam > div');
      if (!!templateData.subtext) {
        if (templateData.subtext.indexOf('{') === -1) {
          textDiv.innerHTML = templateData.subtext;
        } else {
          var parse = JSON.parse(templateData.subtext);
          if (!!parse.replace) {
            textDiv.innerHTML = textDiv.innerHTML.replace(parse.replace, parse.with);
          }
        }
      }
      
      // Call Tool
      if (templateData.callTool) {

       	var callBtn = document.createElement('a');
        callBtn.classList = 'btn btn-action btn-big btn-full mbxs';
				callBtn.innerText = 'Yes, I’ll call lawmakers';
        callBtn.id = 'call-lawmakers-btn';

        shareBtn.parentNode.insertBefore(callBtn, shareBtn);
        
				// Call Tool P2A
        var p2a = document.createElement('div');
        p2a.classList = 'advocacy-actionwidget mtl hide-call';
        p2a.setAttribute('data-domain', 'p2a.co');
        p2a.setAttribute('data-shorturl', templateData.callShortUrl);
        p2a.setAttribute('data-responsive', 'true');
        p2a.setAttribute('style', '');

        var callCard = card.cloneNode(true);
        callCard.innerHTML = '';
        callCard.appendChild(p2a);
        (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = '//p2a.co/js/embed/widget/advocacywidget.min.js';
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'advocacy-actionwidget-code'));

        callCard.classList.add('hide-fully', 'call-card');
        card.parentNode.insertBefore(callCard, card);

        document.getElementById('call-lawmakers-btn').onclick = function() {
          card.classList.add('hide-fully');
          callCard.classList.remove('hide-fully');
					window.scrollTo(0,0);
          utils.waitForElement('.advocacy-actionwidget iframe').then(function(iframe) {
            iframe.setAttribute('scrolling', 'yes');
          });

          utils.waitUntil(function() { return !!window.App; }).then(function() {
            window.App.trackEvent('optly_call_launched');
          });
        }; 
      }
      
    });
  });
}

if (templateData.tweetDM) {
  utils.waitForElement('.sharePage .contentShare').then(function(shareCard) {
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
    var heading = shareCard.querySelector('[data-view="psf/components/text"] h1');
    var p = shareCard.querySelector('[data-view="psf/components/text"] span');
    
    utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
    utils.waitForElement('body.type-loaded').then(function() {

      shareText.innerHTML = '' +
        '<div class="row">' +
        '    <div class="col-xs-12">' +
        '        <h1 class="phm">' + (templateData.heading ? templateData.heading : heading.innerText) + '</h1>' +
        '        <p class="mbxl phm type-l">' + (templateData.subtext ? templateData.subtext : p.innerText) + '</p>' +
        '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
        '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span> Yes, I’ll tweet the decision maker</button>' +
        '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
        '				 </div></div>' +
        '    </div>' +
        '</div>';

      document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.add('hide-fully');

      document.querySelector('.optly-show-more').addEventListener('click', function(e){
        e.preventDefault();
        document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
        document.querySelector('.shareButtons').classList.remove('hide-fully');
      });

      var tweetBtn = document.querySelector('.optly-tweet');
      tweetBtn.addEventListener('click', function() {
        var tweet = templateData.tweetCopy;
        utils.waitUntil(function() { return !!window.App; }).then(function() {
          window.App.trackEvent('optly_tweet_dm');
        });
        window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
      });
    });
  });

  });
}
}}, {"value": "<style>.shareable-scroller {\n  overflow: hidden;\n  overflow-x: scroll;\n  overflow-y: hidden;\n  white-space: nowrap;\n  padding: 25px;\n}\n\n.shareable-scroller .scroll-item {\n  max-width: 220px;\n  text-align: center;\n}\n\n.shareable-scroller .scroll-item {\n \tdisplay: inline-block;\n  vertical-align: top;\n  margin-right: 25px;\n}\n\n.shareable-scroller .scroll-item img {\n  box-shadow: 0px 1px 6px rgba(115, 114, 115, 0.4);\n}\n\n.shareable-scroller .scroll-item a {\n  margin-top: 20px;\n  display: inline-block;\n  text-decoration: none;\n  font-weight: bold;\n  padding: 8px 20px;\n  border: 2px solid;\n  border-radius: 5px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "68f599f27d474926a7baf87e19250c6f"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19720884116", "integrationSettings": null}], "id": "19714614462", "weightDistributions": null, "name": "[niftic] - Impact Template - Combo/Share - Call Tool + Tweet DM", "groupId": null, "commitId": "19739579190", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "d69962dbfefa409887bcc43f22ed7ebe", "value": function($){window.getTemplateData = function() {
  var pId = parseInt(window.changeTargetingData.petition.id);
  var d = {
   	26720868: {
      callTool: true,
      tweetDM: false,
      heading: 'Can you help to get this petition on the agenda?',
      subtext: '{"replace": "Can you help reach the signature goal?", "with": "Can you help reach the decision maker?"}',
    	callShortUrl: 'PYVsBNb',
			tweetCopy: '',
      tweetBtn: ''
    },
    26651836: {
      callTool: true,
      tweetDM: false,
      heading: 'Can you help to get this petition on the agenda?',
      subtext: '{"replace": "Can you help reach the signature goal?", "with": "Can you help reach the decision maker?"}',
    	callShortUrl: 'fzsgR7f',
			tweetCopy: '',
      tweetBtn: ''
    },
    26720675: {
      callTool: true,
      tweetDM: false,
      heading: 'Can you help to get this petition on the agenda?',
      subtext: '{"replace": "Can you help reach the signature goal?", "with": "Can you help reach the decision maker?"}',
    	callShortUrl: 'NfRIwsk',
			tweetCopy: '',
      tweetBtn: ''
    },
    26720579: {
      callTool: false,
      tweetDM: true,
      heading: 'Can you keep the pressure up?',
      subtext: 'Show your support and send a tweet tagging decision makers for this issue. Just click to send the prepared post below. Tweeting in numbers makes this petition impossible to ignore. Can you join the supporters sending tweets?',
    	callShortUrl: '',
			tweetCopy: 'No American lawmaker should EVER say the words "Hitler was right." @Miller_Congress needs to resign. Make it happen, @ILGOP. Change.org/ResignMarryMiller',
      tweetBtn: ''
    }
  };
  return d[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["19969620057"], "experiments": [{"weightDistributions": [{"entityId": "19969592272", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM - FL Anti-Trans", "bucketingStrategy": null, "variations": [{"id": "19948592474", "actions": [{"viewId": "19969620057", "changes": [{"dependencies": [], "type": "custom_code", "id": "f2ff47cfd4164368ae0245d2b91d5d5a", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
  window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
  hj('trigger', 'tweet_dm_control');
});
}}]}], "name": "Original"}, {"id": "19969592272", "actions": [{"viewId": "19969620057", "changes": [{"dependencies": [], "type": "custom_code", "id": "674e528cd6cc41a88f2e232a822781d2", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
    
    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>Tweeting directly to the decision maker makes this petition impossible to ignore.</h1>' +
      '        <p class="mbxl type-l">Show your support and send a tweet tagging the decision maker for this issue. Just click to send the prepared post below. Can you join other supporters sending tweets?</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Send a direct tweet to this DM now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = getTweet();
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "a78f4d92d6ed44df950063a90e9c56ea"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "19990940015", "integrationSettings": null}], "id": "19969320066", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM - FL Anti-Trans", "groupId": null, "commitId": "19978040145", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "e8eb5affd49c447ebe1b93a244d0963b", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    27137176: '@RepGregSteube why do you think schools should violate little girls? Checking children’s genitals shouldn’t be a requirement to play sports chng.it/Lm6KpCgF',
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20036931948"], "experiments": [{"weightDistributions": [{"entityId": "20015368928", "endOfRange": 3000}, {"entityId": "20022181345", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM Pandemic Unemployment Benefits", "bucketingStrategy": null, "variations": [{"id": "20015368928", "actions": [{"viewId": "20036931948", "changes": [{"dependencies": [], "type": "custom_code", "id": "2883dea4768245e9896dfc8b4631ba9d", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
  window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
  hj('trigger', 'tweet_dm_control');
});
}}]}], "name": "Original"}, {"id": "20022181345", "actions": [{"viewId": "20036931948", "changes": [{"dependencies": [], "type": "custom_code", "id": "fb26e228eb074a9aa389283396b148f0", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
    
    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>Tweeting directly to the decision maker makes this petition impossible to ignore.</h1>' +
      '        <p class="mbxl type-l">Show your support and send a tweet tagging the decision maker for this issue. Just click to send the prepared post below. Can you join other supporters sending tweets?</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Send a direct tweet to this DM now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = getTweet();
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "13d27667c2d44a618ff7fadbb66578c6"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20002689161", "integrationSettings": null}], "id": "20022181344", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM Pandemic Unemployment Benefits", "groupId": null, "commitId": "20012251227", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "75428b57b953419f820103576a386b47", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    27049763: '@SpeakerPelosi @SenSchumer @JoeBiden People are struggling to make ends meet. What will YOU do to help unemployed Americans not have to pay taxes on what little benefit money they’re receiving? http://www.chn.ge/taxes',
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20065088743"], "experiments": [{"weightDistributions": [{"entityId": "20071316991", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM Grey Television", "bucketingStrategy": null, "variations": [{"id": "20060206005", "actions": [{"viewId": "20065088743", "changes": [{"dependencies": [], "type": "custom_code", "id": "4535e77bb2784ff08b1113fc31456808", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
  window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
  hj('trigger', 'tweet_dm_control');
});
}}]}], "name": "Original"}, {"id": "20071316991", "actions": [{"viewId": "20065088743", "changes": [{"dependencies": [], "type": "custom_code", "id": "c14c0b89ffb14922b03b841707c4ac4f", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
    
    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>Tweeting directly to the decision maker makes this petition impossible to ignore.</h1>' +
      '        <p class="mbxl type-l">Show your support and send a tweet tagging the decision maker for this issue. Just click to send the prepared post below. Can you join other supporters sending tweets?</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Send a direct tweet to this DM now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = getTweet();
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "bfd023d9dc2f479398ccb8e8e2065a45"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20040630052", "integrationSettings": null}], "id": "20065088744", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM Grey Television", "groupId": null, "commitId": "20049878232", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "078be0bd52eb4ff6b6f6aae6b54757bd", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    26955636: 'I’m one of 75,000+ signers demanding Gray Television—@WDBJ7 and @GrayDCnews’ parent company—do right by Alison Parker, killed while reporting on live TV. \n\nGive her family the means to remove videos of her murder. It’s the right thing to do. chn.ge/GrayTV',
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20120015306"], "experiments": [{"weightDistributions": [{"entityId": "20096286906", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic/fdn] - SAP - Media Disclaimer", "bucketingStrategy": null, "variations": [{"id": "20096771239", "actions": [{"viewId": "20120015306", "changes": [{"dependencies": [], "type": "custom_code", "id": "a1950b99c53044ee819711f68188576e", "value": function($){var utils = window.optimizely.get("utils");

function initTest(container) {
  //
  utils.waitUntil(function() {
    var uploader = document.querySelector("#media-control .uploader");
    return uploader && uploader.style.display !== 'none';
  }).then(function() {
    utils.waitUntil(function() {
      var cropTextParent = document.querySelector("#media-control .uploader div.type-s.type-weak.mtn.paxs");
     	var cropImage = document.querySelector('img.crop.js-media-reposition');
      return cropTextParent && cropImage && ((cropImage.naturalHeight < 900 || cropImage.naturalWidth < 1600));
    }).then(function() {
      var cropImage = document.querySelector('img.crop.js-media-reposition');
      window.App.trackEvent('optly_sap_media_small', {width: cropImage.naturalWidth, height: cropImage.naturalHeight});
    });
    utils.waitUntil(function() {
      var cropTextParent = document.querySelector("#media-control .uploader div.type-s.type-weak.mtn.paxs");
      var cropImage = document.querySelector('img.crop.js-media-reposition');
      return cropTextParent && cropImage && ((cropImage.naturalHeight > 900 && cropImage.naturalWidth > 1600));
    }).then(function() {
      window.App.trackEvent('optly_sap_media_good');
      utils.waitUntil(function() {
      	var uploader = document.querySelector("#media-control .uploader");
      	return uploader && uploader.style.display == 'none';
      }).then( function() {
        initTest(container);
      });
    });
  });
}

utils.waitForElement('.js-modular-sap-container .modular-form[data-step="media"]').then(function(mediaEl){
  initTest(mediaEl);
});
}}]}], "name": "Original"}, {"id": "20096286906", "actions": [{"viewId": "20120015306", "changes": [{"dependencies": [], "type": "custom_code", "id": "2f5749e1856f432db715637d7bc85232", "value": function($){var utils = window.optimizely.get("utils");

var mediaDisclaimer = 'By posting any photograph you are warranting that you have the right and consent to do so.<br> Change.org may test a variety of images to help your petition be seen by more people.&nbsp;<a target="_blank" rel="noopener noreferrer" href="https://help.change.org/s/article/smart-images?language=en" class="js-optimize-image-faq-link link-subtle">Learn more.</a>';


/* */
function initTest(container) {
  var header = container.querySelector('#media-control > h1');
  var p = container.querySelector('#media-control > p');
	var disclaimer = container.querySelector('#add-media > div > p.type-weak');
  disclaimer.innerHTML = mediaDisclaimer;
}

utils.waitForElement('.js-modular-sap-container .modular-form[data-step="media"]').then(function(mediaEl){
  initTest(mediaEl);
});
}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20120005980", "integrationSettings": null}], "id": "20096771238", "weightDistributions": null, "name": "[niftic/fdn] - SAP - Media Disclaimer", "groupId": null, "commitId": "20092308051", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20118209519"], "experiments": [{"weightDistributions": [{"entityId": "20137472610", "endOfRange": 5000}, {"entityId": "20249328444", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[fdn] - SAP - Pre-SAP Support Awareness - IN", "bucketingStrategy": null, "variations": [{"id": "20133620004", "actions": [{"viewId": "20118209519", "changes": [{"dependencies": [], "type": "custom_code", "id": "ec7a1bf2eb494fa58fd192465e60cf1f", "value": function($){window.localStorage.setItem('pre_sap_awareness', 'control');
}}]}], "name": "Original"}, {"id": "20133420890", "actions": [{"viewId": "20118209519", "changes": [{"dependencies": [], "type": "custom_code", "id": "830ed4d8daf641adaf6c64efaf145ba3", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <div class="landing-header arrange arrange-middle">' +
    '            <div class="arrange-fit">' +
    '                <img src="https://static.change.org/psf-experiments/pre-sap-v1.png" alt="" class="coach-avatar mrs">' +
    '            </div>' +
    '            <div class="arrange-fill">' +
    '                <h3 class="mtn mbn">Anna</h3>' +
    '                <div class="arrange arrange-middle">' +
    '                    <div class="arrange-fit">' +
    '                        <div class="coach-icon ptxs prxs border-rounded-circle mrxs" style="background-color: #3ECA8A"></div>' +
    '                    </div>' +
    '                    <div class="arrange-fill">' +
    '                        <div class="mbxxxs"><small class="type-weak">Petition Coach</small></div>' +
    '                    </div>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <div class="landing-main">' +
    '            <h2 class="mtxxl mbs"><b>👋 Welcome! I’m here to help with your petition</b></h2>' +
    '            <p class="mtn mbs">I’m one of Change.org’s petition coaches. Last month we supported +16,000 starters just like you. </p>' +
    '            <p class="mtn mbs">Best of all it’s 100% free, just make sure you provide us with a valid phone number so we can reach out via text.</p>' +
    '            <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
    sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});

window.localStorage.setItem('pre_sap_awareness', 'v1');
}}, {"value": "<style>.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.coach-avatar {\n      height: 92px;\n    border: 3px solid #F6F4F6;\n    border-radius: 50%;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "cf2d5c53d8364868a429dddcd0389873"}]}], "name": "Variation #1"}, {"id": "20127129615", "actions": [{"viewId": "20118209519", "changes": [{"dependencies": [], "type": "custom_code", "id": "515a4003537a4302b387981b67dd3ad5", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap';
  landingPage.innerHTML = '' +
    '<div class="landing-header">' +
    '    <img src="https://static.change.org/psf-experiments/pre-sap-bg.png" class="header-bg">' +
    '    <div class="header-content">' +
    '        <h5 class="type-branded mtn mbxxxs">NEW!</h5>' +
    '        <h3 class="mtn mbs">Get campaign advice</h3>' +
    '    </div>' +
    '    <img src="https://static.change.org/psf-experiments/pre-sap-v2.png" class="header-avatars">' +
    '</div>' +
    '<div class="container pbxxxl">' +
    '    <div class="row">' +
    '        <div class="col-xs-12">' +
    '            <div class="landing-main">' +
    '                <h2 class="mtxxl mbs"><b>👋 Welcome! I’m here to help with your petition</b></h2>' +
    '                <p class="mtn mbs">I’m one of Change.org’s petition coaches. Last month we supported +16,000' +
    '                    starters just like you. </p>' +
    '                <p class="mtn mbs">Best of all it’s 100% free, just make sure you provide us with a valid phone' +
    '                    number so we can reach out via text.</p> <button class="btn btn-action btn-big btn-full">Got it!' +
    '                    I\'m ready to create my petition</button>' +
    '            </div>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});

window.localStorage.setItem('pre_sap_awareness', 'v2');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap .container {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap .container {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "f1858376d21d4a1fa500b27edfd6fac6"}]}], "name": "Variation #2"}, {"id": "20137472610", "actions": [{"viewId": "20118209519", "changes": [{"dependencies": [], "type": "custom_code", "id": "769843a8b77244d180f11f439e6dc8c2", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Here’s how Change.org petitions work ✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Create your petition</h3>' +
    '                    <p class="type-l man">Try your best but don\'t worry if it\'s not perfect yet! You can edit your petition later.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Build support</h3>' +
    '                    <p class="type-l mtn mbs">Change.org has tools to help you  build support for your cause. </p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-v3.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Our team of petition experts in India are ready to look at your petition and give you personalized advice over WhatsApp.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Change the world</h3>' +
    '                    <p class="type-l man">Change.org is proven to influence politicians, public officials and business leaders. Work with your decision maker to reach an outcome that solves your problem.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "fa54fd5b66ae4270ad24e055a147ff4e"}]}], "name": "Variation #3"}, {"id": "20116487482", "actions": [{"viewId": "20118209519", "changes": [{"dependencies": [], "type": "custom_code", "id": "1B1546F5-CF45-470D-8964-D798EFF09EEE", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Here’s how Change.org petitions work ✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Create your petition</h3>' +
    '                    <p class="type-l man">Try your best but don’t worry if it’s not perfect yet. You can edit your petition later. Our experts will help you for free.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Build support</h3>' +
    '                    <p class="type-l mtn mbs">Change.org has tools to help you build support for your cause. </p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-v3.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Our campaigning experts are here to review your petition, give you personalised advice over WhatsApp to help you gain more supporters.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Change the world</h3>' +
    '                    <p class="type-l man">Change.org has been helping common citizens be heard by those in power. Work with your decision maker to create an impact that solves your problem.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "56E0418A-E825-4261-838A-E9FC8B4114D3"}]}], "name": "Variation #4"}, {"id": "20249328444", "actions": [{"viewId": "20118209519", "changes": [{"dependencies": [], "type": "custom_code", "id": "3E4F6878-006E-4776-843C-A8A296DED23D", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Here’s how Change.org petitions work ✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Write your petition</h3>' +
    '                    <p class="type-l man">Find what is important to you and write your petition. It doesn\’t have to be prefect, you can always edit it later.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Build support</h3>' +
    '                    <p class="type-l mtn mbs">Mobilize supporters for your cause through the tools that Change.org provides.</p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-IN.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Free petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Our petition experts give you personalized advice over WhatsApp to help you succeed.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Be the change you want to see</h3>' +
    '                    <p class="type-l man">Having a petition on Change.org is proven to influence politicians, public officials and business leaders.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "52B0CC1D-C8D2-498E-9D26-47E51532063A"}]}], "name": "Variation #5 (v3 in amplitude)"}], "audienceIds": null, "changes": null, "id": "20128280006", "integrationSettings": null}], "id": "20149330007", "weightDistributions": null, "name": "[fdn] - SAP - Pre-SAP Support Awareness - IN", "groupId": null, "commitId": "20257830785", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 9000, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20166826701"], "experiments": [{"weightDistributions": [{"entityId": "20162565296", "endOfRange": 5000}, {"entityId": "20162645619", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Petition Page - Disable Interrupt", "bucketingStrategy": null, "variations": [{"id": "20162565296", "actions": [{"viewId": "20166826701", "changes": [{"dependencies": [], "type": "custom_code", "id": "9918fc5f6a864833aaa1c5882183b044", "value": function($){var utils = window.optimizely.get("utils");

function fireEvent(ev){
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent(ev);
  });
}

utils.waitForElement('.psf-combo-shaded-round-border .js-share-btn').then(function(shareBtn){
  fireEvent('optly_returning_recruit_redirect');
});
}}]}], "name": "Original"}, {"id": "20162645619", "actions": [{"viewId": "20166826701", "changes": [{"dependencies": [], "type": "custom_code", "id": "ca03247181fb4e6b900941046f092cb2", "value": function($){var utils = window.optimizely.get("utils");

if (!!window.changeTargetingData.reactFe) {
  utils.waitForElement('.modal-open div > .modal').then(function(modal) {
    var interrupt = modal.parentNode;
    interrupt.classList.add('hide-fully');
    document.querySelector('.modal-open').classList.remove('modal-open');
  });
} else {
  utils.waitForElement('[data-view="petitions/show/components/interrupt_prompt_modal"]').then(function(interrupt){
    interrupt.classList.add('hide-fully');
    document.querySelector('.modal-open').classList.remove('modal-open');
  });
}
}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20156846350", "integrationSettings": null}], "id": "20160583587", "weightDistributions": null, "name": "[niftic] - Petition Page - Disable Interrupt", "groupId": null, "commitId": "20322930477", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20167837227"], "experiments": [{"weightDistributions": [{"entityId": "20177039869", "endOfRange": 10000}], "audienceName": "Everyone else", "name": " [niftic] - Combo - Call Tool - For The People", "bucketingStrategy": null, "variations": [{"id": "20159797261", "actions": [{"viewId": "20167837227", "changes": [{"dependencies": [], "type": "custom_code", "id": "14870a61818d491bbd4ab1f61ea6b286", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "20177039869", "actions": [{"viewId": "20167837227", "changes": [{"dependencies": [], "type": "custom_code", "id": "d3ff860058ce4d4985226892e658a4f5", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.row.match-height > .psf-combo-shaded-round-border').then(function(card) {
    utils.waitForElement('.btn.js-share-btn').then(function(shareBtn) {
      
      var cardContent = card.querySelector('.phxxl.ptl.xs-pam');
      var therm = cardContent.querySelector('.col-xs-12.phn.mbm');
      var comboButtons = card.querySelector('.psf-combo-buttons');
      therm.classList.add('hide-fully');
      var promoteBtn = document.querySelector('.js-promote');
      promoteBtn.classList.remove('btn-action');
      promoteBtn.classList.add('mtxs', 'btn-outline');
      // document.querySelector('[data-view="psf/combo/components/accepted_payment_types"]').classList.add('hide-fully');
      shareBtn.innerText = 'Yes, I’ll share this petition';
      shareBtn.parentNode.insertBefore(promoteBtn, shareBtn.nextSibling);
			
      var hs = card.querySelectorAll('h1');
      hs.forEach(function(h){
      	h.innerHTML = 'Can you help to get this petition on the agenda?';
      });
    
      var callBtn = document.createElement('a');
        callBtn.classList = 'btn btn-action btn-big btn-full mbxs';
        callBtn.innerText = 'Yes, I’ll call lawmakers';
        callBtn.id = 'call-lawmakers-btn';

        shareBtn.parentNode.insertBefore(callBtn, shareBtn);
     
       // every action call
      var callTool = document.createElement('div');
      callTool.classList = 'ngp-form';
      callTool.setAttribute('data-form-url', 'https://advocator.ngpvan.com/https%3a%2f%2fsecure.everyaction.com%2fv1%2fForms%2fmBFCtFVW-UivLbozwk8kPQ2/ngpForm');
      callTool.setAttribute('data-fastaction-endpoint', 'https://fastaction.ngpvan.com');
      callTool.setAttribute('data-inline-errors', 'true');
      callTool.setAttribute('data-fastaction-nologin', 'true');
      callTool.setAttribute('data-databag-endpoint', 'https://profile.ngpvan.com');
      callTool.setAttribute('data-databag', 'everybody');
      callTool.setAttribute('data-mobile-autofocus', 'false');

      var scriptLink = document.createElement('link');
      scriptLink.rel = 'preload';
      scriptLink.href = 'https://d3rse9xjbp8270.cloudfront.net/at.js';
      scriptLink.setAttribute('as', 'script');

      var styleLink = document.createElement('link');
      styleLink.rel = 'preload';
      styleLink.href = 'https://d3rse9xjbp8270.cloudfront.net/at.min.css';
      styleLink.setAttribute('as', 'style');

      var ngpJS = document.createElement('script');
      ngpJS.src = 'https://d3rse9xjbp8270.cloudfront.net/at.js';
      ngpJS.type = 'text/javascript';
      ngpJS.setAttribute('crossorigin', 'anonymous');

			var callCard = card.cloneNode(true);
      callCard.innerHTML = '';
      callCard.appendChild(callTool);
      
      callCard.classList.add('hide-fully', 'call-card');
      card.parentNode.insertBefore(callCard, card);
      
      var ngpForm = document.querySelector('.ngp-form');
      /* Insert Scripts & Links */
     	ngpForm.parentNode.insertBefore(scriptLink, ngpForm);
      ngpForm.parentNode.insertBefore(styleLink, ngpForm);
      ngpForm.parentNode.insertBefore(ngpJS, ngpForm);

      document.getElementById('call-lawmakers-btn').onclick = function() {
          card.classList.add('hide-fully');
          callCard.classList.remove('hide-fully');
					window.scrollTo(0,0);
          //utils.waitForElement('.advocacy-actionwidget iframe').then(function(iframe) {
          //  iframe.setAttribute('scrolling', 'yes');
          //});

          utils.waitUntil(function() { return !!window.App; }).then(function() {
            window.App.trackEvent('optly_call_launched');
          });
        }; 
    });
  
  	var content = card.querySelector('.ptl > div:nth-of-type(1)');
  	var additional = document.createElement('p');
  	additional.classList = 'mvs';
  	additional.innerText = 'Another powerful action you can take is calling your Senators to ensure that every eligible American is able to vote. Will you call lawmakers and ask them to vote for the "For the People" Act?';
  	content.parentNode.insertBefore(additional, content.nextSibling);

  });

  /*
  // Desktop Feed
  var feedIndex = 0;
  var nextCall = 1;
  function getRandomInt(min, max) {
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(Math.random() * (max - min + 1)) + min;
  }
  utils.observeSelector('.visible-lg [data-view="psf/combo/components/combo_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(feedItem) {
    var feedInner = feedItem.querySelector('.arrange-fill .type-break-word > span');
    var name = feedInner.querySelector('strong').innerText;
    feedIndex++;
    if (feedIndex === nextCall) {
      feedInner.innerHTML = '<strong>' + name + '</strong> called lawmakers';
      nextCall = nextCall + getRandomInt(2, 4);
    }
  }, {
      "timeout": 60000,
      "once": false,
  });

  // Mobile Feed
  var mobileFeedIndex = 0;
  var mobileNextCall = 1;
  utils.observeSelector('.hidden-lg [data-view="psf/combo/components/combo_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(feedItem) {
    var feedInner = feedItem.querySelector('.arrange-fill .type-break-word > span');
    var name = feedInner.querySelector('strong').innerText;
    mobileFeedIndex++;
    if (mobileFeedIndex === mobileNextCall) {
      feedInner.innerHTML = '<strong>' + name + '</strong> called lawmakers';
      mobileNextCall = mobileNextCall + getRandomInt(2, 4);
    }
  }, {
      "timeout": 60000,
      "once": false,
  });
  */
}}, {"value": "<style>.shareable-scroller {\n  overflow: hidden;\n  overflow-x: scroll;\n  overflow-y: hidden;\n  white-space: nowrap;\n  padding: 25px;\n}\n\n.shareable-scroller .scroll-item {\n  max-width: 220px;\n  text-align: center;\n}\n\n.shareable-scroller .scroll-item {\n \tdisplay: inline-block;\n  vertical-align: top;\n  margin-right: 25px;\n}\n\n.shareable-scroller .scroll-item img {\n  box-shadow: 0px 1px 6px rgba(115, 114, 115, 0.4);\n}\n\n.shareable-scroller .scroll-item a {\n  margin-top: 20px;\n  display: inline-block;\n  text-decoration: none;\n  font-weight: bold;\n  padding: 8px 20px;\n  border: 2px solid;\n  border-radius: 5px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "218d435c2443433bbdcf2ac3186415b1"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20164067342", "integrationSettings": null}], "id": "20170375755", "weightDistributions": null, "name": " [niftic] - Combo - Call Tool - For The People", "groupId": null, "commitId": "20187381745", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "840e9332e534420e8d7f0077b0b0bdef", "value": function($){window.getTemplateData = function() {
  var pId = parseInt(window.changeTargetingData.petition.id);
  var d = {
    25360449: {
      callTool: true,
      sharables: false,
      sms: false,
    	callShortUrl: 'wL6ogUZ',
      copylink: 'chng.it/WMWCFs2Q',
      sharableImages: [],
      smsShortUrl: ''
    }
  };
  return d[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20197253641"], "experiments": [{"weightDistributions": [{"entityId": "20279390126", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[fdn] - SAP - Pre-SAP Support Awareness - ID", "bucketingStrategy": null, "variations": [{"id": "20168505678", "actions": [{"viewId": "20197253641", "changes": [{"dependencies": [], "type": "custom_code", "id": "08249235d1674abea0fce248fd4fc0c1", "value": function($){window.localStorage.setItem('pre_sap_awareness', 'control');
}}]}], "name": "Original"}, {"id": "20152804530", "actions": [{"viewId": "20197253641", "changes": [{"dependencies": [], "type": "custom_code", "id": "5fc182cf544a486bb4f157097c62d17e", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <div class="landing-header arrange arrange-middle">' +
    '            <div class="arrange-fit">' +
    '                <img src="https://static.change.org/psf-experiments/pre-sap-v1.png" alt="" class="coach-avatar mrs">' +
    '            </div>' +
    '            <div class="arrange-fill">' +
    '                <h3 class="mtn mbn">Anna</h3>' +
    '                <div class="arrange arrange-middle">' +
    '                    <div class="arrange-fit">' +
    '                        <div class="coach-icon ptxs prxs border-rounded-circle mrxs" style="background-color: #3ECA8A"></div>' +
    '                    </div>' +
    '                    <div class="arrange-fill">' +
    '                        <div class="mbxxxs"><small class="type-weak">Petition Coach</small></div>' +
    '                    </div>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <div class="landing-main">' +
    '            <h2 class="mtxxl mbs"><b>👋 Welcome! I’m here to help with your petition</b></h2>' +
    '            <p class="mtn mbs">I’m one of Change.org’s petition coaches. Last month we supported +16,000 starters just like you. </p>' +
    '            <p class="mtn mbs">Best of all it’s 100% free, just make sure you provide us with a valid phone number so we can reach out via text.</p>' +
    '            <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
    sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});

window.localStorage.setItem('pre_sap_awareness', 'v1');
}}, {"value": "<style>.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.coach-avatar {\n      height: 92px;\n    border: 3px solid #F6F4F6;\n    border-radius: 50%;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "e2b6dbccd579468b9700861ebd72ce36"}]}], "name": "Variation #1"}, {"id": "20170885770", "actions": [{"viewId": "20197253641", "changes": [{"dependencies": [], "type": "custom_code", "id": "19395f7fb7994eaba6112ea2de41676c", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap';
  landingPage.innerHTML = '' +
    '<div class="landing-header">' +
    '    <img src="https://static.change.org/psf-experiments/pre-sap-bg.png" class="header-bg">' +
    '    <div class="header-content">' +
    '        <h5 class="type-branded mtn mbxxxs">NEW!</h5>' +
    '        <h3 class="mtn mbs">Get campaign advice</h3>' +
    '    </div>' +
    '    <img src="https://static.change.org/psf-experiments/pre-sap-v2.png" class="header-avatars">' +
    '</div>' +
    '<div class="container pbxxxl">' +
    '    <div class="row">' +
    '        <div class="col-xs-12">' +
    '            <div class="landing-main">' +
    '                <h2 class="mtxxl mbs"><b>👋 Welcome! I’m here to help with your petition</b></h2>' +
    '                <p class="mtn mbs">I’m one of Change.org’s petition coaches. Last month we supported +16,000' +
    '                    starters just like you. </p>' +
    '                <p class="mtn mbs">Best of all it’s 100% free, just make sure you provide us with a valid phone' +
    '                    number so we can reach out via text.</p> <button class="btn btn-action btn-big btn-full">Got it!' +
    '                    I\'m ready to create my petition</button>' +
    '            </div>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});

window.localStorage.setItem('pre_sap_awareness', 'v2');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap .container {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap .container {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "98b03b11f42846e1839a00fd24715c84"}]}], "name": "Variation #2"}, {"id": "20189305539", "actions": [{"viewId": "20197253641", "changes": [{"dependencies": [], "type": "custom_code", "id": "7be65af01a9e405e8b17874d8246c17d", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Ini cara kerja petisi di Change.org ✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Mulai petisimu</h3>' +
    '                    <p class="type-l man">Nggak apa-apa kalau petisimu belum sempurna. Kamu bisa edit lagi nanti.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Galang dukungan</h3>' +
    '                    <p class="type-l mtn mbs">Change.org punya fitur untuk membantumu galang dukungan publik untuk kampanyemu.</p>' +
   /* '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-v3.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +*/
    '                    <p class=" type-l man">Jangan lupa masukkan nomer teleponmu untuk dapat bantuan dari tim Change.org.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Buat perubahan</h3>' +
    '                    <p class="type-l man">Petisi di Change.org terbukti berpengaruh kepada politisi, pejabat publik, dan pemilik perusahaan. Jangkau pengambil keputusan untuk mendengarkan aspirasimu.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Oke! Aku siap mulai petisiku</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "cabd0ee2f5cb4dd4a5d5994f80e3c800"}]}], "name": "Variation #3"}, {"id": "20279390126", "actions": [{"viewId": "20197253641", "changes": [{"dependencies": [], "type": "custom_code", "id": "9865812C-FDD1-419A-AD1E-2B638B29C500", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Ini cara kerja petisi di Change.org✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Mulai petisimu</h3>' +
    '                    <p class="type-l man">Jelaskan masalahmu sebaik mungkin. Jangan khawatir jika petisimu belum sempurna, kamu bisa mengeditnya lagi nanti</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Kumpulkan dukungan</h3>' +
    '                    <p class="type-l mtn mbs">Change.org memiliki fitur untuk membantumu mengumpulkan dukungan.</p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-ID.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">BARU!</h5>' +
    '                            <h4 class="man">Saran petisi</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Tim ahli petisi kami bisa membantu dengan memberikan saran untuk petisimu.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Buat perubahan di dunia</h3>' +
    '                    <p class="type-l man">Change.org mengaungkan petisimu agar didengar lebih banyak orang seperti media, pemerintah, dan pelaku bisnis. Bekerja sama dengan mereka untuk menyelesaikan masalah dan membuat perubahan.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Baik! Saya siap memulai petisi</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "42B1707F-2750-40D9-82AA-EEDC966777E2"}]}], "name": "Variation #4"}], "audienceIds": null, "changes": null, "id": "20164865779", "integrationSettings": null}], "id": "20176435788", "weightDistributions": null, "name": "[fdn] - SAP - Pre-SAP Support Awareness - ID", "groupId": null, "commitId": "20352031370", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20205522976"], "experiments": [{"weightDistributions": [{"entityId": "20192654208", "endOfRange": 5000}, {"entityId": "20343129209", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[fdn] - SAP - Pre-SAP Support Awareness - BR", "bucketingStrategy": null, "variations": [{"id": "20192654208", "actions": [{"viewId": "20205522976", "changes": [{"dependencies": [], "type": "custom_code", "id": "6fa699ea9d7144c89f7397f7857edc4e", "value": function($){window.localStorage.setItem('pre_sap_awareness', 'control');
}}]}], "name": "Original"}, {"id": "20200391111", "actions": [{"viewId": "20205522976", "changes": [{"dependencies": [], "type": "custom_code", "id": "04717fc4af874c43aae881d87464a90c", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <div class="landing-header arrange arrange-middle">' +
    '            <div class="arrange-fit">' +
    '                <img src="https://static.change.org/psf-experiments/pre-sap-v1.png" alt="" class="coach-avatar mrs">' +
    '            </div>' +
    '            <div class="arrange-fill">' +
    '                <h3 class="mtn mbn">Anna</h3>' +
    '                <div class="arrange arrange-middle">' +
    '                    <div class="arrange-fit">' +
    '                        <div class="coach-icon ptxs prxs border-rounded-circle mrxs" style="background-color: #3ECA8A"></div>' +
    '                    </div>' +
    '                    <div class="arrange-fill">' +
    '                        <div class="mbxxxs"><small class="type-weak">Petition Coach</small></div>' +
    '                    </div>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <div class="landing-main">' +
    '            <h2 class="mtxxl mbs"><b>👋 Welcome! I’m here to help with your petition</b></h2>' +
    '            <p class="mtn mbs">I’m one of Change.org’s petition coaches. Last month we supported +16,000 starters just like you. </p>' +
    '            <p class="mtn mbs">Best of all it’s 100% free, just make sure you provide us with a valid phone number so we can reach out via text.</p>' +
    '            <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
    sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});

window.localStorage.setItem('pre_sap_awareness', 'v1');
}}, {"value": "<style>.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.coach-avatar {\n      height: 92px;\n    border: 3px solid #F6F4F6;\n    border-radius: 50%;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "963a349d0555438884e8bbf25e78d271"}]}], "name": "Variation #1"}, {"id": "20180669607", "actions": [{"viewId": "20205522976", "changes": [{"dependencies": [], "type": "custom_code", "id": "189f063518fc453999e447e0f05d03bc", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap';
  landingPage.innerHTML = '' +
    '<div class="landing-header">' +
    '    <img src="https://static.change.org/psf-experiments/pre-sap-bg.png" class="header-bg">' +
    '    <div class="header-content">' +
    '        <h5 class="type-branded mtn mbxxxs">NEW!</h5>' +
    '        <h3 class="mtn mbs">Get campaign advice</h3>' +
    '    </div>' +
    '    <img src="https://static.change.org/psf-experiments/pre-sap-v2.png" class="header-avatars">' +
    '</div>' +
    '<div class="container pbxxxl">' +
    '    <div class="row">' +
    '        <div class="col-xs-12">' +
    '            <div class="landing-main">' +
    '                <h2 class="mtxxl mbs"><b>👋 Welcome! I’m here to help with your petition</b></h2>' +
    '                <p class="mtn mbs">I’m one of Change.org’s petition coaches. Last month we supported +16,000' +
    '                    starters just like you. </p>' +
    '                <p class="mtn mbs">Best of all it’s 100% free, just make sure you provide us with a valid phone' +
    '                    number so we can reach out via text.</p> <button class="btn btn-action btn-big btn-full">Got it!' +
    '                    I\'m ready to create my petition</button>' +
    '            </div>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});

window.localStorage.setItem('pre_sap_awareness', 'v2');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap .container {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap .container {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "0ce6d9b4abc04a74bb5c3f6a352b3ed5"}]}], "name": "Variation #2"}, {"id": "20207417971", "actions": [{"viewId": "20205522976", "changes": [{"dependencies": [], "type": "custom_code", "id": "1394394b83854c09bd32af64d50d8774", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Como funciona uma petição na Change.org✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Crie sua petição</h3>' +
    '                    <p class="type-l man">Dê o seu melhor, mas não se preocupe se não estiver tudo 100%. Você pode editar sua petição mais tarde.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Nós te apoiamos</h3>' +
    '                    <p class="type-l mtn mbs">A Change.org possui ferramentas para ajudar você em sua causa.</p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-BR.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">Novidade!</h5>' +
    '                            <h4 class="man">Dicas sobre petições</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Nossos especialistas em petições também podem ajudar com dicas incríveis!</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Mude o mundo!</h3>' +
    '                    <p class="type-l man">A Change.org influencia políticos, órgãos públicos e líderes empresariais. Pressione os/as tomadores/as de decisão para conseguir resolver o seu problema.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Vamos nessa! Quero criar uma petição</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "3f1fe569e8cf4698ba1407d8caeb9f28"}]}], "name": "Variation #3"}, {"id": "20186406752", "actions": [{"viewId": "20205522976", "changes": [{"dependencies": [], "type": "custom_code", "id": "c0caa40ccd8648b794098612ab44881a", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Here’s how Change.org petitions work ✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Create your petition</h3>' +
    '                    <p class="type-l man">Try your best but don’t worry if it’s not perfect yet. You can edit your petition later. Our experts will help you for free.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Build support</h3>' +
    '                    <p class="type-l mtn mbs">Change.org has tools to help you build support for your cause. </p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-v3.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Our campaigning experts are here to review your petition, give you personalised advice over WhatsApp to help you gain more supporters.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Change the world</h3>' +
    '                    <p class="type-l man">Change.org has been helping common citizens be heard by those in power. Work with your decision maker to create an impact that solves your problem.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "e4ebbf38de934b46abe3f948c43e23a6"}]}], "name": "Variation #4"}, {"id": "20192375880", "actions": [{"viewId": "20205522976", "changes": [{"dependencies": [], "type": "custom_code", "id": "ce2125f34bed4baf9afea7237c2552f8", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Entenda como funcionam as petições na Change.org✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Crie uma petição</h3>' +
    '                    <p class="type-l man">Empenhe-se o máximo possível, mas não se preocupe se não estiver ainda com todas as informações. É possível editar sua petição posteriormente.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Obtenha apoio</h3>' +
    '                    <p class="type-l mtn mbs">A Change.org oferece ferramentas para aumentar o engajamento em sua causa.</p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-BR.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">Novidade!</h5>' +
    '                            <h4 class="man">Orientações de campanha</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Nosso time de especialistas em petições podem conferir sua petição e oferecer ajuda personalizada.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Mude o mundo</h3>' +
    '                    <p class="type-l man">A Change.org é, de fato, influenciadora de políticos, órgãos públicos e líderes empresariais. Trabalhe com os/as tomadores/as de decisão para chegar a um resultado que resolva o problema.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Sim, estou pronto para iniciar minha petição</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "c7bb08a6913c41e9ba897e94409d2c0c"}]}], "name": "Variation #5"}, {"id": "20343129209", "actions": [{"viewId": "20205522976", "changes": [{"dependencies": [], "type": "custom_code", "id": "1C839FE5-7477-493C-9CB3-AB2D571A011C", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Isso é o que você pode fazer✨</h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Crie sua petição</h3>' +
    '                    <p class="type-l man">Não precisa estar perfeita, logo mais você poderá editá-la.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Construa uma rede de aliados</h3>' +
    '                    <p class="type-l mtn mbs">Use as ferramentas que temos para você.</p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-BR.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">Novidade!</h5>' +
    '                            <h4 class="man">Receba conselhos</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Temos uma equipe que pode ajudar você.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">A mudança é possível</h3>' +
    '                    <p class="type-l man">Sabemos que a pressão social faz com que tomadores de decisão solucionem as petições.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Quero criar uma petição!</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "1A6B195F-5056-4F61-85F5-A8F183B5EDF2"}]}], "name": "Variation #6"}], "audienceIds": null, "changes": null, "id": "20207911113", "integrationSettings": null}], "id": "20193990624", "weightDistributions": null, "name": "[fdn] - SAP - Pre-SAP Support Awareness - BR", "groupId": null, "commitId": "20341833176", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 4000, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20223160166"], "experiments": [{"weightDistributions": [{"entityId": "20207646881", "endOfRange": 1670}, {"entityId": "20210180936", "endOfRange": 3340}, {"entityId": "20221112693", "endOfRange": 5010}, {"entityId": "20214000120", "endOfRange": 6680}, {"entityId": "20222991978", "endOfRange": 8340}, {"entityId": "20207913885", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Combo - PSF Retention", "bucketingStrategy": null, "variations": [{"id": "20207646881", "actions": [{"viewId": "20223160166", "changes": [{"dependencies": [], "type": "custom_code", "id": "5b4ea8cc8d92415a851e2ba4e0a0a268", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "20210180936", "actions": [{"viewId": "20223160166", "changes": [{"dependencies": [], "type": "custom_code", "id": "7571d79d15494ff99cfb673df2e81c3a", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/combo/components/skip_footer"]').then(function(skip) {
  var link = skip.querySelector('.js-combo-skip-footer-link');
	skip.parentNode.classList.remove('xs-mvm');
  skip.parentNode.classList.add('xs-mtm');
  var pUrl = window.location.href.split("/psf")[0];
  link.addEventListener('click', function(ev){
    ev.preventDefault();
    window.location.href = pUrl + '/d';
  }, false);
  
  var psfCombined = document.querySelector('.psf-combined');
  psfCombined.appendChild(skip);
});
}}, {"value": "<style>[data-view=\"psf/combo/components/skip_footer\"] {\n  padding-bottom: 0 !important;\n  border-top: 1px solid #FFE9AA;\n}\n\n[data-view=\"psf/combo/components/skip_footer\"] .phxs {\n  background: #FFF9DF;\n}\n\n.js-combo-skip-footer-link {\n  color: #363135;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "93262CFC-D72A-461B-88E0-515EFD63325E"}]}], "name": "Variation #1"}, {"id": "20221112693", "actions": [{"viewId": "20223160166", "changes": [{"dependencies": [], "type": "custom_code", "id": "45940D85-49BA-4A75-B1FF-574108602BBE", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/combo/components/skip_footer"]').then(function(skip) {
  var link = skip.querySelector('.js-combo-skip-footer-link');
  link.innerText = 'Show me similar petitions that I can support';
	skip.parentNode.classList.remove('xs-mvm');
  skip.parentNode.classList.add('xs-mtm');
  var pUrl = window.location.href.split("/psf")[0];
  link.addEventListener('click', function(ev){
    ev.preventDefault();
    window.location.href = pUrl + '/d';
  }, false);
  var psfCombined = document.querySelector('.psf-combined');
  psfCombined.appendChild(skip);
});
}}, {"value": "<style>[data-view=\"psf/combo/components/skip_footer\"] {\n  padding-bottom: 0 !important;\n  border-top: 1px solid #FFE9AA;\n}\n\n[data-view=\"psf/combo/components/skip_footer\"] .phxs {\n  background: #FFF9DF;\n}\n\n.js-combo-skip-footer-link {\n  color: #363135;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "90DF3449-6CCA-4CA6-9400-91569CCC61CF"}]}], "name": "Variation #2"}, {"id": "20214000120", "actions": [{"viewId": "20223160166", "changes": [{"dependencies": [], "type": "custom_code", "id": "CD35542B-8EEA-4AB0-BBF7-706754760AF6", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/combo/components/skip_footer"]').then(function(skip) {
  var link = skip.querySelector('.js-combo-skip-footer-link');
  link.innerText = 'Skip to similar petitions to support';
	skip.parentNode.classList.remove('xs-mvm');
  skip.parentNode.classList.add('xs-mtm');
  var pUrl = window.location.href.split("/psf")[0];
  link.addEventListener('click', function(ev){
    ev.preventDefault();
    window.location.href = pUrl + '/d';
  }, false);
  var psfCombined = document.querySelector('.psf-combined');
  psfCombined.appendChild(skip);
});
}}, {"value": "<style>[data-view=\"psf/combo/components/skip_footer\"] {\n  padding-bottom: 0 !important;\n  border-top: 1px solid #FFE9AA;\n}\n\n[data-view=\"psf/combo/components/skip_footer\"] .phxs {\n  background: #FFF9DF;\n}\n\n.js-combo-skip-footer-link {\n  color: #363135;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "F7B5B2B3-A3ED-4062-8C66-1C8CC30A9B54"}]}], "name": "Variation #3"}, {"id": "20222991978", "actions": [{"viewId": "20223160166", "changes": [{"dependencies": [], "type": "custom_code", "id": "4FE535AA-4236-4014-972D-353E3B52D45D", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.js-share-btn').then(function(share) {
  var skip = share.cloneNode(true);
  skip.classList.remove('js-share-btn');
  skip.classList.add('mtxs');
  skip.href = window.location.href.split("/psf")[0] + '/d';
  skip.innerHTML = '<p style="line-height:1.2">No, I would like to see similar petitions that I can support</p>';
  share.parentNode.insertBefore(skip, share.nextSibling);
  skip.addEventListener('click', function(){
    utils.waitUntil(function() { return !!window.App; }).then(function() {
      window.App.trackEvent('optly_carousel_redirect_click');
    });
  }, false);
});
}}]}], "name": "Variation #4"}, {"id": "20207913885", "actions": [{"viewId": "20223160166", "changes": [{"dependencies": [], "type": "custom_code", "id": "3276188B-25E3-4713-A281-38983FF72E47", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.bg-brighter.psf-combo-shaded-round-border').then(function(card) {
  var carousel = document.createElement('div');
  carousel.classList = 'bg-default txt-c carousel-link';
  var link = window.location.href.split("/psf")[0] + '/d';
  carousel.innerHTML = '<a id="carousel-link" href="'+link+'" class="">I would like to see similar petitions that I can support</a>';
  card.appendChild(carousel);
  document.getElementById('carousel-link').addEventListener('click', function(){
    utils.waitUntil(function() { return !!window.App; }).then(function() {
      window.App.trackEvent('optly_carousel_redirect_click');
    });
  }, false);
});
}}, {"value": "<style>.carousel-link {\n  padding: 12px 20px;\n}\n\n.carousel-link a {\n  color: #363135;   \n}\n\n@media (min-width: 768px) {\n  .carousel-link {\n    margin-bottom: -30px;\n    margin-top: 20px;\n  }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "305A4CFF-BA8C-4001-B79E-C76CBC7F5D04"}]}], "name": "Variation #5"}], "audienceIds": null, "changes": null, "id": "20205760692", "integrationSettings": null}], "id": "20207913837", "weightDistributions": null, "name": "[niftic] - Combo - PSF Retention", "groupId": null, "commitId": "20184517591", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20232970813"], "experiments": [{"weightDistributions": [{"entityId": "20223300789", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[fdn] - SAP - Pre-SAP Support Awareness - AR", "bucketingStrategy": null, "variations": [{"id": "20228990618", "actions": [{"viewId": "20232970813", "changes": [{"dependencies": [], "type": "custom_code", "id": "640a9c9d01104382835db54fee35d946", "value": function($){window.localStorage.setItem('pre_sap_awareness', 'control');
}}]}], "name": "Original"}, {"id": "20200900824", "actions": [{"viewId": "20232970813", "changes": [{"dependencies": [], "type": "custom_code", "id": "c59bc0fd267947b686cf34eac91e2706", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <div class="landing-header arrange arrange-middle">' +
    '            <div class="arrange-fit">' +
    '                <img src="https://static.change.org/psf-experiments/pre-sap-v1.png" alt="" class="coach-avatar mrs">' +
    '            </div>' +
    '            <div class="arrange-fill">' +
    '                <h3 class="mtn mbn">Anna</h3>' +
    '                <div class="arrange arrange-middle">' +
    '                    <div class="arrange-fit">' +
    '                        <div class="coach-icon ptxs prxs border-rounded-circle mrxs" style="background-color: #3ECA8A"></div>' +
    '                    </div>' +
    '                    <div class="arrange-fill">' +
    '                        <div class="mbxxxs"><small class="type-weak">Petition Coach</small></div>' +
    '                    </div>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <div class="landing-main">' +
    '            <h2 class="mtxxl mbs"><b>👋 Welcome! I’m here to help with your petition</b></h2>' +
    '            <p class="mtn mbs">I’m one of Change.org’s petition coaches. Last month we supported +16,000 starters just like you. </p>' +
    '            <p class="mtn mbs">Best of all it’s 100% free, just make sure you provide us with a valid phone number so we can reach out via text.</p>' +
    '            <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
    sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});

window.localStorage.setItem('pre_sap_awareness', 'v1');
}}, {"value": "<style>.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.coach-avatar {\n      height: 92px;\n    border: 3px solid #F6F4F6;\n    border-radius: 50%;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "bf2f9a2822e14946a03dec0835947c65"}]}], "name": "Variation #1"}, {"id": "20196700634", "actions": [{"viewId": "20232970813", "changes": [{"dependencies": [], "type": "custom_code", "id": "37eac415346e450ba3ccb281e34b4e5b", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap';
  landingPage.innerHTML = '' +
    '<div class="landing-header">' +
    '    <img src="https://static.change.org/psf-experiments/pre-sap-bg.png" class="header-bg">' +
    '    <div class="header-content">' +
    '        <h5 class="type-branded mtn mbxxxs">NEW!</h5>' +
    '        <h3 class="mtn mbs">Get campaign advice</h3>' +
    '    </div>' +
    '    <img src="https://static.change.org/psf-experiments/pre-sap-v2.png" class="header-avatars">' +
    '</div>' +
    '<div class="container pbxxxl">' +
    '    <div class="row">' +
    '        <div class="col-xs-12">' +
    '            <div class="landing-main">' +
    '                <h2 class="mtxxl mbs"><b>👋 Welcome! I’m here to help with your petition</b></h2>' +
    '                <p class="mtn mbs">I’m one of Change.org’s petition coaches. Last month we supported +16,000' +
    '                    starters just like you. </p>' +
    '                <p class="mtn mbs">Best of all it’s 100% free, just make sure you provide us with a valid phone' +
    '                    number so we can reach out via text.</p> <button class="btn btn-action btn-big btn-full">Got it!' +
    '                    I\'m ready to create my petition</button>' +
    '            </div>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});

window.localStorage.setItem('pre_sap_awareness', 'v2');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap .container {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap .container {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "fb1e1d2511cd4da2a6dd57bccfaee2e1"}]}], "name": "Variation #2"}, {"id": "20202151007", "actions": [{"viewId": "20232970813", "changes": [{"dependencies": [], "type": "custom_code", "id": "a93ba35c1cd74aecba38e9f28ec6891f", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Mirá como funcionan las peticiones en Change.org✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Creá tu petición</h3>' +
    '                    <p class="type-l man">Vas a poder editar cuantas veces quieras tu petición. No te preocupes si no es perfecta en el primer intento.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Construí una red de aliados</h3>' +
    '                    <p class="type-l mtn mbs">Change.org tiene herramientas para ayudarte a construir una comunidad de aliados.</p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-AR.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">¡NUEVO!</h5>' +
    '                            <h4 class="man">Recibí consejos</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Nuestro equipo local puede leer tu petición y darte consejos para mejorarla.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">El cambio es posible</h3>' +
    '                    <p class="type-l man">Está comprobado que Change.org influye positivamente en las autoridades públicas y privadas. Trabajá junto a los tomadores de decisión para lograr una solución a tu iniciativa.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Estoy listo para crear mi petición</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "9c6053b13ef740cfbe9fe7aa160eefce"}]}], "name": "Variation #3"}, {"id": "20233000807", "actions": [{"viewId": "20232970813", "changes": [{"dependencies": [], "type": "custom_code", "id": "85af3a048c22436eadbe63a1bec583d0", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Here’s how Change.org petitions work ✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Create your petition</h3>' +
    '                    <p class="type-l man">Try your best but don’t worry if it’s not perfect yet. You can edit your petition later. Our experts will help you for free.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Build support</h3>' +
    '                    <p class="type-l mtn mbs">Change.org has tools to help you build support for your cause. </p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-v3.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Our campaigning experts are here to review your petition, give you personalised advice over WhatsApp to help you gain more supporters.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Change the world</h3>' +
    '                    <p class="type-l man">Change.org has been helping common citizens be heard by those in power. Work with your decision maker to create an impact that solves your problem.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "88d8402626944b3f9ac8172890fab979"}]}], "name": "Variation #4"}, {"id": "20223300789", "actions": [{"viewId": "20232970813", "changes": [{"dependencies": [], "type": "custom_code", "id": "13a8a8804cd04c04bd5aea236cee0b43", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Esto es lo que podés hacer✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Creá tu petición</h3>' +
    '                    <p class="type-l man">No tiene que ser perfecta, luego podrás editarla.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Construí una red de aliados</h3>' +
    '                    <p class="type-l mtn mbs">Usá las herramientas que tenemos para vos.</p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-AR.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">¡NUEVO!</h5>' +
    '                            <h4 class="man">Recibí consejos</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Tenemos un equipo que puede ayudarte.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">El cambio es posible</h3>' +
    '                    <p class="type-l man">Sabemos que la presión social hace que los tomadores de decisión resuelvan las peticiones.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">¡Quiero empezar!</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "1e251979823e470a8ebcbb0e30f3bfca"}]}], "name": "Variation #5"}], "audienceIds": null, "changes": null, "id": "20208360822", "integrationSettings": null}], "id": "20208330953", "weightDistributions": null, "name": "[fdn] - SAP - Pre-SAP Support Awareness - AR", "groupId": null, "commitId": "20328310888", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20160805660"], "experiments": [{"weightDistributions": [{"entityId": "20192372803", "endOfRange": 5000}, {"entityId": "20213340823", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[fdn] - SAP - Pre-SAP Support Awareness - JP", "bucketingStrategy": null, "variations": [{"id": "20192372803", "actions": [{"viewId": "20160805660", "changes": [{"dependencies": [], "type": "custom_code", "id": "720894234c0a4bc08ed098a6fb518197", "value": function($){window.localStorage.setItem('pre_sap_awareness', 'control');
}}]}], "name": "Original"}, {"id": "20210959822", "actions": [{"viewId": "20160805660", "changes": [{"dependencies": [], "type": "custom_code", "id": "f393cb76d96d4af8a9d161bee8f7f2be", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <div class="landing-header arrange arrange-middle">' +
    '            <div class="arrange-fit">' +
    '                <img src="https://static.change.org/psf-experiments/pre-sap-v1.png" alt="" class="coach-avatar mrs">' +
    '            </div>' +
    '            <div class="arrange-fill">' +
    '                <h3 class="mtn mbn">Anna</h3>' +
    '                <div class="arrange arrange-middle">' +
    '                    <div class="arrange-fit">' +
    '                        <div class="coach-icon ptxs prxs border-rounded-circle mrxs" style="background-color: #3ECA8A"></div>' +
    '                    </div>' +
    '                    <div class="arrange-fill">' +
    '                        <div class="mbxxxs"><small class="type-weak">Petition Coach</small></div>' +
    '                    </div>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <div class="landing-main">' +
    '            <h2 class="mtxxl mbs"><b>👋 Welcome! I’m here to help with your petition</b></h2>' +
    '            <p class="mtn mbs">I’m one of Change.org’s petition coaches. Last month we supported +16,000 starters just like you. </p>' +
    '            <p class="mtn mbs">Best of all it’s 100% free, just make sure you provide us with a valid phone number so we can reach out via text.</p>' +
    '            <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
    sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});

window.localStorage.setItem('pre_sap_awareness', 'v1');
}}, {"value": "<style>.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.coach-avatar {\n      height: 92px;\n    border: 3px solid #F6F4F6;\n    border-radius: 50%;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "384ed41b24d343978cd920235110bedd"}]}], "name": "Variation #1"}, {"id": "20160805661", "actions": [{"viewId": "20160805660", "changes": [{"dependencies": [], "type": "custom_code", "id": "2c82118e77f34ff5b7c04792e5f677ff", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap';
  landingPage.innerHTML = '' +
    '<div class="landing-header">' +
    '    <img src="https://static.change.org/psf-experiments/pre-sap-bg.png" class="header-bg">' +
    '    <div class="header-content">' +
    '        <h5 class="type-branded mtn mbxxxs">NEW!</h5>' +
    '        <h3 class="mtn mbs">Get campaign advice</h3>' +
    '    </div>' +
    '    <img src="https://static.change.org/psf-experiments/pre-sap-v2.png" class="header-avatars">' +
    '</div>' +
    '<div class="container pbxxxl">' +
    '    <div class="row">' +
    '        <div class="col-xs-12">' +
    '            <div class="landing-main">' +
    '                <h2 class="mtxxl mbs"><b>👋 Welcome! I’m here to help with your petition</b></h2>' +
    '                <p class="mtn mbs">I’m one of Change.org’s petition coaches. Last month we supported +16,000' +
    '                    starters just like you. </p>' +
    '                <p class="mtn mbs">Best of all it’s 100% free, just make sure you provide us with a valid phone' +
    '                    number so we can reach out via text.</p> <button class="btn btn-action btn-big btn-full">Got it!' +
    '                    I\'m ready to create my petition</button>' +
    '            </div>' +
    '        </div>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});

window.localStorage.setItem('pre_sap_awareness', 'v2');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap .container {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap .container {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "7f9bde3718704f7fa207b20b00fde41c"}]}], "name": "Variation #2"}, {"id": "20213340823", "actions": [{"viewId": "20160805660", "changes": [{"dependencies": [], "type": "custom_code", "id": "16e0591e77fa4a1f9b3e8ae853cc37c5", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">チェンジ・ドット・オーグで「キャンペーン」をはじめましょう✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">オンライン署名を立ち上げる </h3>' +
    '                    <p class="type-l man">「変えたい」と思うことを書いてみましょう。いつでも編集できますので、最初から完璧を目指す必要はありません。</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">サポートを受ける </h3>' +
    '                    <p class="type-l mtn mbs">チェンジ・ドット・オーグでは、あなたが大切にしたい思いを実現に近づけるためのさまざまなツールを用意しています </p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-JP.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">キャンペーンのアドバイスを受ける </h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">経験豊富なChange.orgのスタッフが、戦略のサポートやノウハウをご提供するために個別でご連絡をすることもあります。</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">あなたの勇気で社会が変わるかもしれません </h3>' +
    '                    <p class="type-l man">チェンジ・ドット・オーグはこれまで幾度となく政治家や企業の責任者など、意思決定の立場にある人たちに向けて働きかけを行ってきた実績があります。実際に署名簿を提出し、あなたが感じる課題を可視化しましょう。</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">理解しました。早速キャンペーンを始めます。</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "b1edf164a45043d397ac9e1e26b6146d"}]}], "name": "Variation #3"}, {"id": "20199687341", "actions": [{"viewId": "20160805660", "changes": [{"dependencies": [], "type": "custom_code", "id": "5b6219d9f1044317bf6bfe4424dcb94d", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Here’s how Change.org petitions work ✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Create your petition</h3>' +
    '                    <p class="type-l man">Try your best but don’t worry if it’s not perfect yet. You can edit your petition later. Our experts will help you for free.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Build support</h3>' +
    '                    <p class="type-l mtn mbs">Change.org has tools to help you build support for your cause. </p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-v3.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Our campaigning experts are here to review your petition, give you personalised advice over WhatsApp to help you gain more supporters.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Change the world</h3>' +
    '                    <p class="type-l man">Change.org has been helping common citizens be heard by those in power. Work with your decision maker to create an impact that solves your problem.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "b84b98b283ee4c568b7799eb46124469"}]}], "name": "Variation #4"}, {"id": "20230792189", "actions": [{"viewId": "20160805660", "changes": [{"dependencies": [], "type": "custom_code", "id": "B07EAD59-0A0A-4F82-858D-49B96ACB1582", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">チェンジ・ドット・オーグで「キャンペーン」を立ち上げてみましょう✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">キャンペーンを作ってみる</h3>' +
    '                    <p class="type-l man">オンラインでの署名活動が、あなたのキャンペーンの軸になります。いつでも編集できますので、最初から完璧を目指す必要はありません。</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">チェンジ・ドット・オーグからのサポート</h3>' +
    '                    <p class="type-l mtn mbs">キャンペーンを立ち上げればそれで終わり、ではありません。チェンジ・ドット・オーグでは、あなたの想いを実現に近づけるためのさまざまなツールを用意しています</p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-JP.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">スタッフからアドバイスを受ける</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">経験豊富なChange.orgのスタッフが、戦略のサポートやノウハウをご提供するために個別でご連絡をすることもあります。</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">あなたの勇気で社会が変わるかもしれません</h3>' +
    '                    <p class="type-l man">チェンジ・ドット・オーグはこれまで幾度となく政治家や企業の責任者など、意思決定の立場にある人たちに向けて働きかけを行ってきた実績があります。実際に署名簿を提出し、あなたが感じる課題を可視化しましょう。</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">理解しました。早速キャンペーンを始めます。</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "D0AD87DF-3DCC-432D-83B4-590E9230D1BB"}]}], "name": "Variation #5"}], "audienceIds": null, "changes": null, "id": "20195846206", "integrationSettings": null}], "id": "20211351904", "weightDistributions": null, "name": "[fdn] - SAP - Pre-SAP Support Awareness - JP", "groupId": null, "commitId": "20363430259", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20289492831"], "experiments": [{"weightDistributions": [{"entityId": "20252381362", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - SAP - FB Ads", "bucketingStrategy": null, "variations": [{"id": "20285411283", "actions": [], "name": "Original"}, {"id": "20252381362", "actions": [{"viewId": "20289492831", "changes": [{"dependencies": [], "type": "custom_code", "id": "fdcfd5e5176d4239bba238f50c1d4107", "value": function($){var utils = window.optimizely.get("utils");

utils.waitUntil(function() { return !!window.App; }).then(function() {
	window.App.trackEvent('sap_fb_ad_view');
});

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Here’s how Change.org petitions work ✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Create your petition</h3>' +
    '                    <p class="type-l man">Try your best but don\'t worry if it\'s not perfect yet! You can edit your petition later.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Build support</h3>' +
    '                    <p class="type-l mtn mbs">Change.org has tools to help you  build support for your cause. </p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-v3.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Our team of petition experts are live now, ready to look at your petition and give you personalized advice over SMS.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Change the world</h3>' +
    '                    <p class="type-l man">Change.org is proven to influence politicians, public officials and business leaders. Work with your decision maker to reach an outcome that solves your problem.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "0C47567E-48A8-4B37-87BA-2745152A6B2C"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20299230014", "integrationSettings": null}], "id": "20287593731", "weightDistributions": null, "name": "[niftic] - SAP - FB Ads", "groupId": null, "commitId": "20263958985", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20320952922"], "experiments": [{"weightDistributions": [{"entityId": "20286443290", "endOfRange": 2000}, {"entityId": "20301891227", "endOfRange": 4000}, {"entityId": "20286045496", "endOfRange": 6000}, {"entityId": "20292482047", "endOfRange": 8000}, {"entityId": "20286045533", "endOfRange": 10000}], "audienceName": "Mobile only,Screen.width Mobile", "name": "[niftic] - SAP - Share Optimizations New", "bucketingStrategy": null, "variations": [{"id": "20286443290", "actions": [], "name": "Original"}, {"id": "20301891227", "actions": [{"viewId": "20320952922", "changes": [{"dependencies": [], "type": "custom_code", "id": "ddbdb940bf5d48ddba1d76b6b3723603", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Congratulations, " + firstName + '! ' + "You've published your petition. Now, complete this step to get your first signatures.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('[data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = firstName + ", take the next step. Share now.";
  headingMobile.innerText = firstName + ", take the next step. Share now.";
  copy.innerHTML = "Successful petitions starters <strong>share at least 3 times on the very first day.</strong> Make sure everyone sees your petition.";
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Skip, I’m done sharing for now</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    shareList.classList.remove('mhxxxl');
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });

  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/en-stepper-sap.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);

  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});
}}, {"value": "<style>.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.row.match-height {\n  flex-direction: column;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .box-sm.xs-full-height.page-wrap > .bg-default {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -30px;\n    margin-left: -20px;\n    margin-right: -20px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 320px;\n    max-width: 100%;\n    margin: auto;\n    padding: 10px 15px 20px;\n}\n.page-wrap > .bg-brighter {\n    box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "8d85871382a24c979daace919841f5ef"}]}], "name": "Variation #1"}, {"id": "20286045496", "actions": [{"viewId": "20320952922", "changes": [{"dependencies": [], "type": "custom_code", "id": "77231302-DFF5-4FAB-8FAD-9DA30ECC3212", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Congratulations, " + firstName + '! ' + "You've published your petition.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = firstName + ", it's time to get your first signatures!";
  headingMobile.innerText = firstName + ", it's time to get your first signatures!";
  copy.innerHTML = "Sharing <b>(and re-sharing!)</b> your petition on multiple channels is the best way to build momentum and get your petition noticed. ";
  
  var arrowEl = document.createElement('div');
  arrowEl.classList = 'share-arrow';
  arrowEl.innerHTML = '<span>Share on as many share channels as you can!</span>';
  
  copy.parentNode.insertBefore(arrowEl, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Skip, I’m done sharing for now</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    shareList.classList.remove('mhxxxl');
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
  });
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
  it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.row.match-height {\n  flex-direction: column;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "4D75514C-3410-4273-BED5-2872FECE49D3"}]}], "name": "Variation #2"}, {"id": "20292482047", "actions": [{"viewId": "20320952922", "changes": [{"dependencies": [], "type": "custom_code", "id": "31E4D969-01C9-4FAC-B27D-18BEB003B8C9", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Congratulations, " + firstName + '! ' + "You've published your petition. Now, complete this step to get your first signatures.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('[data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = firstName + ", it's time to get your first signatures!";
  headingMobile.innerText = firstName + ", it's time to get your first signatures!";
  copy.innerHTML = "Sharing <b>(and re-sharing!)</b> your petition on multiple channels is the best way to build momentum and get your petition noticed. ";
  
  var arrowEl = document.createElement('div');
  arrowEl.classList = 'share-arrow';
  arrowEl.innerHTML = '<span>Share on as many share channels as you can!</span>';
  
  copy.parentNode.insertBefore(arrowEl, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Skip, I’m done sharing for now</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    shareList.classList.remove('mhxxxl');
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });

  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/en-stepper-sap.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);

  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
  it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.row.match-height {\n  flex-direction: column;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .box-sm.xs-full-height.page-wrap > .bg-default {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -30px;\n    margin-left: -20px;\n    margin-right: -20px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 320px;\n    max-width: 100%;\n    margin: auto;\n    padding: 10px 15px 20px;\n}\n.page-wrap > .bg-brighter {\n    box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "1567BBE7-9FF9-4B9B-97EC-CE35A045B1F3"}]}], "name": "Variation #3"}, {"id": "20286045533", "actions": [{"viewId": "20320952922", "changes": [{"dependencies": [], "type": "custom_code", "id": "CA448A19-38F3-4A6A-A87C-EBCF1D3AC8C7", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Congratulations, " + firstName + '! ' + "You've published your petition.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('[data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l', 'mbs');
  copy.classList.remove('mbxl');
  
  heading.innerText = firstName + ", it's time to get your first signatures!";
  headingMobile.innerText = firstName + ", it's time to get your first signatures!";
  copy.innerHTML = "Sharing <b>(and re-sharing!)</b> your petition on multiple channels is the best way to build momentum and get your petition noticed. ";
  
  var tip = document.createElement('p');
  tip.classList = 'txt-l type-l mbxl mtn';
  tip.innerHTML = '<b>💡 Winning tip:</b> share on as many different platforms as you can, and ask others to sign and share too!';
  
  copy.parentNode.insertBefore(tip, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Skip, I’m done sharing for now</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    shareList.classList.remove('mhxxxl');
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });

  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/sap-optimization-stepper.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);

  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
  it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.row.match-height {\n  flex-direction: column;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .box-sm.xs-full-height.page-wrap > .bg-default {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -30px;\n    margin-left: -20px;\n    margin-right: -20px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 100%;\n    max-width: 100%;\n    margin: auto;\n    padding: 10px 15px 20px;\n  padding-left: 0;\n  padding-right: 0;\n  margin-right: -10px;\n}\n.page-wrap > .bg-brighter {\n    box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "60BE300C-7EDF-42FF-A20B-BAD71AD062EA"}]}], "name": "Variation #4"}], "audienceIds": ["and", "11487071591", "11800860209"], "changes": null, "id": "20216725486", "integrationSettings": null}], "id": "20303693732", "weightDistributions": null, "name": "[niftic] - SAP - Share Optimizations New", "groupId": null, "commitId": "20319600333", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20312737077"], "experiments": [{"weightDistributions": [{"entityId": "20355151644", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[fdn] - SAP - Pre-SAP Support Awareness - TH", "bucketingStrategy": null, "variations": [{"id": "20333626481", "actions": [{"viewId": "20312737077", "changes": [{"dependencies": [], "type": "custom_code", "id": "77ec164b03c147e78e2a652bab8a959e", "value": function($){window.localStorage.setItem('pre_sap_awareness', 'control');
}}]}], "name": "Original"}, {"id": "20355151644", "actions": [{"viewId": "20312737077", "changes": [{"dependencies": [], "type": "custom_code", "id": "20FB5149-1D4F-48E5-AEFF-22C4EF1D9728", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">เริ่มแคมเปญบน Change.org ยังไง?✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">เล่าเรื่องราวของคุณ</h3>' +
    '                    <p class="type-l man">เขียนถึงปัญหาที่คุณเจอ เสนอแนวทางแก้ไข และอย่าลืมเลือกผู้มีอำนาจที่คุณคิดว่าสามารถจัดการปัญหานี้ได้ เช่น นักการเมือง เจ้าหน้าที่รัฐ เจ้าของบริษัท ฯลฯ ไม่ต้องกังวลว่าจะเขียนออกมาได้ไม่ดี เพราะคุณสามารถกลับมาแก้ไขเนื้อหาเมื่อไหร่ก็ได้</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">หาแนวร่วม</h3>' +
    '                    <p class="type-l mtn mbs">รวบรวมเสียงสนับสนุนให้ได้มากที่สุด ด้วยการแชร์แคมเปญของคุณ ยิ่งคนรู้มาก ยิ่งเพิ่มโอกาสให้เรื่องนี้ถูกพูดถึงในวงกว้าง บอกทุกคนให้ชัดว่าคุณอยากให้พวกเขาช่วยกันลงชื่อในแคมเปญ เพื่อสร้างกระแสสังคม... เผื่อจะไปถึงหูคนที่มีอำนาจตัดสินใจไวขึ้น!</p>' + /*
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-v3.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' + 
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Our campaigning experts are here to review your petition, give you personalised advice over WhatsApp to help you gain more supporters.</p>' + */
    '                </div>' +
    '            </div>' + 
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">รวมพลังเปลี่ยนแปลงสังคม</h3>' +
    '                    <p class="type-l man">ในระหว่างนี้ คุณอาจวางแผนยื่นรายชื่อที่คุณรวบรวมได้เพื่อส่งต่อให้กับผู้มีอำนาจตัดสินใจ และถ้ามีความคืบหน้า ก็อย่าลืมเขียนอัพเดทให้คนที่ร่วมลงชื่อได้รู้ด้วย พาพวกเขาเดินหน้าผลักดันเรื่องนี้ไปด้วยกัน จนกว่าแคมเปญของคุณจะสำเร็จ!</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">คลิกเพื่อเริ่มสร้างการเปลี่ยนแปลง</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "628363A6-2006-4B52-A22F-C27F1958A3FB"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20324217101", "integrationSettings": null}], "id": "20308897896", "weightDistributions": null, "name": "[fdn] - SAP - Pre-SAP Support Awareness - TH", "groupId": null, "commitId": "20418190888", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 7000, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20324182136"], "experiments": [{"weightDistributions": [{"entityId": "20344982165", "endOfRange": 2000}, {"entityId": "20310260947", "endOfRange": 4000}, {"entityId": "20339381394", "endOfRange": 6000}, {"entityId": "20339421510", "endOfRange": 8000}, {"entityId": "20321862197", "endOfRange": 10000}], "audienceName": "Mobile only,Screen.width Mobile", "name": "[niftic] - Share Initial - Share Shot Validations", "bucketingStrategy": null, "variations": [{"id": "20344982165", "actions": [{"viewId": "20324182136", "changes": []}], "name": "Original"}, {"id": "20310260947", "actions": [{"viewId": "20324182136", "changes": [{"dependencies": [], "type": "custom_code", "id": "e04fcb7f1ae14ae59b7e2ffe1cadc472", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('[data-view="psf/combo/card_container"] .shareFeed').then(function(shareFeed) {
    utils.waitForElement('[data-view="psf/combo/card_container"] .contentShareText').then(function(content) {
      
      var p = content.querySelector('[data-view="psf/components/text"] > div > span');
      p.innerHTML = '<b>💡 Winning tip:</b> Share on as many different platforms as you can, and ask others to sign and share this petition as well to build momentum!';
      
      var shareItems = document.querySelectorAll('div[data-view="psf/components/share_feed"] > div > div > div > div');
      shareItems.forEach(function(si) {
        updateFeed(si);
      });
      
      var observerClass = document.querySelector('div[data-view="psf/components/share_feed"][data-view-attached="true"] > div > div > div > div').classList.toString();
      console.error(observerClass);
      utils.observeSelector('.' + observerClass.replace(/ /g, "."), updateFeed, {
        "timeout": 60000
      });

    });  
  });
});

function getRandomInt(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function updateFeed(element) {
  var itemContent = element.querySelector('div > div:nth-of-type(2)');
  // itemContent.style['line-height'] = '45px';
  itemContent.style['padding-top'] = '12px';
  var recentShareAvatar = element.querySelector('img.avatar').src;
  var recentShareName = itemContent.querySelector('strong').innerText;
  var hours = itemContent.querySelector('span:nth-of-type(2)');
  var shareCount = getRandomInt(3, 12);
  itemContent.innerHTML = '<strong>' + recentShareName + '</strong> shared <strong>' + shareCount + ' times </strong>';
}
}}]}], "name": "Variation #1"}, {"id": "20339381394", "actions": [{"viewId": "20324182136", "changes": [{"dependencies": [], "type": "custom_code", "id": "6DE94CB5-0BDA-42FB-9921-571C745561EC", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('[data-view="psf/combo/card_container"] .shareFeed').then(function(shareFeed) {
    utils.waitForElement('[data-view="psf/combo/card_container"] .contentShareText').then(function(content) {
      
      var h = content.querySelector('h1');
      var p = content.querySelector('[data-view="psf/components/text"] > div > span');
      h.innerHTML = h.innerHTML.replace('Sharing leads to way more signatures.', 'Sharing multiple times leads to way more signatures.');
      p.innerHTML = '<b>💡 Winning tip:</b> Share on as many different platforms as you can, and ask others to sign and share this petition as well to build momentum!';
      
      var shareItems = document.querySelectorAll('div[data-view="psf/components/share_feed"] > div > div > div > div');
      shareItems.forEach(function(si) {
        updateFeed(si);
      });
      
      var observerClass = document.querySelector('div[data-view="psf/components/share_feed"][data-view-attached="true"] > div > div > div > div').classList.toString();
      console.error(observerClass);
      utils.observeSelector('.' + observerClass.replace(/ /g, "."), updateFeed, {
        "timeout": 60000
      });

    });  
  });
});

function getRandomInt(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function updateFeed(element) {
  var itemContent = element.querySelector('div > div:nth-of-type(2)');
  // itemContent.style['line-height'] = '45px';
  itemContent.style['padding-top'] = '12px';
  var recentShareAvatar = element.querySelector('img.avatar').src;
  var recentShareName = itemContent.querySelector('strong').innerText;
  var hours = itemContent.querySelector('span:nth-of-type(2)');
  var shareCount = getRandomInt(3, 12);
  itemContent.innerHTML = '<strong>' + recentShareName + '</strong> shared <strong>' + shareCount + ' times </strong>';
}
}}]}], "name": "Variation #2"}, {"id": "20339421510", "actions": [{"viewId": "20324182136", "changes": [{"dependencies": [], "type": "custom_code", "id": "66AC0488-7CC0-4904-BFEE-C8ABCF7FC425", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('body.type-loaded').then(function() {
  var contentShareText = document.querySelector('div.contentShareText');
  //contentShareText.querySelector('h1').innerText = 'Great choice! Sharing leads to way more signatures';
  var viral_ilo = document.createElement('img');
  viral_ilo.classList.add('opt-viral-ilo', 'mbxxl', 'xs-mbs', 'xs-mtl');
  viral_ilo.src = 'https://static.change.org/psf-experiments/v-power-2.png';
  contentShareText.appendChild(viral_ilo);
});
}}, {"value": "<style>.opt-viral-ilo {\n  width:90%;\n  max-width: 400px;\n\tmargin: 0 auto;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "011C503B-C611-404C-8140-984F0B362BD3"}]}], "name": "Variation #3"}, {"id": "20321862197", "actions": [{"viewId": "20324182136", "changes": [{"dependencies": [], "type": "custom_code", "id": "5FD61C42-27BE-499C-AA84-933E7D4FD494", "value": function($){var utils = window.optimizely.get("utils");
var socialStats = {
	'facebook type-facebook'  : '2-3',
  'link' : '2-3',
  'whatsapp-alt type-whatsapp'  : '1-2',
  'twitter-alt type-twitter'   : '1-2',
  'mail'     : '1-2'
};

function fireEvent(ev){
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent(ev);
  });
}

utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('.contentShare .shareButtons').then(function(shareButtons) {
    var buttonHolder = shareButtons.querySelector('div.row > div.col-sm-9');
    var shareOptions = document.createElement('div');
    shareOptions.classList.add('mvs', 'pas', 'opt-share-options');
    shareOptions.innerHTML = "<div>Check out the <strong>likely impact</strong> of sharing to each channel <span class=\"symbol symbol-bracket-down symbol-ext symbol-xxs\"></span></div>";
    var shareOptionsInner = document.createElement('ul');
    shareOptionsInner.classList.add('opt-social-options');
    for (var k in socialStats){
        if (socialStats.hasOwnProperty(k)) {
          shareOptionsInner.innerHTML += '<li class="opt-social-item mtxxs mlxxs"><span class="symbol symbol-'+k+'"></span> ' + socialStats[k] + ' signatures</li>';
        }
    }
    shareOptions.appendChild(shareOptionsInner);
    shareOptions.addEventListener('click', function() {
    	shareOptions.classList.toggle('opt-toggled');
    });
    buttonHolder.insertBefore(shareOptions, buttonHolder.firstChild); 
  });
});
}}, {"value": "<style>.opt-share-options {\n  background:#FDF9F2;\n  border: 1px solid #FFE9AA;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.opt-social-options {\n  max-width: 40em;\n  padding: 0;\n  overflow-x: hidden;\n  overflow-y: hidden;\n  list-style: none;\n  max-height:0px;\n  transition: max-height 0.3s ease-in-out;\n}\n\n.opt-toggled .opt-social-options {\n  max-height: 600px;\n}\n\n.opt-share-options .symbol-bracket-down {\n  transition: transform 0.3s ease-in-out;\n}\n\n.opt-toggled .symbol-bracket-down {\n\ttransform: rotate(180deg);\n}\n\n.opt-social-item .symbol {\n      margin-top: -2px;\n}\n \n.opt-social-options .opt-social-item .text-left{\n  padding-right: .33em;\n}\n\n\n.opt-social-options .opt-social-item .text-right{\n  float: right;\n  padding-left: .33em;\n  position: relative;\n  z-index: 1000;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "C2DED55F-06CD-4244-8975-4E4274799CAD"}]}], "name": "Variation #4"}], "audienceIds": ["and", "11487071591", "11800860209"], "changes": null, "id": "20346951920", "integrationSettings": null}], "id": "20314871728", "weightDistributions": null, "name": "[niftic] - Share Initial - Share Shot Validations", "groupId": null, "commitId": "20351131850", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20321531621"], "experiments": [{"weightDistributions": [{"entityId": "20314411459", "endOfRange": 2000}, {"entityId": "20318351275", "endOfRange": 4000}, {"entityId": "20337061540", "endOfRange": 6000}, {"entityId": "20302541363", "endOfRange": 8000}, {"entityId": "20314371548", "endOfRange": 10000}], "audienceName": "Desktop only,Desktop Window Width", "name": "[niftic] - SAP - Share Optimizations New - Desktop", "bucketingStrategy": null, "variations": [{"id": "20314411459", "actions": [], "name": "Original"}, {"id": "20318351275", "actions": [{"viewId": "20321531621", "changes": [{"dependencies": [], "type": "custom_code", "id": "52f6e27e598d4bb4a377865fa49f763b", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Congratulations, " + firstName + '! ' + "You've published your petition. Now, complete this step to get your first signatures.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('.col-lg-5 [data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = firstName + ", take the next step. Share now.";
  headingMobile.innerText = firstName + ", take the next step. Share now.";
  copy.innerHTML = "Successful petitions starters <strong>share at least 3 times on the very first day.</strong> Make sure everyone sees your petition.";
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Skip, I’m done sharing for now</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });

  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/en-stepper-sap.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);

  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});
}}, {"value": "<style>.psf-combo-embedded-card {\n \tmargin-top: 0; \n}\n\n.share-for-starters-custom .psf-combo-embedded-card {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n  background-color: rgba(0,0,0,0) !important;\n}\n\n.col-lg-5 [data-view=\"petitions/components/starter_share_feed\"] .hide-overflow {\n  height: 795px !important;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -40px;\n    margin-left: -40px;\n    margin-right: -40px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 320px;\n    max-width: 100%;\n    margin: auto;\n    padding: 10px 15px 20px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "46d71cd88bf84d429159031e26d8093c"}]}], "name": "Variation #1"}, {"id": "20337061540", "actions": [{"viewId": "20321531621", "changes": [{"dependencies": [], "type": "custom_code", "id": "68601e4fa3dc4f75917afd8c9f46bb2e", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Congratulations, " + firstName + '! ' + "You've published your petition.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('.col-lg-5 [data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = firstName + ", it's time to get your first signatures!";
  headingMobile.innerText = firstName + ", it's time to get your first signatures!";
  copy.innerHTML = "Sharing <b>(and re-sharing!)</b> your petition on multiple channels is the best way to build momentum and get your petition noticed. ";
  
  var arrowEl = document.createElement('div');
  arrowEl.classList = 'share-arrow';
  arrowEl.innerHTML = '<span>Share on as many share channels as you can!</span>';
  
  copy.parentNode.insertBefore(arrowEl, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Skip, I’m done sharing for now</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
  });
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
  it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.share-for-starters-custom .psf-combo-embedded-card {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n}\n\n.col-lg-5 [data-view=\"petitions/components/starter_share_feed\"] .hide-overflow {\n  height: 660px !important;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  max-width: 300px;\n  margin: 0 auto;\n  margin-bottom: 20px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "ea50c8b378614b368a191e0042d35aca"}]}], "name": "Variation #2"}, {"id": "20302541363", "actions": [{"viewId": "20321531621", "changes": [{"dependencies": [], "type": "custom_code", "id": "2c0f1f057edf4850ab4693a1ce2ab458", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Congratulations, " + firstName + '! ' + "You've published your petition. Now, complete this step to get your first signatures.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('.col-lg-5 [data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = firstName + ", it's time to get your first signatures!";
  headingMobile.innerText = firstName + ", it's time to get your first signatures!";
  copy.innerHTML = "Sharing <b>(and re-sharing!)</b> your petition on multiple channels is the best way to build momentum and get your petition noticed. ";
  
  var arrowEl = document.createElement('div');
  arrowEl.classList = 'share-arrow';
  arrowEl.innerHTML = '<span>Share on as many share channels as you can!</span>';
  
  copy.parentNode.insertBefore(arrowEl, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Skip, I’m done sharing for now</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });

  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/en-stepper-sap.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);

  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
  it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.psf-combo-embedded-card {\n \tmargin-top: 0; \n}\n\n.share-for-starters-custom .psf-combo-embedded-card {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n  background-color: rgba(0,0,0,0) !important;\n}\n\n.col-lg-5 [data-view=\"petitions/components/starter_share_feed\"] .hide-overflow {\n  height: 885px !important;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -40px;\n    margin-left: -40px;\n    margin-right: -40px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 320px;\n    max-width: 100%;\n    margin: auto;\n    padding: 10px 15px 20px;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  max-width: 300px;\n  margin: 0 auto;\n  margin-bottom: 20px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "4bb73683d69445f59bdaf02b1bb9b8de"}]}], "name": "Variation #3"}, {"id": "20314371548", "actions": [{"viewId": "20321531621", "changes": [{"dependencies": [], "type": "custom_code", "id": "f6fa5f97ab664d6bb7b7c852d492e29d", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Congratulations, " + firstName + '! ' + "You've published your petition.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('.col-lg-5 [data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l', 'mbs');
  copy.classList.remove('mbxl');
  
  heading.innerText = firstName + ", it's time to get your first signatures!";
  headingMobile.innerText = firstName + ", it's time to get your first signatures!";
  copy.innerHTML = "Sharing <b>(and re-sharing!)</b> your petition on multiple channels is the best way to build momentum and get your petition noticed. ";
  
  var tip = document.createElement('p');
  tip.classList = 'txt-l type-l mbxl mtn';
  tip.innerHTML = '<b>💡 Winning tip:</b> share on as many different platforms as you can, and ask others to sign and share too!';
  
  copy.parentNode.insertBefore(tip, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Skip, I’m done sharing for now</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });

  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/sap-optimization-stepper-fade.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);

  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
  it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.psf-combo-embedded-card {\n \tmargin-top: 0; \n}\n\n.share-for-starters-custom .psf-combo-embedded-card {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n  background-color: rgba(0,0,0,0) !important;\n}\n\n.col-lg-5 [data-view=\"petitions/components/starter_share_feed\"] .hide-overflow {\n  height: 865px !important;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -40px;\n    margin-left: -40px;\n    margin-right: -40px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 330px;\n    margin: 0 auto;\n    padding: 10px 15px 20px;\n  \tpadding-left: 0;\n  \tpadding-right: 0;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "fc6c662e67f74003a891f4efdf2cd3a3"}]}], "name": "Variation #4"}], "audienceIds": ["and", "11548860030", "14109270364"], "changes": null, "id": "20308361335", "integrationSettings": null}], "id": "20327481548", "weightDistributions": null, "name": "[niftic] - SAP - Share Optimizations New - Desktop", "groupId": null, "commitId": "20312141420", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20331887058"], "experiments": [{"weightDistributions": [{"entityId": "20321896765", "endOfRange": 3330}, {"entityId": "20330096840", "endOfRange": 6660}, {"entityId": "20298886476", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[fdn] - SAP - Pre-SAP Support Awareness - NG", "bucketingStrategy": null, "variations": [{"id": "20321896765", "actions": [{"viewId": "20331887058", "changes": [{"dependencies": [], "type": "custom_code", "id": "0a715be8c681462cae8d7df0f989d45a", "value": function($){window.localStorage.setItem('pre_sap_awareness', 'control');
}}]}], "name": "Original"}, {"id": "20330096840", "actions": [{"viewId": "20331887058", "changes": [{"dependencies": [], "type": "custom_code", "id": "34b675ca85274c4f972f5c1deea13753", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Here’s how Change.org petitions work ✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Write your petition</h3>' +
    '                    <p class="type-l man">Find what is important to you and write your petition. It doesn’t have to be perfect. You can always edit it later.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Build support</h3>' +
    '                    <p class="type-l mtn mbs">Mobilise supporters for your cause through the tools that Change.org provides.</p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-NI.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Our petition experts might reach out to help you succeed.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Be the change you want to see</h3>' +
    '                    <p class="type-l man">Having a petition on Change.org is proven to influence politicians, public officials and business leaders.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "83212a0a63d44850a67adc359b85daea"}]}], "name": "Variation #1"}, {"id": "20298886476", "actions": [{"viewId": "20331887058", "changes": [{"dependencies": [], "type": "custom_code", "id": "aee6e42baf874a3da59a67785ca4559d", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){

	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">This is what you can do✨ </h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Create your petition</h3>' +
    '                    <p class="type-l man">It doesn\’t have to be prefect, you can always edit it later.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Build support</h3>' +
    '                    <p class="type-l mtn mbs">Use the tools that we provide.</p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-NI.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Free petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">We can provide some tips to help your petition gain more support.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Change is possible</h3>' +
    '                    <p class="type-l man">We know that social pressure can push decision makers to resolve petitions.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '        <button class="btn btn-action btn-big btn-full">I\'m ready!</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
  
});


window.localStorage.setItem('pre_sap_awareness', 'v3');
}}, {"value": "<style>.sap-landing-wrap {\n  overflow-y: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "2025eb7a55b5442a9ec4972c0002d9a5"}]}], "name": "Variation #2"}], "audienceIds": null, "changes": null, "id": "20335441178", "integrationSettings": null}], "id": "20346936604", "weightDistributions": null, "name": "[fdn] - SAP - Pre-SAP Support Awareness - NG", "groupId": null, "commitId": "20310284992", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20326389406"], "experiments": [{"weightDistributions": [{"entityId": "20324567504", "endOfRange": 5000}, {"entityId": "20357441984", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Combo - SuSi Member Ask R4 - BR, JP", "bucketingStrategy": null, "variations": [{"id": "20324567504", "actions": [{"viewId": "20326389406", "changes": []}], "name": "Original"}, {"id": "20357441984", "actions": [{"viewId": "20326389406", "changes": [{"dependencies": [], "type": "custom_code", "id": "3819810e12474e1cb83db0c39fd723f6", "value": function($){var utils = window.optimizely.get("utils");
var appStateLocale = window.changeTargetingData.appState.locale;
var lang = '';
var locale = '';
var petitionUrl = window.location.href.split("/psf")[0];
if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
} else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
}
lang = lang.toLowerCase();
locale = locale.toLowerCase();

function getTranslations(l, s, c, f) {
 	if (l==='pt-br'){ 
    return {
    	heading: f + ', você assinou <span class="type-branded">'+s+' abaixo-assinados</span> na Change.org. Você se importa!',
      body1: 'Se ativistas na Change.org como você contribuírem com uma pequena quantia hoje, nós tereremos condições de oferecer mais suporte para mais criadores de petições, o que é crucial para avançarmos nas causas. ',
      body2: 'Talvez você não saiba que <b>nossa equipe no Brasil conta com apenas 7 pessoas</b>. Somos poucos para apoiar tantes peticionáries a gerar campanhas de impacto. Poderíamos ter mais profissionais se fizéssemos propagandas no site ou se prestássemos um serviço pago, mas isso  iria contra a missão da Change.org - de ser uma plataforma independente, gratuita e aberta a todes.',
      body3: 'Nossa sustentabilidade, crescimento e desenvolvimento depende exclusivamente de nossa comunidade engajada - pessoas como você,  '+f+'. <b>Você pode doar hoje para ajudar mais abaixo-assinados a alcançar vitória?</b>',
      sp: 'Faça parte do incrível grupo de apoiadores mensais que ajuda pessoas quem lutam para combater injustiças.',
      membership: 'Sim, vou ajudar com R$ 30 por mês',
      share: 'Não, vou ajudar ao compartilhar o abaixo-assinado',
      bottomH: 'Faça parte dessa comunidade solidária', 
			bottom: 'Nossos doadores mensais são especiais demais para nossa pequena equipe, mas também significam muito para cada pessoa que lutou e declarou vitória usando a Change.org. Contribua hoje com o valor que você puder!',
      url:  petitionUrl + '/psf/membership'
  	};
  } else if (l==='ja-jp') {
    return {
    	heading: f+'さんはこれまでChange.orgで <span class="type-branded">'+s+'件のキャンペーン</span>に賛同しています。本当にありがとうございます。',
      body1: '例え少額でも、もし '+f+'さんのような方がChange.orgに寄付してくだされば、これからも私たちスタッフはより多くの発信者のために、戦略的なアドバイスやサポートを提供することができます。',
      body2: '<b>現在Change.org日本語版のチームには9名のスタッフが在籍しています。</b>限られた人員の中で、年間2000件以上立ち上がるキャンペーンをサポートし、全てに大きな変化を起こしていくことは決して容易なことではありません。仮に企業からの広告費や政府からの助成金に頼るのであれば、より多くの人をチームに迎え入れるための人件費をまかなうことができるのかもしれません。しかし、私たちはそれをしません。なぜなら権力を持たない「普通の市民たち」が安心して声を上げることができる場所であり続けるためには、何にも忖度することなく、独立して運営され、全ての機能を無料で提供し続ける必要があるからです。',
      body3: 'だからこそ、私たちが活動を続けるための資金は、完全に '+f+'さんのようにChange.orgを利用してくださる方からのご支援のみでまかなわれています。これからも多くの署名活動を成功に導けるように、<b>どうか今日、私たちの活動をサポートしていただけませんか？</b>',
      sp: '月額会員として私たちの活動をサポートしてくれている人々のコミュニティに、是非 '+f+'さんも参加しませんか？',
      membership: '月額 500円でChange.orgを支援する',
      share: '支援はせず、代わりにこのキャンペーンをシェアする',
      bottomH: '私たちをサポートしてくれませんか？', 
			bottom: '月額会員として私たちの活動を支えてくださっている皆様は、スタッフにとって本当にありがたく頼もしい存在です。またそれは、私たちスタッフだけでなく、勇気を出して声をあげ変化を起こしてきた発信者の人々にとっても大変意義深いものです。'+f+'さんがサポートできる範囲で構いません。ぜひ私たちに力を貸してくださいませんか？',
      url:  petitionUrl + '/psf/membership'
  	};
  }
}

utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
	
    var originalPage = document.querySelector('#page .psf-combined .container .row .box-sm.mbn.pan.xs-full-height.page-wrap');
    var originalPageMain = originalPage.querySelector('.xs-mhxs');
    var originalPageSkip = originalPage.querySelector('.table-row');
    var originalPageHolder = document.createElement('div');
    var pm = originalPage.querySelector('[data-view="psf/combo/components/accepted_payment_types"]');
    originalPageHolder.classList.add("hide-fully", "skipped-content");
    originalPageHolder.appendChild(originalPageMain.cloneNode(true));
    originalPageHolder.appendChild(originalPageSkip.cloneNode(true));
    originalPageMain.classList.add('momentum-element');
    originalPageSkip.classList.add('momentum-element');
    originalPageMain.innerHTML = '<div class="col-xs-12 new-container"> </div>';
    var petitionSigCount = window.changeTargetingData.viewer.user.signatureCount.toLocaleString();
    var contribution = locale === 'br' ? 'R$ 30' : '500円';
    var newContent = originalPageMain.querySelector('.new-container');
		var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var currency = '€';
    var supporterNumber = 'xxx';
    var l = lang + '-' + locale;
    var translations = getTranslations(l, petitionSigCount, contribution, fname);
     
    newContent.innerHTML += '<div class="row match-height"><div class="bg-brighter psf-combo-shaded-round-border xs-mhn col-lg-7 col-xs-12 mhl pam"><h1>'+translations.heading+'</h1><p class="mtl">'+translations.body1+'</p><p class="mts">'+translations.body2+'</p><p class="mts">'+translations.body3+'</p><div class="hidden-lg pan mvm optly-combo-feed-mobile"><p class="mbxs">'+translations.sp+'</p></div><div class="mtm psf-combo-buttons member position-block-center"><div class="mbxs"><a id="member-yes" href="'+translations.url+'" class="btn btn-full btn-big js-promote btn-action"><p>'+translations.membership+'</p></a></div><a href="#" class="btn btn-full btn-big btn-outline close-ask-button" id="closeask"><p>'+translations.share+'</p></a></div><div class="txt-c mtm xs-mbs"><div data-view="psf/combo/components/accepted_payment_types" data-currency="USD" data-view-attached="true">'+pm.innerHTML+'</div></div></div>' +
      '<div class="bg-brighter psf-combo-shaded-round-border col-lg-5 visible-lg box mvn phm mrl hide-overflow"><p class="mbxs">'+translations.sp+'</p><div class="position-absolute"><div class="optly-combo-feed-desktop"></div><div class="fade-bottom"></div></div></div></div>' + '<div class="col-xs-12"><div><div><div display="flex" class="sc-fzqNJr eYevCC"><img height="80px" src="https://static.change.org/psf/contribution-hand.png" class="sc-fzpmMD btUAPR" style="height: 80px"><h2 font-weight="bold" class="sc-fzoXWK loXLHO">'+translations.bottomH+'</h2><div class="sc-AxheI jkxZoc"><p class="sc-fznJRM gxlqHb">'+translations.bottom+'</p></div></div></div></div></div>';

    // originalPageSkip.innerHTML = '<div class="mtl xs-mvm txt-c"><a href="#" class="txt-c type-weak skiplink close-ask-button" id="skiplink">Sorry I can’t do anything right now</a></div>';
    function closeAsk(event) {
      //Get ID of link, for event targeting. 'closeask' for button inside text area and 'skiplink' for link under text
      console.log(event.target.closest('a').id);
      originalPageSkip.innerHTML += '<style>.momentum-element{display:none;}</style>';
      var skippedContent = document.querySelector('.skipped-content');
      while( skippedContent.childNodes.length > 0 ) {
        skippedContent.parentElement.appendChild(skippedContent.childNodes[0]);
      }
      document.querySelector('.js-share-btn').click();
    }

    var closeLinks = document.querySelectorAll('a.close-ask-button');
    for(var i = 0; i < closeLinks.length; i++) {
      closeLinks[i].addEventListener('click', closeAsk);
    }
    originalPage.appendChild(originalPageHolder);
    
    document.getElementById('member-yes').addEventListener('click', function(){
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_psf_membership');
      });
    }, false);
    
    /* Start Feed */

    var total = 0;
    var minTotal = 22;
    var maxTotal = randomInteger(minTotal, 64);
    var min = 1;
    var max = 6;
    var userIndeces = [];
    var items = 0;

    var comboFeeds = document.querySelectorAll('[data-view="psf/combo/components/combo_feed"]');

    var mobileFeed = document.createElement('div');
    mobileFeed.classList = 'optly-combo-feed';
    mobileFeed.innerHTML =  '<div class="pan txt-l"><div class="hide-overflow" style="height: 735px;"><div class="feed-wrap"></div></div></div>';

    createFeedItem();
    
    var desktopFeed = mobileFeed.cloneNode(true);

    var mf = document.querySelector('.optly-combo-feed-mobile');
    mobileFeed.querySelector('.hide-overflow').style.height = '98px';
    mf.appendChild(mobileFeed);
    var df = document.querySelector('.optly-combo-feed-desktop');
    df.appendChild(desktopFeed);
    
    [desktopFeed, mobileFeed].forEach(function(feed,i) {
      var wrapperHeight = i === 0 ? 735 : 98;
      var feedWrap = feed.querySelector('.feed-wrap');
      var feedHeight = feedWrap.children.length * 49;
      var bottom = wrapperHeight > feedHeight ? feedHeight : wrapperHeight;
      feedWrap.style.marginBottom = '-' + bottom + 'px';
      var feedInterval = setInterval(function() {
        if (bottom < feedHeight - wrapperHeight) {
          bottom += 49;
          feedWrap.style.marginBottom = '-' + bottom + 'px';
        } else {
          clearInterval(feedInterval);
        }
      }, 5000);
    });

    function createFeedItem() {
      // modify total
      var amt = randomInteger(1, 6);
      switch (amt) {
        case 1:
          amt = 3;
          break;
        case 2: 
          amt = 3;
          break;
        case 4:
          amt = 5;
          break;
        case 5:
          amt = 10;
          break;
        case 6:
          amt = 20;
          break;
      }

      // get unique user
      var userIndex = randomInteger(0,shareUsers.length - 1);
      while (userIndeces.includes(userIndex)) {
        userIndex = randomInteger(0,shareUsers.length - 1);
      }
      userIndeces.push(userIndex);

      // create and append element
      var feedItem = document.createElement('div');
      feedItem.className = 'phn pvxs arrange arrange-middle';
      feedItem.innerHTML = feedItemHTML(shareUsers[userIndex], currency, amt);
      mobileFeed.querySelector('.feed-wrap').appendChild(feedItem);

      items++;
      if (items < 15) {
        createFeedItem();
      }
    }

    function randomInteger(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function feedItemHTML(user, currency, amt) {
      var feedCopy = 'is giving $3 monthly';
      feedCopy = locale === 'br' ? 'está doando R$ 30 mensais' : feedCopy;
      feedCopy = locale === 'jp' ? 'さんは月額500でご支援してくださっています' : feedCopy;
      return '' +
      '<div class="arrange-fit prs">' +
      '    <div class="media-profile-small-height">' +
      '        <div class="media-profile-img">' +
      '            <div class="flex-embed border-rounded-circle">' +
      '                <div class="flex-embed-ratio">' +
      '                    <div class="flex-embed-content">' +
      '                        <img alt="' + user.first_name + ' ' + user.last_name + '" class="image-cropper-nodrag position-absolute-center border-rounded-circle" ' +
      '                             src="' + user.profile_image + '">' +
      '                    </div>' +
      '                </div>' +
      '            </div>' +
      '        </div>' +
      '    </div>' +
      '</div>' +
      '<div class="arrange-fill">' +
      '    <div class="">' +
      '        <div class="type-break-word"><span><span><strong>' + user.first_name + ' ' + user.last_name + ' </strong> '+feedCopy+'</span></span></div>' +
      '    </div>' +
      '</div>';
    }
    /* End Feed */
    /* Social Proofing */
    //дает 3 месяца
    //sta dando 3 mensili
    
  });
});
}}, {"value": "<style>/*.page-wrap {\n\tbackground: #fffcf7 !important;\n}*/\n\n.psf-momentum {\n\tpadding-left: 55px !important;\n  padding-right: 55px !important;\n  background-repeat: no-repeat;\n  background-position: 15px 20px;\n  background-size: 30px 30px;\n  position: relative;\n  cursor: pointer;\n  padding-bottom: 25px !important;\n}\n\n.new-thanks {\n  font-weight: bold;\n  color:white;\n  background: #497143;\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  border-radius: 4px;\n  height: 78px;\n  line-height: 78px;\n  font-size: 16px;\n  font-weight: 700;\n}\n\n.new-thanks img {\n  height:29px;\n  width: 29px;\n  margin-right: 15px;\n  display: inline-block;\n  vertical-align: middle;\n}\n\n.new-thanks .symbol {\n    background: white;\n    color: #497143;\n    margin-top: -4px;\n    font-size: 17px;\n    margin-right: 15px;\n}\n\n.optly-combo-feed .hide-overflow {\n    position: relative;\n}\n.optly-combo-feed .feed-wrap {\n    position: absolute;\n    bottom: 100%;\n    transition: all.4s ease-in-out;\n}\n.psf-combo-shaded-round-border.col-lg-5.visible-lg > .position-absolute {\nwidth: 100%;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "ea3991ba04bf4fcb85f438c8b17fd8b5"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20337469495", "integrationSettings": null}], "id": "20348401164", "weightDistributions": null, "name": "[niftic] - Combo - SuSi Member Ask R4 - BR, JP", "groupId": null, "commitId": "20394230826", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "b84565cffaf640ff8dc71a7fa95c7400", "value": function($){var utils = window.optimizely.get('utils');

var appStateLocale = window.changeTargetingData.appState.locale;
var lang = '';
var locale = '';
if (!!appStateLocale) {
    var localeData = appStateLocale.split('-');
    lang = localeData[0];
    locale = localeData[1];
    var appCountryCode = window.changeTargetingData.appState.countryCode;
    if (appCountryCode && appCountryCode !== locale) {
        locale = appCountryCode;
    }
} else {
    var browserLocale = window.navigator.userLanguage || window.navigator.language;
    var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
    lang = browserLocaleData[0];
    locale = browserLocaleData[1];
}

function fireEvent(ev, sub) {
  	if (!!window.changeTargetingData.reactFe) {
    	if(!!sub) {
				window.trackEvent(ev, sub);
      } else {
        window.trackEvent(ev);
      }
    } else {
     	  utils.waitUntil(function() { return !!window.App; }).then(function() {
          if(!!sub) {
            window.App.trackEvent(ev, sub);
          } else {
            window.App.trackEvent(ev);
          }
        });
    }
}

function addRecruitTrackingToURL(url) {
    var uuid = '';
    if (!!window.App) {
        uuid = !!window.App.get('currentUser') ? window.App.get('currentUser').attributes.uuid : '';
    }	
    return url + (window.changeTargetingData.viewer.user.id ? '?recruiter=' + window.changeTargetingData.viewer.user.id + '&recruited_by_id=' + uuid : '?recruited_by_id=' + uuid);
}

window.niftic = {
    locale: locale.toLowerCase(),
    lang: lang.toLowerCase(),
    fireEvent: function (e, s) { fireEvent(e, s); },
    addRecruitTrackingToURL: function(u) { addRecruitTrackingToURL(u); }
};

window.shareUsers = [
  {
    "amount": 300,
    "first_name": "Mark",
    "last_name": "Hampton",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 1000,
    "first_name": "Molly",
    "last_name": "Roberts",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 500,
    "first_name": "Jeremy",
    "last_name": "Hughes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Andy",
    "last_name": "Peterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 2000,
    "first_name": "Holland",
    "last_name": "Walker",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Brinley",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 300,
    "first_name": "Ioannis",
    "last_name": "Martin",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 2000,
    "first_name": "Brenda",
    "last_name": "Johnson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 500,
    "first_name": "Jorge",
    "last_name": "Lopez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 300,
    "first_name": "Bill",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  },
  {
    "amount": 2000,
    "first_name": "Chyanna",
    "last_name": "Kelly",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 300,
    "first_name": "Doug",
    "last_name": "Lee",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M06.png"
  },
  {
    "amount": 1000,
    "first_name": "Susannah",
    "last_name": "Collins",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 200,
    "first_name": "Andrew",
    "last_name": "Gray",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M07.png"
  },
  {
    "amount": 500,
    "first_name": "Juli",
    "last_name": "Roland",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 2500,
    "first_name": "Bernadette",
    "last_name": "Lynn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 1000,
    "first_name": "Angelica",
    "last_name": "Perez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Tamara",
    "last_name": "Ward",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 500,
    "first_name": "Leslie",
    "last_name": "Butler",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F14.png"
  },
  {
    "amount": 1500,
    "first_name": "Kevin",
    "last_name": "Wurz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M08.png"
  },
  {
    "amount": 2500,
    "first_name": "Amanda",
    "last_name": "A",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F15.png"
  },
  {
    "amount": 500,
    "first_name": "Karen",
    "last_name": "Flores",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F16.png"
  },
  {
    "amount": 300,
    "first_name": "Mary Jo",
    "last_name": "Long",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F17.png"
  },
  {
    "amount": 1000,
    "first_name": "Sean",
    "last_name": "Morris",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M09.png"
  },
  {
    "amount": 500,
    "first_name": "Christopher",
    "last_name": "Fultz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M10.png"
  },
  {
    "amount": 2000,
    "first_name": "Dori",
    "last_name": "Price",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 300,
    "first_name": "Kellie",
    "last_name": "Patterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Judy",
    "last_name": "Young",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 5000,
    "first_name": "Ludwin",
    "last_name": "Alvarez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M11.png"
  },
  {
    "amount": 300,
    "first_name": "Jorge",
    "last_name": "Reyna",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M12.png"
  },
  {
    "amount": 2000,
    "first_name": "Brittany",
    "last_name": "Allen",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F04.png"
  },
  {
    "amount": 400,
    "first_name": "Arianne",
    "last_name": "James",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 500,
    "first_name": "Ryan",
    "last_name": "Nelson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M13.png"
  },
  {
    "amount": 2000,
    "first_name": "Emily",
    "last_name": "Wright",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 2000,
    "first_name": "John",
    "last_name": "Sanders",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M14.png"
  },
  {
    "amount": 300,
    "first_name": "Haydee",
    "last_name": "Lewis",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 500,
    "first_name": "Jamie",
    "last_name": "Diaz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M15.png"
  },
  {
    "amount": 2000,
    "first_name": "Michael",
    "last_name": "Gibbs",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M16.png"
  },
  {
    "amount": 300,
    "first_name": "Kelly",
    "last_name": "Gomez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 1000,
    "first_name": "Katy",
    "last_name": "Boyd",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 300,
    "first_name": "Elaine",
    "last_name": "Henry",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 2000,
    "first_name": "Gary",
    "last_name": "Richards",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 300,
    "first_name": "Harrison",
    "last_name": "Finn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Lorri",
    "last_name": "Ramos",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Frances",
    "last_name": "Dixon",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 500,
    "first_name": "Deniz",
    "last_name": "Holmes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 500,
    "first_name": "Lisa",
    "last_name": "Shaw",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 1000,
    "first_name": "Barbara",
    "last_name": "Daniels",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F13.png"
  },
  {
    "amount": 5000,
    "first_name": "John",
    "last_name": "Black",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  }
];
}}]}, {"holdback": 5000, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20375700006"], "experiments": [{"weightDistributions": [{"entityId": "20371392727", "endOfRange": 5000}, {"entityId": "20352173340", "endOfRange": 10000}], "audienceName": "Everyone else", "name": " [niftic] - SUPA - Onsite Starter Acquisition R3", "bucketingStrategy": null, "variations": [{"id": "20371392727", "actions": [{"viewId": "20375700006", "changes": [{"dependencies": [], "type": "custom_code", "id": "231545b998f34785b6747a15afa44c38", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.modal.in[data-name="signed_interrupt"]').then(function(signedModal) {
  
  utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent('optly_interrupt_show');
  });
  
});
}}]}], "name": "Original"}, {"id": "20352173340", "actions": [{"viewId": "20375700006", "changes": [{"dependencies": [], "type": "custom_code", "id": "4f351a1fc81b4e72a2835f2d00aff144", "value": function($){var utils = window.optimizely.get("utils");

var modalHTML = '<div class="modal"> <div id="modal-demo-dialog" class="modal-dialog modal-small animate animate-zoom-in"> <button id="sap-modal-close" class="modal-close link-stealth position-absolute position-right position-top pas"> <span class="symbol symbol-close symbol-compact"></span> </button> <img src="https://static.change.org/starter-nurture/petition-starters.png"> <h1 class="txt-c mtn">Take action to help your community. It’s free and easy to start a petition!</h1><p class="txt-c mbm">We need more petitions like this one. Change.org is the leading platform for petitions. We have tools, support, and expertise to help your cause.</p><a id="start" class="btn btn-action btn-big btn-full mbxs" href="/start-a-petition">Start my petition</a><button id="sap-back" class="btn btn-big btn-full">Take me back to the petition</button><div class="more-info"><p class="txt-c">Interested in starting a petition, but need more guidance? <a id="sap-learn" href="https://www.change.org/start-a-petition/learn?showLearn=true&source_location=supa">Learn More</a></p></div></div> </div>';

function fireEvent(ev) {
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent(ev);
  });
}

function removeModalOpen() {
  if (document.querySelector('.modal-open')){
		var hasModalOpen = document.querySelectorAll('.modal-open');
		hasModalOpen.forEach(function(mo){
    	mo.classList.remove('modal-open');
		});
	}
}

function sapModal(el) {
  var m = document.createElement('div');
  m.id = 'sap-modal';
  m.innerHTML = modalHTML;
  el.insertBefore(m, el.firstChild);
  // SAP
  document.getElementById('start').addEventListener('click', function(){
    fireEvent('onsite_acquisition_start');
  }, false);
  // Close + Back to Petition
  document.getElementById('sap-modal-close').addEventListener('click', function(){
    fireEvent('onsite_acquisition_close');
    m.classList.add('hide-fully');
    m.remove();
  }, false);
  document.getElementById('sap-back').addEventListener('click', function(){
    fireEvent('onsite_acquisition_close');
    m.classList.add('hide-fully');
    m.remove();
  }, false);
  // Learn More
  document.getElementById('sap-learn').addEventListener('click', function(){
    fireEvent('onsite_acquisition_learn_more');
  }, false);
}

utils.waitForElement('.type-loaded .show').then(function(show){
  sapModal(show);
  fireEvent('onsite_acquisition_show');
});

/* Hide interrupt if shown */
utils.waitForElement('.modal.in[data-name="signed_interrupt"]').then(function(signedModal) {
  	signedModal.classList.add('hide-fully');
  	removeModalOpen();
});
}}, {"value": "<style>.more-info {\n \tborder-top: 1px solid #DBD9DB;\n  margin-top: 20px;\n  margin-left: -30px;\n  margin-right: -30px;\n  padding: 20px 30px;\n  padding-bottom: 0;\n}\n\n#sap-modal img {\n  display: block;\n  max-width: 230px;\n  margin: 20px auto;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "9887bf836651435384df9a86092dbf17"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20352192111", "integrationSettings": null}], "id": "20356570009", "weightDistributions": null, "name": " [niftic] - SUPA - Onsite Starter Acquisition R3", "groupId": null, "commitId": "20371383970", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 2000, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20378046064"], "experiments": [{"weightDistributions": [{"entityId": "20403532193", "endOfRange": 5000}, {"entityId": "20370814515", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Combo - SuSi Member Ask R9 - AA Traffic", "bucketingStrategy": null, "variations": [{"id": "20403532193", "actions": [{"viewId": "20378046064", "changes": []}], "name": "Original"}, {"id": "20370814515", "actions": [{"viewId": "20378046064", "changes": [{"dependencies": [], "type": "custom_code", "id": "f512bf85fc9f4a5db013e8bf4f249d94", "value": function($){var utils = window.optimizely.get("utils");
var petitionUrl = window.location.href.split("/psf")[0];

utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    
    var sigAdded = document.createElement('div');
    sigAdded.innerHTML = '<div class="signature-added xs-phm txt-l"><div class="arrange arrange-middle"><div class="arrange-fit"><span class="symbol symbol-verified mrs" style="color: #497143; position: relative; bottom: 2px;"></span></div><div class="arrange-fill">Thank you for signing the petition!</div></div></div>';
    combo.insertBefore(sigAdded, combo.firstChild);
	
    var originalPage = document.querySelector('#page .psf-combined .container .row .box-sm.mbn.pan.xs-full-height.page-wrap');
    var originalPageMain = originalPage.querySelector('.xs-mhxs');
    var originalPageSkip = originalPage.querySelector('.table-row');
    var originalPageHolder = document.createElement('div');
    originalPageHolder.classList.add("hide-fully", "skipped-content");
    originalPageHolder.appendChild(originalPageMain.cloneNode(true));
    originalPageHolder.appendChild(originalPageSkip.cloneNode(true));
    originalPageMain.classList.add('momentum-element');
    originalPageSkip.classList.add('momentum-element');
    originalPageMain.innerHTML = '<div class="col-xs-12 new-container"> </div>';
    var petitionSigCount = window.changeTargetingData.viewer.user.signatureCount.toLocaleString();
    var contribution = '$3';
    var newContent = originalPageMain.querySelector('.new-container');
		var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var currency = '$';
    var supporterNumber = 'xxx';
     
    newContent.innerHTML += '<div class="row match-height"><div class="bg-brighter psf-combo-shaded-round-border xs-mhn col-lg-7 col-xs-12 mhl pam"><h1>You have signed <span class="type-branded">'+ petitionSigCount +' petitions</span> on Change.org. We know you care. </h1><p class="mtl type-l">If Change.org activists like you chipped in with a small amount today we would have more resources. This means we could provide more petition starters with the crucial coaching they need.</p><p class="mts type-l">I don’t know if I ever told you this, <b>but our team supporting petition starters in the U.S. is just 14 people</b>. And there’s only so much our team can do to help individuals run impactful campaigns. We could hire many more experts if we, say, ran ads for big companies on our website. Or if we introduced paid functions, which only a few could afford. But this would go against our mission - that Change.org must remain independent, free and open for all.</p><p class="mts type-l">That’s why our sustainability, growth and development rely exclusively on our core community - people like you, '+ fname +'. <b>Can you chip in today to help more petitions win?</b></p><div class="hidden-lg pan mvm optly-combo-feed-mobile"></div><div class="mtm psf-combo-buttons member position-block-center"><div class="mbxs"><a id="member-yes" href="' + petitionUrl + '/psf/membership' + '" class="btn btn-full btn-big js-promote btn-action"><p>Yes, I’ll help Change.org with '+ contribution +' a month</p></a></div><a href="#" class="btn btn-full btn-big btn-outline close-ask-button" id="closeask"><p>No, I’ll share the petition instead</p></a></div><div class="txt-c mtm xs-mbs"><div data-view="psf/combo/components/accepted_payment_types" data-currency="USD" data-view-attached="true"><span color="gray.dark" class="sc-fznJRM bsQORl">Pay with <span>credit card</span> or <img display="inline" alt="PayPal" src="https://static.change.org/images/pay-pal.svg" class="sc-fzpmMD kzEDDx"></span></div></div></div>' +
      '<div class="bg-brighter psf-combo-shaded-round-border col-lg-5 visible-lg box mvn phm mrl hide-overflow"><div class="position-absolute"><div class="optly-combo-feed-desktop"></div><div class="fade-bottom"></div></div></div></div>';
    //+ 			'<div class="col-xs-12"><div><div><div display="flex" class="sc-fzqNJr eYevCC"><img height="80px" src="https://static.change.org/psf/contribution-hand.png" class="sc-fzpmMD btUAPR" style="height: 80px"><h2 font-weight="bold" class="sc-fzoXWK loXLHO">Join the community!</h2><div class="sc-AxheI jkxZoc"><p class="sc-fznJRM gxlqHb">Our community of monthly supporters mean the world to our small team, but they also mean a lot to every person who has declared a victory and fought injustice using Change.org.<br><br>Chip in with what you feel comfortable with today.</p></div></div></div></div></div>';

    originalPageSkip.innerHTML = '<div class="mvxxl txt-c"><a href="#" class="txt-c type-weak skiplink close-ask-button" id="skiplink">Sorry I can’t do anything right now</a></div>';
    function closeAsk(event) {
      //Get ID of link, for event targeting. 'closeask' for button inside text area and 'skiplink' for link under text
      console.log(event.target.closest('a').id);
      originalPageSkip.innerHTML += '<style>.momentum-element{display:none;}</style>';
      var skippedContent = document.querySelector('.skipped-content');
      while( skippedContent.childNodes.length > 0 ) {
        skippedContent.parentElement.appendChild(skippedContent.childNodes[0]);
      }
      document.querySelector('.js-share-btn').click();
    }

    var closeLinks = document.querySelectorAll('a.close-ask-button');
    for(var i = 0; i < closeLinks.length; i++) {
      closeLinks[i].addEventListener('click', closeAsk);
    }
    originalPage.appendChild(originalPageHolder);
    
    document.getElementById('member-yes').addEventListener('click', function(){
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_psf_membership');
      });
    }, false);
    
    /* Start Feed */

    var total = 0;
    var minTotal = 22;
    var maxTotal = randomInteger(minTotal, 64);
    var min = 1;
    var max = 6;
    var userIndeces = [];
    var items = 0;

    var comboFeeds = document.querySelectorAll('[data-view="psf/combo/components/combo_feed"]');

    var mobileFeed = document.createElement('div');
    mobileFeed.classList = 'optly-combo-feed';
    mobileFeed.innerHTML =  '<div class="pan txt-l"><div class="hide-overflow" style="height: 735px;"><div class="feed-wrap"></div><div class="fade-bottom"></div></div></div>';

    createFeedItem();
    
    var desktopFeed = mobileFeed.cloneNode(true);

    var mf = document.querySelector('.optly-combo-feed-mobile');
    mobileFeed.querySelector('.hide-overflow').style.height = '98px';
    mf.appendChild(mobileFeed);
    var df = document.querySelector('.optly-combo-feed-desktop');
    df.appendChild(desktopFeed);
    
    [desktopFeed, mobileFeed].forEach(function(feed,i) {
      var wrapperHeight = i === 0 ? 735 : 98;
      var feedWrap = feed.querySelector('.feed-wrap');
      var feedHeight = feedWrap.children.length * 49;
      var bottom = wrapperHeight > feedHeight ? feedHeight : wrapperHeight;
      feedWrap.style.marginBottom = '-' + bottom + 'px';
      var feedInterval = setInterval(function() {
        if (bottom < feedHeight - wrapperHeight) {
          bottom += 49;
          feedWrap.style.marginBottom = '-' + bottom + 'px';
        } else {
          clearInterval(feedInterval);
        }
      }, 5000);
    });

    function createFeedItem() {
      // modify total
      var amt = randomInteger(1, 6);
      switch (amt) {
        case 1:
          amt = 3;
          break;
        case 2: 
          amt = 3;
          break;
        case 4:
          amt = 5;
          break;
        case 5:
          amt = 10;
          break;
        case 6:
          amt = 20;
          break;
      }

      // get unique user
      var userIndex = randomInteger(0,shareUsers.length - 1);
      while (userIndeces.includes(userIndex)) {
        userIndex = randomInteger(0,shareUsers.length - 1);
      }
      userIndeces.push(userIndex);

      // create and append element
      var feedItem = document.createElement('div');
      feedItem.className = 'phn pvxs arrange arrange-middle';
      feedItem.innerHTML = feedItemHTML(shareUsers[userIndex], currency, amt);
      mobileFeed.querySelector('.feed-wrap').appendChild(feedItem);

      items++;
      if (items < 15) {
        createFeedItem();
      }
    }

    function randomInteger(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function feedItemHTML(user, currency, amt) {
      return '' +
      '<div class="arrange-fit prs">' +
      '    <div class="media-profile-small-height">' +
      '        <div class="media-profile-img">' +
      '            <div class="flex-embed border-rounded-circle">' +
      '                <div class="flex-embed-ratio">' +
      '                    <div class="flex-embed-content">' +
      '                        <img alt="' + user.first_name + ' ' + user.last_name + '" class="image-cropper-nodrag position-absolute-center border-rounded-circle" ' +
      '                             src="' + user.profile_image + '">' +
      '                    </div>' +
      '                </div>' +
      '            </div>' +
      '        </div>' +
      '    </div>' +
      '</div>' +
      '<div class="arrange-fill">' +
      '    <div class="">' +
      '        <div class="type-break-word"><span><span><strong>' + user.first_name + ' ' + user.last_name + ' </strong> is giving ' + currency + amt.toLocaleString() + ' monthly</span></span></div>' +
      '    </div>' +
      '</div>';
    }
    /* End Feed */
    /* Social Proofing */
    
  });
  
  utils.waitForElement('.txt-c.xs-mvxl.mbxl.mtxs h5').then(function(stepper){
    stepper.classList.add('hide-fully');
  });
  
});
}}, {"value": "<style>/*.page-wrap {\n\tbackground: #fffcf7 !important;\n}*/\n\n.signature-added {\n  background: #E2EEE0;\n  border-bottom: 1px solid #BBD6B2;\n  text-align: center;\n  padding: 13px;\n}\n\n.signature-added > div {\n    width: 280px;\n    min-width: 280px;\n    margin: 0 auto;\n  \tcolor: #497143;\n}\n\n@media (max-width: 768px) {\n  .signature-added > div {\n    width: 100%;\n  }\n}\n\n.psf-momentum {\n\tpadding-left: 55px !important;\n  padding-right: 55px !important;\n  background-repeat: no-repeat;\n  background-position: 15px 20px;\n  background-size: 30px 30px;\n  position: relative;\n  cursor: pointer;\n  padding-bottom: 25px !important;\n}\n\n.new-thanks {\n  font-weight: bold;\n  color:white;\n  background: #497143;\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  border-radius: 4px;\n  height: 78px;\n  line-height: 78px;\n  font-size: 16px;\n  font-weight: 700;\n}\n\n.new-thanks img {\n  height:29px;\n  width: 29px;\n  margin-right: 15px;\n  display: inline-block;\n  vertical-align: middle;\n}\n\n.new-thanks .symbol {\n    background: white;\n    color: #497143;\n    margin-top: -4px;\n    font-size: 17px;\n    margin-right: 15px;\n}\n\n.optly-combo-feed .hide-overflow {\n    position: relative;\n}\n.optly-combo-feed .feed-wrap {\n    position: absolute;\n    bottom: 100%;\n    transition: all.4s ease-in-out;\n}\n.psf-combo-shaded-round-border.col-lg-5.visible-lg > .position-absolute {\nwidth: 100%;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "550c2b60f1784ba5992203d354aff317"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20403550737", "integrationSettings": null}], "id": "20366394303", "weightDistributions": null, "name": "[niftic] - Combo - SuSi Member Ask R9 - AA Traffic", "groupId": null, "commitId": "20419592564", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "8e19eadbc14040099e290a79bc1c4ef1", "value": function($){var utils = window.optimizely.get('utils');

var appStateLocale = window.changeTargetingData.appState.locale;
var lang = '';
var locale = '';
if (!!appStateLocale) {
    var localeData = appStateLocale.split('-');
    lang = localeData[0];
    locale = localeData[1];
    var appCountryCode = window.changeTargetingData.appState.countryCode;
    if (appCountryCode && appCountryCode !== locale) {
        locale = appCountryCode;
    }
} else {
    var browserLocale = window.navigator.userLanguage || window.navigator.language;
    var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
    lang = browserLocaleData[0];
    locale = browserLocaleData[1];
}

function fireEvent(ev, sub) {
  	if (!!window.changeTargetingData.reactFe) {
    	if(!!sub) {
				window.trackEvent(ev, sub);
      } else {
        window.trackEvent(ev);
      }
    } else {
     	  utils.waitUntil(function() { return !!window.App; }).then(function() {
          if(!!sub) {
            window.App.trackEvent(ev, sub);
          } else {
            window.App.trackEvent(ev);
          }
        });
    }
}

function addRecruitTrackingToURL(url) {
    var uuid = '';
    if (!!window.App) {
        uuid = !!window.App.get('currentUser') ? window.App.get('currentUser').attributes.uuid : '';
    }	
    return url + (window.changeTargetingData.viewer.user.id ? '?recruiter=' + window.changeTargetingData.viewer.user.id + '&recruited_by_id=' + uuid : '?recruited_by_id=' + uuid);
}

window.niftic = {
    locale: locale.toLowerCase(),
    lang: lang.toLowerCase(),
    fireEvent: function (e, s) { fireEvent(e, s); },
    addRecruitTrackingToURL: function(u) { addRecruitTrackingToURL(u); }
};

window.shareUsers = [
  {
    "amount": 300,
    "first_name": "Mark",
    "last_name": "Hampton",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 1000,
    "first_name": "Molly",
    "last_name": "Roberts",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 500,
    "first_name": "Jeremy",
    "last_name": "Hughes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Andy",
    "last_name": "Peterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 2000,
    "first_name": "Holland",
    "last_name": "Walker",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Brinley",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 300,
    "first_name": "Ioannis",
    "last_name": "Martin",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 2000,
    "first_name": "Brenda",
    "last_name": "Johnson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 500,
    "first_name": "Jorge",
    "last_name": "Lopez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 300,
    "first_name": "Bill",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  },
  {
    "amount": 2000,
    "first_name": "Chyanna",
    "last_name": "Kelly",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 300,
    "first_name": "Doug",
    "last_name": "Lee",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M06.png"
  },
  {
    "amount": 1000,
    "first_name": "Susannah",
    "last_name": "Collins",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 200,
    "first_name": "Andrew",
    "last_name": "Gray",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M07.png"
  },
  {
    "amount": 500,
    "first_name": "Juli",
    "last_name": "Roland",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 2500,
    "first_name": "Bernadette",
    "last_name": "Lynn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 1000,
    "first_name": "Angelica",
    "last_name": "Perez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Tamara",
    "last_name": "Ward",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 500,
    "first_name": "Leslie",
    "last_name": "Butler",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F14.png"
  },
  {
    "amount": 1500,
    "first_name": "Kevin",
    "last_name": "Wurz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M08.png"
  },
  {
    "amount": 2500,
    "first_name": "Amanda",
    "last_name": "A",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F15.png"
  },
  {
    "amount": 500,
    "first_name": "Karen",
    "last_name": "Flores",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F16.png"
  },
  {
    "amount": 300,
    "first_name": "Mary Jo",
    "last_name": "Long",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F17.png"
  },
  {
    "amount": 1000,
    "first_name": "Sean",
    "last_name": "Morris",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M09.png"
  },
  {
    "amount": 500,
    "first_name": "Christopher",
    "last_name": "Fultz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M10.png"
  },
  {
    "amount": 2000,
    "first_name": "Dori",
    "last_name": "Price",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 300,
    "first_name": "Kellie",
    "last_name": "Patterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Judy",
    "last_name": "Young",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 5000,
    "first_name": "Ludwin",
    "last_name": "Alvarez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M11.png"
  },
  {
    "amount": 300,
    "first_name": "Jorge",
    "last_name": "Reyna",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M12.png"
  },
  {
    "amount": 2000,
    "first_name": "Brittany",
    "last_name": "Allen",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F04.png"
  },
  {
    "amount": 400,
    "first_name": "Arianne",
    "last_name": "James",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 500,
    "first_name": "Ryan",
    "last_name": "Nelson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M13.png"
  },
  {
    "amount": 2000,
    "first_name": "Emily",
    "last_name": "Wright",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 2000,
    "first_name": "John",
    "last_name": "Sanders",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M14.png"
  },
  {
    "amount": 300,
    "first_name": "Haydee",
    "last_name": "Lewis",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 500,
    "first_name": "Jamie",
    "last_name": "Diaz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M15.png"
  },
  {
    "amount": 2000,
    "first_name": "Michael",
    "last_name": "Gibbs",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M16.png"
  },
  {
    "amount": 300,
    "first_name": "Kelly",
    "last_name": "Gomez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 1000,
    "first_name": "Katy",
    "last_name": "Boyd",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 300,
    "first_name": "Elaine",
    "last_name": "Henry",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 2000,
    "first_name": "Gary",
    "last_name": "Richards",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 300,
    "first_name": "Harrison",
    "last_name": "Finn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Lorri",
    "last_name": "Ramos",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Frances",
    "last_name": "Dixon",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 500,
    "first_name": "Deniz",
    "last_name": "Holmes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 500,
    "first_name": "Lisa",
    "last_name": "Shaw",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 1000,
    "first_name": "Barbara",
    "last_name": "Daniels",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F13.png"
  },
  {
    "amount": 5000,
    "first_name": "John",
    "last_name": "Black",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  }
];
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20370828208"], "experiments": [{"weightDistributions": [{"entityId": "20385734666", "endOfRange": 3333}, {"entityId": "20394532015", "endOfRange": 6666}, {"entityId": "20368826068", "endOfRange": 10000}], "audienceName": "Mobile only,Screen.width Mobile", "name": "[fdn] - Combo experiment B - LatAm (es-419) - Latino", "bucketingStrategy": null, "variations": [{"id": "20378670556", "actions": [{"viewId": "20370828208", "changes": [{"dependencies": [], "type": "custom_code", "id": "dfadc37ece5a42de99967100399f03d2", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "20385734666", "actions": [{"viewId": "20370828208", "changes": [{"dependencies": [], "type": "custom_code", "id": "2dd8ee799c814b39bd8ae5a86d5851a4", "value": function($){/* Customization, leave as "" if you want to use the existing */
/* Personalization Tags: {fname} {currency} {amount} */
/* Example: var promoteButton = "Yes, I'll chip in {currency}{amount}" */
var heading = "{fname}, ¿Quieres aportar {currency}{amount} para difundir esta petición?";
var subcopy = 'Tu aporte permitirá:<ul class="list-bulleted mvn mhxs" style="list-style-type:disc"><li><strong>Encontrar gente afín</strong> que quiera apoyar la petición</li><li><strong>Distribuir la petición</strong> a través de email, redes sociales y nuestro sitio web.</li></ul> Con pequeños aportes de personas como tú, esta petición puede reunir miles de firmas en pocas horas. ¿Nos ayudas?';
var promoteButton = "";
var shareButton = "";
var thermometerText = "";
var currencyBefore = true; //change to false if currency is after amount in locale
var stepperCopy = "";

/* Don't Touch Below */
var utils = window.optimizely.get("utils");
utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    var h = combo.querySelector('h1');
    var s = combo.querySelector('.phxxl.ptl.xs-pam > div');
    var t = combo.querySelector('[data-view="psf/combo/components/combo_thermometer"] [display="flex"] > div');
    var pb = combo.querySelector('.js-promote p');
    var sb = combo.querySelector('.js-share-btn p');
    var sc = combo.querySelector('.page-wrap > .txt-c.xs-mvxl.mbxl.mtxs h5');
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var promoteInner = document.querySelector('.js-promote').innerText.replace(/,/g, '');
    var amount = promoteInner.match(/\d+/);
    var currency = currencyBefore ? promoteInner.charAt(amount.index-1) : promoteInner.charAt(amount.index+1);
    function makeReplacements(str) {
      var temp = str;
      temp = temp.replace('{fname}', fname);
      temp = temp.replace('{currency}', currency);
      temp = temp.replace('{amount}', parseInt(amount[0]).toLocaleString());
      return temp;                   
    }
    if (heading) {
     	 h.innerHTML = makeReplacements(heading);
    }
    if (subcopy) {
       s.innerHTML = makeReplacements(subcopy);
    }
    if (promoteButton) {
       pb.innerHTML = makeReplacements(promoteButton);
    }
    if (shareButton) {
       sb.innerHTML = makeReplacements(shareButton);
    }
    if (thermometerText) {
       t.innerHTML = makeReplacements(thermometerText);
    }
    if (stepperCopy) {
     	 sc.innerHTML = makeReplacements(stepperCopy); 
    }
  });
});
}}]}], "name": "fake_control"}, {"id": "20394532015", "actions": [{"viewId": "20370828208", "changes": [{"dependencies": [], "type": "custom_code", "id": "02616c0e8d4e44f5aef88ebf5eb8aba3", "value": function($){/* Customization, leave as "" if you want to use the existing */
/* Personalization Tags: {fname} {currency} {amount} */
/* Example: var promoteButton = "Yes, I'll chip in {currency}{amount}" */
var heading = "{fname}, ¿Quieres aportar {currency}{amount} para difundir esta petición?";
var subcopy = 'Sabemos que lleva mucho tiempo involucrar a otras personas en un tema que es tan importante para ti, como lo es esta petición. Pero Change.org puede ayudarte a conseguir más firmas en menor cantidad de tiempo. Tu promoción permitirá a Change.org hacer lo siguiente:<ul class="list-bulleted mvn mhxs" style="list-style-type:disc"><li><strong>Encontrar gente afín</strong> que quiera apoyar la petición</li><li><strong>Distribuir la petición</strong> a través de email, redes sociales y nuestra página web.</li></ul> Si todos realizamos un pequeño aporte, esta petición puede reunir miles de firmas en pocas horas. ¿Nos ayudas?';
var promoteButton = "";
var shareButton = "";
var thermometerText = "";
var currencyBefore = true; //change to false if currency is after amount in locale
var stepperCopy = "";

/* Don't Touch Below */
var utils = window.optimizely.get("utils");
utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    var h = combo.querySelector('h1');
    var s = combo.querySelector('.phxxl.ptl.xs-pam > div');
    var t = combo.querySelector('[data-view="psf/combo/components/combo_thermometer"] [display="flex"] > div');
    var pb = combo.querySelector('.js-promote p');
    var sb = combo.querySelector('.js-share-btn p');
    var sc = combo.querySelector('.page-wrap > .txt-c.xs-mvxl.mbxl.mtxs h5');
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var promoteInner = document.querySelector('.js-promote').innerText.replace(/,/g, '');
    var amount = promoteInner.match(/\d+/);
    var currency = currencyBefore ? promoteInner.charAt(amount.index-1) : promoteInner.charAt(amount.index+1);
    function makeReplacements(str) {
      var temp = str;
      temp = temp.replace('{fname}', fname);
      temp = temp.replace('{currency}', currency);
      temp = temp.replace('{amount}', parseInt(amount[0]).toLocaleString());
      return temp;                   
    }
    if (heading) {
     	 h.innerHTML = makeReplacements(heading);
    }
    if (subcopy) {
       s.innerHTML = makeReplacements(subcopy);
    }
    if (promoteButton) {
       pb.innerHTML = makeReplacements(promoteButton);
    }
    if (shareButton) {
       sb.innerHTML = makeReplacements(shareButton);
    }
    if (thermometerText) {
       t.innerHTML = makeReplacements(thermometerText);
    }
    if (stepperCopy) {
     	 sc.innerHTML = makeReplacements(stepperCopy); 
    }
  });
});
}}]}], "name": "V1"}, {"id": "20368826068", "actions": [{"viewId": "20370828208", "changes": [{"dependencies": [], "type": "custom_code", "id": "1cd100b233f64f6d8c8d2d71bbd98532", "value": function($){/* Customization, leave as "" if you want to use the existing */
/* Personalization Tags: {fname} {currency} {amount} */
/* Example: var promoteButton = "Yes, I'll chip in {currency}{amount}" */
var heading = "¿Quieres ayudar con {currency}{amount} a esta petición?";
var subcopy = '{fname}, tu aporte permitirá:<ul class="list-bulleted mvn mhxs" style="list-style-type:disc"><li><strong>Encontrar gente afín</strong> que quiera apoyar la petición</li><li><strong>Distribuir la petición</strong> a través de email, redes sociales y nuestro sitio web.</li></ul> Con pequeños aportes de personas como tú, esta petición puede reunir miles de firmas en pocas horas. ¿Nos ayudas?';
var promoteButton = "";
var shareButton = "";
var thermometerText = "";
var currencyBefore = true; //change to false if currency is after amount in locale
var stepperCopy = "";

/* Don't Touch Below */
var utils = window.optimizely.get("utils");
utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    var h = combo.querySelector('h1');
    var s = combo.querySelector('.phxxl.ptl.xs-pam > div');
    var t = combo.querySelector('[data-view="psf/combo/components/combo_thermometer"] [display="flex"] > div');
    var pb = combo.querySelector('.js-promote p');
    var sb = combo.querySelector('.js-share-btn p');
    var sc = combo.querySelector('.page-wrap > .txt-c.xs-mvxl.mbxl.mtxs h5');
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var promoteInner = document.querySelector('.js-promote').innerText.replace(/,/g, '');
    var amount = promoteInner.match(/\d+/);
    var currency = currencyBefore ? promoteInner.charAt(amount.index-1) : promoteInner.charAt(amount.index+1);
    function makeReplacements(str) {
      var temp = str;
      temp = temp.replace('{fname}', fname);
      temp = temp.replace('{currency}', currency);
      temp = temp.replace('{amount}', parseInt(amount[0]).toLocaleString());
      return temp;                   
    }
    if (heading) {
     	 h.innerHTML = makeReplacements(heading);
    }
    if (subcopy) {
       s.innerHTML = makeReplacements(subcopy);
    }
    if (promoteButton) {
       pb.innerHTML = makeReplacements(promoteButton);
    }
    if (shareButton) {
       sb.innerHTML = makeReplacements(shareButton);
    }
    if (thermometerText) {
       t.innerHTML = makeReplacements(thermometerText);
    }
    if (stepperCopy) {
     	 sc.innerHTML = makeReplacements(stepperCopy); 
    }
  });
});
}}]}], "name": "V2"}], "audienceIds": ["and", "11487071591", "11800860209"], "changes": null, "id": "20407561383", "integrationSettings": null}], "id": "20378058609", "weightDistributions": null, "name": "[fdn] - Combo experiment B - LatAm (es-419) - Latino", "groupId": null, "commitId": "20384221179", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20352565146"], "experiments": [{"weightDistributions": [{"entityId": "20364255844", "endOfRange": 5000}, {"entityId": "20356664785", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Petition Update - Onsite Starter Acquisition R3", "bucketingStrategy": null, "variations": [{"id": "20364255844", "actions": [{"viewId": "20352565146", "changes": [{"dependencies": [], "type": "custom_code", "id": "85101bde97444afda0dbaaf8462e32c1", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('div.modal.in[data-name="signed_interrupt"] .modal-dialog').then(function(signedModal) {
  
  utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent('optly_interrupt_show');
  });
  
});
}}]}], "name": "Original"}, {"id": "20356664785", "actions": [{"viewId": "20352565146", "changes": [{"dependencies": [], "type": "custom_code", "id": "c4e04b4074734c60934aa6eb49f0f824", "value": function($){var utils = window.optimizely.get("utils");

var modalHTML = '<div class="modal"> <div id="modal-demo-dialog" class="modal-dialog modal-small animate animate-zoom-in"> <button id="sap-modal-close" class="modal-close link-stealth position-absolute position-right position-top pas"> <span class="symbol symbol-close symbol-compact"></span> </button> <img src="https://static.change.org/starter-nurture/petition-starters.png"> <h1 class="txt-c mtn">Are you ready to improve your local community?</h1><p class="txt-c mbm">We need more petitions like this one. Right now, community advocates are making a difference. Our petition tools and expert advice help you reach your signature goal and make an impact. Are you ready to jump into action?</p><a id="start" class="btn btn-action btn-big btn-full mbxs" href="/start-a-petition">Yes, I’d like start my petition</a><button id="sap-back" class="btn btn-big btn-full">Take me back to the petition</button><div class="more-info"><p class="txt-c">Interested in starting a petition, but need more guidance? <a id="sap-learn" href="https://www.change.org/start-a-petition/learn?showLearn=true&source_location=supa">Learn More</a></p></div></div> </div>';

function fireEvent(ev) {
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent(ev);
  });
}

function sapModal(el) {
  var m = document.createElement('div');
  m.id = 'sap-modal';
  m.innerHTML = modalHTML;
  el.insertBefore(m, el.firstChild);
  // SAP
  document.getElementById('start').addEventListener('click', function(){
    fireEvent('onsite_acquisition_start');
  }, false);
  // Close + Back to Petition
  document.getElementById('sap-modal-close').addEventListener('click', function(){
    fireEvent('onsite_acquisition_close');
    m.classList.add('hide-fully');
    m.remove();
  }, false);
  document.getElementById('sap-back').addEventListener('click', function(){
    fireEvent('onsite_acquisition_close');
    m.classList.add('hide-fully');
    m.remove();
  }, false);
  // Learn More
  document.getElementById('sap-learn').addEventListener('click', function(){
    fireEvent('onsite_acquisition_learn_more');
  }, false);
}

utils.waitForElement('.js-update-content').then(function(show){
  sapModal(show);
  fireEvent('onsite_acquisition_show');
});
}}, {"value": "<style>.more-info {\n \tborder-top: 1px solid #DBD9DB;\n  margin-top: 20px;\n  margin-left: -30px;\n  margin-right: -30px;\n  padding: 20px 30px;\n  padding-bottom: 0;\n}\n\n#sap-modal img {\n  display: block;\n  max-width: 230px;\n  margin: 20px auto;\n}\n/*\n#sap-modal h1 {\n  font-size: 31.25px;\n\tline-height: 38.4px;\n}\n*/</style>", "selector": "head", "dependencies": [], "type": "append", "id": "115bd4f2761043d4b0d7e087840cb53f"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20388954738", "integrationSettings": null}], "id": "20386964681", "weightDistributions": null, "name": "[niftic] - Petition Update - Onsite Starter Acquisition R3", "groupId": null, "commitId": "20364344084", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20421712757"], "experiments": [{"weightDistributions": [{"entityId": "20380643200", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Combo - Diaspora Survey HJ", "bucketingStrategy": null, "variations": [{"id": "20427513124", "actions": [{"viewId": "20421712757", "changes": [{"dependencies": [], "type": "custom_code", "id": "e1f2b1aebd474dd2aa1543af0f23b5be", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "20380643200", "actions": [{"viewId": "20421712757", "changes": [{"dependencies": [], "type": "custom_code", "id": "8058b5b850d34ff5bf1ed1c411a80901", "value": function($){var utils = window.optimizely.get("utils");

utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'diaspora_survey');
});
}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20433640046", "integrationSettings": null}], "id": "20418013246", "weightDistributions": null, "name": "[niftic] - Combo - Diaspora Survey HJ", "groupId": null, "commitId": "20414182768", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20434613084"], "experiments": [{"weightDistributions": [{"entityId": "20445493325", "endOfRange": 3333}, {"entityId": "20432512998", "endOfRange": 6666}, {"entityId": "20428183167", "endOfRange": 10000}], "audienceName": "Mobile only,Screen.width Mobile", "name": "[fdn] - SAP - Share Optimisation on Mobile - ID", "bucketingStrategy": null, "variations": [{"id": "20445493325", "actions": [], "name": "Original"}, {"id": "20432512998", "actions": [{"viewId": "20434613084", "changes": [{"dependencies": [], "type": "custom_code", "id": "4c4032b4e7ff4561b1fb3aa54dab48d1", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Asik! Petisimu udah terbit nih, " + firstName + '.' ;
 
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('[data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = firstName + ", makin viral, makin sukses petisinya!";
  headingMobile.innerText = firstName + ", makin viral, makin sukses petisinya!";
  copy.innerHTML = "Yuk, sebarkan petisi kamu di medsos. <b>Tag kami juga di @changeorg_id, supaya kami bantu promosiin!</b>";
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = "<span>Maaf, saya lewat dulu</span>";
 /* 
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  }); */
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    shareList.classList.remove('mhxxxl');
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
  });


  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});
}}, {"value": "<style>.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.row.match-height {\n  flex-direction: column;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .box-sm.xs-full-height.page-wrap > .bg-default {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -30px;\n    margin-left: -20px;\n    margin-right: -20px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 320px;\n    max-width: 100%;\n    margin: auto;\n    padding: 10px 15px 20px;\n}\n.page-wrap > .bg-brighter {\n    box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "433992b18dbb4d5da9210e54f3eb1c8a"}]}], "name": "Variation #1"}, {"id": "20428183167", "actions": [{"viewId": "20434613084", "changes": [{"dependencies": [], "type": "custom_code", "id": "1e802c27acab4268b3eaee77fe8ce156", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Selamat, " + firstName + '! ' + "Petisi kamu udah terbit!";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('[data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l', 'mbs');
  copy.classList.remove('mbxl');
  
  heading.innerText = firstName + ", kalau gak terdengar, maka gak didukung!";
  headingMobile.innerText = firstName + ", kalau gak terdengar, maka gak didukung!";
  copy.innerHTML = "Hampir semua petisi yang menang pernah viral. Yuk, sebarkan petisimu di medsos!";
  
  var tip = document.createElement('p');
  tip.classList = 'txt-l type-l mbxl mtn';
  tip.innerHTML = '<b>💡 Tips buat kamu:</b> jangan cuma sebarkan petisimu di satu akun. Makin sering kamu sebarkan petisimu, makin besar juga kemungkinan petisinya menang!';
  
  copy.parentNode.insertBefore(tip, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Maaf, seya lewat dulu</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    shareList.classList.remove('mhxxxl');
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });
/*
  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/sap-optimization-stepper.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);
 */
  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');

});
}}, {"value": "<style>.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.row.match-height {\n  flex-direction: column;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .box-sm.xs-full-height.page-wrap > .bg-default {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -30px;\n    margin-left: -20px;\n    margin-right: -20px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 100%;\n    max-width: 100%;\n    margin: auto;\n    padding: 10px 15px 20px;\n  padding-left: 0;\n  padding-right: 0;\n  margin-right: -10px;\n}\n.page-wrap > .bg-brighter {\n    box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "f811f642a0814b5f91bd453d9ed0b809"}]}], "name": "Variation #4"}], "audienceIds": ["and", "11487071591", "11800860209"], "changes": null, "id": "20418623918", "integrationSettings": null}], "id": "20435992895", "weightDistributions": null, "name": "[fdn] - SAP - Share Optimisation on Mobile - ID", "groupId": null, "commitId": "20675890056", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20467821684", "20484950646"], "experiments": [{"weightDistributions": [{"entityId": "20458692668", "endOfRange": 2000}, {"entityId": "20479311828", "endOfRange": 4000}, {"entityId": "20475402317", "endOfRange": 6000}, {"entityId": "20466062323", "endOfRange": 8000}, {"entityId": "20473671799", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Carousel/SAP - Petition Creation Incentives", "bucketingStrategy": null, "variations": [{"id": "20458692668", "actions": [], "name": "Original"}, {"id": "20479311828", "actions": [{"viewId": "20484950646", "changes": [{"dependencies": [], "type": "custom_code", "id": "B11CC094-87B8-41AA-ACD5-5D15FC2712CA", "value": function($){var utils = window.optimizely.get("utils");

/* Start a Petition */
utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){
 if (!(!!document.querySelector('.sap-landing-wrap'))) {
	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Here’s how Change.org petitions work ✨</h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Create your petition</h3>' +
    '                    <p class="type-l man">Try your best but don\'t worry if it\'s not perfect yet! You can edit your petition later.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Build support</h3>' +
    '                    <p class="type-l mtn mbs">Change.org has tools to help you  build support for your cause. </p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-v3.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Our team of petition experts are live now, ready to look at your petition and give you personalized advice over SMS.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Change the world</h3>' +
    '                    <p class="type-l man">Change.org is proven to influence politicians, public officials and business leaders. Work with your decision maker to reach an outcome that solves your problem.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '            <div class="arrange progress-step pvs mbm bg-remove-md bg-remove-lg bg-remove-xl" style="background: #FDF9F2;margin-left: -15px; margin-right: -15px; padding-left: 15px; padding-right: 15px;">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/incentives-gift-circle.png " alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Get $25 of free advertising </h3>' +
    '                    <p class="type-l man">When your petition gets 5 signatures!</p>' +
    '                </div>' +
    '            </div>' +
    '        <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
 }
});
}}, {"value": "<style>/* Start a petition */\n.sap-landing-wrap {\n  overflow: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n    overflow-x: hidden;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "92B7521D-62E6-42DC-8DD4-5932553415F4"}]}, {"viewId": "20467821684", "changes": [{"dependencies": [], "type": "custom_code", "id": "074BE4C2-9019-4A9A-A58E-6D626521D2D4", "value": function($){var utils = window.optimizely.get("utils");

/* Start a Petition */
utils.waitForElement('div#page').then(function(pageElm){
	var newOverlay = document.createElement('div'),
      newPopup   = document.createElement('div'),
      popupContainer = document.createElement('div'),
      popupHeader = document.createElement('div'),
      popupContent = document.createElement('div'),
      newBtnHolder = document.createElement('div'),
      newBtn = document.createElement('a');
  
  newOverlay.classList.add('optly-overlay');
  newPopup.classList.add('optly-popup');
  popupContainer.classList.add('optly-popup-container', 'pal');
  popupHeader.classList.add('optly-popup-header', 'txt-r');
  popupContent.classList.add('optly-popup-content', 'txt-c', 'mtxs');
  newBtn.classList.add('btn','btn-big','btn-full','btn-action','mts','mbxs');
  newBtnHolder.classList.add('psf-combo-buttons', 'position-block-center');

  popupHeader.innerHTML += '<span class="symbol symbol-close symbol-m optly-close-popup"></span>';
  popupContent.innerHTML += '<img src="https://static.change.org/psf-experiments/incentives-gift.png" />';
  popupContent.innerHTML += '<h2>Start a petition and get $25 of free advertising!</h2>';
  popupContent.innerHTML += '<p class="type-m">Got something on your mind you want to change? Make a difference by starting a petition today. When your petition gets to 5 signatures, we\'ll give you $25 worth of free advertising.</p>';
  
  newBtn.innerText = 'Start your own petition';
  newBtn.href = "https://www.change.org/start-a-petition";
  
  newBtnHolder.appendChild(newBtn);
  newBtnHolder.innerHTML += '<p class="type-s">Interested in starting a petition, but need more guidance? <a href="https://www.change.org/start-a-petition/learn?showLearn=true&source_location=update">Learn More</a></p>';
  
  popupContent.appendChild(newBtnHolder);
  
  popupContainer.appendChild(popupHeader);
  popupContainer.appendChild(popupContent);
  
  newPopup.appendChild(popupContainer);
  pageElm.appendChild(newOverlay);
  pageElm.appendChild(newPopup);
  
  document.querySelector('span.optly-close-popup').addEventListener('click', function() {
  	document.querySelector('.optly-overlay').classList.add('hide-fully');
    document.querySelector('.optly-popup').classList.add('hide-fully');
  });
});
}}, {"value": "<style>.optly-overlay {\n    height: 100%;\n    width: 100%;\n    background: #363135;\n    opacity: 0.4;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 3;\n}\n\n.optly-popup {\n\tbackground: #FFFCF7;\n  box-shadow: 0px 0px 10px rgb(115 114 115 / 20%);\n  border-radius: 5px;\n\tposition:fixed;\n  z-index: 4;\n  width: 500px;\n  height: 500px;\n \ttop: 50%;\n  left: 50%; \n  transform: translate(-50%,-50%);\n}\n\n@media only screen and (max-width: 768px) {\n  .optly-popup {\n  \tborder-radius: 40px 40px 0px 0px;\n    width: 100%;\n    position: fixed;\n    top: unset;\n    bottom: 0;\n    left:0;\n    transform:none;\n    height: 490px;\n  }\n}\n\n.optly-popup-container {\n    padding-top: 25px;\n    padding: 25px;\n}\n\n.optly-close-popup {\n  cursor: pointer;\n}\n\n.optly-popup-content > img {\n\twidth: 126px;\n  margin: 0 auto;\n}\n\n.optly-popup-content > h2 {\n  font-weight:bold;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "F3C951EE-F557-4C04-A1BE-61D2DFF5D97A"}]}], "name": "Variation #1"}, {"id": "20475402317", "actions": [{"viewId": "20484950646", "changes": [{"dependencies": [], "type": "custom_code", "id": "39076636-3B17-4857-85EC-63682DF34F7B", "value": function($){var utils = window.optimizely.get("utils");

/* Start a Petition */
utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){
 if (!(!!document.querySelector('.sap-landing-wrap'))) {
	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Here’s how Change.org petitions work ✨</h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Create your petition</h3>' +
    '                    <p class="type-l man">Try your best but don\'t worry if it\'s not perfect yet! You can edit your petition later.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Build support</h3>' +
    '                    <p class="type-l mtn mbs">Change.org has tools to help you  build support for your cause. </p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-v3.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Our team of petition experts are live now, ready to look at your petition and give you personalized advice over SMS.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Change the world</h3>' +
    '                    <p class="type-l man">Change.org is proven to influence politicians, public officials and business leaders. Work with your decision maker to reach an outcome that solves your problem.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '            <div class="arrange progress-step pvs mbm bg-remove-md bg-remove-lg bg-remove-xl" style="background: #FDF9F2;margin-left: -15px; margin-right: -15px; padding-left: 15px; padding-right: 15px;">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/incentives-gift-circle.png " alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Get $25 of free advertising </h3>' +
    '                    <p class="type-l man">When your petition gets 5 signatures!</p>' +
    '                </div>' +
    '            </div>' +
    '        <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
 }
});
}}, {"value": "<style>/* Start a petition */\n.sap-landing-wrap {\n  overflow: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n    overflow-x: hidden;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "9FDBB0F7-5ABD-4108-B847-6EBABCB9CB6D"}]}, {"viewId": "20467821684", "changes": [{"dependencies": [], "type": "custom_code", "id": "0F74F6C9-3805-43AA-9D26-63670B43036E", "value": function($){var utils = window.optimizely.get("utils");

/* Start a Petition */
utils.waitForElement('div[data-view="petitions/discover"][data-view-attached="true"] > .container').then(function(pageElm){
  pageElm.classList.add('pos-relative');
  pageElm.querySelector('.row').classList.add('optly-hidden-content');
  //var oldElm = pageElm;
  //var newElm = pageElm.cloneNode();
  //oldElm.classList.add('optly-hidden-content');
  //newElm.removeChild();
	var newContentArea = document.createElement('div'),
      contentContainer = document.createElement('div'),
      popupContent = document.createElement('div'),
      newBtnHolder = document.createElement('div'),
      newBtn = document.createElement('a'),
  		skipBtn = document.createElement('a');
  
  newContentArea.classList.add('optly-new-content');
  newContentArea.innerHTML = '<div class="row">' +
    '<div class="col-md-10 col-md-offset-1 xs-pan">' +
    '<div class="phxxxl pvxxxl bg-default border-rounded xs-pan optly-new-inner-content">'+ 
    '<div class="border-rounded txt-c bg-brighter border-rounded-none-xs hide-overflow"><div class="ptxxl xs-ptxs js-discover-header"><div class="row mbm xs-mbs"><div class="psf-combo-progress-bar active-step-3"><div class="arrange arrange-middle"><div class="arrange-fit"><span class="symbol symbol-verified mrxxs type-progress-bar-green complete-step"></span></div><div class="arrange-fill"><div class="text-bar mvn"><span class="text pan"><span class="symbol symbol-verified symbol-xl symbol-compact mhxxs type-progress-bar-green"></span></span></div></div><div class="arrange-fit"><div class="border-a border-thick border-rounded-circle mlxxs type-s incomplete-step active"><strong class="step-number position-relative type-progress-bar-green">3</strong></div></div></div></div></div></div></div>'+
    '</div>' +
    '</div>' +
    '</div>';
  var newInnerContent = newContentArea.querySelector('.optly-new-inner-content');
  
  contentContainer.classList.add('optly-popup-content', 'txt-c', 'bg-brighter', 'pvm', 'phl');
  newBtn.classList.add('btn','btn-big','btn-full','btn-action','mts');
  skipBtn.classList.add('btn','btn-big','btn-full','btn-outline','mtxs','mbxs','optly-skip-btn');
  newBtnHolder.classList.add('psf-combo-buttons', 'position-block-center');

  contentContainer.innerHTML += '<img src="https://static.change.org/psf-experiments/incentives-gift.png" />';
  contentContainer.innerHTML += '<h3 class="mtm">Start a petition and get $25 of free advertising!</h3>';
  contentContainer.innerHTML += '<p class="type-m mbm">Got something on your mind you want to change? Make a difference by starting a petition today. When your petition gets to 5 signatures, we\'ll give you $25 worth of free advertising.</p>';
  
  newBtn.innerText = 'Start your own petition';
  newBtn.href = "https://www.change.org/start-a-petition";
  
  skipBtn.innerText = 'Maybe later';
  newBtnHolder.appendChild(newBtn);
  newBtnHolder.appendChild(skipBtn);
  newBtnHolder.innerHTML += '<p class="type-s phl">Interested in starting a petition, but need more guidance? <a href="https://www.change.org/start-a-petition/learn?showLearn=true&source_location=update">Learn More</a></p>';
  
  contentContainer.appendChild(newBtnHolder);
  
  newInnerContent.appendChild(contentContainer);
  var clonedLinkNode = pageElm.querySelector('.js-discover-footer').cloneNode(true);
  newInnerContent.appendChild(clonedLinkNode);
  pageElm.appendChild(newContentArea);
  
  document.querySelector('.optly-skip-btn').addEventListener('click',function() {
  	document.querySelector('.optly-new-content').classList.add('hide-fully');
    document.querySelector('.optly-hidden-content').classList.remove('optly-hidden-content');
  });
  
});
}}, {"value": "<style>.optly-overlay {\n    height: 100%;\n    width: 100%;\n    background: #363135;\n    opacity: 0.4;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 3;\n}\n\n.optly-popup {\n\tbackground: #FFFCF7;\n  box-shadow: 0px 0px 10px rgb(115 114 115 / 20%);\n  border-radius: 5px;\n\tposition:absolute;\n  z-index: 4;\n  width: 500px;\n  height: 500px;\n \ttop: 50%;\n  left: 50%; \n  transform: translate(-50%,-50%);\n}\n\n@media only screen and (max-width: 768px) {\n  .optly-popup {\n  \tborder-radius: 40px 40px 0px 0px;\n    width: 100%;\n    position: absolute;\n    top: 152px;\n    left:0;\n    transform:none;\n    height: calc(100% - 152px);\n  }\n}\n\n.optly-popup-container {\n    padding-top: 25px;\n    padding: 25px;\n}\n\n.optly-close-popup {\n  cursor: pointer;\n}\n\n.optly-popup-content > img {\n\twidth: 90px;\n  margin: 0 auto;\n}\n\n.optly-popup-content > h2 {\n  font-weight:bold;\n}\n\n\n.optly-hidden-content {\n  display:none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "DFD4A81B-3882-476C-8D10-508BAD64B950"}]}], "name": "Variation #2"}, {"id": "20466062323", "actions": [{"viewId": "20484950646", "changes": [{"dependencies": [], "type": "custom_code", "id": "5C8E954D-6A86-4D27-B6D9-A918E0488053", "value": function($){var utils = window.optimizely.get("utils");

/* Start a Petition */
utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){
 if (!(!!document.querySelector('.sap-landing-wrap'))) {
	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Here’s how Change.org petitions work ✨</h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Create your petition</h3>' +
    '                    <p class="type-l man">Try your best but don\'t worry if it\'s not perfect yet! You can edit your petition later.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Build support</h3>' +
    '                    <p class="type-l mtn mbs">Change.org has tools to help you  build support for your cause. </p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-v3.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Our team of petition experts are live now, ready to look at your petition and give you personalized advice over SMS.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Change the world</h3>' +
    '                    <p class="type-l man">Change.org is proven to influence politicians, public officials and business leaders. Work with your decision maker to reach an outcome that solves your problem.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '            <div class="arrange progress-step pvs mbm bg-remove-md bg-remove-lg bg-remove-xl" style="background: #FDF9F2;margin-left: -15px; margin-right: -15px; padding-left: 15px; padding-right: 15px;">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/incentives-unlock-circle.png " alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Unlock $25 of free advertising </h3>' +
    '                    <p class="type-l man">When your petition gets 5 signatures!</p>' +
    '                </div>' +
    '            </div>' +
    '        <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
 }
});
}}, {"value": "<style>/* Start a petition */\n.sap-landing-wrap {\n  overflow: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n    overflow-x: hidden;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "484B1CC8-8E01-4D90-9221-E01AE2691535"}]}, {"viewId": "20467821684", "changes": [{"dependencies": [], "type": "custom_code", "id": "C440B1AA-FBD1-4BAA-91EC-3E058CE5760C", "value": function($){var utils = window.optimizely.get("utils");

/* Start a Petition */
utils.waitForElement('div#page').then(function(pageElm){
	var newOverlay = document.createElement('div'),
      newPopup   = document.createElement('div'),
      popupContainer = document.createElement('div'),
      popupHeader = document.createElement('div'),
      popupContent = document.createElement('div'),
      newBtnHolder = document.createElement('div'),
      newBtn = document.createElement('a');
  
  newOverlay.classList.add('optly-overlay');
  newPopup.classList.add('optly-popup');
  popupContainer.classList.add('optly-popup-container', 'pal');
  popupHeader.classList.add('optly-popup-header', 'txt-r');
  popupContent.classList.add('optly-popup-content', 'txt-c', 'mtxs');
  newBtn.classList.add('btn','btn-big','btn-full','btn-action','mts','mbxs');
  newBtnHolder.classList.add('psf-combo-buttons', 'position-block-center');

  popupHeader.innerHTML += '<span class="symbol symbol-close symbol-m optly-close-popup"></span>';
  popupContent.innerHTML += '<img src="https://static.change.org/psf-experiments/incentives-unlock.png" />';
  popupContent.innerHTML += '<h2>Start a petition and unlock $25 of free advertising!</h2>';
  popupContent.innerHTML += '<p class="type-m">Got something on your mind you want to change? Make a difference by starting a petition today. When your petition gets to 5 signatures, we\'ll give you $25 worth of free advertising.</p>';
  
  newBtn.innerText = 'Start your own petition';
  newBtn.href = "https://www.change.org/start-a-petition";
  
  newBtnHolder.appendChild(newBtn);
  newBtnHolder.innerHTML += '<p class="type-s">Interested in starting a petition, but need more guidance? <a href="https://www.change.org/start-a-petition/learn?showLearn=true&source_location=update">Learn More</a></p>';
  
  popupContent.appendChild(newBtnHolder);
  
  popupContainer.appendChild(popupHeader);
  popupContainer.appendChild(popupContent);
  
  newPopup.appendChild(popupContainer);
  pageElm.appendChild(newOverlay);
  pageElm.appendChild(newPopup);
  
  document.querySelector('span.optly-close-popup').addEventListener('click', function() {
  	document.querySelector('.optly-overlay').classList.add('hide-fully');
    document.querySelector('.optly-popup').classList.add('hide-fully');
  });
});
}}, {"value": "<style>.optly-overlay {\n    height: 100%;\n    width: 100%;\n    background: #363135;\n    opacity: 0.4;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 3;\n}\n\n.optly-popup {\n\tbackground: #FFFCF7;\n  box-shadow: 0px 0px 10px rgb(115 114 115 / 20%);\n  border-radius: 5px;\n\tposition:fixed;\n  z-index: 4;\n  width: 500px;\n  height: 500px;\n \ttop: 50%;\n  left: 50%; \n  transform: translate(-50%,-50%);\n}\n\n@media only screen and (max-width: 768px) {\n  .optly-popup {\n  \tborder-radius: 40px 40px 0px 0px;\n    width: 100%;\n    position: fixed;\n    top: unset;\n    bottom: 0;\n    left:0;\n    transform:none;\n    height: 490px;\n  }\n}\n\n.optly-popup-container {\n    padding-top: 25px;\n    padding: 25px;\n}\n\n.optly-close-popup {\n  cursor: pointer;\n}\n\n.optly-popup-content > img {\n\twidth: 126px;\n  margin: 0 auto;\n}\n\n.optly-popup-content > h2 {\n  font-weight:bold;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "74D7E472-D097-45B8-A2B6-051261D771E6"}]}], "name": "Variation #3"}, {"id": "20473671799", "actions": [{"viewId": "20484950646", "changes": [{"dependencies": [], "type": "custom_code", "id": "CA12A14E-C181-4685-952F-22FCF648A179", "value": function($){var utils = window.optimizely.get("utils");

/* Start a Petition */
utils.waitForElement('[data-view="petitions/new/components/tag_selection_view"]').then(function(tags){
 if (!(!!document.querySelector('.sap-landing-wrap'))) {
	var sapContainer = document.querySelector('.new-modular > .js-modular-sap-container');
  
  var landingPage = document.createElement('div');
  landingPage.className = 'sap-landing-wrap container pvxxxl';
  landingPage.innerHTML = '' +
    '<div class="row">' +
    '    <div class="col-xs-12">' +
    '        <h1 class="mtn mbxxl">Here’s how Change.org petitions work ✨</h1>' +
    '        <div class="progess-section">' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-1.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Create your petition</h3>' +
    '                    <p class="type-l man">Try your best but don\'t worry if it\'s not perfect yet! You can edit your petition later.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-2.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Build support</h3>' +
    '                    <p class="type-l mtn mbs">Change.org has tools to help you  build support for your cause. </p>' +
    '                    <div class="arrange arrange-middle mbs">' +
    '                        <div class="arrange-fit">' +
    '                            <img src="https://static.change.org/psf-experiments/pre-sap-v3.png" alt="" style="height: 40px;" class="mrs">' +
    '                        </div>' +
    '                        <div class="arrange-fill">' +
    '                            <h5 class="type-branded man">NEW!</h5>' +
    '                            <h4 class="man">Petition advice</h4>' +
    '                        </div>' +
    '                    </div>' +
    '                    <p class=" type-l man">Our team of petition experts are live now, ready to look at your petition and give you personalized advice over SMS.</p>' +
    '                </div>' +
    '            </div>' +
    '            <div class="arrange progress-step pbs">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/pre-sap-3.png" alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Change the world</h3>' +
    '                    <p class="type-l man">Change.org is proven to influence politicians, public officials and business leaders. Work with your decision maker to reach an outcome that solves your problem.</p>' +
    '                </div>' +
    '            </div>' +
    '        </div>' +
    '            <div class="arrange progress-step pvs mbm bg-remove-md bg-remove-lg bg-remove-xl" style="background: #FDF9F2;margin-left: -15px; margin-right: -15px; padding-left: 15px; padding-right: 15px;">' +
    '                <div class="arrange-fit">' +
    '                    <img src="https://static.change.org/psf-experiments/incentives-unlock-circle.png " alt="" style="height: 34px" class="mrm">' +
    '                </div>' +
    '                <div class="arrange-fill">' +
    '                    <h3 class="mtn mbxxxs">Unlock $25 of free advertising </h3>' +
    '                    <p class="type-l man">When your petition gets 5 signatures!</p>' +
    '                </div>' +
    '            </div>' +
    '        <button class="btn btn-action btn-big btn-full">Got it! I\'m ready to create my petition</button>' +
    '    </div>' +
    '</div>';
  
  sapContainer.insertBefore(landingPage, tags);
  tags.classList.add('hide-fully');
  
  sapContainer.querySelector('button').addEventListener('click', function() {
  	landingPage.classList.add('hide-fully');
    tags.classList.remove('hide-fully');
  });
 }
});
}}, {"value": "<style>/* Start a petition */\n.sap-landing-wrap {\n  overflow: hidden\n}\n.sap-landing-wrap {\n  max-width: 500px;\n}\n@media screen and (max-width: 767px) {\n\t.sap-landing-wrap {\n    max-width: 100%;\n    overflow-x: hidden;\n  }\n}\n.landing-header {\n  position: relative;\n}\n.landing-header .header-bg {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.landing-header .header-content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding-top: 30px;\n  padding-bottom: 16px;\n}\n.landing-header .header-avatars {\n  position: absolute;\n  height: 54px;\n  width: auto;\n  top: calc(100% - 27px);\n  left: 50%;\n  transform: translateX(-50%);\n}\n.progress-step:before {\n    content: '................................................................................................................................';\n    height: 100%;\n    position: absolute;\n    top: 21px;\n    left: 31px;\n    width: 4px;\n    opacity: .4;\n    color: #ec2c22;\n    letter-spacing: -14px;\n    font-size: 25px;\n    writing-mode: vertical-rl;\n    text-orientation: upright;\n}\n.progress-step {\n    overflow: hidden;\n    position: relative;\n}\n.progress-step:last-of-type:before {\n    content: none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "BCE2F7C6-AEED-4188-9867-39CE8C2A8D5C"}]}, {"viewId": "20467821684", "changes": [{"dependencies": [], "type": "custom_code", "id": "D25EF9CD-F4DF-4C95-B042-52140868D9B4", "value": function($){var utils = window.optimizely.get("utils");

/* Start a Petition */
utils.waitForElement('div[data-view="petitions/discover"][data-view-attached="true"] > .container').then(function(pageElm){
  pageElm.classList.add('pos-relative');
  pageElm.querySelector('.row').classList.add('optly-hidden-content');
  //var oldElm = pageElm;
  //var newElm = pageElm.cloneNode();
  //oldElm.classList.add('optly-hidden-content');
  //newElm.removeChild();
	var newContentArea = document.createElement('div'),
      contentContainer = document.createElement('div'),
      popupContent = document.createElement('div'),
      newBtnHolder = document.createElement('div'),
      newBtn = document.createElement('a'),
  		skipBtn = document.createElement('a');
  
  newContentArea.classList.add('optly-new-content');
  newContentArea.innerHTML = '<div class="row">' +
    '<div class="col-md-10 col-md-offset-1 xs-pan">' +
    '<div class="phxxxl pvxxxl bg-default border-rounded xs-pan optly-new-inner-content">'+ 
    '<div class="border-rounded txt-c bg-brighter border-rounded-none-xs hide-overflow"><div class="ptxxl xs-ptxs js-discover-header"><div class="row mbm xs-mbs"><div class="psf-combo-progress-bar active-step-3"><div class="arrange arrange-middle"><div class="arrange-fit"><span class="symbol symbol-verified mrxxs type-progress-bar-green complete-step"></span></div><div class="arrange-fill"><div class="text-bar mvn"><span class="text pan"><span class="symbol symbol-verified symbol-xl symbol-compact mhxxs type-progress-bar-green"></span></span></div></div><div class="arrange-fit"><div class="border-a border-thick border-rounded-circle mlxxs type-s incomplete-step active"><strong class="step-number position-relative type-progress-bar-green">3</strong></div></div></div></div></div></div></div>'+
    '</div>' +
    '</div>' +
    '</div>';
  var newInnerContent = newContentArea.querySelector('.optly-new-inner-content');
  
  contentContainer.classList.add('optly-popup-content', 'txt-c', 'bg-brighter', 'pvm', 'phl');
  newBtn.classList.add('btn','btn-big','btn-full','btn-action','mts');
  skipBtn.classList.add('btn','btn-big','btn-full','btn-outline','mtxs','mbxs','optly-skip-btn');
  newBtnHolder.classList.add('psf-combo-buttons', 'position-block-center');

  contentContainer.innerHTML += '<img src="https://static.change.org/psf-experiments/incentives-unlock.png" />';
  contentContainer.innerHTML += '<h3 class="mtm">Start a petition and unlock $25 of free advertising!</h3>';
  contentContainer.innerHTML += '<p class="type-m mbm">Got something on your mind you want to change? Make a difference by starting a petition today. When your petition gets to 5 signatures, we\'ll give you $25 worth of free advertising.</p>';
  
  newBtn.innerText = 'Start your own petition';
  newBtn.href = "https://www.change.org/start-a-petition";
  
  skipBtn.innerText = 'Maybe later';
  newBtnHolder.appendChild(newBtn);
  newBtnHolder.appendChild(skipBtn);
  newBtnHolder.innerHTML += '<p class="type-s phl">Interested in starting a petition, but need more guidance? <a href="https://www.change.org/start-a-petition/learn?showLearn=true&source_location=update">Learn More</a></p>';
  
  contentContainer.appendChild(newBtnHolder);
  
  newInnerContent.appendChild(contentContainer);
  var clonedLinkNode = pageElm.querySelector('.js-discover-footer').cloneNode(true);
  newInnerContent.appendChild(clonedLinkNode);
  pageElm.appendChild(newContentArea);
  
  document.querySelector('.optly-skip-btn').addEventListener('click',function() {
  	document.querySelector('.optly-new-content').classList.add('hide-fully');
    document.querySelector('.optly-hidden-content').classList.remove('optly-hidden-content');
  });
  
});
}}, {"value": "<style>.optly-overlay {\n    height: 100%;\n    width: 100%;\n    background: #363135;\n    opacity: 0.4;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 3;\n}\n\n.optly-popup {\n\tbackground: #FFFCF7;\n  box-shadow: 0px 0px 10px rgb(115 114 115 / 20%);\n  border-radius: 5px;\n\tposition:absolute;\n  z-index: 4;\n  width: 500px;\n  height: 500px;\n \ttop: 50%;\n  left: 50%; \n  transform: translate(-50%,-50%);\n}\n\n@media only screen and (max-width: 768px) {\n  .optly-popup {\n  \tborder-radius: 40px 40px 0px 0px;\n    width: 100%;\n    position: absolute;\n    top: 152px;\n    left:0;\n    transform:none;\n    height: calc(100% - 152px);\n  }\n}\n\n.optly-popup-container {\n    padding-top: 25px;\n    padding: 25px;\n}\n\n.optly-close-popup {\n  cursor: pointer;\n}\n\n.optly-popup-content > img {\n\twidth: 90px;\n  margin: 0 auto;\n}\n\n.optly-popup-content > h2 {\n  font-weight:bold;\n}\n\n\n.optly-hidden-content {\n  display:none;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "C650647B-9A00-4DA7-8CB0-78352BB8CC7C"}]}], "name": "Variation #4"}], "audienceIds": null, "changes": null, "id": "20466341505", "integrationSettings": null}], "id": "20458682239", "weightDistributions": null, "name": "[niftic] - Carousel/SAP - Petition Creation Incentives", "groupId": null, "commitId": "20495451540", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20467865797"], "experiments": [{"weightDistributions": [{"entityId": "20452907800", "endOfRange": 3000}, {"entityId": "20466118369", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM Mako Mania", "bucketingStrategy": null, "variations": [{"id": "20452907800", "actions": [{"viewId": "20467865797", "changes": [{"dependencies": [], "type": "custom_code", "id": "3b694da143bf41c990db054bd4ba6130", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
  window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
  hj('trigger', 'tweet_dm_control');
});
}}]}], "name": "Original"}, {"id": "20466118369", "actions": [{"viewId": "20467865797", "changes": [{"dependencies": [], "type": "custom_code", "id": "86ff7ae178404b5e814c41922ba1ebf9", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can stop Mako Mania by tweeting directly at decision makers right now</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet at Mako Mania sponsors now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = 'Why are YOU paying people to kill animals for fun? @ocfishtales @AnheuserBusch @fuel_ox @teamfishbomb @thebuckbomb can stop sponsoring the Mako Mania tournament http://change.org/StopMakoMania #localbusinesscanstopmakomania';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "fcb29ae0a3a1420d8b000a01b1dc3ec6"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20479227709", "integrationSettings": null}], "id": "20460457624", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM Mako Mania", "groupId": null, "commitId": "20481879227", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "817ed60f9e3042a9acf7afe77882c878", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20481034040"], "experiments": [{"weightDistributions": [{"entityId": "20456693578", "endOfRange": 3400}, {"entityId": "20475433702", "endOfRange": 6700}, {"entityId": "20483083431", "endOfRange": 10000}], "audienceName": "Mobile only,Screen.width Mobile", "name": "[fdn] - Combo experiment B - ID", "bucketingStrategy": null, "variations": [{"id": "20456693578", "actions": [{"viewId": "20481034040", "changes": [{"dependencies": [], "type": "custom_code", "id": "909e69244daa469290c4c830688dea95", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "20475433702", "actions": [{"viewId": "20481034040", "changes": [{"dependencies": [], "type": "custom_code", "id": "f5b7a41ba6e4443e92aea6d6cb258c6e", "value": function($){/* Customization, leave as "" if you want to use the existing */
/* Personalization Tags: {fname} {currency} {amount} */
/* Example: var promoteButton = "Yes, I'll chip in {currency}{amount}" */
var heading = "Dengan {currency}{amount} , kamu bisa buat petisi ini lebih terdengar";
var subcopy = '{fname}, kontribusimu artinya Change.org dapat: <ul class="list-bulleted mvn mhxs" style="list-style-type:disc"><li><strong>Menemukan orang-orang yang berpikiran serupa</strong> untuk dukung petisi ini</li><li><strong>Menyebarkan petisi</strong> ini melalui email, media sosial, dan situs kami.</li></ul> Dalam satu jam, ribuan pendukung dapat ditambahkan jika semua ikutan kontribusi. Mau bantu petisi capai target tanda-tangan?';
var promoteButton = "";
var shareButton = "";
var thermometerText = "";
var currencyBefore = true; //change to false if currency is after amount in locale
var stepperCopy = "";

/* Don't Touch Below */
var utils = window.optimizely.get("utils");
utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    var h = combo.querySelector('h1');
    var s = combo.querySelector('.phxxl.ptl.xs-pam > div');
    var t = combo.querySelector('[data-view="psf/combo/components/combo_thermometer"] [display="flex"] > div');
    var pb = combo.querySelector('.js-promote p');
    var sb = combo.querySelector('.js-share-btn p');
    var sc = combo.querySelector('.page-wrap > .txt-c.xs-mvxl.mbxl.mtxs h5');
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var promoteInner = document.querySelector('.js-promote').innerText.replace(/,/g, '');
    var amount = promoteInner.match(/\d+/);
    var currency = currencyBefore ? promoteInner.charAt(amount.index-1) : promoteInner.charAt(amount.index+1);
    function makeReplacements(str) {
      var temp = str;
      temp = temp.replace('{fname}', fname);
      temp = temp.replace('{currency}', currency);
      temp = temp.replace('{amount}', parseInt(amount[0]).toLocaleString());
      return temp;                   
    }
    if (heading) {
     	 h.innerHTML = makeReplacements(heading);
    }
    if (subcopy) {
       s.innerHTML = makeReplacements(subcopy);
    }
    if (promoteButton) {
       pb.innerHTML = makeReplacements(promoteButton);
    }
    if (shareButton) {
       sb.innerHTML = makeReplacements(shareButton);
    }
    if (thermometerText) {
       t.innerHTML = makeReplacements(thermometerText);
    }
    if (stepperCopy) {
     	 sc.innerHTML = makeReplacements(stepperCopy); 
    }
  });
});
}}]}], "name": "V1"}, {"id": "20483083431", "actions": [{"viewId": "20481034040", "changes": [{"dependencies": [], "type": "custom_code", "id": "FEC9739C-C0F7-4908-B7B9-773A90924FD2", "value": function($){/* Customization, leave as "" if you want to use the existing */
/* Personalization Tags: {fname} {currency} {amount} */
/* Example: var promoteButton = "Yes, I'll chip in {currency}{amount}" */
var heading = "{fname}, dengan {currency}{amount} , kamu bisa buat petisi ini lebih terdengar";
var subcopy = 'Kontribusimu artinya Change.org dapat: <ul class="list-bulleted mvn mhxs" style="list-style-type:disc"><li><strong>Menemukan orang-orang yang berpikiran serupa</strong> untuk dukung petisi ini</li><li><strong>Menyebarkan petisi</strong> ini melalui email, media sosial, dan situs kami.</li></ul> Dalam satu jam, ribuan pendukung dapat ditambahkan jika semua ikutan kontribusi. Mau bantu petisi capai target tanda-tangan?';
var promoteButton = "";
var shareButton = "";
var thermometerText = "";
var currencyBefore = true; //change to false if currency is after amount in locale
var stepperCopy = "";

/* Don't Touch Below */
var utils = window.optimizely.get("utils");
utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    var h = combo.querySelector('h1');
    var s = combo.querySelector('.phxxl.ptl.xs-pam > div');
    var t = combo.querySelector('[data-view="psf/combo/components/combo_thermometer"] [display="flex"] > div');
    var pb = combo.querySelector('.js-promote p');
    var sb = combo.querySelector('.js-share-btn p');
    var sc = combo.querySelector('.page-wrap > .txt-c.xs-mvxl.mbxl.mtxs h5');
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var promoteInner = document.querySelector('.js-promote').innerText.replace(/,/g, '');
    var amount = promoteInner.match(/\d+/);
    var currency = currencyBefore ? promoteInner.charAt(amount.index-1) : promoteInner.charAt(amount.index+1);
    function makeReplacements(str) {
      var temp = str;
      temp = temp.replace('{fname}', fname);
      temp = temp.replace('{currency}', currency);
      temp = temp.replace('{amount}', parseInt(amount[0]).toLocaleString());
      return temp;                   
    }
    if (heading) {
     	 h.innerHTML = makeReplacements(heading);
    }
    if (subcopy) {
       s.innerHTML = makeReplacements(subcopy);
    }
    if (promoteButton) {
       pb.innerHTML = makeReplacements(promoteButton);
    }
    if (shareButton) {
       sb.innerHTML = makeReplacements(shareButton);
    }
    if (thermometerText) {
       t.innerHTML = makeReplacements(thermometerText);
    }
    if (stepperCopy) {
     	 sc.innerHTML = makeReplacements(stepperCopy); 
    }
  });
});
}}]}], "name": "V2"}], "audienceIds": ["and", "11487071591", "11800860209"], "changes": null, "id": "20470223408", "integrationSettings": null}], "id": "20481034041", "weightDistributions": null, "name": "[fdn] - Combo experiment B - ID", "groupId": null, "commitId": "20471662730", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20496642258"], "experiments": [{"weightDistributions": [{"entityId": "20492016152", "endOfRange": 3000}, {"entityId": "20487845075", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Holt High", "bucketingStrategy": null, "variations": [{"id": "20492016152", "actions": [{"viewId": "20496642258", "changes": []}], "name": "Original"}, {"id": "20487845075", "actions": [{"viewId": "20496642258", "changes": [{"dependencies": [], "type": "custom_code", "id": "6059d520588e4e618a28750c5d5aab49", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    // shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can speak up against racism by tweeting directly at the School Board right now</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet Holt’s School Board Now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = 'Native Americans are people, not props — @HoltPrincipal @WSDinfo are you going to change the mascot before the school year?\n\n#ChangetheMascot\nChange.org/HoltMascot';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "725317587cfb47b0be667b879fdeaabe"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20484294820", "integrationSettings": null}], "id": "20486566215", "weightDistributions": null, "name": "[niftic] - Share Initial - Holt High", "groupId": null, "commitId": "20474567832", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "c7ecf379eaf64a9f95bae0c353a8abd5", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20503055460"], "experiments": [{"weightDistributions": [{"entityId": "20499517858", "endOfRange": 3000}, {"entityId": "20472672725", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Pass Bill H.R. 4268", "bucketingStrategy": null, "variations": [{"id": "20499517858", "actions": [{"viewId": "20503055460", "changes": []}], "name": "Original"}, {"id": "20472672725", "actions": [{"viewId": "20503055460", "changes": [{"dependencies": [], "type": "custom_code", "id": "0414d7b75eaf45d49fd6ac3440ccd8d3", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    // shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can protect USPS employees by tweeting directly at Bill Sponsors right now</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet at Bill Sponsors Now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = 'USPS employees are working 40+ hours a week without benefits. When are you going to #PassBillHR4268?\n\n @RepDerekKilmer @RepStephenLynch @TomColeOK04 @RodneyDavis @RepBrianFitz @AndyKimNJ @RepRutherfordFL\n\n Change.org/BillHR4268';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "a870999014ee4253b1c78340f61111c3"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20503043874", "integrationSettings": null}], "id": "20487864052", "weightDistributions": null, "name": "[niftic] - Share Initial - Pass Bill H.R. 4268", "groupId": null, "commitId": "20478286685", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "c352d509db404aed833a96b0233cac6b", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20485269686"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "[niftic] - PPMU Thank You - Content Pilot Control", "bucketingStrategy": null, "variations": [{"id": "20494040209", "actions": [], "name": "Original"}], "audienceIds": null, "changes": null, "id": "20495661337", "integrationSettings": null}], "id": "20497145290", "weightDistributions": null, "name": "[niftic] - PPMU Thank You - Content Pilot Control", "groupId": null, "commitId": "20478264090", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20476471346"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "[niftic] - PPMU Thank You - Content Pilot", "bucketingStrategy": null, "variations": [{"id": "20486570544", "actions": [{"viewId": "20476471346", "changes": [{"dependencies": [], "type": "custom_code", "id": "6B10D135-188D-4D8D-92FC-E185D5647DE1", "value": function($){var utils = window.optimizely.get("utils");

function fireEvent(ev, props) {
  if (!!window.App) {
    if (props) { window.App.trackEvent(ev, props); } else { window.App.trackEvent(ev); }
  } else {
    if (props) { window.trackEvent(ev, props); } else { window.trackEvent(ev); }
  }
}

utils.waitForElement('#rootApp.type-loaded').then(function() {
  setTimeout(function(){
  utils.waitForElement('[data-testid="ppmu-ty"]').then(function(ty) {
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "",
    		promotionAmount = ty.querySelector('span[data-testid="ppmu-ty-promotion-amount"]').innerText,
    		membershipAmount = ty.querySelector('span[data-testid="ppmu-ty-membership-amount"]').innerText,
      	newAlert = document.createElement('div'),
        ppmutyChildren = ty.firstChild.childNodes,
        comPrefs = {
        	'email' : 'Email',
          'text-message' : 'Text message',
          'social-media' : 'Social media'
        },
        currentPref = 'email',
        formHTML = '';
    newAlert.innerHTML = '<div role="alert" class="optly-flash-message "> <div class="container kcklYr pvs"> <div class="row"> <div class="col-xs-12"> <span style="color: #363135"> <strong>Thank you, '+ fname +'!</strong><br /> You generously gave '+ promotionAmount +' to bring a petition closer to victory and then you pledged to give '+ membershipAmount +' monthly as a Change.org member. </span> </div> </div> </div> </div>';
    
    Object.keys(comPrefs).forEach(function(key) {
      formHTML += '<div style="position:relative"><input type="radio" id="'+key+'" name="comPrefs" value="'+key+'" '+ (key == currentPref ? 'checked' : '' ) +'> <label for="'+key+'">'+comPrefs[key]+'</label></div>';
    });
    newAlert.innerHTML += '<div class="optly-modal-holder d-none"><div class="optly-overlay"></div>' + '<div class="optly-modal"><span class="optly-close-modal"></span><div class="optly-modal-content">'+
      '<h2>Prefer to hear from us in another way?</h2>' + formHTML +
      '<div class="optly-btn optly-update-prefs">Submit feedback</div>'+
      '</div></div></div>';
    var newTyContent = 
        '<h1 style="margin-top: 0px;">Your membership will make victories like this one possible: </h1>' +
        '<div class="video-holder"> <iframe src="https://player.vimeo.com/video/562961277?color=ffffff&portrait=0" style="position:absolute;top:0;left:0;width:100%;height:100%;" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe> </div>' +
        '<div class="optly-new-content">'  + 
        	'<h4 class="optly-new-heading">Exclusive membership content</h4>' +
        	'<p>As a member, you’ll see up-to-date stories of regular people creating a big difference using Change.org! Be sure to keep an eye out for these exclusive stories coming to you by <span class="optly-current-communication">'+currentPref+'</span> <a href="#" class="optly-change-prefs">(change).</a></p>' + 
        '</div>';								
    
		ty.parentNode.insertBefore(newAlert, ty);    
    ppmutyChildren.forEach(function(curElm, index) {
      if(index == 0) {
      	curElm.classList.add('optly-first-ty');
        curElm.querySelector('div[display="flex"]').innerHTML = newTyContent;
      } else {
        if(curElm.querySelector('span[data-testid="ppmu-ty-contact-us"]')) {
          curElm.innerHTML = '<h4 style="margin-bottom: 16px;">Information about your payment</h4>' + curElm.innerHTML + '<div class="optly-after-receipt">Questions? <a href="'+  curElm.querySelector('span[data-testid="ppmu-ty-contact-us"] a').href +'">Contact Us</a><br />Oops! Didn\'t mean to become a member? <a id="ppmucancel" href="/s/member?source_location=ppmu_thank_you" target="_blank" class="optly-outline-btn">Cancel your membership</a></div>';
          curElm.classList.add('optly-change-receipt');
        } else {
          curElm.classList.add('d-none');
        }
      }
                              
    });
    
    var vframe = document.querySelector('.video-holder iframe');
    var vidClick = false;
    vframe.addEventListener('click', function(){
      if (!vidClick) {
        fireEvent('optly_member_video_click', false);
        vidClick = true;
      }
    }, false);
    
    function openCommunicationPrefs() {
			document.querySelector('.optly-modal-holder').classList.remove('d-none');
    }
    
    var comPref = document.querySelector('a.optly-change-prefs');
    comPref.addEventListener('click', function(event) {
      event.preventDefault();
      openCommunicationPrefs();
    }, false);
    
    var closeModalElm = document.querySelector('.optly-close-modal');
    closeModalElm.addEventListener('click', function() {
      document.querySelector('.optly-modal-holder').classList.add('d-none');
    });
    
    var submitModal = document.querySelector('.optly-btn');
    submitModal.addEventListener('click', function() {
    	var comSelection = document.querySelector('input[name="comPrefs"]:checked').value;
      document.querySelector('.optly-current-communication').innerText = comPrefs[comSelection];
      document.querySelector('.optly-modal-holder').classList.add('d-none');
      if (comSelection === 'social-media') {
        fireEvent('optly_comm_preference_social_media', false);
      } else if (comSelection === 'text-message') {
        fireEvent('optly_comm_preference_text_message', false);
      } else {
        fireEvent('optly_comm_preference_email', false);
      }
    });
    
    var ppmuCancel = document.getElementById('ppmucancel');
    ppmuCancel.addEventListener('click', function(){
      fireEvent('optly_ppmu_cancel_click', false);
    });

  });
  }, 500);
});
}}, {"value": "<style>.video-holder {\n  position: relative; \n  height: 182px; \n  width: 100%; \n  text-align: center; \n  margin: 0 auto; \n  border-radius: 10px;\n}\n\n@media (min-width: 768px) {\n  .video-holder {\n   \theight: 0;\n    padding-top: 56%;\n  }\n}\n\n.optly-flash-message {\n  background: #e2eee0;\n  border-bottom: 1px solid #bbd6b2;\n}\n\n.optly-flash-message .pvs {\n  padding-top:10px;\n  padding-bottom: 10px;\n}\n\n@media (min-width: 768px) {\n  .optly-flash-message .pvs {\n    padding-top:18px;\n    padding-bottom: 18px;\n  }\n}\n\n.d-none {\n  display: none !important;\n}\n\n.optly-new-heading {\n\theight: 20px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='22' height='20' viewBox='0 0 22 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M19.9712 2.22935C18.6743 0.936508 16.9767 0.231323 15.1375 0.231323C13.6285 0.231323 12.1902 0.724953 10.9877 1.61819C9.78516 0.701446 8.37044 0.231323 6.83782 0.231323C5.02226 0.231323 3.30102 0.936508 2.00419 2.22935C0.707361 3.52218 0 5.21463 0 7.04811C0 8.85808 0.707361 10.5505 1.95703 11.8199L9.62011 19.4594C9.97379 19.8119 10.4454 20 10.9641 20C11.4828 20 11.9308 19.8119 12.3081 19.4594L19.9476 11.8669L19.9712 11.8434C21.2444 10.574 21.9282 8.85808 21.9282 7.07161C21.9518 5.21463 21.2444 3.49868 19.9712 2.22935ZM10.4925 18.6131C10.3511 18.4721 10.2803 18.3076 10.2803 18.1195C10.2803 17.955 10.3275 17.8139 10.4218 17.6964L10.4925 17.6259L14.2415 13.8884C14.3594 13.7709 14.4066 13.6298 14.4066 13.4653C14.4066 13.3007 14.3359 13.1597 14.2415 13.0422C14.0293 12.8306 13.6285 12.8306 13.4163 13.0422L9.64369 16.8032C9.38432 17.0617 8.91275 17.0617 8.65339 16.8032C8.51191 16.6621 8.44118 16.4976 8.44118 16.3095C8.44118 16.1215 8.51191 15.9334 8.65339 15.8159L12.426 12.0549C12.5439 11.9374 12.591 11.7964 12.591 11.6318C12.591 11.4673 12.5203 11.3262 12.426 11.2087C12.2138 10.9971 11.8129 10.9971 11.6007 11.2087L7.82813 14.9697C7.56876 15.2282 7.09719 15.2282 6.83782 14.9697C6.55488 14.6876 6.55488 14.241 6.83782 13.9589L10.6104 10.1979C10.7283 10.0804 10.7755 9.93936 10.7755 9.77482C10.7755 9.61028 10.7047 9.46924 10.6104 9.35171C10.3982 9.14016 9.99737 9.14016 9.78516 9.35171L6.01257 13.1127C5.7532 13.3713 5.28163 13.3713 5.02226 13.1127L4.99868 13.0892C4.73932 12.8071 4.73932 12.384 4.99868 12.1019L7.56876 9.53976C8.27612 9.56327 8.93633 9.28119 9.47864 8.74055L11.1056 7.11863C11.7894 7.68278 12.5203 8.03537 13.2277 8.12939C14.1708 8.24692 15.0668 7.94134 15.7742 7.21265C16.0099 6.97759 16.0099 6.60149 15.7742 6.38994C15.5619 6.17838 15.1611 6.17838 14.9489 6.38994C14.4773 6.86006 13.9586 7.04811 13.3927 6.97759C12.8032 6.90707 12.143 6.53097 11.53 5.89631C11.3178 5.68475 10.9169 5.68475 10.7047 5.89631L8.67696 7.91784C8.37044 8.22341 8.01676 8.38796 7.61592 8.38796C7.56876 8.38796 7.52161 8.38796 7.49803 8.38796C7.47445 8.38796 7.42729 8.36445 7.38013 8.36445C7.07361 8.31744 6.79067 8.1764 6.60204 7.98835C6.41341 7.8003 6.46057 7.75329 6.48414 7.72979C7.12077 7.07161 11.1291 3.07557 11.1527 3.05206C12.2138 1.99428 13.6285 1.40663 15.1375 1.40663C16.6466 1.40663 18.0613 1.99428 19.1223 3.05206C20.1834 4.10984 20.7728 5.52021 20.7728 7.0246C20.7728 8.529 20.1834 9.93937 19.1223 10.9971L11.5064 18.6131C11.247 18.8717 10.7755 18.8717 10.4925 18.6131ZM10.1153 2.4409C9.29001 3.26362 6.2012 6.34292 5.63531 6.90707C5.093 7.44771 5.14016 8.22342 5.7532 8.83458C5.89468 8.97561 6.08331 9.11665 6.27194 9.21067L4.17343 11.3027C4.00838 11.4673 3.86691 11.6788 3.77259 11.8904L2.90018 11.0442L2.8766 11.0206C1.81556 9.96287 1.22609 8.5525 1.22609 7.04811C1.22609 5.54372 1.81556 4.13335 2.8766 3.07557C3.93764 2.01779 5.35237 1.43014 6.8614 1.43014C8.04034 1.40663 9.14854 1.75922 10.1153 2.4409Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n\tbackground-repeat: no-repeat;\n  background-position: center left;\n  padding-left: 30px;\n  line-height: 20px;\n}\n\n\n.optly-change-prefs {\n\tcolor:#EC2C22;\n}\n\n.optly-current-communication {\n\ttext-transform: lowercase;\n}\n\n.optly-modal-holder {\n\tposition: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  z-index:1001;\n}\n\n\n.optly-modal-holder > .optly-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  background:#363135;\n  opacity: 0.4;\n}\n\n.optly-modal-holder > .optly-modal {\n    background: #fff;\n    position: absolute;\n    top: 50%;\n    max-width: 350px;\n    left: 50%;\n    transform: translateX(-50%) translateY(-50%);\n    border-radius: 5px;\n    width: 95%;\n}\n\n@media (max-width: 768px) {\n\t.optly-modal-holder > .optly-modal {\n  \ttop: 25px;\n    transform: translateX(-50%);\n  }\n  \n  div[data-testid=\"ppmu-ty\"] > .OfMWD {\n    margin-top: 24px !important;\n\n\t}\n\t\n}\n\n.optly-modal-content {\n  padding: 20px;\n}\n\n.optly-btn {\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    -webkit-text-decoration: none;\n    text-decoration: none;\n    color: #363135;\n    display: inline-block;\n    font-weight: bold;\n    text-align: center;\n    line-height: 1;\n    border-radius: 5px;\n    border-style: solid;\n    border-width: 2px;\n    border-color: #adacad;\n    background-color: transparent;\n    -webkit-tap-highlight-color: hsla(0,0%,0%,0);\n    -webkit-appearance: initial !important;\n    -webkit-transition: background 0.1s ease,border 0.1s ease;\n    transition: background 0.1s ease,border 0.1s ease;\n    cursor: pointer;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    width: 100%;\n    padding: 12px 18px;\n    font-size: 1rem;\n    background: #ec2c22;\n    color: #fff;\n    border-color: #ec2c22;\n  \tmargin-top:27px;\n}\n\n.optly-outline-btn {\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    -webkit-text-decoration: none;\n    text-decoration: none;\n    color: #ec2c22 !important;\n    display: inline-block;\n    font-weight: bold;\n    text-align: center;\n    line-height: 1;\n    border-radius: 5px;\n    border-style: solid;\n    border-width: 2px;\n    border-color: #adacad;\n    background-color: transparent;\n    -webkit-tap-highlight-color: hsla(0,0%,0%,0);\n    -webkit-appearance: initial !important;\n    -webkit-transition: background 0.1s ease,border 0.1s ease;\n    transition: background 0.1s ease,border 0.1s ease;\n    cursor: pointer;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    width: 100%;\n    padding: 12px 18px;\n    font-size: 12px;\n    background: #fff;\n    color: #fff;\n    border-color: #ec2c22;\n  \tmargin-top: 20px;\n}\n\n.optly-modal-content h2 {\n  margin-top: 14px;\n}\n\n.optly-modal-content label {\n  font-style: normal;\n  font-weight: normal;\n  font-size: 18px;\n  line-height: 27px;\n  color: #363135;\n  padding-left: 8px;\n  cursor: pointer;\n}\n\n.optly-modal-content input:checked + label {\n\tfont-weight: bold;\n}\n\n\n.optly-modal-content input[type=\"radio\"] {\n     border: 1px solid #737273;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    height: 14px;\n    width: 14px;\n    border-radius: 14px;\n}\n\n.optly-modal-content input:checked + label::before {\n    width: 6px;\n    background: #C4C4C4;\n    height: 6px;\n    content: '';\n    display: block;\n    position: absolute;\n    top: 10px;\n    left: 4px;\n    border-radius: 8px;\n}\n\n.optly-close-modal {\n  position: absolute;\n  top: 15px;\n  right: 15px;\n  height: 12px;\n  width: 12px;\n  display:block;\n  cursor:pointer;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M9.90991 0.540736L5.97662 4.47402L2.08754 0.58493C1.86657 0.363959 1.60877 0.253474 1.31414 0.253473C1.03424 0.238742 0.78381 0.341862 0.562839 0.562833C0.341868 0.783803 0.231383 1.0416 0.231382 1.33623C0.246114 1.61613 0.356599 1.87393 0.562839 2.10963L4.45193 5.99872L0.540742 9.9099C0.334502 10.1456 0.231382 10.4108 0.231382 10.7054C0.216651 10.9853 0.319771 11.2357 0.540742 11.4567C0.761713 11.6777 1.01951 11.7882 1.31414 11.7882C1.59404 11.7734 1.84447 11.6556 2.06544 11.4346L5.97662 7.52341L9.932 11.4788C10.1677 11.685 10.4255 11.7955 10.7054 11.8102C10.9853 11.7955 11.2357 11.6777 11.4567 11.4567C11.6777 11.2357 11.7882 10.9927 11.7882 10.7275C11.7882 10.4329 11.6777 10.1751 11.4567 9.95409L7.50132 5.99872L11.4346 2.06543C11.6556 1.84446 11.7661 1.6014 11.7661 1.33623C11.7661 1.0416 11.6556 0.783803 11.4346 0.562833C11.2136 0.341862 10.9632 0.238742 10.6833 0.253473C10.4034 0.238742 10.1456 0.334496 9.90991 0.540736Z' fill='%23363135'/%3E%3C/svg%3E%0A\");\n}\n\n\n.optly-after-receipt {\n  margin-top: 16px;\n  font-size: 16px;\n  line-height: 24px;\n  color: #737273;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "76E44E8A-2BE2-4497-8F7C-AE822DC66DA8"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20495581827", "integrationSettings": null}], "id": "20499391784", "weightDistributions": null, "name": "[niftic] - PPMU Thank You - Content Pilot", "groupId": null, "commitId": "20480526305", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20506418326"], "experiments": [{"weightDistributions": [{"entityId": "20520045488", "endOfRange": 3000}, {"entityId": "20557011777", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM Amazon Parks", "bucketingStrategy": null, "variations": [{"id": "20520045488", "actions": [{"viewId": "20506418326", "changes": []}], "name": "Original"}, {"id": "20557011777", "actions": [{"viewId": "20506418326", "changes": [{"dependencies": [], "type": "custom_code", "id": "806f9c72c8dd4089b17180276780697e", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    // shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can remove Amazon from public parks by tweeting admins now</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet Park Admins Now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = '@Amazon Hubs in Chicago Public Parks?? Why are we branding community spaces?\n\nWhen are you going to remove the lockers @ChicagoParks @LoriLightfoot?\n\nChange.org/AmazonParks';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "8a0e3fa0296e44ab9033410aed7ea995"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20558962403", "integrationSettings": null}], "id": "20506606560", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM Amazon Parks", "groupId": null, "commitId": "20544223304", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "928dbdcf2f0541639c12a5ce8c5f1ca1", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20520016558"], "experiments": [{"weightDistributions": [{"entityId": "20541464368", "endOfRange": 3000}, {"entityId": "20520016559", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM FDA", "bucketingStrategy": null, "variations": [{"id": "20541464368", "actions": [{"viewId": "20520016558", "changes": []}], "name": "Original"}, {"id": "20520016559", "actions": [{"viewId": "20520016558", "changes": [{"dependencies": [], "type": "custom_code", "id": "88ac25ff18a144f8bff4208f62396503", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    // shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can save their children’s lives by tweeting the FDA now</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet the FDA Now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = 'The clock is ticking @US_FDA! When are you going to save access to life changing medication for families living with NPC (Niemann Pick Type C)?\n\nSave these children’s lives.\n\n#DontGiveUpOnNPC\nChange.org/DontGiveUpOnNPC';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "e7c5c447d9654effa55c093387057eb9"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20508377393", "integrationSettings": null}], "id": "20518037596", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM FDA", "groupId": null, "commitId": "20603624011", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "c45e5f960aa7415893e14c2e283265eb", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20508371440"], "experiments": [{"weightDistributions": [{"entityId": "20512753466", "endOfRange": 3000}, {"entityId": "20498552938", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM Safesport", "bucketingStrategy": null, "variations": [{"id": "20512753466", "actions": [{"viewId": "20508371440", "changes": []}], "name": "Original"}, {"id": "20498552938", "actions": [{"viewId": "20508371440", "changes": [{"dependencies": [], "type": "custom_code", "id": "caf86adc8a504309adf6f6e7401d682b", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    // shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can protect athletes by tweeting SafeSport’s CEO now</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet the CEO Now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = 'The United States Center for SafeSport has repeatedly failed to protect athletes across sports & hold abusers accountable in a timely manner. @ColonJuRiese When will SafeSport make a statement??\n\n#SafeSport #ProtectAthletes @intrsxtionl_abc\nChange.Org/ProtectAthletes';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "b2d240c343434fd7a2723e4656793e28"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20508441510", "integrationSettings": null}], "id": "20518192555", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM Safesport", "groupId": null, "commitId": "20529913410", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "f98153c73d964b9f9bce044009bbe5dc", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20508131547"], "experiments": [{"weightDistributions": [{"entityId": "20510811013", "endOfRange": 3000}, {"entityId": "20535141649", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM Starbucks", "bucketingStrategy": null, "variations": [{"id": "20510811013", "actions": [{"viewId": "20508131547", "changes": []}], "name": "Original"}, {"id": "20535141649", "actions": [{"viewId": "20508131547", "changes": [{"dependencies": [], "type": "custom_code", "id": "0a42fa74e4f541fb811c41a837da5925", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    // shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can protect the environment by tweeting Starbucks executives now</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet Starbucks’ Chief Sustainability Officer Now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = 'Starbucks paper cups are not recyclable??\n\n@Starbucks @KoboriGrillsCSR When are you going to speak on creating a recyclable solution for the 4 BILLION cups tossed a year?\n\n#UpTheCup with @SEALAwards\nChange.Org/UpTheCup';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "6781d4688c6a40d28daaf5d05dc597ef"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20533732119", "integrationSettings": null}], "id": "20529961924", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM Starbucks", "groupId": null, "commitId": "20510562806", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "8198321c70ce479b8a8d7daf89a986de", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20529961934"], "experiments": [{"weightDistributions": [{"entityId": "20531601426", "endOfRange": 5000}, {"entityId": "20508131552", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Petition Page - Petition Stories R2", "bucketingStrategy": null, "variations": [{"id": "20531601426", "actions": [{"viewId": "20529961934", "changes": []}], "name": "Original"}, {"id": "20508131552", "actions": [{"viewId": "20529961934", "changes": [{"dependencies": [], "type": "custom_code", "id": "ccf7f4fef1af4068b4509cfa77cb69b8", "value": function($){var utils = window.optimizely.get("utils");
var isReact = !!window.changeTargetingData.reactFe;

var stories = [
    {
        name: "Carol",
        iframe: '<iframe src="https://player.vimeo.com/video/578490937" width="640" height="640" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>',
        img: 'https://static.change.org/psf-experiments/petition-story-1.png',
        gif: 'https://static.change.org/psf-experiments/Petition-Story-1-(Carol)-low.gif'
    },
    {
        name: "Ed",
        iframe: '<iframe src="https://player.vimeo.com/video/578505949" width="640" height="640" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>',
        img: 'https://static.change.org/psf-experiments/petition-story-6.png',
        gif: 'https://static.change.org/psf-experiments/Petition-Story-6-(Ed)-low.gif'
    },
    {
        name: "Renee",
        iframe: '<iframe src="https://player.vimeo.com/video/578505780" width="640" height="640" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>',
        img: ' https://static.change.org/psf-experiments/petition-story-7.png',
        gif: 'https://static.change.org/psf-experiments/Petition-Story-7-(Renee)-low.gif'
    },
    {
        name: "Tim",
        iframe: '<iframe src="https://player.vimeo.com/video/578505660" width="640" height="640" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>',
        img: ' https://static.change.org/psf-experiments/petition-story-9.png',
        gif: 'https://static.change.org/psf-experiments/Petition-Story-9-(Tim)-low.gif'
    },
    {
        name: "Shannon",
        iframe: '<iframe src="https://player.vimeo.com/video/578505609" width="640" height="640" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>',
        img: 'https://static.change.org/psf-experiments/petition-story-10.png',
        gif: 'https://static.change.org/psf-experiments/Petition-Story-10-(Shannon)-low.gif'
    },
];

function fireEvent(ev, props) {
    if (!!window.App) {
    	if (!!props) {
        window.App.trackEvent(ev, props);
      } else {
      	window.App.trackEvent(ev);
      }
    } else {
    	if (!!props) {
      	window.trackEvent(ev, props);
      } else {
        window.trackEvent(ev);
      }
    }
}

var ib;
if (isReact) {
    ib = document.querySelector('.xs-phs>.mbl.type-break-word.type-l.rte');
} else {
    if (!!document.querySelector('[data-qa="description-content"]')) {
        // corgi
        ib = document.querySelector('[data-qa="description-content"]');
        ib.parentNode.classList.add('psstyles');
    } else {
        ib = document.querySelector('.js-description-content');
    }
}
init(ib, stories);

function init(ib, stories) {
    try {
        var vimeoScript = document.createElement('script');
        vimeoScript.src = 'https://player.vimeo.com/api/player.js';
        var firstScript = document.querySelector('head script');
        firstScript.parentNode.insertBefore(vimeoScript, firstScript);

        var s = document.createElement('div');
        s.className = "stories-slider-wrap mvxxl";
        s.innerHTML = storiesHTML();

        ib.parentNode.insertBefore(s, ib);

        var STORY_TRANSITION_TIME = 500;


        // --------------------------- /
        // page slider
        // --------------------------- /
        var pageSlider = s.querySelector('.page-slider .stories-slider');
        var pageSlides = Array.from(pageSlider.querySelectorAll('.story-slide'));
        var pageNext = s.querySelector('.page-slider .next-arrow');
        var pageSliderLength = pageSlides.length;
        var activePageSlide = 0;
        var sliderInt;  

        initPageSlides();

        function initPageSlides() {
            // add event listeners to page slides
            pageSlides.forEach(function(slide) {
                pageSlideEventListeners(slide);
            });
    
            // add event listener to next arrow
            pageNext.addEventListener('click', function() {
                activatePageSlide(activePageSlide + 1);
            })
    ;
            // duplicate page slides
            pageSlides.forEach(function(slide) {
                duplicatePageSlide(slide);
            });
    
            // init transition time 
            pageSlides[0].style.transition = 'margin-left ease-in-out ' + STORY_TRANSITION_TIME + 'ms';
    
            // set auto scroll
            sliderInt = setInterval(function () {
                activatePageSlide(activePageSlide + 1);
            }, 3000);
        }
        function pageSlideEventListeners(slide) {
            slide.addEventListener('click', function() {
                // activate relevant page slide
                activatePageSlide(parseInt(slide.dataset.slideId));

                // toggle modal
                toggleModal();

                // activate relevant video
                activateModalSlide(slide.dataset.slideName);

            });
        }
        function duplicatePageSlide(slide) {
            // clone slide
            var slideDuplicate = slide.cloneNode(true);
            
            // update slide id num
            pageSlides = Array.from(pageSlider.querySelectorAll('.story-slide'));
            pageSliderLength = pageSlides.length;
            slideDuplicate.dataset.slideId = pageSliderLength;

            // remove active
            slideDuplicate.classList.remove('active');

            // add event listeners
            pageSlideEventListeners(slideDuplicate);

            // append slide
            pageSlider.appendChild(slideDuplicate);
        }

        function activatePageSlide(index) {
            // duplicate slides
            for (var i = activePageSlide; i < index; i++) {
                var slideToDuplicate = pageSlider.querySelector('[data-slide-id="' + i + '"]');
                duplicatePageSlide(slideToDuplicate);
            }

            // update activePageSlide
            activePageSlide = index;

            // update active status for each slide
            pageSlides.forEach(function(slide) {
                if (parseInt(slide.dataset.slideId) === index) {
                    slide.classList.add('active');
                    animatePageSlide(slide);
                } else {
                    slide.classList.remove('active');
                }
            });
        }

        function animatePageSlide(slide) {
            var slideWidth = pageSlides[0].clientWidth + 14;
            pageSlides[0].style.marginLeft = '-' + (parseInt(slide.dataset.slideId) * slideWidth) + 'px';
        }

        
        
        // --------------------------- /
        // modal
        // --------------------------- /
        var storiesModal = s.querySelector('.stories-modal');
        var modalClose = storiesModal.querySelector('.modal-close');

        modalClose.addEventListener('click', toggleModal);

        function toggleModal() {
            clearInterval(sliderInt);
            pauseAllVideos();
            if (storiesModal.classList.contains('hide-fully')) {
                storiesModal.classList.remove('hide-fully');
            } else {
                storiesModal.classList.add('hide-fully');
            }
        }
        
        
        // --------------------------- /
        // modal slider
        // --------------------------- /
        var modalSlider = s.querySelector('.modal-slider .stories-slider');
        var modalSlides = Array.from(modalSlider.querySelectorAll('.stories-modal .story-slide'));
        var modalNext = s.querySelector('.modal-slider .next-arrow');
        var modalPrev = s.querySelector('.modal-slider .prev-arrow');
        var modalSliderLength = modalSlides.length;
        var activeModalSlide = 0;

        initModalSlides();

        // functions
        function initModalSlides() {
            // add event listeners to modal slides
            modalSlides.forEach(function(slide) {
                slide.addEventListener('click', function() {
                    // activate relevant modal slide
                    activateModalSlide(parseInt(slide.dataset.slideId));
                });
            });
    
            // add event listeners to arrows
            modalNext.addEventListener('click', function() {
                activateModalSlide(activeModalSlide + 1);
            });
            modalPrev.addEventListener('click', function() {
                activateModalSlide(activeModalSlide - 1);
            });
    
            // init transition time 
            modalSlides[0].style.transition = 'margin-left ease-in-out ' + STORY_TRANSITION_TIME + 'ms';
    
        }

        function activateModalSlide(indexOrName) {
            // pause videos 
            pauseAllVideos();

            // set index
            var index = indexOrName;
            if (typeof indexOrName === 'string') {
                index = parseInt(modalSlider.querySelector('[data-slide-name="' + indexOrName + '"]').dataset.slideId);
            }

            // update activeModalSlide
            if (index > modalSliderLength - 1) {
                activeModalSlide = 0;
            } else if (index < 0) {
                activeModalSlide = modalSliderLength - 1;
            } else {
                activeModalSlide = index;
            }

            // update active status for each slide
            modalSlides.forEach(function(slide) {
                if (parseInt(slide.dataset.slideId) === activeModalSlide) {
                    slide.classList.add('active');
                    animateModalSlide(slide);
                } else {
                    slide.classList.remove('active');
                }
            });

            // play relevant video
            activateVideo(activeModalSlide);

        }
        function animateModalSlide(slide) {
            var slideWidth = modalSlides[0].clientWidth + 14;
            modalSlides[0].style.marginLeft = '-' + (parseInt(slide.dataset.slideId) * slideWidth) + 'px';
        }
        
        
        // --------------------------- /
        // videos
        // --------------------------- /
        var videoSlides = selectAll('.video-slide');
        var iframes = selectAll('.video-holder iframe');
        var videoPlayers = [];

        initVideoSlides();

        // functions
        function initVideoSlides() {
            // video players
            var waitForVimeo = setInterval(function () {
                if (Vimeo) {
                    clearInterval(waitForVimeo);

                    iframes.forEach(function (iframe) {
                        var player = new Vimeo.Player(iframe);
                        player.setLoop(false)
                        videoPlayers.push(player);
                    });
                }
            }, 50);
        }
        function pauseAllVideos() {
            videoPlayers.forEach(function (player) {
                player.pause();
            });
        }
        function activateVideo(index) {
            // update active status for each slide
            videoSlides.forEach(function(slide, i) {
                if (parseInt(slide.dataset.slideId) === index) {
                    slide.classList.add('active');
                } else {
                    slide.classList.remove('active');
                }
            });

            playVideo(index);
        }

        function playVideo(slideId) {
            var player = videoPlayers[slideId];
          	fireEvent('click_video', {'video': stories[slideId].name});
            
            var isPlaying = player.getCurrentTime() > 0 && !player.getPaused() && !player.getEnded() && player.ready();

            if (!isPlaying) {
                player.play();
            }

            var progressLeft = modalSlides[slideId].querySelector('.circle .left .progress');
            var progressRight = modalSlides[slideId].querySelector('.circle .right .progress');

            
            player.on('timeupdate', function (data) {
                if (data.percent <= 0.5) {
                    progressLeft.style.transform = 'rotate(' + ((data.percent * 2) * 180) + 'deg)';
                } else {
                    progressLeft.style.transform = 'rotate(180deg)';
                    progressRight.style.transform = 'rotate(' + (((data.percent - 0.5) * 2) * 180) + 'deg)';
                }
            });
            player.on('ended', function(data) {
                player.setCurrentTime(0);
                player.pause();
                progressLeft.style.transform = 'rotate(0deg)';
                progressRight.style.transform = 'rotate(0deg)';
                activateModalSlide(slideId + 1);
            });
        }
       
       
        // --------------------------- /
        // share button
        // --------------------------- /
        var videoBtnDesktop = s.querySelector('.video-btn.desktop');
        var videoBtnMobile = s.querySelector('.video-btn.mobile');

        var nextStep = !!document.querySelector('.js-promote-button') || Array.from(document.querySelectorAll('a')).some(function(a) { return a.href.includes('promote_or_share'); });
        var shareOption = !!document.querySelector('[data-view="petitions/components/share"]');
        var alreadySigned = nextStep || shareOption;

        if (alreadySigned) { videoBtnDesktop.parentNode.remove(); }

        videoBtnDesktop.addEventListener('click', function () {
            //modalToggles[0].click();
            toggleModal()

            // guest      
            if (!!document.querySelector('[data-testid="signform-firstName-input"]')) {
                document.querySelector('[data-testid="signform-firstName-input"]').focus();

                // signed in - render
            } else if (!!document.querySelector('[data-view="petitions/sign/components/sign_options"] .js-sign-button')) {
                document.querySelector('[data-view="petitions/sign/components/sign_options"] .js-sign-button').click();

                // signed in - corgi
            } else if (document.querySelector('[data-testid="signform-submit-button"]')) {
                document.querySelector('[data-testid="signform-submit-button"]').click();
            }
        });
        videoBtnMobile.addEventListener('click', function () {
            //modalToggles[0].click();
          	toggleModal();

            // corgi
            if (!!document.querySelector('[data-qa="mobile-sign-button"]')) {
                document.querySelector('[data-qa="mobile-sign-button"]').click();

                // rendr
            } else if (!!document.querySelector('.js-mobile-action-button')) {
                document.querySelector('.js-mobile-action-button').click();

                // react
            } else if (!!document.querySelector('.mobile-action-button-container .btn-action')) {
                document.querySelector('.mobile-action-button-container .btn-action').click();
            }
        });

        function selectAll(selector) {
            return Array.from(document.querySelectorAll(selector));
        }

    } catch (err) { console.error(err); }


    function storiesHTML() {
        return '' +
            '<div class="stories-slider-section">' +
            '    <div class="stories-heading mbm">' +
            '        <b>Watch stories from the community</b>' +
            '    </div>' +
            '    <div class="page-slider">' +
            storiesSliderHTML('page') +
            '    </div>' +
            '    <div class="stories-modal hide-fully">' +
            '        <div class="modal">' +
            '            <div class="modal-dialog modal-medium animate animate-zoom-in">' +
            '                <button' +
            '                    class="modal-close link-stealth position-absolute position-right position-top pas js-stories-modal">' +
            '                    <span class="symbol symbol-close symbol-compact"></span>' +
            '                </button>' +
            videoSliderHTML() +
            '    <div class="modal-slider">' +
            storiesSliderHTML('modal') +
            '    </div>' +
            '	 <div class="video-action mtl">' +
            '     <button class="video-btn desktop">Sign this petition</button>' +
            '     <button class="video-btn mobile">Sign this petition</button>' +
            '  </div>' +
            '            </div>' +
            '        </div>' +
            '    </div>' +
            '</div>';
    }
    function storiesSliderHTML(location) {
        return '' +
            '<div class="stories-slider-wrap">' +
            (function() {
                if (location === 'modal') {
                    return '' +
                    '    <div class="prev-arrow">' +
                    '		<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.71235 1.98443L15.0763 8.34839L8.71235 14.7123" stroke="#EC2C22" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>' +
                    '    </div>';
                } else { return ''; }
            })() +
            '    <div class="stories-slider">' +
            (stories.map(function (story, i) {
                return storiesSlideHTML(story, i);
            }).join('')) +
            '    </div>' +
            '    <div class="next-arrow">' +
            '		<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.71235 1.98443L15.0763 8.34839L8.71235 14.7123" stroke="#EC2C22" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>' +
            '    </div>' +
            '</div>';
    }

    function videoSliderHTML() {
        return '' +
            '<div class="video-slider-wrap">' +
            '    <div class="video-slider">' +
            (stories.map(function (story, i) {
                return '' +
                    '<div class="video-slide" data-slide-id="' + i + '" data-slide-name="' + story.name + '">' +
                    '    <h3 class="txt-c mtn">Hear ' + story.name + '’s story </h3>' +
                    '    <div class="video-holder">' + story.iframe + '</div>' +
                    '</div>';
            }).join('')) +
            '    </div>' +
            '</div>';

    }

    function storiesSlideHTML(story, i) {
        return '' +
            '<div class="story-slide" data-slide-id="' + i + '" data-slide-name="' + story.name + '">' +
            '    <div class="slide-icon">' +
            '        <div class="inner">' +
            '           <img src="' + story.img + '" alt="" class="static">' +
            '           <img src="' + story.gif + '" alt="" class="gif">' +
            '        </div>' +
            '        <div class="circle">' +
            '           <div class="bar left">' +
            '              <div class="progress"></div>' +
            '           </div>' +
            '           <div class="bar right">' +
            '              <div class="progress"></div>' +
            '           </div>' +
            '         </div>' +
            '      </div>' +
            '    <small class="slide-label">' + story.name + '</small>' +
            '</div>';
    }
}
}}, {"value": "<style>/* for corgi */\n.hide-fully {\n  display: none;\n}\n.video-btn {\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    -webkit-text-decoration: none;\n    text-decoration: none;\n    color: #363135;\n    display: inline-block;\n    font-weight: bold;\n    text-align: center;\n    line-height: 1;\n    border-radius: 5px;\n    border-style: solid;\n    border-width: 2px;\n    border-color: #adacad;\n    background-color: transparent;\n    -webkit-tap-highlight-color: hsla(0,0%,0%,0);\n    -webkit-appearance: initial !important;\n    -webkit-transition: background 0.1s ease,border 0.1s ease;\n    transition: background 0.1s ease,border 0.1s ease;\n    cursor: pointer;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    width: 100%;\n    padding: 12px 18px;\n    font-size: 1rem;\n      background: #ec2c22;\n    color: #fff;\n    border-color: #ec2c22;\n  margin-top: 29px;\n}\n.modal {\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    overflow-x: hidden;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n    outline: 0;\n    z-index: 5000;\n    text-align: center;\n    background-color: hsla(305,1%,61%,0.83);\n    -webkit-backdrop-filter: sepia(100%) hue-rotate(254deg);\n    backdrop-filter: sepia(100%) hue-rotate(\n254deg\n);\n}\n\n.body .modal {\n  backdrop-filter: none;\n}\n\n.modal-dialog {\n    background-color: #fff;\n    position: absolute;\n    left: 10px;\n    right: 10px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    text-align: left;\n    padding: 40px 15px 15px;\n    border-radius: 5px;\n}\n\n@media (min-width: 768px) {\n   .modal-dialog {\n      position: relative;\n      display: inline-block;\n      vertical-align: middle;\n      padding: 40px 30px 30px;\n      width: 620px;\n  } \n}\n\n.txt-c {\n text-align: center; \n}\n\n.mtn {\n  margin-top: 0;\n}\n\n.mbm {\n  margin-bottom: 20px;\n}\n\n.pas {\n  padding: 15px\n}\n\n.modal-close {\n  position: absolute;\n  right: 0;\n  top: 0;\n  padding: 15px;\n  color: inherit;\n  text-decoration: none;\n}\n\n.mvxxl {\n margin-top: 40px;\n  margin-bottom: 40px;\n}\n\n.pbxxl {\n \tpadding-bottom: 40px; \n}\n\n.mbxxl {\n \tmargin-bottom: 40px; \n}\n\n.psstyles .modal-close span {\n  background-image: url(\"data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M9.90991 0.540736L5.97662 4.47402L2.08754 0.58493C1.86657 0.363959 1.60877 0.253474 1.31414 0.253473C1.03424 0.238742 0.78381 0.341862 0.562839 0.562833C0.341868 0.783803 0.231383 1.0416 0.231382 1.33623C0.246114 1.61613 0.356599 1.87393 0.562839 2.10963L4.45193 5.99872L0.540742 9.9099C0.334502 10.1456 0.231382 10.4108 0.231382 10.7054C0.216651 10.9853 0.319771 11.2357 0.540742 11.4567C0.761713 11.6777 1.01951 11.7882 1.31414 11.7882C1.59404 11.7734 1.84447 11.6556 2.06544 11.4346L5.97662 7.52341L9.932 11.4788C10.1677 11.685 10.4255 11.7955 10.7054 11.8102C10.9853 11.7955 11.2357 11.6777 11.4567 11.4567C11.6777 11.2357 11.7882 10.9927 11.7882 10.7275C11.7882 10.4329 11.6777 10.1751 11.4567 9.95409L7.50132 5.99872L11.4346 2.06543C11.6556 1.84446 11.7661 1.6014 11.7661 1.33623C11.7661 1.0416 11.6556 0.783803 11.4346 0.562833C11.2136 0.341862 10.9632 0.238742 10.6833 0.253473C10.4034 0.238742 10.1456 0.334496 9.90991 0.540736Z' fill='%23363135'/%3E%3C/svg%3E%0A\");\n    width: 15px;\n    height: 15px;\n    display: inline-block;\n    background-size: contain;\n    background-repeat: no-repeat;\n    background-position: center;\n}\n\n/* variation */\n\n.stories-slider-section {\n\tmax-width: 100%;\n}\n.stories-slider-wrap {\n  display: flex;\n  flex-wrap: nowrap;\n  overflow: hidden;\n  position: relative;\n  max-width: 100%;\n}\n.stories-slider-wrap:before {\n\tcontent: '';\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 45%;\n  background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);\n  height: 100%;\n  z-index: 2;\n  pointer-events: none;\n}\n.stories-slider {\n  display: flex;\n  flex-wrap: nowrap;\n  flex-grow: 1;\n  z-index: 0;\n}\n\n.story-slide {\n  margin-right: 14px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.slide-icon{\n  height: 60px;\n  width: 60px;\n  position: relative;\n  margin-bottom: 6px;\n  cursor: pointer;\n}\n.slide-icon .inner{\n\tposition: absolute;\n  z-index: 6;\n  top: 3px;\n  left: 3px;\n  height: 54px;\n  width: 54px;\n  background: #ffffff;\n  border-radius: 100%;\n \n}\n.slide-icon img {\n  display: block;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 10;\n  height: calc(100% - 6px);\n  width: calc(100% - 6px);\n  border-radius: 50%;\n  transition: all .3s ease-in-out;\n}\n.slide-icon img.gif {\n  opacity: 0;\n}\n.story-slide.active img.gif {\n  opacity: 1;\n}\n.slide-icon .bar{\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background: #EC2C22;\n  -webkit-border-radius: 100%;\n  clip: rect(0px, 60px, 60px, 30px);\n}\n.circle .bar .progress{\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  -webkit-border-radius: 100%;\n  clip: rect(0px, 30px, 60px, 0px);\n  background: #DBD9DB;\n  transform: rotate(0deg);\n}\n.circle .right {\n  transform: rotate(180deg);\n  z-index:3;\n}\n.add-story {\n  margin-right: 14px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-width: 60px;\n  background: white;\n  z-index: 1;\n  position: relative;\n}\n.add-story:before {\n\tcontent: '';\n  position: absolute;\n  top: 0;\n  left: 100%;\n  width: 14px;\n  background: linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,0) 100%);\n  height: 100%;\n  z-index: 2;\n}\n.add-story .slide-icon {\n  width: 56px;\n  height: 56px;\n  background: #FFFFFF;\n  border: 3px solid #DBD9DB;\n  box-sizing: border-box;\n  position: relative;\n  border-radius: 50%;\n}\n.add-story .slide-icon svg {\n  position: absolute;\n  bottom: 3px;\n  right: -5px;\n}\n.video-slider {\n    position: relative;\n}\n.video-slide {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity .5s ease-in-out, visibility 0s 0s;\n  margin-bottom: 24px;\n}\n.video-slide:first-of-type {\n\tposition: relative;\n}\n.video-slide.active {\n  opacity: 1;\n  visibility: visible;\n  transition: opacity .5s ease-in-out, visibility 0s .5s;\n}\n.video-holder {\n    height: 0;\n    width: calc(100% + 30px);\n    padding-top: 55%;\n    margin-right: -15px;\n    margin-left: -15px;\n    position: relative;\n  background: black;\n}\n.video-holder iframe {\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.next-arrow {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 3;\n    cursor: pointer;\n    height: 100%;\n    padding: 24px 24px 0;\n}\n.prev-arrow {\nposition: relative;\n    z-index: 3;\n    cursor: pointer;\n    min-height: 100%;\n    padding: 24px 8px 0;\n    background: white;\n}\n.prev-arrow svg {\n\ttransform: rotate(180deg);\n}\n.modal-close {\n  cursor: pointer;\n}\n.video-btn.mobile {\n  display: block;\n}\n.video-btn.desktop {\n  display: none;\n}\n@media screen and (min-width: 768px) {\n  .stories-heading b {\n  \tfont-size: 24px;\n  }\n\t.video-holder {\n    width: calc(100% + 60px);\n    margin-right: -30px;\n    margin-left: -30px;\n\t}\n  .video-btn.mobile {\n    display: none;\n  }\n  .video-btn.desktop {\n    display: block;\n  }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "b1a16e545ca8432790b02e12e331ef54"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20534340157", "integrationSettings": null}], "id": "20530130571", "weightDistributions": null, "name": "[niftic] - Petition Page - Petition Stories R2", "groupId": null, "commitId": "20508853793", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20569351909"], "experiments": [{"weightDistributions": [{"entityId": "20562442537", "endOfRange": 2000}, {"entityId": "20551478899", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Instagram Share - Pride Emojis", "bucketingStrategy": null, "variations": [{"id": "20562442537", "actions": [{"viewId": "20569351909", "changes": []}], "name": "Original"}, {"id": "20551478899", "actions": [{"viewId": "20569351909", "changes": [{"dependencies": [], "type": "custom_code", "id": "bd81c57b61ed461f84c9979816199d17", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    shareCopy = shareCopy.split('Join')[0] + 'Help us make an even bigger impact by getting the word out before next Monday on Instagram.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>Are you on Instagram? You can help get more Pride Flag options by sharing this post right now.</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<a class="optly-ig btn btn-full btn-big type-m" href="https://www.instagram.com/p/CQJzOfwr8H9/" target="_blank"><span class="ig-icon"></span>Share my Instagram story now</a>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    // document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    /*
    var igBtn = document.querySelector('.optly-ig');
    igBtn.addEventListener('click', function() {
      var tweet = '@Amazon Hubs in Chicago Public Parks?? Why are we branding community spaces?\n\nWhen are you going to remove the lockers @ChicagoParks @LoriLightfoot?\n\nChange.org/AmazonParks';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_instagram');
      });
    });
    */
  });
});
}}, {"value": "<style>.optly-ig.btn {\n  line-height: 22px; \n}\n\n.ig-icon {\n  display: inline-block;\n  width: 18px;\n  height: 18px;\n  background-size: contain;\n  background-position: center;\n  background-repeat: no-repeat;\n  margin-right: 10px;\n  position: relative;\n  top: 3px;\n  background-image: url(\"data:image/svg+xml,%3Csvg height='512pt' viewBox='0 0 512 512' width='512pt' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3ClinearGradient id='a' gradientUnits='userSpaceOnUse' x1='42.966156268' x2='469.0337477' y1='469.0296477168' y2='42.9620562848'%3E%3Cstop offset='0' stop-color='%23ffd600'/%3E%3Cstop offset='.5' stop-color='%23ff0100'/%3E%3Cstop offset='1' stop-color='%23d800b9'/%3E%3C/linearGradient%3E%3ClinearGradient id='b' gradientUnits='userSpaceOnUse' x1='163.0429956456' x2='348.9539083464' y1='348.9538083312' y2='163.0428956304'%3E%3Cstop offset='0' stop-color='%23ff6400'/%3E%3Cstop offset='.5' stop-color='%23ff0100'/%3E%3Cstop offset='1' stop-color='%23fd0056'/%3E%3C/linearGradient%3E%3ClinearGradient id='c' gradientUnits='userSpaceOnUse' x1='370.9291325432' x2='414.3727849912' y1='141.0676714336' y2='97.6240189856'%3E%3Cstop offset='0' stop-color='%23f30072'/%3E%3Cstop offset='1' stop-color='%23e50097'/%3E%3C/linearGradient%3E%3Cpath d='m510.460938 150.453125c-1.246094-27.25-5.574219-45.859375-11.902344-62.140625-6.425782-17.082031-16.503906-32.554688-29.527344-45.34375-12.785156-13.023438-28.261719-23.105469-45.34375-29.535156-16.285156-6.324219-34.890625-10.648438-62.140625-11.886719-27.300781-1.25-36.023437-1.546875-105.546875-1.546875s-78.246094.296875-105.546875 1.539062c-27.25 1.246094-45.855469 5.574219-62.140625 11.902344-17.082031 6.425782-32.554688 16.503906-45.34375 29.527344-13.023438 12.785156-23.105469 28.257812-29.535156 45.339844-6.324219 16.285156-10.648438 34.894531-11.886719 62.140625-1.25 27.304687-1.546875 36.023437-1.546875 105.546875 0 69.527344.296875 78.25 1.546875 105.550781 1.242187 27.246094 5.570313 45.855469 11.898437 62.140625 6.425782 17.078125 16.503907 32.554688 29.527344 45.339844 12.785156 13.023437 28.261719 23.101562 45.34375 29.527344 16.28125 6.332031 34.890625 10.65625 62.140625 11.902343 27.304688 1.246094 36.023438 1.539063 105.546875 1.539063 69.523438 0 78.246094-.292969 105.546875-1.539063 27.25-1.246093 45.855469-5.570312 62.140625-11.902343 34.386719-13.296876 61.570313-40.480469 74.867188-74.867188 6.332031-16.285156 10.65625-34.894531 11.902344-62.140625 1.242187-27.304687 1.539062-36.023437 1.539062-105.546875 0-69.527344-.296875-78.246094-1.539062-105.546875zm-46.082032 208.996094c-1.136718 24.960937-5.308594 38.515625-8.8125 47.535156-8.613281 22.328125-26.257812 39.972656-48.585937 48.585937-9.019531 3.503907-22.574219 7.675782-47.535157 8.8125-26.988281 1.234376-35.085937 1.492188-103.445312 1.492188-68.363281 0-76.457031-.257812-103.449219-1.492188-24.957031-1.136718-38.511719-5.308593-47.535156-8.8125-11.117187-4.105468-21.175781-10.648437-29.433594-19.152343-8.503906-8.257813-15.046875-18.3125-19.152343-29.433594-3.503907-9.019531-7.675782-22.574219-8.8125-47.535156-1.230469-26.992188-1.492188-35.089844-1.492188-103.445313 0-68.359375.261719-76.453125 1.492188-103.449218 1.140624-24.960938 5.308593-38.515626 8.8125-47.535157 4.105468-11.121093 10.652343-21.179687 19.152343-29.4375 8.257813-8.503906 18.316407-15.046875 29.4375-19.148437 9.019531-3.507813 22.574219-7.675782 47.535157-8.816406 26.992187-1.230469 35.089843-1.492188 103.445312-1.492188h-.003906c68.355468 0 76.453125.261719 103.449218 1.496094 24.960938 1.136718 38.511719 5.308594 47.535157 8.8125 11.117187 4.105468 21.175781 10.648437 29.433593 19.148437 8.503907 8.257813 15.046876 18.316407 19.148438 29.4375 3.507812 9.019531 7.679688 22.574219 8.816406 47.535157 1.230469 26.992187 1.492188 35.089843 1.492188 103.445312 0 68.359375-.257813 76.453125-1.492188 103.449219zm0 0' fill='url(%23a)'/%3E%3Cpath d='m255.996094 124.539062c-72.601563 0-131.457032 58.859376-131.457032 131.460938s58.855469 131.457031 131.457032 131.457031c72.605468 0 131.460937-58.855469 131.460937-131.457031s-58.855469-131.460938-131.460937-131.460938zm0 216.792969c-47.125-.003906-85.332032-38.207031-85.328125-85.335937 0-47.125 38.203125-85.332032 85.332031-85.332032 47.128906.003907 85.332031 38.207032 85.332031 85.332032 0 47.128906-38.207031 85.335937-85.335937 85.335937zm0 0' fill='url(%23b)'/%3E%3Cpath d='m423.371094 119.347656c0 16.964844-13.753906 30.71875-30.71875 30.71875-16.96875 0-30.722656-13.753906-30.722656-30.71875 0-16.96875 13.753906-30.722656 30.722656-30.722656 16.964844 0 30.71875 13.753906 30.71875 30.722656zm0 0' fill='url(%23c)'/%3E%3C/svg%3E\");\n}\n\n@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "d61f894dad7740ef99f037a8c3ed204c"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20559419920", "integrationSettings": null}], "id": "20538593434", "weightDistributions": null, "name": "[niftic] - Share Initial - Instagram Share - Pride Emojis", "groupId": null, "commitId": "20538800708", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "9c824db97df447be859d7603db254bc6", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20545702495"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "[niftic] - Combo - PSF Member Experience R4", "bucketingStrategy": null, "variations": [{"id": "20567272747", "actions": [{"viewId": "20545702495", "changes": [{"dependencies": [], "type": "custom_code", "id": "0b3ea243bf1546c3a1c213d54473ac49", "value": function($){var utils = window.optimizely.get("utils");
var victorySlugs = [
  'charlie-baker-include-people-with-type-1-diabetes-at-the-same-level-as-type-2-for-covid-vaccine-in-ma',
  'stanford-university-helping-antonio-milane-get-disability-accommodations-at-stanford',
  'nys-comptroller-thomas-p-dinapoli-support-former-buffaloe-police-officer-cariol-horne-to-receive-her-pension-2',
  'biogen-without-spinraza-zahra-will-die',
  'mayor-jacob-frey-justice-for-george-floyd',
  'pennsylvania-state-house-allow-pa-teachers-to-get-the-covid-vaccine-now',
  'get-mainstream-news-coverage-of-national-elderly-asian-american-assaults-cnn-msnbc-fox-vice-buzzfeed-nyt-washpost-latimes-axios',
  'the-oakland-athletics-create-a-glenn-burke-day-at-the-oakland-a-s-to-honor-a-black-lgbtq-sports-icon',
  'congress-re-establish-the-climate-change-education-on-epa-website'
];
var firstAnim = 1;
var vimeoUrl = 'https://vimeo.com/585938905';
var vimeoTitle = '5,066 miles apart';

function makeRequest(type, url, data, callback) {
  var newXHR = new XMLHttpRequest() || new window.ActiveXObject("Microsoft.XMLHTTP");
  newXHR.open(type, url, true);
  newXHR.send(data);
  newXHR.onreadystatechange = function() {
    if (this.status === 200 && this.readyState > 3) {
      callback(this.response);
    }
  };
}

      function copyToClipboard() {
        var el = document.createElement('textarea');
        var btn = document.querySelector('.btn.optly-share-btn.copylink');
        el.value = vimeoUrl;
        el.setAttribute('readonly', '');
        el.style.position = 'absolute';
        el.style.left = '-9999px';
        document.body.appendChild(el);
        el.select();
        document.execCommand('copy');
        document.body.removeChild(el);

        btn.innerHTML = '<span class="symbol symbol-check type-default"></span>';

        setTimeout(function() {
          btn.innerHTML = '<span class="symbol symbol-link type-default"></span>';
        }, 2000);
      }


window["optly_share"] = function(outlet) {
  switch (outlet) {
    case 'copylink':
       copyToClipboard();
    	break;
    case 'twitter':
			window.open('https://twitter.com/share?url=' + encodeURIComponent(vimeoUrl) + '&text=' + encodeURIComponent(vimeoTitle) + '', '', 	 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=430,width=600');
      break;
    case 'facebook':
      window.open('http://www.facebook.com/sharer.php?s=100&p[title]=' + encodeURIComponent(vimeoTitle) + '&p[url]=' + encodeURIComponent(vimeoUrl), '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=430,width=600');
      break;
    case 'whatsapp':
      window.open('whatsapp://send?text=' + encodeURIComponent(vimeoUrl));
      break;
  }
};


function appendVictory(petitionSlug) {
  makeRequest('GET', '//www.change.org/api-proxy/-/petitions/'+petitionSlug, null, function(response) {
      var data = JSON.parse(response);
      var image = (data.media.sizes ? data.media.sizes.medium.url : data.media.photo.sizes.medium.url);
      var newElm = document.createElement('div');
      var description = data.description.replace(/(<([^>]+)>)/gi, "");
      description = description.substring(0, 90);
      newElm.classList.add('bg-brighter', 'box', 'box-shadow', 'optly-victory-box');
      newElm.innerHTML += '<div class="flex-embed"><div class="flex-embed-ratio flex-embed-optly"><div class="flex-embed-content flex-embed-cover-image" style="background-image:url('+image+')"></div></div></div>';
      newElm.innerHTML += '<div class="optly-victory-box-meta"><h3>'+ data.display_title+ '</h3><div class="type-m">'+ description +'... <a class="victory-read-more" href="https://change.org/p/'+ petitionSlug +'" target="_blank">Read more</a></div></div>';
      document.querySelector('.optly-victory-holder').appendChild(newElm);
  });
}

function fireEvent(ev, props) {
	utils.waitUntil(function() { return !!window.App; }).then(function() {
    if (!!props) {
      window.App.trackEvent(ev, props);
    } else {
  		window.App.trackEvent(ev);
    }
  });
}

function rotateVictory() {
  if(firstAnim == 1) {
    firstAnim = 0;
  } else {   
    var spacer = document.querySelector('.optly-victory-box.spacer');
    if(parseInt(spacer.style.marginLeft) > -((victorySlugs.length-1) * 300)) {
      spacer.style.marginLeft = parseInt(spacer.style.marginLeft) - 300 +'px';
    }
  }
  setTimeout(rotateVictory, 5000);
}

utils.waitForElement('.psf-combined[data-view="psf/promote_or_share"]').then(function(combo) {
  combo.lastChild.style.display = "none";
  fireEvent('optly_psf_member_view');
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var carouselLink = window.location.href.split('/psf')[0] + '/d';
  
  var currentPetition = {
  	image: combo.querySelector('[data-view="components/photo"]'),
    chipIn: combo.querySelector('.btn.js-promote'),
    share: combo.querySelector('.btn.js-share-btn')
  };
  
  var memberPage = document.createElement('div');
  memberPage.classList.add('member-page');
  memberPage.innerHTML = pageHTML(fname,formHTML,carouselLink, currentPetition);
  
  combo.insertBefore(memberPage, combo.firstChild);
  var radios = document.querySelectorAll('input[name="optly-event"][type="radio"]');
  for(var z = 0, lenz = radios.length; z < lenz; z++) {
    radios[z].addEventListener('click', function() {
      document.querySelector('div.optly-feedback-button').classList.remove('btn-disabled');
    });
  }
  var feedbackBtn = document.querySelector('div.optly-feedback-button');
  var feedbackForm = document.querySelector('[name="optly-feedback"]');
  var feedbackThanks = document.querySelector('.feedback-thanks');
  feedbackBtn.addEventListener('click', function() {
    if(feedbackBtn.innerText == "Next") {
      feedbackBtn.innerText = "Submit Feedback";
      document.querySelector('.optly-feedback-step-1').classList.add('hide-fully');
      document.querySelector('.optly-feedback-step-2').classList.remove('hide-fully');
      var fc = document.querySelector("input[name='optly-event'][type='radio']:checked").value;
      fireEvent('optly_member_feedback_next', {'victory_stories': fc});
    } else if(feedbackBtn.innerText == "Submit Feedback") {
    	var feedbackChoice = document.querySelector("input[name='optly-event'][type='radio']:checked").value;
      var feedbackText = document.querySelector('textarea#optly_membership_experience').value;
      fireEvent('optly_member_feedback', {'victory_stories': feedbackChoice, 'membership_experience': feedbackText});
      feedbackForm.classList.add('hide-fully');
      feedbackThanks.classList.remove('hide-fully');
    }
  });
  for (var i = 0, len = victorySlugs.length; i < len; i++) {
    appendVictory(victorySlugs[i]);
  }
  rotateVictory();
  utils.waitForElement('.victory-read-more').then(function(){
  	setTimeout(function(){
        var victoryBoxes = document.querySelectorAll('.victory-read-more');
        victoryBoxes.forEach(function(vb){
        vb.addEventListener('click', function(){
          fireEvent('optly_member_victory_click', false);
        }, false);
      });
    }, 1500);
  });
  
  var vframe = document.querySelector('.video-holder iframe');
  var vPlayer = new Vimeo.player(vframe);
  setTimeout(function() { vPlayer.play(); }, 100);
  var vidClick = false;
  vframe.addEventListener('click', function(){
    if (!vidClick) {
    	fireEvent('optly_member_video_click', false);
      vidClick = true;
    }
  }, false);
});


var formHTML = '' +
  '<form name="optly-feedback">' +
  '    <h5>Give Us Feedback</h5>' +
  '    <div class="optly-feedback-step-1">' +
  '        <h3 class="mtm mbs">Do you want to hear stories like this again? Please select a number:</h3>' +
  '        <div class="optly-choices">' +
  '            <label class="optly-radio-holder">' +
  '                <input type="radio" id="optly-event-1" name="optly-event" value="1">' +
  '                <div class="optly-radio">1</div>' +
  '            </label>' +
  '            <label class="optly-radio-holder">' +
  '                <input type="radio" id="optly-event-2" name="optly-event" value="2">' +
  '                <div class="optly-radio">2</div>' +
  '            </label>' +
  '            <label class="optly-radio-holder">' +
  '                <input type="radio" id="optly-event-3" name="optly-event" value="3">' +
  '                <div class="optly-radio">3</div>' +
  '            </label>' +
  '            <label class="optly-radio-holder">' +
  '                <input type="radio" id="optly-event-4" name="optly-event" value="4">' +
  '                <div class="optly-radio">4</div>' +
  '            </label>' +
  '            <label class="optly-radio-holder">' +
  '                <input type="radio" id="optly-event-5" name="optly-event" value="5">' +
  '                <div class="optly-radio">5</div>' +
  '            </label>' +
  '        </div>' +
  '				 <div class="optly-choices-label"><span>Never</span><span>I love hearing these stories</span></div>' +
  '    </div>' +
  '    <div class="optly-feedback-step-2 hide-fully">' +
  '        <h3 class="mtm mbs">How could we improve your membership experience?</h3>' +
  '        <textarea id="optly_membership_experience" name="membership_experience" rows="6" cols="40"' +
  '            placeholder="I would like to see more..."></textarea>' +
  '    </div>' +
  '    <div class="btn btn-full btn-big btn-action optly-feedback-button btn-disabled mts mbm">Next</div>' +
  '</form>' +
  '<div class="feedback-thanks hide-fully">' +
  '    <h5>Give Us Feedback</h5>' +
  '    <p class="mtm mbxl">Thanks! We really appreciate your feedback.</p>' +
  '</div>';

function pageHTML(fname, formHTML, carouselLink, currentPetition) {
  return '' +
  '<div class="signature-added pam txt-l">' +
  '    <div class="container">' +
  '        <div class="row">' +
  '            <div class="col-xs-12 col-md-8 col-md-offset-2 xs-phxs mvxs">' +
  '                <div class="petition-image mbn">' + currentPetition.image.innerHTML + '</div>' +
  '								 <h3 class="mbm mtm">Thank you for signing! Do you want to take the next step and help this petition grow?</h3>' +
  '                <div class="psf-combo-buttons position-block-center">' +
  '                    <div class="mbxs">' +
  '                        <a href="' + currentPetition.chipIn.href + '" class="btn btn-full btn-big js-promote btn-action"><p>Yes, chip in to help this petition</p></a>' +
  '                    </div>' +
  '                    <a href="' + currentPetition.share.href + '" class="btn btn-full btn-big js-share-btn btn-outline"><p>Yes, I’d like to share this petition</p></a></div>' +
  '            </div>' +
  '        </div>' +
  '    </div>' +
  '</div>' +
  '<div class="container">' +
  '    <div class="row">' +
  '        <div class="col-xs-12 col-md-8 col-md-offset-2 xs-phm mtxl">' +
  '            <div class="optly-header">' +
  '                <h1 style="font-size: 31.3px" class="type-xl">'+(fname ? fname + ', y' : 'Y')+'ou\'re already making a big difference as a' +
  '                    member.</h1>' +
  '            </div>' +
  '            <div class="video-holder">' +
  '                <iframe src="https://player.vimeo.com/video/585938905?autoplay=1&loop=1&autopause=0&color=ffffff&portrait=0&playsinline=1&muted=1&background=1"' +
  '                    style="position:absolute;top:0;left:0;width:100%;height:100%;" frameborder="0"' +
  '                    allow="autoplay; fullscreen; picture-in-picture" allowfullscreen autoplay id="optly-vimeo-embed"></iframe>' +
  '            </div>' +
  '            <script src="https://player.vimeo.com/api/player.js"></script>' +
  '            <div class="optly-social">' +
  '                <p class="type-weak">Share this video</p>' +
  '                <div class="social-icons"> ' +
  '                    <button class="btn optly-share-btn copylink" onclick="window.optly_share(\'copylink\');"><span class="symbol symbol-link type-default"></span></button> ' +
  '                    <button class="btn optly-share-btn facebook" onclick="window.optly_share(\'facebook\');"><span class="symbol symbol-facebook type-facebook"></span></button>' +
  '                    <button class="btn optly-share-btn whatsapp" onclick="window.optly_share(\'whatsapp\');"><span class="symbol symbol-whatsapp-alt type-whatsapp"></span></button> ' +
  '                    <button class="btn optly-share-btn twitter" onclick="window.optly_share(\'twitter\');"><span class="symbol symbol-twitter-alt type-twitter"></span></button> ' +
  '                </div>' +
  '            </div>' +
  '            <div class="optly-main-content">' +
  '                <p class="type-l mbm">As a monthly supporter you make thousands of victories possible all across the country, and the world. It\'s a pleasure creating social change with you'+(fname ? ', '+fname : '')+'.</p>' +
  '            </div>' +
  '        </div>' +
  '        <div class="col-xs-12 col-md-8 col-md-offset-2 xs-plm">' +
  '            <h3 class="mvs"> <span class="symbol symbol-victory type-branded mrxxs"></span> <span>Victories in your' +
  '                    community:</span> </h3>' +
  '        </div>' +
  '        <div class="col-xs-12 col-md-10 col-md-offset-1 pbl" style="position: relative;">' +
  '            <div class="optly-victory-holder">' +
  '                <div class="box optly-victory-box spacer" style="margin-left:-120px;"></div>' +
  '            </div>' +
  '        </div>' +
  '    </div>' +
  '</div>' +
  '<div class="optly-feedback-container">' +
  '    <div class="container">' +
  '        <div class="row pbxl">' +
  '            <div class="col-xs-12 col-md-8 col-md-offset-2 xs-phm mtxl">'+ formHTML +'</div>' +
  '        </div>' +
  '    </div>' +
  '</div>' +
  '<div class="optly-petitions-carousel-return">' +
  '    <div class="container">' +
  '        <div class="row">' +
  '            <div class="col-xs-12 col-md-8 col-md-offset-2 xs-phm"><a href="' + carouselLink + '" class="pvm">Show me' +
  '                    similar petitions that I can support</a></div>' +
  '        </div>' +
  '    </div>' +
  '</div>';
}
}}, {"value": "<style>.member-page {\n  position: fixed;\n  background: #FFF;\n  z-index: 5;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  overflow-y: scroll;\n}\n\n.video-holder {\n  position: relative; \n  height: 256px; \n  width: 100%; \n  text-align: center; \n  margin: 0 auto; \n  border-radius: 10px;\n}\n\n@media (min-width: 768px) {\n  .video-holder {\n   \theight: 0;\n    padding-top: 56%;\n  }\n}\n\n.signature-added {\n  background: #FFFCF7;\n  border-bottom: 1px solid #DBD9DB;\n  text-align: center;\n  padding: 13px;\n}\n\n/*.signature-added > div {\n    width: 280px;\n    min-width: 280px;\n    margin: 0 auto;\n}*/\n\n@media (max-width: 768px) {\n  /*.signature-added > div {\n    width: 100%;\n  }*/\n}\n\n.optly-victory-holder {\n  overflow: hidden;\n  overflow-x: hidden;\n  white-space:nowrap;\n}\n.optly-victory-holder:before {\n\twidth: 69px;\n  height: 365px;\n  background: linear-gradient(90deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%);\n  content: '';\n  position: absolute;\n  z-index:9;\n  left:0; \n  top:0;\n}\n.optly-victory-holder:after {\n\twidth: 69px;\n  height: 365px;\nbackground: linear-gradient(90deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%);\ntransform: rotate(-180deg);  content: '';\n  position: absolute;\n  z-index:9;\n  right:0; \n  top:0;\n}\n.optly-victory-box {\n  width: 300px;\n  height: 327px;\n  display: inline-block;\n  vertical-align: top;\n  margin: 10px;\n  white-space: normal;\n  overflow:hidden;\n  border:0px;\n}\n\n.optly-victory-box.spacer {\ntransition: margin 1s ease-in-out;\n}\n\n.optly-victory-box .flex-embed {\n  margin-left: -15px;\n  margin-right: -15px;\n  margin-top: -15px;\n}\n\n.optly-victory-box h3 {\n\tfont-size: 20px;\n  line-height: 26px;\n  margin-top:0px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;  \n  overflow: hidden;\n}\n\n.flex-embed-optly {\n  padding-bottom: 41.25%;\n}\n\n.optly-victory-box-meta {\n\tpadding:10px;\n}\n\n.optly-feedback-container {\n  background: #FFFCF7;\n  border-top: 1px solid #DBD9DB;\n  margin-top: 20px;\n}\n\n.optly-feedback-container textarea {\n  margin-bottom: 10px; \n}\n\n.optly-petitions-carousel-return {\n  background: #F6F4F6;\n  border-top: 1px solid #DBD9DB;\n}\n\n.optly-petitions-carousel-return a {\n\ttext-align: center;\n  display:block;\n  color:  #363135;\n}\n.optly-choices {\n\tdisplay: flex;\n  border: 1px solid #ADACAD;\n  border-radius: 10px;\n  overflow: hidden;\n}\n.optly-radio-holder {\n  display: flex;\n  background: #FFFFFF;\n  box-sizing: border-box;\n  padding-right: 21px;\n  align-items: center;\n  min-width: 20%;\n  border: 0;\n  border-radius: 0;\n  padding: 0;\n  margin-bottom: 0;\n  height: 45px;\n  position: relative;\n  cursor: pointer;\n  font-size: 16px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  font-weight: bold;\n}\n.optly-radio-holder + .optly-radio-holder {\n    border-left: 1px solid #ADACAD;\n}\n.optly-radio-holder input {\n  position: absolute;\n  opacity: 0;\n  cursor: pointer;\n  height: 0;\n  width: 0;\n}\n.optly-radio {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%,-50%);\n    height: 105%;\n    width: 105%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n.optly-radio-holder input:checked ~ .optly-radio {\n  background-color: #EC2C22;\n  color: white;\n}\n.optly-radio-holder label {\n  margin-bottom: 0px;\n}\n.optly-choices-label {\n      display: flex;\n    justify-content: space-between;\n    font-size: 12.8px;\n    margin-top: 7px;\n    margin-bottom: 10px;\n}\n\n.optly-social {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 6px;\n  margin-bottom: 24px;\n}\n.optly-social .social-icons .optly-share-btn {\n  width: 36px;\n  height: 36px;\n  padding: 0;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  text-decoration: none !important;\n}\n.optly-social .social-icons .optly-share-btn .symbol {\n  margin-right: 0;\n  font-size: 16px;\n  text-decoration: none !important;\n}\n\n@media (max-width: 767px) {\n  .optly-victory-holder {\n  \toverflow-x: scroll;\n  }\n  \n  .optly-victory-holder::-webkit-scrollbar {\n  \tdisplay: none;\n\t}\n\n  .optly-victory-holder {\n    -ms-overflow-style: none;  /* IE and Edge */\n    scrollbar-width: none;  /* Firefox */\n  }\n  \n  .optly-victory-box.spacer {\n  \tdisplay: none;\n  }\n  .optly-victory-holder:after,.optly-victory-holder:before {\n    display: none;\n  }\n}\n\n@media (min-width: 767px) {\n  .optly-radio-holder {\n    padding-top:20px;\n    padding-bottom: 20px;\n  }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "da4a8b85aa21440db64165fcde3f27dc"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20563442849", "integrationSettings": null}], "id": "20544202626", "weightDistributions": null, "name": "[niftic] - Combo - PSF Member Experience R4", "groupId": null, "commitId": "20559409474", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20563443013"], "experiments": [{"weightDistributions": [{"entityId": "20563911173", "endOfRange": 3000}, {"entityId": "20555773039", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM Dr Smith", "bucketingStrategy": null, "variations": [{"id": "20563911173", "actions": [{"viewId": "20563443013", "changes": []}], "name": "Original"}, {"id": "20555773039", "actions": [{"viewId": "20563443013", "changes": [{"dependencies": [], "type": "custom_code", "id": "d3bb5a63efc5413eb5ae6d824a8821d7", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    // shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can speak up by tweeting All Children’s Hospital now</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet the Hospital Now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = 'This doctor has wrongly accused more than a dozen parents of child abuse who were later proven innocent.\n\nWhen will you fire #DrSallySmith @SheriffPinellas @AllChildrens @BayfrontHealth??\n\n#BringRaHome\nChange.org/TerminateDrSmith';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "d1050efd9b244a3c92454bb544844f80"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20514662857", "integrationSettings": null}], "id": "20544361955", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM Dr Smith", "groupId": null, "commitId": "20545633357", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "eb040338467f4fc68fdb0a06f41d39f7", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20554340241"], "experiments": [{"weightDistributions": [{"entityId": "20542211872", "endOfRange": 3000}, {"entityId": "20520661705", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM Afghan Girls", "bucketingStrategy": null, "variations": [{"id": "20542211872", "actions": [{"viewId": "20554340241", "changes": []}], "name": "Original"}, {"id": "20520661705", "actions": [{"viewId": "20554340241", "changes": [{"dependencies": [], "type": "custom_code", "id": "6d7340472f8845b4985c488e1262501c", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    // shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can protect the Afghan girls team by tweeting leaders now</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet Prime Minister Trudeau Now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = 'An Afghan All-Girls Robotics Team is begging Canada to grant them asylum so they can continue studying. They are “terrified.”\n\n@JustinTrudeau When are you going to grant asylum to the 25 girls?\n\n#AfghanDreamers\nChange.org/AfghanGirlsRobotics';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "3580e6c1affb491ebbbac78333dd3195"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20520621428", "integrationSettings": null}], "id": "20554340242", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM Afghan Girls", "groupId": null, "commitId": "20567181188", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "eb9013790cac4984927b39cde3b374fe", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20539687745"], "experiments": [{"weightDistributions": [{"entityId": "20544398753", "endOfRange": 3000}, {"entityId": "20559519820", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM Afghan Families", "bucketingStrategy": null, "variations": [{"id": "20544398753", "actions": [{"viewId": "20539687745", "changes": []}], "name": "Original"}, {"id": "20559519820", "actions": [{"viewId": "20539687745", "changes": [{"dependencies": [], "type": "custom_code", "id": "b5691c1e77f34308a83aa18a8d756357", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    // shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can help Afghan families by tweeting the WhiteHouse now</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet the WhiteHouse Now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = 'The safety of every family in Afghanistan seeking asylum is at stake.\n\n@WhiteHouse @POTUS @VP When will you reopen the U.S. Embassy in Kabul and provide sanctuary for those fleeing the Taliban?\n\nChange.org/AsylumForAfghanFamilies';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "8111433168ef4f68ba8a7129393d9932"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20557498856", "integrationSettings": null}], "id": "20555598449", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM Afghan Families", "groupId": null, "commitId": "20550040004", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "4aeadb2348704ad3943d94af50cc7e0d", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20538128573"], "experiments": [{"weightDistributions": [{"entityId": "20556762091", "endOfRange": 3000}, {"entityId": "20567297728", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM Statute of Limitations", "bucketingStrategy": null, "variations": [{"id": "20556762091", "actions": [{"viewId": "20538128573", "changes": []}], "name": "Original"}, {"id": "20567297728", "actions": [{"viewId": "20538128573", "changes": [{"dependencies": [], "type": "custom_code", "id": "98bda17cf7ab4b158f2197505ea113e6", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    // shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can repeal this law by tweeting California leaders now</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet CA leaders Now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = 'Laws should never punish the victim of a crime.\n\n\When will you repeal California’s Statute of Limitations for all sex crimes @AlexPadilla4CA @SenFeinstein @CAgovernor?\n\nChange.org/CAStatuteOfLimitations';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "bd42a696e7324db98e7f9e756aed9845"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20564551784", "integrationSettings": null}], "id": "20556801028", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM Statute of Limitations", "groupId": null, "commitId": "20575700005", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "81ba8fa16d1b47d7ac5bca72eb8ba8c1", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20536377798"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "[niftic] - Combo - PSF Member Experience R4 Control", "bucketingStrategy": null, "variations": [{"id": "20544398593", "actions": [{"viewId": "20536377798", "changes": []}], "name": "Original"}], "audienceIds": null, "changes": null, "id": "20540041772", "integrationSettings": null}], "id": "20557458889", "weightDistributions": null, "name": "[niftic] - Combo - PSF Member Experience R4 Control", "groupId": null, "commitId": "20554347854", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20582340188"], "experiments": [{"weightDistributions": [{"entityId": "20578000137", "endOfRange": 3400}, {"entityId": "20582320186", "endOfRange": 6700}, {"entityId": "20576200195", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[fdn] - Combo experiment B - IN - Hindi", "bucketingStrategy": null, "variations": [{"id": "20578000137", "actions": [{"viewId": "20582340188", "changes": [{"dependencies": [], "type": "custom_code", "id": "f17173ba959f446f956c76d6f5497a34", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "20582320186", "actions": [{"viewId": "20582340188", "changes": [{"dependencies": [], "type": "custom_code", "id": "ca3b21b613854148a7c6598de2c9b78f", "value": function($){/* Customization, leave as "" if you want to use the existing */
/* Personalization Tags: {fname} {currency} {amount} */
/* Example: var promoteButton = "Yes, I'll chip in {currency}{amount}" */
var heading = "क्या आप {currency}{amount} का योगदान देकर इस पेटीशन को प्रमोट करना चाहेंगे?";
var subcopy = '{fname}, आपके आर्थिक योगदान करने से Change.org: <ul class="list-bulleted mvn mhxs" style="list-style-type:disc"><li>पेटीशन का<strong> समर्थन करने के लिए इच्छुक लोगों </strong>को ढूंढ सकेगी</li><li>ईमेल, सोशल मीडिया और हमारी वेबसाइट पर उनको ये <strong>पेटीशन बांट सकेगी</strong></li></ul> अगर हर कोई योगदान देकर पेटीशन प्रमोट करे तो कुछ ही घंटे में इसे हज़ारों समर्थक मिल सकेंगे। क्या आप इस पेटीशन को और ज़्यादा लोगों तक पहुँचाना चाहेंगे?';
var promoteButton = "";
var shareButton = "";
var thermometerText = "";
var currencyBefore = true; //change to false if currency is after amount in locale
var stepperCopy = "";

/* Don't Touch Below */
var utils = window.optimizely.get("utils");
utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    var h = combo.querySelector('h1');
    var s = combo.querySelector('.phxxl.ptl.xs-pam > div');
    var t = combo.querySelector('[data-view="psf/combo/components/combo_thermometer"] [display="flex"] > div');
    var pb = combo.querySelector('.js-promote p');
    var sb = combo.querySelector('.js-share-btn p');
    var sc = combo.querySelector('.page-wrap > .txt-c.xs-mvxl.mbxl.mtxs h5');
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var promoteInner = document.querySelector('.js-promote').innerText.replace(/,/g, '');
    var amount = promoteInner.match(/\d+/);
    var currency = currencyBefore ? promoteInner.charAt(amount.index-1) : promoteInner.charAt(amount.index+1);
    function makeReplacements(str) {
      var temp = str;
      temp = temp.replace('{fname}', fname);
      temp = temp.replace('{currency}', currency);
      temp = temp.replace('{amount}', parseInt(amount[0]).toLocaleString());
      return temp;                   
    }
    if (heading) {
     	 h.innerHTML = makeReplacements(heading);
    }
    if (subcopy) {
       s.innerHTML = makeReplacements(subcopy);
    }
    if (promoteButton) {
       pb.innerHTML = makeReplacements(promoteButton);
    }
    if (shareButton) {
       sb.innerHTML = makeReplacements(shareButton);
    }
    if (thermometerText) {
       t.innerHTML = makeReplacements(thermometerText);
    }
    if (stepperCopy) {
     	 sc.innerHTML = makeReplacements(stepperCopy); 
    }
  });
});
}}]}], "name": "V1"}, {"id": "20576200195", "actions": [{"viewId": "20582340188", "changes": [{"dependencies": [], "type": "custom_code", "id": "F429C1FE-B52A-4124-8B47-3BF79DDA405D", "value": function($){/* Customization, leave as "" if you want to use the existing */
/* Personalization Tags: {fname} {currency} {amount} */
/* Example: var promoteButton = "Yes, I'll chip in {currency}{amount}" */
var heading = "{fname}, क्या आप {currency}{amount} का योगदान देकर इस पेटीशन को प्रमोट करना चाहेंगे?";
var subcopy = 'आपके आर्थिक योगदान करने से Change.org: <ul class="list-bulleted mvn mhxs" style="list-style-type:disc"><li>पेटीशन का<strong> समर्थन करने के लिए इच्छुक लोगों </strong>को ढूंढ सकेगी</li><li>ईमेल, सोशल मीडिया और हमारी वेबसाइट पर उनको ये <strong>पेटीशन बांट सकेगी</strong></li></ul> अगर हर कोई योगदान देकर पेटीशन प्रमोट करे तो कुछ ही घंटे में इसे हज़ारों समर्थक मिल सकेंगे। क्या आप इस पेटीशन को और ज़्यादा लोगों तक पहुँचाना चाहेंगे?';
var promoteButton = "";
var shareButton = "";
var thermometerText = "";
var currencyBefore = true; //change to false if currency is after amount in locale
var stepperCopy = "";

/* Don't Touch Below */
var utils = window.optimizely.get("utils");
utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    var h = combo.querySelector('h1');
    var s = combo.querySelector('.phxxl.ptl.xs-pam > div');
    var t = combo.querySelector('[data-view="psf/combo/components/combo_thermometer"] [display="flex"] > div');
    var pb = combo.querySelector('.js-promote p');
    var sb = combo.querySelector('.js-share-btn p');
    var sc = combo.querySelector('.page-wrap > .txt-c.xs-mvxl.mbxl.mtxs h5');
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var promoteInner = document.querySelector('.js-promote').innerText.replace(/,/g, '');
    var amount = promoteInner.match(/\d+/);
    var currency = currencyBefore ? promoteInner.charAt(amount.index-1) : promoteInner.charAt(amount.index+1);
    function makeReplacements(str) {
      var temp = str;
      temp = temp.replace('{fname}', fname);
      temp = temp.replace('{currency}', currency);
      temp = temp.replace('{amount}', parseInt(amount[0]).toLocaleString());
      return temp;                   
    }
    if (heading) {
     	 h.innerHTML = makeReplacements(heading);
    }
    if (subcopy) {
       s.innerHTML = makeReplacements(subcopy);
    }
    if (promoteButton) {
       pb.innerHTML = makeReplacements(promoteButton);
    }
    if (shareButton) {
       sb.innerHTML = makeReplacements(shareButton);
    }
    if (thermometerText) {
       t.innerHTML = makeReplacements(thermometerText);
    }
    if (stepperCopy) {
     	 sc.innerHTML = makeReplacements(stepperCopy); 
    }
  });
});
}}]}], "name": "V2"}], "audienceIds": null, "changes": null, "id": "20572050142", "integrationSettings": null}], "id": "20558700321", "weightDistributions": null, "name": "[fdn] - Combo experiment B - IN - Hindi", "groupId": null, "commitId": "20582760596", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20563382700"], "experiments": [{"weightDistributions": [{"entityId": "20536452197", "endOfRange": 3000}, {"entityId": "20565292011", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM Amen'ra Sba", "bucketingStrategy": null, "variations": [{"id": "20536452197", "actions": [{"viewId": "20563382700", "changes": []}], "name": "Original"}, {"id": "20565292011", "actions": [{"viewId": "20563382700", "changes": [{"dependencies": [], "type": "custom_code", "id": "37361be7342546e18e506ea299d0a485", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    // shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can bring Ra home by tweeting FL officials</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet FL Officials Now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = '@Syesha’s son Amen’Ra Sba was legally kidnapped by the State.\n\n@ShevaunLHarris @ManateeSheriff @12CircuitFL When are you going to rightfully return Ra to his loving family??\n\n#BringRaHome\nChange.org/BringAmenRaHome';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "1c42d2952bd44c96b4cf5db7d16ac6e8"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20559402318", "integrationSettings": null}], "id": "20559542708", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM Amen'ra Sba", "groupId": null, "commitId": "20563482814", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "2f650a1f0ed94c8898fcb72917a10561", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20562731641"], "experiments": [{"weightDistributions": [{"entityId": "20558491457", "endOfRange": 2500}, {"entityId": "20552491598", "endOfRange": 5000}, {"entityId": "20548721928", "endOfRange": 7500}, {"entityId": "20591810137", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[fdn] - Combo experiment B - IN - English", "bucketingStrategy": null, "variations": [{"id": "20558491457", "actions": [{"viewId": "20562731641", "changes": [{"dependencies": [], "type": "custom_code", "id": "1e963f0daff74aa083370013d7770bbc", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "20552491598", "actions": [{"viewId": "20562731641", "changes": [{"dependencies": [], "type": "custom_code", "id": "4f671e5d9afd47bbaf78546394d89c3a", "value": function($){/* Customization, leave as "" if you want to use the existing */
/* Personalization Tags: {fname} {currency} {amount} */
/* Example: var promoteButton = "Yes, I'll chip in {currency}{amount}" */
var heading = "Can you chip in {currency}{amount} to get this petition on the agenda?";
var subcopy = '{fname}, your contribution allows Change.org to: <ul class="list-bulleted mvn mhxs" style="list-style-type:disc"><li><strong>Find like-minded people</strong> to support the petition</li><li><strong>Distribute this petition</strong> to them across email, social media and our website.</li></ul> Within an hour, thousands more supporters could be added if everyone chips in. Can you help reach the signature goal?';
var promoteButton = "";
var shareButton = "";
var thermometerText = "";
var currencyBefore = true; //change to false if currency is after amount in locale
var stepperCopy = "";

/* Don't Touch Below */
var utils = window.optimizely.get("utils");
utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    var h = combo.querySelector('h1');
    var s = combo.querySelector('.phxxl.ptl.xs-pam > div');
    var t = combo.querySelector('[data-view="psf/combo/components/combo_thermometer"] [display="flex"] > div');
    var pb = combo.querySelector('.js-promote p');
    var sb = combo.querySelector('.js-share-btn p');
    var sc = combo.querySelector('.page-wrap > .txt-c.xs-mvxl.mbxl.mtxs h5');
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var promoteInner = document.querySelector('.js-promote').innerText.replace(/,/g, '');
    var amount = promoteInner.match(/\d+/);
    var currency = currencyBefore ? promoteInner.charAt(amount.index-1) : promoteInner.charAt(amount.index+1);
    function makeReplacements(str) {
      var temp = str;
      temp = temp.replace('{fname}', fname);
      temp = temp.replace('{currency}', currency);
      temp = temp.replace('{amount}', parseInt(amount[0]).toLocaleString());
      return temp;                   
    }
    if (heading) {
     	 h.innerHTML = makeReplacements(heading);
    }
    if (subcopy) {
       s.innerHTML = makeReplacements(subcopy);
    }
    if (promoteButton) {
       pb.innerHTML = makeReplacements(promoteButton);
    }
    if (shareButton) {
       sb.innerHTML = makeReplacements(shareButton);
    }
    if (thermometerText) {
       t.innerHTML = makeReplacements(thermometerText);
    }
    if (stepperCopy) {
     	 sc.innerHTML = makeReplacements(stepperCopy); 
    }
  });
});
}}]}], "name": "V1"}, {"id": "20548721928", "actions": [{"viewId": "20562731641", "changes": [{"dependencies": [], "type": "custom_code", "id": "541B83FC-C9BB-492B-AA7E-0E020E54BF52", "value": function($){/* Customization, leave as "" if you want to use the existing */
/* Personalization Tags: {fname} {currency} {amount} */
/* Example: var promoteButton = "Yes, I'll chip in {currency}{amount}" */
var heading = "{fname}, can you chip in {currency}{amount} to get this petition on the agenda?";
var subcopy = 'Your contribution allows Change.org to: <ul class="list-bulleted mvn mhxs" style="list-style-type:disc"><li><strong>Find like-minded people</strong> to support the petition</li><li><strong>Distribute this petition</strong> to them across email, social media and our website.</li></ul> Within an hour, thousands more supporters could be added if everyone chips in. Can you help reach the signature goal?';
var promoteButton = "";
var shareButton = "";
var thermometerText = "";
var currencyBefore = true; //change to false if currency is after amount in locale
var stepperCopy = "";

/* Don't Touch Below */
var utils = window.optimizely.get("utils");
utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    var h = combo.querySelector('h1');
    var s = combo.querySelector('.phxxl.ptl.xs-pam > div');
    var t = combo.querySelector('[data-view="psf/combo/components/combo_thermometer"] [display="flex"] > div');
    var pb = combo.querySelector('.js-promote p');
    var sb = combo.querySelector('.js-share-btn p');
    var sc = combo.querySelector('.page-wrap > .txt-c.xs-mvxl.mbxl.mtxs h5');
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var promoteInner = document.querySelector('.js-promote').innerText.replace(/,/g, '');
    var amount = promoteInner.match(/\d+/);
    var currency = currencyBefore ? promoteInner.charAt(amount.index-1) : promoteInner.charAt(amount.index+1);
    function makeReplacements(str) {
      var temp = str;
      temp = temp.replace('{fname}', fname);
      temp = temp.replace('{currency}', currency);
      temp = temp.replace('{amount}', parseInt(amount[0]).toLocaleString());
      return temp;                   
    }
    if (heading) {
     	 h.innerHTML = makeReplacements(heading);
    }
    if (subcopy) {
       s.innerHTML = makeReplacements(subcopy);
    }
    if (promoteButton) {
       pb.innerHTML = makeReplacements(promoteButton);
    }
    if (shareButton) {
       sb.innerHTML = makeReplacements(shareButton);
    }
    if (thermometerText) {
       t.innerHTML = makeReplacements(thermometerText);
    }
    if (stepperCopy) {
     	 sc.innerHTML = makeReplacements(stepperCopy); 
    }
  });
});
}}]}], "name": "V2"}, {"id": "20591810137", "actions": [{"viewId": "20562731641", "changes": [{"dependencies": [], "type": "custom_code", "id": "0B16A8D5-D10E-47F2-ABE2-4AE3E5A2123B", "value": function($){/* Customization, leave as "" if you want to use the existing */
/* Personalization Tags: {fname} {currency} {amount} */
/* Example: var promoteButton = "Yes, I'll chip in {currency}{amount}" */
var heading = "";
var subcopy = "";
var promoteButton = "Yes, I'll contribute {currency}{amount} to distribute this petition";
var shareButton = "";
var thermometerText = "";
var currencyBefore = true; //change to false if currency is after amount in locale
var stepperCopy = "";

/* Don't Touch Below */
var utils = window.optimizely.get("utils");
utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    var h = combo.querySelector('h1');
    var s = combo.querySelector('.phxxl.ptl.xs-pam > div');
    var t = combo.querySelector('[data-view="psf/combo/components/combo_thermometer"] [display="flex"] > div');
    var pb = combo.querySelector('.js-promote p');
    var sb = combo.querySelector('.js-share-btn p');
    var sc = combo.querySelector('.page-wrap > .txt-c.xs-mvxl.mbxl.mtxs h5');
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var promoteInner = document.querySelector('.js-promote').innerText.replace(/,/g, '');
    var amount = promoteInner.match(/\d+/);
    var currency = currencyBefore ? promoteInner.charAt(amount.index-1) : promoteInner.charAt(amount.index+1);
    function makeReplacements(str) {
      var temp = str;
      temp = temp.replace('{fname}', fname);
      temp = temp.replace('{currency}', currency);
      temp = temp.replace('{amount}', parseInt(amount[0]).toLocaleString());
      return temp;                   
    }
    if (heading) {
     	 h.innerHTML = makeReplacements(heading);
    }
    if (subcopy) {
       s.innerHTML = makeReplacements(subcopy);
    }
    if (promoteButton) {
       pb.innerHTML = makeReplacements(promoteButton);
    }
    if (shareButton) {
       sb.innerHTML = makeReplacements(shareButton);
    }
    if (thermometerText) {
       t.innerHTML = makeReplacements(thermometerText);
    }
    if (stepperCopy) {
     	 sc.innerHTML = makeReplacements(stepperCopy); 
    }
  });
});
}}]}], "name": "V3"}], "audienceIds": null, "changes": null, "id": "20566401256", "integrationSettings": null}], "id": "20568651269", "weightDistributions": null, "name": "[fdn] - Combo experiment B - IN - English", "groupId": null, "commitId": "20589480612", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20568790223"], "experiments": [{"weightDistributions": [{"entityId": "20550300174", "endOfRange": 5000}, {"entityId": "20603240021", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[fdn] - Combo experiment B - MY", "bucketingStrategy": null, "variations": [{"id": "20550300174", "actions": [{"viewId": "20568790223", "changes": [{"dependencies": [], "type": "custom_code", "id": "254a3bc3a2b84cfab79c8884e56b6124", "value": function($){var utils = window.optimizely.get("utils");
utils.waitUntil(function() { return !!window.hj; }).then(function() {
	window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
	hj('trigger', 'rbg_calltool_control');
});
}}]}], "name": "Original"}, {"id": "20603240021", "actions": [{"viewId": "20568790223", "changes": [{"dependencies": [], "type": "custom_code", "id": "4819c4af1da64aa59eb75853fa93a6ba", "value": function($){/* Customization, leave as "" if you want to use the existing */
/* Personalization Tags: {fname} {currency} {amount} {chipinsharecount} */
/* Example: var promoteButton = "Yes, I'll chip in {currency}{amount}" */
var heading = "Can you help to promote this petition by contributing {currency}{amount}?";
var subcopy = '{fname}, it can take a while to personally engage people on the issues you care about most -- like this petition. But Change.org can help you build more signatures in a fraction of the time. Your contribution allows Change.org to: <ul class="list-bulleted mvn mhxs" style="list-style-type:disc"><li><strong>Find like-minded people</strong> to support the petition</li><li><strong>Distribute this petition</strong> to them across email, social media and our website.</li></ul> Within an hour, thousands more supporters could be added if everyone contributes. Can you help reach the signature goal?';
var promoteButton = "";
var shareButton = "";
var thermometerText = "Get supporters beyond your circle. Join the {chipinsharecount} people who have contributed or shared to reach the next goal";
var currencyBefore = true; //change to false if currency is after amount in locale
var stepperCopy = "";

/* Don't Touch Below */
var utils = window.optimizely.get("utils");
utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    var h = combo.querySelector('h1');
    var s = combo.querySelector('.phxxl.ptl.xs-pam > div');
    var t = combo.querySelector('[data-view="psf/combo/components/combo_thermometer"] [display="flex"] > div');
    var pb = combo.querySelector('.js-promote p');
    var sb = combo.querySelector('.js-share-btn p');
    var sc = combo.querySelector('.page-wrap > .txt-c.xs-mvxl.mbxl.mtxs h5');
    var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var promoteInner = document.querySelector('.js-promote').innerText.replace(/,/g, '');
    var amount = promoteInner.match(/\d+/);
    var currency = currencyBefore ? promoteInner.charAt(amount.index-1) : promoteInner.charAt(amount.index+1);
    var gtString = document.querySelector('[data-view="psf/combo/components/combo_thermometer"] div[display="flex"] > div');
    var csNum = gtString.innerText.replace(/^\D+|\D+$/g, "");
    function makeReplacements(str) {
      var temp = str;
      temp = temp.replace('{fname}', fname);
      temp = temp.replace('{currency}', currency);
      temp = temp.replace('{amount}', parseInt(amount[0]).toLocaleString());
      temp = temp.replace('{chipinsharecount}', csNum);
      return temp;                   
    }
    if (heading) {
     	 h.innerHTML = makeReplacements(heading);
    }
    if (subcopy) {
       s.innerHTML = makeReplacements(subcopy);
    }
    if (promoteButton) {
       pb.innerHTML = makeReplacements(promoteButton);
    }
    if (shareButton) {
       sb.innerHTML = makeReplacements(shareButton);
    }
    if (thermometerText) {
       t.innerHTML = makeReplacements(thermometerText);
    }
    if (stepperCopy) {
     	 sc.innerHTML = makeReplacements(stepperCopy); 
    }
  });
});
}}]}], "name": "V1"}], "audienceIds": null, "changes": null, "id": "20582150208", "integrationSettings": null}], "id": "20568790224", "weightDistributions": null, "name": "[fdn] - Combo experiment B - MY", "groupId": null, "commitId": "20583830673", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20596780187"], "experiments": [{"weightDistributions": [{"entityId": "20619600124", "endOfRange": 2000}, {"entityId": "20615560214", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Combo - Membership Vertical Acquisitions \u2013 Women's Rights", "bucketingStrategy": null, "variations": [{"id": "20619600124", "actions": [], "name": "Original"}, {"id": "20615560214", "actions": [{"viewId": "20596780187", "changes": [{"dependencies": [], "type": "custom_code", "id": "af7077d7e34241b69008b50ebdf33a8b", "value": function($){var utils = window.optimizely.get("utils");
var petitionUrl = window.location.href.split("/psf")[0];

utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    
    var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var pageContent = document.getElementById('content');
		var contentWrap = combo.querySelector('.page-wrap .psf-combo-shaded-round-border.col-lg-7 .phxxl.ptl.xs-pam');
    var dcw = combo.querySelector('.page-wrap .psf-combo-shaded-round-border.col-lg-7');
    var desktopFeedWrap = combo.querySelector('.page-wrap .col-lg-5');
    var headings = contentWrap.querySelectorAll('h1');
    var content = contentWrap.querySelector('h1 + div');
    var thermometer = contentWrap.querySelector('.gradient-thermometer');
    var thermWrap = combo.querySelector('.phxxl.ptl.xs-pam > .col-xs-12.phn.mbm');
    var thermClone = thermWrap.cloneNode(true);
    var supporters = thermometer.nextElementSibling.lastElementChild;
    var jsPromote = document.querySelector('.js-promote');
    var image = document.querySelector('.photo-component .flex-embed .flex-embed-cover-image');
    var shareBtn = document.querySelector('.js-share-btn');
    
    desktopFeedWrap.classList.add('hide-fully');
    dcw.classList.remove('col-lg-7');
    dcw.classList.add('dcw');
    
    var promoteTxt = jsPromote.innerText;
    var banditAmt = promoteTxt.match(/\d+/g)[0];
    var currency = promoteTxt.substring(promoteTxt.indexOf(banditAmt) - 1, promoteTxt.indexOf(banditAmt));
    
    var archive = {
      heading: headings[0].innerText,
      content: content.innerHTML,
      thermometer: thermometer.innerHTML,
      supporters: supporters.innerHTML,
      image: image.style.backgroundImage,
      share: shareBtn.innerHTML
    };
    
    shareBtn.innerHTML = '<p>No, I’ll share the petition instead</p>';
    
    image.style = "background-image: url('https://static.change.org/psf-experiments/wr-final.png')";
    
    /* Hide Feeds */
    var comboFeeds = document.querySelectorAll('[data-view="psf/combo/components/combo_feed"]');

    Array.from(comboFeeds).forEach(function(feed) {
    	feed.classList.add('hide-fully');
    });

    
    for (var i = 0; i < headings.length; i++) {
    	headings[i].innerText = 'Can you chip in ' + currency + '3 monthly to help more women’s rights petitions win?';
      headings[i].classList.add('mbs');
    }
    
    content.classList.add('type-l');
    content.innerHTML = '<p>Become a member to <strong>support Change.org staff working on women’s rights petitions</strong>. Expert campaigners work hand-in-hand with petition starters, helping them reach out to media, organize protests, and engage with people in power.</p><p>This petition faces many challenges and without support from Change.org campaign experts, it will be 4x less likely to win!</p><p>We depend on people like you to fund this important work. <strong>Can you chip in monthly to fight for women’s rights and help petition like this one win?</strong></p>';
    
    thermometer.parentNode.parentNode.classList.remove('mtl','xs-mts');
    thermometer.classList.add('hide-fully');
    
    var acceptedPayment = document.querySelector('[data-view="psf/combo/components/accepted_payment_types"]');
    /*acceptedPayment.parentNode.insertBefore(thermWrap, acceptedPayment);
    acceptedPayment.parentNode.classList.remove('txt-c');*/
    acceptedPayment.classList.add('hide-fully');
    
    supporters.parentNode.classList.add('hide-fully');
    // supporters.querySelector('strong').classList.add('hide-fully');
    // supporters.innerHTML = 'Join the <b>221</b> people supporting women’s rights';
    
    // var promoteText = jsPromote.querySelector('p');
    // promoteText.innerText = 'Yes, I want to help women’s rights petitions win with ' + currency + '3 monthly';

    var newPromote = document.createElement('a');
    newPromote.href = 'https://www.change.org/c/womens-rights/subscribe?petition_id=' + window.changeTargetingData.petition.id;
    newPromote.classList = 'btn btn-full btn-big btn-action btn-pd';
    newPromote.innerHTML = '<p class="pbxxs">Yes, I want to help women’s rights petitions win with ' + currency + '3 monthly</p>';
    jsPromote.parentNode.insertBefore(newPromote, jsPromote);
    jsPromote.classList.add('hide-fully');
    
    newPromote.addEventListener('click', function(){
      if (!!window.App) {
        window.App.trackEvent('combo_causes_click');
      } else {
       	window.trackEvent('combo_causes_click'); 
      }
    });

  });
});

utils.waitForElement('.box-sm .txt-c h5').then(function(completeSupport) {
  var stepperCopy = document.createElement('p');
  stepperCopy.classList = 'mbs';
  stepperCopy.innerHTML = '<strong>You signed!</strong> Now chip in or share';
  completeSupport.classList.add('hide-fully');
  completeSupport.parentNode.insertBefore(stepperCopy, completeSupport);
});

utils.waitForElement('body.type-loaded').then(function(){
  utils.waitForElement('[data-view="psf/combo/components/promoter_count"] div[display="flex"]').then(function(community){
  	community.classList.add('hide-fully');
  });
  /*utils.waitForElement('[data-view="psf/combo/components/promoter_count"] div[display="flex"] > div > p').then(function(communityCopy){
    // var chippedIn = Math.ceil(window.changeTargetingData.petition.signatureCount.total * 0.012);
    communityCopy.innerHTML = '<b>221 people joined</b> to keep petitions like this one in the spotlight.';
  });*/
});
}}, {"value": "<style>h1.type-xl-mtn.hidden-xs {   \n\tfont-size: 2.44140625rem !important;\n}\n\n.btn-pd p {\n \tline-height: 1.2; \n}\n.visible-xs .optly-combo-feed .hide-overflow {\n    position: relative;\n}\n.visible-xs .optly-combo-feed .feed-wrap {\n    position: absolute;\n    bottom: 100%;\n    transition: all.4s ease-in-out;\n}\n.phxxl.ptl.xs-pam > .mtm.xs-mbs > .col-xs-12 > .ptxs.mbn {\n  padding-top: 0 !important; \n}\n\n@media screen and (min-width: 992px) {\n  .dcw {\n    width: 576px;\n  \tmargin-left: auto !important;\n    margin-right: auto !important;\n  }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "b5087f9e67b248f482dabe5d891283ff"}]}], "name": "Variation #1"}, {"id": "20647720252", "actions": [{"viewId": "20596780187", "changes": [{"dependencies": [], "type": "custom_code", "id": "251C8554-F3FE-4252-B1F9-AB8539FEDAE4", "value": function($){var utils = window.optimizely.get("utils");
var petitionUrl = window.location.href.split("/psf")[0];

utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    
    var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var pageContent = document.getElementById('content');
		var contentWrap = combo.querySelector('.page-wrap .psf-combo-shaded-round-border.col-lg-7 .phxxl.ptl.xs-pam');
    var dcw = combo.querySelector('.page-wrap .psf-combo-shaded-round-border.col-lg-7');
    var desktopFeedWrap = combo.querySelector('.page-wrap .col-lg-5');
    var headings = contentWrap.querySelectorAll('h1');
    var content = contentWrap.querySelector('h1 + div');
    var thermometer = contentWrap.querySelector('.gradient-thermometer');
    var thermWrap = combo.querySelector('.phxxl.ptl.xs-pam > .col-xs-12.phn.mbm');
    var thermClone = thermWrap.cloneNode(true);
    var supporters = thermometer.nextElementSibling.lastElementChild;
    var jsPromote = document.querySelector('.js-promote');
    var image = document.querySelector('.photo-component .flex-embed .flex-embed-cover-image');
    var shareBtn = document.querySelector('.js-share-btn');
    
    desktopFeedWrap.classList.add('hide-fully');
    dcw.classList.remove('col-lg-7');
    dcw.classList.add('dcw');
    
    var promoteTxt = jsPromote.innerText;
    var banditAmt = promoteTxt.match(/\d+/g)[0];
    var currency = promoteTxt.substring(promoteTxt.indexOf(banditAmt) - 1, promoteTxt.indexOf(banditAmt));
    
    var archive = {
      heading: headings[0].innerText,
      content: content.innerHTML,
      thermometer: thermometer.innerHTML,
      supporters: supporters.innerHTML,
      image: image.style.backgroundImage,
      share: shareBtn.innerHTML
    };
    
    shareBtn.innerHTML = '<p>No, I’ll share the petition instead</p>';
    
    image.style = "background-image: url('https://static.change.org/psf-experiments/wr-final.png')";
    
    /* Hide Feeds */
    var comboFeeds = document.querySelectorAll('[data-view="psf/combo/components/combo_feed"]');

    Array.from(comboFeeds).forEach(function(feed) {
    	feed.classList.add('hide-fully');
    });

    
    for (var i = 0; i < headings.length; i++) {
    	headings[i].innerText = 'Can you chip in ' + currency + '3 monthly to suport women’s rights?';
      headings[i].classList.add('mbs');
    }
    
    content.classList.add('type-l');
    content.innerHTML = '<p>Become a member to support Change.org staff focused on women’s rights.</p>';
    content.innerHTML += '<p>We partner directly with petition starters to help them develop a strategy, get media coverage, and engage with people in power. Petitions are four times more likely to succeed with our support. <a class="optly-toggle-impact">Our impact<span class="symbol symbol-bracket-down symbol-xs symbol-compact" style="margin-left: 6px;margin-top: -2px;"></span></a></p>';
    content.innerHTML += '<div class="optly-impact-area"> <h4 class="mbl">Helping women\'s rights petitions win</h4> <div class="optly-impact-area"> <div class="optly-impact-section mbxl"> <div class="optly-impact-image"> <img class="image-innner" src="https://change-assets.s3.amazonaws.com/psf-experiments/rise-up-protest.png" /> </div> <p>To help Amanda win a petition to protect sexual assault survivors, we organized a petition delivery to Congress and helped drive phone calls to elected officials.</p> </div> <div class="optly-impact-section mbxl"> <div class="optly-impact-image"> <img class="image-innner" src="https://change-assets.s3.amazonaws.com/psf-experiments/trip-advisor-protest.png" /> </div> <p>To help K win a petition introducing safety features on TripAdvisor, we organized a demonstration outside their office and created viral video content.</p> </div> <div class="optly-impact-section mbn"> <div class="optly-impact-image"> <img class="image-innner" src="https://change-assets.s3.amazonaws.com/psf-experiments/massage-envy.png\" /> </div> <p>To help Danielle win a petition introducing new policies at Massage Envy to prevent sexual assault, we got her petition featured on Buzzfeed and helped her negotiate with the General Counsel of Massage Envy.</p> </div> </div> </div>';
    var impactArea = document.querySelector('.optly-impact-area');
    function calculateElmHeight() {
      impactArea.classList.remove('optly-impact-area-animated');
      var prevHeight = impactArea.style.height;
      impactArea.style.height = 'unset';
      impactArea.dataset.clientHeight = impactArea.clientHeight;
    	impactArea.style.height = prevHeight == '0px' ? 0+'px' : impactArea.dataset.clientHeight+'px';
    	impactArea.classList.add('optly-impact-area-animated');
    }
    impactArea.dataset.clientHeight = impactArea.clientHeight;
    impactArea.style.height = 0;
    impactArea.classList.add('optly-impact-area-animated');
    setTimeout(function() {calculateElmHeight();}, 100);
    
    window.addEventListener('resize', function() {
 			calculateElmHeight();
    });
    
    thermometer.parentNode.parentNode.classList.remove('mtl','xs-mts');
    thermometer.classList.add('hide-fully');
    
    thermWrap.classList.remove('mbm');
		thermWrap.classList.add('mbxl');
    var impactToggle = document.querySelector('a.optly-toggle-impact');
    impactToggle.addEventListener('click', function() {
    	if(impactArea.style.height == '0px') {
        impactArea.style.height = impactArea.dataset.clientHeight +'px';
        impactToggle.classList.add('-toggled');
      } else {
        impactArea.style.height = '0px';
        impactToggle.classList.remove('-toggled');
      }
    });
    var acceptedPayment = document.querySelector('[data-view="psf/combo/components/accepted_payment_types"]');
    /*acceptedPayment.parentNode.insertBefore(thermWrap, acceptedPayment);
    acceptedPayment.parentNode.classList.remove('txt-c');*/
    acceptedPayment.parentNode.classList.add('hide-fully');
    
    supporters.parentNode.classList.add('hide-fully');
    // supporters.querySelector('strong').classList.add('hide-fully');
    // supporters.innerHTML = 'Join the <b>221</b> people supporting women’s rights';
    
    // var promoteText = jsPromote.querySelector('p');
    // promoteText.innerText = 'Yes, I want to help women’s rights petitions win with ' + currency + '3 monthly';

    var newPromote = document.createElement('a');
    newPromote.href = 'https://www.change.org/c/womens-rights/subscribe?petition_id=' + window.changeTargetingData.petition.id;
    newPromote.classList = 'btn btn-full btn-big btn-action btn-pd';
    newPromote.innerHTML = '<p class="">Chip in ' + currency + '3 monthly</p>';
    jsPromote.parentNode.insertBefore(newPromote, jsPromote);
    jsPromote.classList.add('hide-fully');
    newPromote.parentNode.className = 'mbs';
    
    newPromote.addEventListener('click', function(){
      if (!!window.App) {
        window.App.trackEvent('combo_causes_click');
      } else {
       	window.trackEvent('combo_causes_click'); 
      }
    });

  });
});

utils.waitForElement('.box-sm .txt-c h5').then(function(completeSupport) {
  var stepperCopy = document.createElement('p');
  stepperCopy.classList = 'mbs';
  stepperCopy.innerHTML = '<strong>You signed!</strong> Now chip in or share';
  completeSupport.classList.add('hide-fully');
  completeSupport.parentNode.insertBefore(stepperCopy, completeSupport);
});

utils.waitForElement('body.type-loaded').then(function(){
  utils.waitForElement('[data-view="psf/combo/components/promoter_count"] div[display="flex"]').then(function(community){
  	community.classList.add('hide-fully');
  });
  /*utils.waitForElement('[data-view="psf/combo/components/promoter_count"] div[display="flex"] > div > p').then(function(communityCopy){
    // var chippedIn = Math.ceil(window.changeTargetingData.petition.signatureCount.total * 0.012);
    communityCopy.innerHTML = '<b>221 people joined</b> to keep petitions like this one in the spotlight.';
  });*/
});
}}, {"value": "<style>body {\n\tbackground: #fffcf7;\n}\n\nh1.type-xl-mtn.hidden-xs {   \n\tfont-size: 2.44140625rem !important;\n}\n\n.btn-pd p {\n \tline-height: 1.2; \n}\n.visible-xs .optly-combo-feed .hide-overflow {\n    position: relative;\n}\n.visible-xs .optly-combo-feed .feed-wrap {\n    position: absolute;\n    bottom: 100%;\n    transition: all.4s ease-in-out;\n}\n.phxxl.ptl.xs-pam > .mtm.xs-mbs > .col-xs-12 > .ptxs.mbn {\n  padding-top: 0 !important; \n}\n\n@media screen and (max-width: 768px) {\n  .optly-impact-section .optly-impact-image {\n    width:100%;\n    max-height:175px;\n    overflow:hidden;\n  }\n  \n  .optly-impact-section .optly-impact-image img {\n    width: 100%;\n    height:100%;\n    object-fit: cover;\n  }\n  \n  .optly-impact-section p {\n  \tpadding-top: 13px;\n    padding-bottom: 8px;\n  }\n}\n\n\n@media screen and (min-width: 768px) {\n  .dcw {\n    width: 630px;\n  \tmargin-left: auto !important;\n    margin-right: auto !important;\n  }\n  \n  .psf-combo-buttons {\n    max-width: 310px;\n  }\n\n  .optly-impact-section {\n  \tdisplay: flex;\n    align-items: flex-start;\n  }\n  \n  .optly-impact-section .optly-impact-image {\n  \tmin-width: 180px;\n    height: 100px;\n  }\n  \n  .optly-impact-section .optly-impact-image img {\n    height: 100%;\n    width: 100%;\n    object-fit: cover;\n  }\n  \n  .optly-impact-section p {\n  \tpadding-left: 21px;\n  }\n}\n\n.optly-impact-area {\n  overflow:hidden;\n  font-size: 16px;\n  line-height: 24px;\n}\n\n.optly-impact-area-animated {\n    transition: height 0.5s;\n}\n\n.optly-toggle-impact.-toggled > .symbol {\n  transform: rotateX(-190deg);\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "6A96097A-886F-4F4E-A547-B59FC390013E"}]}], "name": "Variation #2"}, {"id": "20636760125", "actions": [{"viewId": "20596780187", "changes": [{"dependencies": [], "type": "custom_code", "id": "6FC6BE18-5731-4038-B00E-B38818B9095D", "value": function($){var utils = window.optimizely.get("utils");
var petitionUrl = window.location.href.split("/psf")[0];

utils.waitForElement('body.type-loaded').then(function() {
  utils.waitForElement('#content > .psf-combined.xs-full-height').then(function(combo) {
    
    var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
    var pageContent = document.getElementById('content');
		var contentWrap = combo.querySelector('.page-wrap .psf-combo-shaded-round-border.col-lg-7 .phxxl.ptl.xs-pam');
    var dcw = combo.querySelector('.page-wrap .psf-combo-shaded-round-border.col-lg-7');
    var desktopFeedWrap = combo.querySelector('.page-wrap .col-lg-5');
    var headings = contentWrap.querySelectorAll('h1');
    var content = contentWrap.querySelector('h1 + div');
    var thermometer = contentWrap.querySelector('.gradient-thermometer');
    var thermWrap = combo.querySelector('.phxxl.ptl.xs-pam > .col-xs-12.phn.mbm');
    var thermClone = thermWrap.cloneNode(true);
    var supporters = thermometer.nextElementSibling.lastElementChild;
    var jsPromote = document.querySelector('.js-promote');
    var image = document.querySelector('.photo-component .flex-embed .flex-embed-cover-image');
    var shareBtn = document.querySelector('.js-share-btn');
    
    desktopFeedWrap.classList.add('hide-fully');
    dcw.classList.remove('col-lg-7');
    dcw.classList.add('dcw');
    
    var promoteTxt = jsPromote.innerText;
    var banditAmt = promoteTxt.match(/\d+/g)[0];
    var currency = promoteTxt.substring(promoteTxt.indexOf(banditAmt) - 1, promoteTxt.indexOf(banditAmt));
    
    var archive = {
      heading: headings[0].innerText,
      content: content.innerHTML,
      thermometer: thermometer.innerHTML,
      supporters: supporters.innerHTML,
      image: image.style.backgroundImage,
      share: shareBtn.innerHTML
    };
    
    shareBtn.innerHTML = '<p>No, I’ll share the petition instead</p>';
    
    image.style = "background-image: url('https://static.change.org/psf-experiments/wr-final.png')";
    
    /* Hide Feeds */
    var comboFeeds = document.querySelectorAll('[data-view="psf/combo/components/combo_feed"]');

    Array.from(comboFeeds).forEach(function(feed) {
    	feed.classList.add('hide-fully');
    });

    for (var i = 0; i < headings.length; i++) {
    	headings[i].innerText = 'Can you chip in ' + currency + '3 monthly to suport women’s rights?';
      headings[i].classList.add('mbs');
    }
    
    content.classList.add('type-l');
    content.innerHTML = '<p>Become a member to support Change.org staff focused on women’s rights.</p>';
    content.innerHTML += '<p>We partner directly with petition starters to help them develop a strategy, get media coverage, and engage with people in power. Petitions are four times more likely to succeed with our support. <a class="optly-toggle-impact">Our impact<span class="symbol symbol-bracket-down symbol-xs symbol-compact" style="margin-left: 6px;margin-top: -2px;"></span></a></p>';
    content.innerHTML += '<div class="optly-impact-area"> <h4 class="mbl">Helping women\'s rights petitions win</h4> <div class="optly-impact-area"> <div class="optly-impact-section mbxl"> <div class="optly-impact-image"> <img class="image-innner" src="https://change-assets.s3.amazonaws.com/psf-experiments/rise-up-protest.png" /> </div> <p>To help Amanda win a petition to protect sexual assault survivors, we organized a petition delivery to Congress and helped drive phone calls to elected officials.</p> </div> <div class="optly-impact-section mbxl"> <div class="optly-impact-image"> <img class="image-innner" src="https://change-assets.s3.amazonaws.com/psf-experiments/trip-advisor-protest.png" /> </div> <p>To help K win a petition introducing safety features on TripAdvisor, we organized a demonstration outside their office and created viral video content.</p> </div> <div class="optly-impact-section mbn"> <div class="optly-impact-image"> <img class="image-innner" src="https://change-assets.s3.amazonaws.com/psf-experiments/massage-envy.png\" /> </div> <p>To help Danielle win a petition introducing new policies at Massage Envy to prevent sexual assault, we got her petition featured on Buzzfeed and helped her negotiate with the General Counsel of Massage Envy.</p> </div> </div> </div>';
    var impactArea = document.querySelector('.optly-impact-area');
    function calculateElmHeight() {
      impactArea.classList.remove('optly-impact-area-animated');
      var prevHeight = impactArea.style.height;
      impactArea.style.height = 'unset';
      impactArea.dataset.clientHeight = impactArea.clientHeight;
    	impactArea.style.height = prevHeight == '0px' ? 0+'px' : impactArea.dataset.clientHeight+'px';
    	impactArea.classList.add('optly-impact-area-animated');
    }
    impactArea.dataset.clientHeight = impactArea.clientHeight;
    impactArea.style.height = 0;
    impactArea.classList.add('optly-impact-area-animated');
    setTimeout(function() {calculateElmHeight();}, 100);
    
    window.addEventListener('resize', function() {
 			calculateElmHeight();
    });
    
    thermometer.parentNode.parentNode.classList.remove('mtl','xs-mts');
    thermometer.classList.add('hide-fully');
    
    thermWrap.classList.remove('mbm');
		thermWrap.classList.add('mbxl');
    var impactToggle = document.querySelector('a.optly-toggle-impact');
    impactToggle.addEventListener('click', function() {
    	if(impactArea.style.height == '0px') {
        impactArea.style.height = impactArea.dataset.clientHeight +'px';
        impactToggle.classList.add('-toggled');
      } else {
        impactArea.style.height = '0px';
        impactToggle.classList.remove('-toggled');
      }
    });
    var acceptedPayment = document.querySelector('[data-view="psf/combo/components/accepted_payment_types"]');
    /*acceptedPayment.parentNode.insertBefore(thermWrap, acceptedPayment);
    acceptedPayment.parentNode.classList.remove('txt-c');*/
    acceptedPayment.parentNode.classList.add('hide-fully');
    
    supporters.parentNode.classList.add('hide-fully');
    // supporters.querySelector('strong').classList.add('hide-fully');
    // supporters.innerHTML = 'Join the <b>221</b> people supporting women’s rights';
    
    // var promoteText = jsPromote.querySelector('p');
    // promoteText.innerText = 'Yes, I want to help women’s rights petitions win with ' + currency + '3 monthly';

    var newPromote = document.createElement('a');
    newPromote.href = 'https://www.change.org/c/womens-rights/subscribe?petition_id=' + window.changeTargetingData.petition.id;
    newPromote.classList = 'btn btn-full btn-big btn-action btn-pd';
    newPromote.innerHTML = '<p class="pbxxs">Yes, I want to help women’s rights petitions win with ' + currency + '3 monthly</p>';
    jsPromote.parentNode.insertBefore(newPromote, jsPromote);
    jsPromote.classList.add('hide-fully');
    newPromote.parentNode.className = 'mbs';
    
    newPromote.addEventListener('click', function(){
      if (!!window.App) {
        window.App.trackEvent('combo_causes_click');
      } else {
       	window.trackEvent('combo_causes_click'); 
      }
    });

  });
});

utils.waitForElement('.box-sm .txt-c h5').then(function(completeSupport) {
  var stepperCopy = document.createElement('p');
  stepperCopy.classList = 'mbs';
  stepperCopy.innerHTML = '<strong>You signed!</strong> Now chip in or share';
  completeSupport.classList.add('hide-fully');
  completeSupport.parentNode.insertBefore(stepperCopy, completeSupport);
});

utils.waitForElement('body.type-loaded').then(function(){
  utils.waitForElement('[data-view="psf/combo/components/promoter_count"] div[display="flex"]').then(function(community){
  	community.classList.add('hide-fully');
  });
  /*utils.waitForElement('[data-view="psf/combo/components/promoter_count"] div[display="flex"] > div > p').then(function(communityCopy){
    // var chippedIn = Math.ceil(window.changeTargetingData.petition.signatureCount.total * 0.012);
    communityCopy.innerHTML = '<b>221 people joined</b> to keep petitions like this one in the spotlight.';
  });*/
});
}}, {"value": "<style>body {\n\tbackground: #fffcf7;\n}\n\nh1.type-xl-mtn.hidden-xs {   \n\tfont-size: 2.44140625rem !important;\n}\n\n.btn-pd p {\n \tline-height: 1.2; \n}\n.visible-xs .optly-combo-feed .hide-overflow {\n    position: relative;\n}\n.visible-xs .optly-combo-feed .feed-wrap {\n    position: absolute;\n    bottom: 100%;\n    transition: all.4s ease-in-out;\n}\n.phxxl.ptl.xs-pam > .mtm.xs-mbs > .col-xs-12 > .ptxs.mbn {\n  padding-top: 0 !important; \n}\n\n@media screen and (max-width: 768px) {\n  .optly-impact-section .optly-impact-image {\n    width:100%;\n    max-height:175px;\n    overflow:hidden;\n  }\n  \n  .optly-impact-section .optly-impact-image img {\n    width: 100%;\n    height:100%;\n    object-fit: cover;\n  }\n  \n  .optly-impact-section p {\n  \tpadding-top: 13px;\n    padding-bottom: 8px;\n  }\n}\n\n\n@media screen and (min-width: 768px) {\n  .dcw {\n    width: 630px;\n  \tmargin-left: auto !important;\n    margin-right: auto !important;\n  }\n  \n  .psf-combo-buttons {\n    max-width: 310px;\n  }\n\n  .optly-impact-section {\n  \tdisplay: flex;\n    align-items: flex-start;\n  }\n  \n  .optly-impact-section .optly-impact-image {\n  \tmin-width: 180px;\n    height: 100px;\n  }\n  \n  .optly-impact-section .optly-impact-image img {\n    height: 100%;\n    width: 100%;\n    object-fit: cover;\n  }\n  \n  .optly-impact-section p {\n  \tpadding-left: 21px;\n  }\n}\n\n.optly-impact-area {\n  overflow:hidden;\n  font-size: 16px;\n  line-height: 24px;\n}\n\n.optly-impact-area-animated {\n    transition: height 0.5s;\n}\n\n.optly-toggle-impact.-toggled > .symbol {\n  transform: rotateX(-190deg);\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "0945A05E-00A2-42D0-883D-C1D52168D8BA"}]}], "name": "Variation #3"}], "audienceIds": null, "changes": null, "id": "20604030226", "integrationSettings": null}], "id": "20596460148", "weightDistributions": null, "name": "[niftic] - Combo - Membership Vertical Acquisitions \u2013 Women's Rights", "groupId": null, "commitId": "20685370852", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "771a541f45a84845be2c87234529a2ea", "value": function($){window.shareUsers = [
  {
    "amount": 300,
    "first_name": "Mark",
    "last_name": "Hampton",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 1000,
    "first_name": "Molly",
    "last_name": "Roberts",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 500,
    "first_name": "Jeremy",
    "last_name": "Hughes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Andy",
    "last_name": "Peterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 2000,
    "first_name": "Holland",
    "last_name": "Walker",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Brinley",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 300,
    "first_name": "Ioannis",
    "last_name": "Martin",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 2000,
    "first_name": "Brenda",
    "last_name": "Johnson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 500,
    "first_name": "Jorge",
    "last_name": "Lopez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 300,
    "first_name": "Bill",
    "last_name": "Turner",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  },
  {
    "amount": 2000,
    "first_name": "Chyanna",
    "last_name": "Kelly",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 300,
    "first_name": "Doug",
    "last_name": "Lee",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M06.png"
  },
  {
    "amount": 1000,
    "first_name": "Susannah",
    "last_name": "Collins",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 200,
    "first_name": "Andrew",
    "last_name": "Gray",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M07.png"
  },
  {
    "amount": 500,
    "first_name": "Juli",
    "last_name": "Roland",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 2500,
    "first_name": "Bernadette",
    "last_name": "Lynn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 1000,
    "first_name": "Angelica",
    "last_name": "Perez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Tamara",
    "last_name": "Ward",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 500,
    "first_name": "Leslie",
    "last_name": "Butler",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F14.png"
  },
  {
    "amount": 1500,
    "first_name": "Kevin",
    "last_name": "Wurz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M08.png"
  },
  {
    "amount": 2500,
    "first_name": "Amanda",
    "last_name": "A",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F15.png"
  },
  {
    "amount": 500,
    "first_name": "Karen",
    "last_name": "Flores",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F16.png"
  },
  {
    "amount": 300,
    "first_name": "Mary Jo",
    "last_name": "Long",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F17.png"
  },
  {
    "amount": 1000,
    "first_name": "Sean",
    "last_name": "Morris",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M09.png"
  },
  {
    "amount": 500,
    "first_name": "Christopher",
    "last_name": "Fultz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M10.png"
  },
  {
    "amount": 2000,
    "first_name": "Dori",
    "last_name": "Price",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F01.png"
  },
  {
    "amount": 300,
    "first_name": "Kellie",
    "last_name": "Patterson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F02.png"
  },
  {
    "amount": 300,
    "first_name": "Judy",
    "last_name": "Young",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F03.png"
  },
  {
    "amount": 5000,
    "first_name": "Ludwin",
    "last_name": "Alvarez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M11.png"
  },
  {
    "amount": 300,
    "first_name": "Jorge",
    "last_name": "Reyna",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M12.png"
  },
  {
    "amount": 2000,
    "first_name": "Brittany",
    "last_name": "Allen",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F04.png"
  },
  {
    "amount": 400,
    "first_name": "Arianne",
    "last_name": "James",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F05.png"
  },
  {
    "amount": 500,
    "first_name": "Ryan",
    "last_name": "Nelson",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M13.png"
  },
  {
    "amount": 2000,
    "first_name": "Emily",
    "last_name": "Wright",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F06.png"
  },
  {
    "amount": 2000,
    "first_name": "John",
    "last_name": "Sanders",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M14.png"
  },
  {
    "amount": 300,
    "first_name": "Haydee",
    "last_name": "Lewis",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F07.png"
  },
  {
    "amount": 500,
    "first_name": "Jamie",
    "last_name": "Diaz",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M15.png"
  },
  {
    "amount": 2000,
    "first_name": "Michael",
    "last_name": "Gibbs",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M16.png"
  },
  {
    "amount": 300,
    "first_name": "Kelly",
    "last_name": "Gomez",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F08.png"
  },
  {
    "amount": 1000,
    "first_name": "Katy",
    "last_name": "Boyd",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F09.png"
  },
  {
    "amount": 300,
    "first_name": "Elaine",
    "last_name": "Henry",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F10.png"
  },
  {
    "amount": 2000,
    "first_name": "Gary",
    "last_name": "Richards",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M01.png"
  },
  {
    "amount": 300,
    "first_name": "Harrison",
    "last_name": "Finn",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M02.png"
  },
  {
    "amount": 500,
    "first_name": "Lorri",
    "last_name": "Ramos",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F11.png"
  },
  {
    "amount": 2000,
    "first_name": "Frances",
    "last_name": "Dixon",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M03.png"
  },
  {
    "amount": 500,
    "first_name": "Deniz",
    "last_name": "Holmes",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M04.png"
  },
  {
    "amount": 500,
    "first_name": "Lisa",
    "last_name": "Shaw",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F12.png"
  },
  {
    "amount": 1000,
    "first_name": "Barbara",
    "last_name": "Daniels",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_F13.png"
  },
  {
    "amount": 5000,
    "first_name": "John",
    "last_name": "Black",
    "profile_image": "https://static.change.org/psf-experiments/N_UA_M05.png"
  }
];
}}]}, {"holdback": 1000, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20615500211"], "experiments": [{"weightDistributions": [{"entityId": "20598830379", "endOfRange": 1429}, {"entityId": "20586920203", "endOfRange": 2858}, {"entityId": "20611124311", "endOfRange": 4287}, {"entityId": "20616450041", "endOfRange": 5716}, {"entityId": "20574860324", "endOfRange": 7145}, {"entityId": "20617560306", "endOfRange": 8574}, {"entityId": "20614040290", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Combo - Copy Localized - FR", "bucketingStrategy": null, "variations": [{"id": "20598830379", "actions": [{"viewId": "20615500211", "changes": []}], "name": "Original"}, {"id": "20586920203", "actions": [{"viewId": "20615500211", "changes": [{"dependencies": [], "type": "custom_code", "id": "C22F4148-D053-41DD-9A8B-52283C73D981", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);
  
  headings.forEach(function(h){
    h.innerText = (!!fname ? fname + ', p' : 'P') + 'ouvez-vous contribuer à hauteur de ' + banditAmt + ' ' + currency + ' pour pousser cette pétition dans l’actualité ?';
  });
  
  subheading.innerHTML = '<div>Cela peut prendre un certain temps pour engager personnellement les gens sur les questions qui vous tiennent le plus à cœur, comme cette pétition. Mais Change.org peut vous aider à recueillir davantage de signatures en peu de temps. Soutenir la pétition permet à Change.org de :' +
 '<ul class="list-bulleted mvn mhxs" style="list-style-type: disc"><li><strong>Trouver des personnes partageant les mêmes idées que vous</strong> pour soutenir la pétition</li><li><strong>Leur diffuser cette pétition</strong> par email, sur les réseaux sociaux ou sur notre site.</li></ul>En peu de temps, des milliers d’autres signataires pourraient se joindre si tout le monde participe. Pouvez-vous aider à atteindre l’objectif de signature ?</div>';

});
}}, {"value": "<style>.optly-check-list {\n  padding-top: 8px;\n}\n\n.optly-check-list li {\n\tpadding-bottom:4px;\n  padding-top: 4px;\n  position: relative;\n  padding-left: 24px;\n}\n\n.optly-check-list li:before {\n  content:'';\n  display: inline-block;\n  height: 13px;\n  width: 15px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='14' viewBox='0 0 16 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.28438 13.1278C4.95104 13.1278 4.68021 13.0028 4.47188 12.7528L0.253125 7.87784C0.065625 7.62784 -0.0177083 7.36742 0.003125 7.09659C0.0239583 6.80492 0.148958 6.55492 0.378125 6.34659C0.607292 6.13826 0.867708 6.05492 1.15937 6.09659C1.45104 6.11742 1.70104 6.24242 1.90937 6.47159L5.28438 10.3778L13.7219 0.377841C13.9094 0.148674 14.149 0.0236742 14.4406 0.00284091C14.7323 -0.0179924 14.9927 0.0757576 15.2219 0.284091C15.451 0.471591 15.576 0.711174 15.5969 1.00284C15.6385 1.27367 15.5552 1.53409 15.3469 1.78409L6.09688 12.7528C5.88854 13.0028 5.61771 13.1278 5.28438 13.1278Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n  background-repeat: no-repeat;\n  position: absolute;\n  top:10px;\n  left: 0px;\n}\n\n.optly-outlet-list {\n\ttext-align: center;\n  margin-top: 20px;\n  margin-bottom: 10px\n}\n\n.optly-outlet-list li  { \n  display: inline-block; \n  text-align: center;\n  width:70px;\n  margin-right: 15px;\n  margin-left:15px;\n}\n\n@media (max-width: 325px) {\n  .optly-outlet-list li  { \n  \tmargin-right: 5px;\n\t\tmargin-left:5px;\n  }\n}\n\n.optly-outlet-list li span {\n\tfont-size: 12.3px;\n}\n.optly-outlet-list svg {\n  display: block;\n  margin: 0 auto;\n  margin-bottom:8px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "D099C5DF-F8B7-400D-BD57-41765BE66973"}]}], "name": "Variation #1"}, {"id": "20611124311", "actions": [{"viewId": "20615500211", "changes": [{"dependencies": [], "type": "custom_code", "id": "3512F972-3956-4864-973F-8A145A64DE0C", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);
  
  headings.forEach(function(h){
    h.innerText = (!!fname ? fname + ', p' : 'P') + 'ouvez-vous contribuer à hauteur de ' + banditAmt + ' ' + currency + ' pour pousser cette pétition dans l’actualité ?';
  });
  
  subheading.innerHTML = '<div><p>Convaincre votre communauté de soutenir les causes qui vous tiennent à cœur, cela prend du temps et de l’énergie.</p><p class="mtxs">Change.org peut vous aider à recueillir davantage de signatures en quelques heures. Votre contribution nous permet de :</p>' +
 '<ul class="list-bulleted mvn mhxs" style="list-style-type: disc"><li><strong>Trouver les personnes</strong> les plus à même de soutenir la pétition</li><li><strong>Leur diffuser cette pétition</strong> par email, sur notre site ou sur les réseaux sociaux.</li></ul>En peu de temps, des milliers d’autres signataires pourraient se joindre si tout le monde participe. Pouvez-vous aider à atteindre l’objectif de signature ?</div>';

});
}}, {"value": "<style>.optly-check-list {\n  padding-top: 8px;\n}\n\n.optly-check-list li {\n\tpadding-bottom:4px;\n  padding-top: 4px;\n  position: relative;\n  padding-left: 24px;\n}\n\n.optly-check-list li:before {\n  content:'';\n  display: inline-block;\n  height: 13px;\n  width: 15px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='14' viewBox='0 0 16 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.28438 13.1278C4.95104 13.1278 4.68021 13.0028 4.47188 12.7528L0.253125 7.87784C0.065625 7.62784 -0.0177083 7.36742 0.003125 7.09659C0.0239583 6.80492 0.148958 6.55492 0.378125 6.34659C0.607292 6.13826 0.867708 6.05492 1.15937 6.09659C1.45104 6.11742 1.70104 6.24242 1.90937 6.47159L5.28438 10.3778L13.7219 0.377841C13.9094 0.148674 14.149 0.0236742 14.4406 0.00284091C14.7323 -0.0179924 14.9927 0.0757576 15.2219 0.284091C15.451 0.471591 15.576 0.711174 15.5969 1.00284C15.6385 1.27367 15.5552 1.53409 15.3469 1.78409L6.09688 12.7528C5.88854 13.0028 5.61771 13.1278 5.28438 13.1278Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n  background-repeat: no-repeat;\n  position: absolute;\n  top:10px;\n  left: 0px;\n}\n\n.optly-outlet-list {\n\ttext-align: center;\n  margin-top: 20px;\n  margin-bottom: 10px\n}\n\n.optly-outlet-list li  { \n  display: inline-block; \n  text-align: center;\n  width:70px;\n  margin-right: 15px;\n  margin-left:15px;\n}\n\n@media (max-width: 325px) {\n  .optly-outlet-list li  { \n  \tmargin-right: 5px;\n\t\tmargin-left:5px;\n  }\n}\n\n.optly-outlet-list li span {\n\tfont-size: 12.3px;\n}\n.optly-outlet-list svg {\n  display: block;\n  margin: 0 auto;\n  margin-bottom:8px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "D24A6372-B876-436D-998B-CCC6597CDA30"}]}], "name": "Variation #2"}, {"id": "20616450041", "actions": [{"viewId": "20615500211", "changes": [{"dependencies": [], "type": "custom_code", "id": "9E9B3CD3-C3F3-417B-BD7B-B59AE39C664D", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  subheading.classList.add('optly-content-area');
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);

  headings.forEach(function(h){ 
    h.innerText = (!!fname ? fname + ', p' : 'P') + 'ouvez-vous contribuer à hauteur de ' + banditAmt + ' ' + currency + ' pour pousser cette pétition dans l’actualité ?';
  });
  subheading.innerHTML = 'Obtenir du soutien rapidement est crucial pour qu’une petition puisse avoir un impact.<br />' +  
	'Votre contribution peut aider Change.org à trouver de nouveaux potentiels soutiens en quelques heures seulement.<br />' + 
	'Contribuer nous permet de :' + '<ul class="optly-check-list mtxs"><li><strong>Promouvoir cette pétition</strong> sur Change.org</li><li><strong>Envoyer la pétition par email</strong> aux membres de notre communauté partageant les mêmes idées</li></ul><br />En peu de temps, des milliers d’autres signataires pourraient se joindre si tout le monde participe. Pouvez-vous aider à atteindre l’objectif de signature ?';
});
}}, {"value": "<style>.optly-content-area br {\n\tdisplay: block;\n  content: \"\";\n  height:14px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "A6471706-2542-4F25-B506-FB3162E59D6C"}]}], "name": "Variation #3"}, {"id": "20574860324", "actions": [{"viewId": "20615500211", "changes": [{"dependencies": [], "type": "custom_code", "id": "91014194-FD62-4EE3-86FF-663F7D0C5DF0", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  subheading.classList.add('optly-content-area');
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);

  headings.forEach(function(h){ 
    h.innerText = (!!fname ? fname + ', p' : 'P') + 'ouvez-vous contribuer à hauteur de ' + banditAmt + ' ' + currency + ' pour pousser cette pétition dans l’actualité ?';
  });
  subheading.innerHTML = 'Votre contribution nous permet de :' + '<ul class="optly-check-list mtxs"><li><strong>Promouvoir cette pétition</strong> sur Change.org</li><li><strong>Envoyer la pétition par email</strong> aux membres de notre communauté partageant les mêmes idées</li></ul><br />Contribuer sur Change.org est plus efficace pour trouver de nouveaux soutiens que les plateformes publicitaires traditionnelles comme Facebook.<br />En peu de temps, des milliers d’autres signataires pourraient se joindre si tout le monde participe. Pouvez-vous aider à atteindre l’objectif de signature ?';
});
}}, {"value": "<style>.optly-content-area br {\n\tdisplay: block;\n  content: \"\";\n  height:14px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "FA2FE473-B1CD-4117-B071-AFA52AB5F5F9"}]}], "name": "Variation #4"}, {"id": "20617560306", "actions": [{"viewId": "20615500211", "changes": [{"dependencies": [], "type": "custom_code", "id": "B0EA443C-854F-4EA1-93F2-84FFCF8F9F97", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);
  
  headings.forEach(function(h){
    h.innerText = (!!fname ? fname + ', p' : 'P') + 'ouvez-vous participer à hauteur de ' + banditAmt + ' ' + currency + ' pour pousser cette pétition dans l’actualité ?';
  });
  
  subheading.innerHTML = '<div>Cela peut prendre un certain temps pour engager personnellement les gens sur les questions qui vous tiennent le plus à cœur, comme cette pétition. Mais Change.org peut vous aider à recueillir davantage de signatures en peu de temps. Soutenir la pétition permet à Change.org de :' +
 '<ul class="list-bulleted mvn mhxs" style="list-style-type: disc"><li><strong>Trouver des personnes partageant les mêmes idées que vous</strong> pour soutenir la pétition</li><li><strong>Leur diffuser cette pétition</strong> par email, sur les réseaux sociaux ou sur notre site.</li></ul>En peu de temps, des milliers d’autres signataires pourraient se joindre si tout le monde participe. Pouvez-vous aider à atteindre l’objectif de signature ?</div>';

});
}}, {"value": "<style>.optly-check-list {\n  padding-top: 8px;\n}\n\n.optly-check-list li {\n\tpadding-bottom:4px;\n  padding-top: 4px;\n  position: relative;\n  padding-left: 24px;\n}\n\n.optly-check-list li:before {\n  content:'';\n  display: inline-block;\n  height: 13px;\n  width: 15px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='14' viewBox='0 0 16 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.28438 13.1278C4.95104 13.1278 4.68021 13.0028 4.47188 12.7528L0.253125 7.87784C0.065625 7.62784 -0.0177083 7.36742 0.003125 7.09659C0.0239583 6.80492 0.148958 6.55492 0.378125 6.34659C0.607292 6.13826 0.867708 6.05492 1.15937 6.09659C1.45104 6.11742 1.70104 6.24242 1.90937 6.47159L5.28438 10.3778L13.7219 0.377841C13.9094 0.148674 14.149 0.0236742 14.4406 0.00284091C14.7323 -0.0179924 14.9927 0.0757576 15.2219 0.284091C15.451 0.471591 15.576 0.711174 15.5969 1.00284C15.6385 1.27367 15.5552 1.53409 15.3469 1.78409L6.09688 12.7528C5.88854 13.0028 5.61771 13.1278 5.28438 13.1278Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n  background-repeat: no-repeat;\n  position: absolute;\n  top:10px;\n  left: 0px;\n}\n\n.optly-outlet-list {\n\ttext-align: center;\n  margin-top: 20px;\n  margin-bottom: 10px\n}\n\n.optly-outlet-list li  { \n  display: inline-block; \n  text-align: center;\n  width:70px;\n  margin-right: 15px;\n  margin-left:15px;\n}\n\n@media (max-width: 325px) {\n  .optly-outlet-list li  { \n  \tmargin-right: 5px;\n\t\tmargin-left:5px;\n  }\n}\n\n.optly-outlet-list li span {\n\tfont-size: 12.3px;\n}\n.optly-outlet-list svg {\n  display: block;\n  margin: 0 auto;\n  margin-bottom:8px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "B2085585-69C6-4871-B82F-4E95DF62DC7C"}]}], "name": "Variation #5"}, {"id": "20614040290", "actions": [{"viewId": "20615500211", "changes": [{"dependencies": [], "type": "custom_code", "id": "614B0EE6-2994-42EA-9DEF-CA2D4805B511", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);
  
  headings.forEach(function(h){
    h.innerText = (!!fname ? fname + ', p' : 'P') + 'ouvez-vous contribuer à hauteur de ' + banditAmt + ' ' + currency + ' pour rendre cette pétition plus visible?';
  });
  
  subheading.innerHTML = '<div>Cela peut prendre un certain temps pour engager personnellement les gens sur les questions qui vous tiennent le plus à cœur, comme cette pétition. Mais Change.org peut vous aider à recueillir davantage de signatures en peu de temps. Soutenir la pétition permet à Change.org de :' +
 '<ul class="list-bulleted mvn mhxs" style="list-style-type: disc"><li><strong>Trouver des personnes partageant les mêmes idées que vous</strong> pour soutenir la pétition</li><li><strong>Leur diffuser cette pétition</strong> par email, sur les réseaux sociaux ou sur notre site.</li></ul>En peu de temps, des milliers d’autres signataires pourraient se joindre si tout le monde participe. Pouvez-vous aider à atteindre l’objectif de signature ?</div>';

});
}}, {"value": "<style>.optly-check-list {\n  padding-top: 8px;\n}\n\n.optly-check-list li {\n\tpadding-bottom:4px;\n  padding-top: 4px;\n  position: relative;\n  padding-left: 24px;\n}\n\n.optly-check-list li:before {\n  content:'';\n  display: inline-block;\n  height: 13px;\n  width: 15px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='14' viewBox='0 0 16 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.28438 13.1278C4.95104 13.1278 4.68021 13.0028 4.47188 12.7528L0.253125 7.87784C0.065625 7.62784 -0.0177083 7.36742 0.003125 7.09659C0.0239583 6.80492 0.148958 6.55492 0.378125 6.34659C0.607292 6.13826 0.867708 6.05492 1.15937 6.09659C1.45104 6.11742 1.70104 6.24242 1.90937 6.47159L5.28438 10.3778L13.7219 0.377841C13.9094 0.148674 14.149 0.0236742 14.4406 0.00284091C14.7323 -0.0179924 14.9927 0.0757576 15.2219 0.284091C15.451 0.471591 15.576 0.711174 15.5969 1.00284C15.6385 1.27367 15.5552 1.53409 15.3469 1.78409L6.09688 12.7528C5.88854 13.0028 5.61771 13.1278 5.28438 13.1278Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n  background-repeat: no-repeat;\n  position: absolute;\n  top:10px;\n  left: 0px;\n}\n\n.optly-outlet-list {\n\ttext-align: center;\n  margin-top: 20px;\n  margin-bottom: 10px\n}\n\n.optly-outlet-list li  { \n  display: inline-block; \n  text-align: center;\n  width:70px;\n  margin-right: 15px;\n  margin-left:15px;\n}\n\n@media (max-width: 325px) {\n  .optly-outlet-list li  { \n  \tmargin-right: 5px;\n\t\tmargin-left:5px;\n  }\n}\n\n.optly-outlet-list li span {\n\tfont-size: 12.3px;\n}\n.optly-outlet-list svg {\n  display: block;\n  margin: 0 auto;\n  margin-bottom:8px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "1A88EF84-12AF-4961-9916-09681484EA50"}]}], "name": "Variation #6"}], "audienceIds": null, "changes": null, "id": "20617590266", "integrationSettings": null}], "id": "20598830378", "weightDistributions": null, "name": "[niftic] - Combo - Copy Localized - FR", "groupId": null, "commitId": "20649020030", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "d8c810e5b1304118a3fccaeb34f6f375", "value": function($){window["getCurrencySymbol"] = function(curName) {
	var curSymbols = {
    'USD': '$', // US Dollar
    'EUR': '€', // Euro
    'CRC': '₡', // Costa Rican Colón
    'GBP': '£', // British Pound Sterling
    'ILS': '₪', // Israeli New Sheqel
    'INR': '₹', // Indian Rupee
    'JPY': '¥', // Japanese Yen
    'KRW': '₩', // South Korean Won
    'NGN': '₦', // Nigerian Naira
    'PHP': '₱', // Philippine Peso
    'PLN': 'zł', // Polish Zloty
    'PYG': '₲', // Paraguayan Guarani
    'THB': '฿', // Thai Baht
    'UAH': '₴', // Ukrainian Hryvnia
    'VND': '₫', // Vietnamese Dong
  };
  var curSymbol = "$";
  if(curSymbols[curName] !== undefined) {
  	curSymbol = curSymbols[curName];
  }
  
  return curSymbol;
};
}}, {"value": "<style>.optly-check-list {\n  padding-top: 8px;\n}\n\n.optly-check-list li {\n\tpadding-bottom:4px;\n  padding-top: 4px;\n  position: relative;\n  padding-left: 24px;\n}\n\n.optly-check-list li:before {\n  content:'';\n  display: inline-block;\n  height: 13px;\n  width: 15px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='14' viewBox='0 0 16 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.28438 13.1278C4.95104 13.1278 4.68021 13.0028 4.47188 12.7528L0.253125 7.87784C0.065625 7.62784 -0.0177083 7.36742 0.003125 7.09659C0.0239583 6.80492 0.148958 6.55492 0.378125 6.34659C0.607292 6.13826 0.867708 6.05492 1.15937 6.09659C1.45104 6.11742 1.70104 6.24242 1.90937 6.47159L5.28438 10.3778L13.7219 0.377841C13.9094 0.148674 14.149 0.0236742 14.4406 0.00284091C14.7323 -0.0179924 14.9927 0.0757576 15.2219 0.284091C15.451 0.471591 15.576 0.711174 15.5969 1.00284C15.6385 1.27367 15.5552 1.53409 15.3469 1.78409L6.09688 12.7528C5.88854 13.0028 5.61771 13.1278 5.28438 13.1278Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n  background-repeat: no-repeat;\n  position: absolute;\n  top:10px;\n  left: 0px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "e31c77e3be3746cb89b43a1c28724e6d"}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20586160259"], "experiments": [{"weightDistributions": [{"entityId": "20625440081", "endOfRange": 3000}, {"entityId": "20631060123", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM Bob Ross Inc", "bucketingStrategy": null, "variations": [{"id": "20625440081", "actions": [{"viewId": "20586160259", "changes": []}], "name": "Original"}, {"id": "20631060123", "actions": [{"viewId": "20586160259", "changes": [{"dependencies": [], "type": "custom_code", "id": "c3b13e6babc44f4bba2b0446d6008526", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    // shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can hold Bob Ross Inc accountable by tweeting them now</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet Bob Ross Inc Now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = 'Viewers of the new Bob Ross documentary were shocked to learn that Ross’s family does not own the rights to his name. \n\n@BobRossOfficial when are you going to return Bob’s name and likeness to his son, as he intended?\n\nChange.org/BobRossInc';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "abf22585854b4a8dabf4b7a596c30e2c"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20625170149", "integrationSettings": null}], "id": "20604170138", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM Bob Ross Inc", "groupId": null, "commitId": "20621320255", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "41d1b42305bf4cf4827b77f5f3ca8ac9", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20588631369"], "experiments": [{"weightDistributions": [{"entityId": "20602154740", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Starter Dashboard - Organization Message", "bucketingStrategy": null, "variations": [{"id": "20604900033", "actions": [], "name": "Original"}, {"id": "20602154740", "actions": [{"viewId": "20588631369", "changes": [{"value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('#app.type-loaded #page > .bg-default').then(function() {
	createNotice();
});

utils.waitForElement('html[data-react-helmet="lang"]').then(function() {
  createNotice();
});
  
function createNotice() {
  if(document.querySelector('.optly-message-org')) {
    // exists
  } else {
    if (!!window.App) {
      window.App.trackEvent('organization_dashboard_banner_view');
    } else {
      window.trackEvent('organization_dashboard_banner_view');
    }
    var page = document.querySelector('#page > .bg-default');
    if(page) {
      var heading = page.querySelector('.bg-brighter > div');
      var headingHolder = page.querySelector('.bg-brighter');
      headingHolder.querySelector('hr').classList.add('hide-fully');
      var message = document.createElement('div');
      message.classList.add('optly-message-org');
      message.innerHTML ='<div class="'+ heading.className +'">As of September 15th 2021 Change.org will no longer support Organization accounts. <a href="https://www.change.org/l/us/important-message-for-organizations-using-change-org" target="_blank">Learn more</a></div><hr class="mvn">'; 
      headingHolder.appendChild(message);
    }
  }
}
}, "dependencies": [], "type": "custom_code", "id": "1e62b4a2d8ba45879a8799afdac2370e"}, {"value": "<style>.optly-message-org {\n\tbackground: #FFF9DF;\n  font-size: 16px;\n  line-height: 24px;\n}\n\n.hide-fully {\n  display: none !important\n}\n\n@media screen and (max-width: 768px) {\n  .optly-message-org {\n\t\tborder-top: 1px solid #dbd9db;\n  }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "1E8FA200-2117-4AD6-8DAA-E0A8CC951058"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20598004672", "integrationSettings": null}], "id": "20612965540", "weightDistributions": null, "name": "[niftic] - Starter Dashboard - Organization Message", "groupId": null, "commitId": "20586590310", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20608180227"], "experiments": [{"weightDistributions": [{"entityId": "20608520092", "endOfRange": 3000}, {"entityId": "20594530128", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Bob Ross Boycott", "bucketingStrategy": null, "variations": [{"id": "20608520092", "actions": [{"viewId": "20608180227", "changes": []}], "name": "Original"}, {"id": "20594530128", "actions": [{"viewId": "20608180227", "changes": [{"dependencies": [], "type": "custom_code", "id": "13908e1295dc4047ae8bc5f10b46e768", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    // shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can hold Bob Ross Inc accountable by tweeting them now</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet Bob Ross Inc Now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = 'Viewers of the new Bob Ross documentary were shocked to learn that Ross’s family does not own the rights to his name or legacy. \n\n@BobRossOfficial when are you going to respond to the boycott on Bob Ross Inc?\n\n#BoycottBRI\nChange.org/BoycottBRI';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "d433e958442d4d9e8fe33ee6b5ac5aaf"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20586190208", "integrationSettings": null}], "id": "20615560176", "weightDistributions": null, "name": "[niftic] - Share Initial - Bob Ross Boycott", "groupId": null, "commitId": "20604510103", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "eed02c0579b94b0c879cdf4f3700447b", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20623890149"], "experiments": [{"weightDistributions": [{"entityId": "20651140073", "endOfRange": 3333}, {"entityId": "20641190153", "endOfRange": 6666}, {"entityId": "20625931073", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - SuSi - Copy", "bucketingStrategy": null, "variations": [{"id": "20651140073", "actions": [{"viewId": "20623890149", "changes": []}], "name": "Original"}, {"id": "20641190153", "actions": [{"viewId": "20623890149", "changes": [{"dependencies": [], "type": "custom_code", "id": "f2d05aa49158460f95953bd9d72f838f", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-testid="membership-ask-heading"]').then(function(heading) {

  var numSigs = heading.querySelector('span').innerText.match(/(?=.)(0|([1-9](\d*|\d{0,2}(,\d{3})*)))?(\.\d*[1-9])?(?!\S)/g)[0];
  
  var uname = changeTargetingData.viewer.user.displayName;
  uname = uname.split(" ")[0];
  heading.innerHTML = 'You’re in a small group of people who use Change.org <span style="color: #ec2c22">' + uname + '</span>';
  
  var paragraphs = heading.nextElementSibling;
  paragraphs.firstElementChild.innerHTML = 'You’ve signed ' + numSigs + ' petitions. ' + paragraphs.firstElementChild.innerHTML;
  
});
}}]}], "name": "Variation #1"}, {"id": "20625931073", "actions": [{"viewId": "20623890149", "changes": [{"dependencies": [], "type": "custom_code", "id": "15B74E0B-613C-46BE-94D9-048A0931A685", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-testid="membership-ask-heading"]').then(function(heading) {

  var numSigs = heading.querySelector('span').innerText.match(/(?=.)(0|([1-9](\d*|\d{0,2}(,\d{3})*)))?(\.\d*[1-9])?(?!\S)/g)[0];
  
  var uname = changeTargetingData.viewer.user.displayName;
	uname = uname.split(" ")[0];
  heading.innerHTML = uname + ", you should be proud. That’s your <span style='color: rgb(236, 44, 34);'>" + ordinal_suffix_of(numSigs) + " signature</span> on Change.org!";
  
  // var paragraphs = heading.nextElementSibling;
  // paragraphs.firstElementChild.innerHTML = 'You’ve signed ' + numSigs + ' petitions. ' + paragraphs.firstElementChild.innerHTML;
  
});

function ordinal_suffix_of(i) {
    var j = i % 10,
        k = i % 100;
    if (j == 1 && k != 11) {
        return i + "st";
    }
    if (j == 2 && k != 12) {
        return i + "nd";
    }
    if (j == 3 && k != 13) {
        return i + "rd";
    }
    return i + "th";
}
}}]}], "name": "Variation #2"}], "audienceIds": null, "changes": null, "id": "20623890150", "integrationSettings": null}], "id": "20620780135", "weightDistributions": null, "name": "[niftic] - SuSi - Copy", "groupId": null, "commitId": "20632860303", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "fddf104a282e4ce79754f24a7839f697", "value": function($){window["getCurrencySymbol"] = function(curName) {
	var curSymbols = {
    'USD': '$', // US Dollar
    'EUR': '€', // Euro
    'CRC': '₡', // Costa Rican Colón
    'GBP': '£', // British Pound Sterling
    'ILS': '₪', // Israeli New Sheqel
    'INR': '₹', // Indian Rupee
    'JPY': '¥', // Japanese Yen
    'KRW': '₩', // South Korean Won
    'NGN': '₦', // Nigerian Naira
    'PHP': '₱', // Philippine Peso
    'PLN': 'zł', // Polish Zloty
    'PYG': '₲', // Paraguayan Guarani
    'THB': '฿', // Thai Baht
    'UAH': '₴', // Ukrainian Hryvnia
    'VND': '₫', // Vietnamese Dong
  };
  var curSymbol = "$";
  if(curSymbols[curName] !== undefined) {
  	curSymbol = curSymbols[curName];
  }
  
  return curSymbol;
};
}}, {"value": "<style>.optly-check-list {\n  padding-top: 8px;\n}\n\n.optly-check-list li {\n\tpadding-bottom:4px;\n  padding-top: 4px;\n  position: relative;\n  padding-left: 24px;\n}\n\n.optly-check-list li:before {\n  content:'';\n  display: inline-block;\n  height: 13px;\n  width: 15px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='14' viewBox='0 0 16 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.28438 13.1278C4.95104 13.1278 4.68021 13.0028 4.47188 12.7528L0.253125 7.87784C0.065625 7.62784 -0.0177083 7.36742 0.003125 7.09659C0.0239583 6.80492 0.148958 6.55492 0.378125 6.34659C0.607292 6.13826 0.867708 6.05492 1.15937 6.09659C1.45104 6.11742 1.70104 6.24242 1.90937 6.47159L5.28438 10.3778L13.7219 0.377841C13.9094 0.148674 14.149 0.0236742 14.4406 0.00284091C14.7323 -0.0179924 14.9927 0.0757576 15.2219 0.284091C15.451 0.471591 15.576 0.711174 15.5969 1.00284C15.6385 1.27367 15.5552 1.53409 15.3469 1.78409L6.09688 12.7528C5.88854 13.0028 5.61771 13.1278 5.28438 13.1278Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n  background-repeat: no-repeat;\n  position: absolute;\n  top:10px;\n  left: 0px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "5af3eb1d3f7d4af9b6e11f5edb260734"}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20636560963"], "experiments": [{"weightDistributions": [{"entityId": "20657440840", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Thank You - Copy R4 Survey", "bucketingStrategy": null, "variations": [{"id": "20650201041", "actions": [], "name": "Original"}, {"id": "20657440840", "actions": [{"viewId": "20636560963", "changes": [{"dependencies": [], "type": "custom_code", "id": "eb6edb8512494c84871a31b5ab038fdf", "value": function($){var utils = window.optimizely.get("utils");

utils.waitUntil(function() { return !!window.hj; }).then(function() {
  
    var variant = window.localStorage.getItem('combo_copy_r4');
  
    window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments);};
  	var eventTrigger = 'combo_copy_r4_' + variant;
    hj('event', eventTrigger);
  
  	window.localStorage.removeItem('combo_copy_r4');

});
}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20636621011", "integrationSettings": null}], "id": "20638881402", "weightDistributions": null, "name": "[niftic] - Thank You - Copy R4 Survey", "groupId": null, "commitId": "20624411423", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20637630064"], "experiments": [{"weightDistributions": [{"entityId": "20643560070", "endOfRange": 3333}, {"entityId": "20642170012", "endOfRange": 6666}, {"entityId": "20617950043", "endOfRange": 10000}], "audienceName": "Desktop only,Desktop Window Width", "name": "[fdn] - SAP - Share Optimisation on Desktop - ID", "bucketingStrategy": null, "variations": [{"id": "20643560070", "actions": [], "name": "Original"}, {"id": "20642170012", "actions": [{"viewId": "20637630064", "changes": [{"dependencies": [], "type": "custom_code", "id": "55578be3176c4859a8bc5965edb14531", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Asik! Petisimu udah terbit nih, " + firstName + "!";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('.col-lg-5 [data-view="petitions/components/starter_share_feed"]');
  if (!!feed) {
    var ff = document.createElement('div');
    ff.classList = 'feed-fade';
    feed.appendChild(ff);
  }
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = firstName + ", makin viral, makin sukses petisinya!";
  headingMobile.innerText = firstName + ", makin viral, makin sukses petisinya!";
  copy.innerHTML = "Yuk, sebarkan petisi kamu di medsos. <strong>Tag kami juga di @changeorg_id, supaya kami bantu promosiin!</strong>";
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Maaf, seya lewat dulu</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });
/*
  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/en-stepper-sap.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);
*/
  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});
}}, {"value": "<style>.psf-combo-embedded-card {\n \tmargin-top: 0; \n}\n\n.share-for-starters-custom .psf-combo-embedded-card {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n  background-color: rgba(0,0,0,0) !important;\n}\n\n.col-lg-5 [data-view=\"petitions/components/starter_share_feed\"] .hide-overflow {\n  height: 795px !important;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -40px;\n    margin-left: -40px;\n    margin-right: -40px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 320px;\n    max-width: 100%;\n    margin: auto;\n    padding: 10px 15px 20px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "3b74099ebb8245928fdcddb189eb0ab4"}]}], "name": "Variation #1"}, {"id": "20617950043", "actions": [{"viewId": "20637630064", "changes": [{"dependencies": [], "type": "custom_code", "id": "07b88cac7e334c48b2203c0385933988", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Selamat, " + firstName + '! ' + "Petisi kamu udah terbit.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('.col-lg-5 [data-view="petitions/components/starter_share_feed"]');
	/*var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);*/
 if(!!feed) {
   var ff = document.createElement('div');
   feed.appendChild(ff);
   ff.classList = 'feed-fade';
        feed.appendChild(ff);
   }
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l', 'mbs');
  copy.classList.remove('mbxl');
  
  heading.innerText = firstName + ", kalau gak terdengar, maka gak didukung!";
  headingMobile.innerText = firstName + ", kalau gak terdengar, maka gak didukung!";
  copy.innerHTML = "Hampir semua petisi yang menang pernah viral. Yuk, sebarkan petisimu di medsos!";
  
  var tip = document.createElement('p');
  tip.classList = 'txt-l type-l mbxl mtn';
  tip.innerHTML = '<b>💡 Tips buat kamu:</b> jangan cuma sebarkan petisimu di satu akun. Makin sering kamu sebarkan petisimu, makin besar juga kemungkinan petisinya menang!';
  
  copy.parentNode.insertBefore(tip, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Maaf, seya lewaat dulu</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });
/*
  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/sap-optimization-stepper-fade.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);
*/
  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
  it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.psf-combo-embedded-card {\n \tmargin-top: 0; \n}\n\n.share-for-starters-custom .psf-combo-embedded-card {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n  background-color: rgba(0,0,0,0) !important;\n}\n\n.col-lg-5 [data-view=\"petitions/components/starter_share_feed\"] .hide-overflow {\n  height: 865px !important;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -40px;\n    margin-left: -40px;\n    margin-right: -40px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 330px;\n    margin: 0 auto;\n    padding: 10px 15px 20px;\n  \tpadding-left: 0;\n  \tpadding-right: 0;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "e8aaff4cf6704d4bb082700d1f1d6708"}]}], "name": "Variation #4"}], "audienceIds": ["and", "11548860030", "14109270364"], "changes": null, "id": "20636200015", "integrationSettings": null}], "id": "20649000052", "weightDistributions": null, "name": "[fdn] - SAP - Share Optimisation on Desktop - ID", "groupId": null, "commitId": "20624780032", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20681190257"], "experiments": [{"weightDistributions": [{"entityId": "20687050216", "endOfRange": 2500}, {"entityId": "20665780436", "endOfRange": 5000}, {"entityId": "20675710542", "endOfRange": 7500}, {"entityId": "20683000486", "endOfRange": 10000}], "audienceName": "Mobile only,Screen.width Mobile", "name": "[fdn] - SAP - Share Optimisations on Mobile - EN", "bucketingStrategy": null, "variations": [{"id": "20687050216", "actions": [], "name": "Original"}, {"id": "20665780436", "actions": [{"viewId": "20681190257", "changes": [{"dependencies": [], "type": "custom_code", "id": "f1dd176fb998462fb96c8fe13c794e5c", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Congratulations, " + firstName + '! ' + "You've published your petition. Now, complete this step to get your first signatures.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('[data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = firstName + ", take the next step. Share now.";
  headingMobile.innerText = firstName + ", take the next step. Share now.";
  copy.innerHTML = "Successful petitions starters <strong>share at least 3 times on the very first day.</strong> Make sure everyone sees your petition.";
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Skip, I’m done sharing for now</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    shareList.classList.remove('mhxxxl');
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });
/*
  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/en-stepper-sap.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);
*/
  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});
}}, {"value": "<style>.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.row.match-height {\n  flex-direction: column;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .box-sm.xs-full-height.page-wrap > .bg-default {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -30px;\n    margin-left: -20px;\n    margin-right: -20px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 320px;\n    max-width: 100%;\n    margin: auto;\n    padding: 10px 15px 20px;\n}\n.page-wrap > .bg-brighter {\n    box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "8ddc273c475d4df5ac9dbfcd3eddffaa"}]}], "name": "Variation #1"}, {"id": "20675710542", "actions": [{"viewId": "20681190257", "changes": [{"dependencies": [], "type": "custom_code", "id": "5f3e2adb3cc54ed6898448431da20b52", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Congratulations, " + firstName + '! ' + "You've published your petition.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = firstName + ", it's time to get your first signatures!";
  headingMobile.innerText = firstName + ", it's time to get your first signatures!";
  copy.innerHTML = "Sharing <b>(and re-sharing!)</b> your petition on multiple channels is the best way to build momentum and get your petition noticed. ";
  
  var arrowEl = document.createElement('div');
  arrowEl.classList = 'share-arrow';
  arrowEl.innerHTML = '<span>Share on as many share channels as you can!</span>';
  
  copy.parentNode.insertBefore(arrowEl, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Skip, I’m done sharing for now</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    shareList.classList.remove('mhxxxl');
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
  });
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
  it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.row.match-height {\n  flex-direction: column;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "f12c403dbbca4359a6f946882c3cb7eb"}]}], "name": "Variation #2"}, {"id": "20683000486", "actions": [{"viewId": "20681190257", "changes": [{"dependencies": [], "type": "custom_code", "id": "376c121ed64a4ff7ae65d6c11abf29b9", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Congratulations, " + firstName + '! ' + "You've published your petition.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('[data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l', 'mbs');
  copy.classList.remove('mbxl');
  
  heading.innerText = firstName + ", it's time to get your first signatures!";
  headingMobile.innerText = firstName + ", it's time to get your first signatures!";
  copy.innerHTML = "Sharing <b>(and re-sharing!)</b> your petition on multiple channels is the best way to build momentum and get your petition noticed. ";
  
  var tip = document.createElement('p');
  tip.classList = 'txt-l type-l mbxl mtn';
  tip.innerHTML = '<b>💡 Winning tip:</b> share on as many different platforms as you can, and ask others to sign and share too!';
  
  copy.parentNode.insertBefore(tip, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Skip, I’m done sharing for now</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    shareList.classList.remove('mhxxxl');
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });
/*
  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/sap-optimization-stepper.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);
*/
  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
  it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.row.match-height {\n  flex-direction: column;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .box-sm.xs-full-height.page-wrap > .bg-default {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -30px;\n    margin-left: -20px;\n    margin-right: -20px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 100%;\n    max-width: 100%;\n    margin: auto;\n    padding: 10px 15px 20px;\n  padding-left: 0;\n  padding-right: 0;\n  margin-right: -10px;\n}\n.page-wrap > .bg-brighter {\n    box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "296ad5507dfe487c8ddd1359d23d9dc2"}]}], "name": "Variation #4"}], "audienceIds": ["and", "11487071591", "11800860209"], "changes": null, "id": "20679590170", "integrationSettings": null}], "id": "20658840287", "weightDistributions": null, "name": "[fdn] - SAP - Share Optimisations on Mobile - EN", "groupId": null, "commitId": "20670970336", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20681050393"], "experiments": [{"weightDistributions": [{"entityId": "20675660500", "endOfRange": 3333}, {"entityId": "20658160422", "endOfRange": 6666}, {"entityId": "20673590342", "endOfRange": 10000}], "audienceName": "Mobile only,Screen.width Mobile", "name": "[fdn] - SAP - Share Optimisation on Mobile - TH", "bucketingStrategy": null, "variations": [{"id": "20675660500", "actions": [], "name": "Original"}, {"id": "20658160422", "actions": [{"viewId": "20681050393", "changes": [{"dependencies": [], "type": "custom_code", "id": "13afbb95675a4413900e7109df94cac2", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "ยินดีด้วย แคมเปญพร้อมให้แชร์ต่อได้แล้ว! ";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = "ยิ่งคุณ " + firstName + " แชร์มาก เสียงยิ่งดัง!";
  headingMobile.innerText = "ยิ่งคุณ " + firstName + " แชร์มาก เสียงยิ่งดัง!";
  copy.innerHTML = "อย่าอายที่จะบอกให้คนอื่นๆ ช่วยแชร์แคมเปญนี้ ยิ่งถ้ามีโอกาสที่จะทำให้สื่อหรืออินฟลูเอนเซอร์พูดถึงแคมเปญของคุณได้ ก็จะยิ่งทำให้เสียงของแคมเปญนี้ดังขึ้น เป็นที่สนใจของสังคม และมีโอกาสสำเร็จมากขึ้น!";
  
  var arrowEl = document.createElement('div');
  arrowEl.classList = 'share-arrow';
  arrowEl.innerHTML = '<span>แชร์แคมเปญของคุณผ่านช่องทางต่างๆ</span>';
  
  copy.parentNode.insertBefore(arrowEl, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>ยังไม่สะดวก ขอข้ามไปก่อน</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    shareList.classList.remove('mhxxxl');
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
  });
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+name+'</strong>'+' ได้สร้างเรื่องรณรงค์ และแชร์แคมเปญต่อ จนมีผู้ร่วมลงชื่อสนับสนุนแล้ว '+sigs+' คน';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+name+'</strong>'+' ได้สร้างเรื่องรณรงค์ และแชร์แคมเปญต่อ จนมีผู้ร่วมลงชื่อสนับสนุนแล้ว '+sigs+' คน';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.row.match-height {\n  flex-direction: column;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "ba08a167b5fb4341823e226aab2703ac"}]}], "name": "Variation #1"}, {"id": "20673590342", "actions": [{"viewId": "20681050393", "changes": [{"dependencies": [], "type": "custom_code", "id": "f3fad2a4d5e642c9a4ce57a8327a8db4", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "แคมเปญพร้อมให้แชร์ต่อได้แล้ว!";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('[data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l', 'mbs');
  copy.classList.remove('mbxl');
  
  heading.innerText = "เริ่มแชร์แคมเปญ ชวนให้เพื่อนของคุณ " + firstName + " ให้ช่วยลงชื่อ!";
  headingMobile.innerText = "เริ่มแชร์แคมเปญ ชวนให้เพื่อนของคุณ " + firstName + " ให้ช่วยลงชื่อ!";
  copy.innerHTML = "แรงกระเพื่อมของแคมเปญนี้จะเกิดขึ้นได้ ก็ด้วยพลังของคนหลายคนช่วยกันแชร์ ลงชื่อ สร้างกระแสสังคมอย่างต่อเนื่อง";
  
  var tip = document.createElement('p');
  tip.classList = 'txt-l type-l mbxl mtn';
  tip.innerHTML = '<b>💡 เพิ่มโอกาสสำเร็จ:</b> เราแนะนำให้คุณ First_name แชร์แคมเปญนี้อย่างต่อเนื่อง ในหลายช่องทาง';
  
  copy.parentNode.insertBefore(tip, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>ยังไม่สะดวก ขอข้ามไปก่อน</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    shareList.classList.remove('mhxxxl');
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });
/*
  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/sap-optimization-stepper.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);
 */
  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');

});
}}, {"value": "<style>.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.row.match-height {\n  flex-direction: column;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .box-sm.xs-full-height.page-wrap > .bg-default {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -30px;\n    margin-left: -20px;\n    margin-right: -20px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 100%;\n    max-width: 100%;\n    margin: auto;\n    padding: 10px 15px 20px;\n  padding-left: 0;\n  padding-right: 0;\n  margin-right: -10px;\n}\n.page-wrap > .bg-brighter {\n    box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "41ddaa8055494dcba25ef511645a9270"}]}], "name": "Variation #4"}], "audienceIds": ["and", "11487071591", "11800860209"], "changes": null, "id": "20674250282", "integrationSettings": null}], "id": "20664190336", "weightDistributions": null, "name": "[fdn] - SAP - Share Optimisation on Mobile - TH", "groupId": null, "commitId": "20675350465", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20663960257"], "experiments": [{"weightDistributions": [{"entityId": "20663960258", "endOfRange": 2500}, {"entityId": "20663710325", "endOfRange": 5000}, {"entityId": "20654470464", "endOfRange": 7500}, {"entityId": "20675790270", "endOfRange": 10000}], "audienceName": "Desktop only,Desktop Window Width", "name": "[fdn] - SAP - Share Optimisations New on Desktop - EN", "bucketingStrategy": null, "variations": [{"id": "20663960258", "actions": [], "name": "Original"}, {"id": "20663710325", "actions": [{"viewId": "20663960257", "changes": [{"dependencies": [], "type": "custom_code", "id": "d75f8dc9327f4117aa0134d3b34624be", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Congratulations, " + firstName + " ! You've published your petition. Now, complete this step to get your first signatures.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('.col-lg-5 [data-view="petitions/components/starter_share_feed"]');
  if (!!feed) {
    var ff = document.createElement('div');
    ff.classList = 'feed-fade';
    feed.appendChild(ff);
  }
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = firstName + ", take the next step. Share now.";
  headingMobile.innerText = firstName + ", take the next step. Share now.";
  copy.innerHTML = "Successful petitions starters <strong>share at least 3 times on the very first day.</strong> Make sure everyone sees your petition.";
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Maaf, seya lewat dulu</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });
/*
  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/en-stepper-sap.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);
*/
  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});
}}, {"value": "<style>.psf-combo-embedded-card {\n \tmargin-top: 0; \n}\n\n.share-for-starters-custom .psf-combo-embedded-card {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n  background-color: rgba(0,0,0,0) !important;\n}\n\n.col-lg-5 [data-view=\"petitions/components/starter_share_feed\"] .hide-overflow {\n  height: 795px !important;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -40px;\n    margin-left: -40px;\n    margin-right: -40px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 320px;\n    max-width: 100%;\n    margin: auto;\n    padding: 10px 15px 20px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "b73a153bb6be4850befd8a93af1d508c"}]}], "name": "Variation #1"}, {"id": "20654470464", "actions": [{"viewId": "20663960257", "changes": [{"dependencies": [], "type": "custom_code", "id": "98f431aa8e074257ad79aa2ede8a660f", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Congratulations, " + firstName + '! ' + "You've published your petition.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('.col-lg-5 [data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = firstName + ", it's time to get your first signatures!";
  headingMobile.innerText = firstName + ", it's time to get your first signatures!";
  copy.innerHTML = "Sharing <b>(and re-sharing!)</b> your petition on multiple channels is the best way to build momentum and get your petition noticed. ";
  
  var arrowEl = document.createElement('div');
  arrowEl.classList = 'share-arrow';
  arrowEl.innerHTML = '<span>Share on as many share channels as you can!</span>';
  
  copy.parentNode.insertBefore(arrowEl, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Skip, I’m done sharing for now</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
  });
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
  it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.share-for-starters-custom .psf-combo-embedded-card {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n}\n\n.col-lg-5 [data-view=\"petitions/components/starter_share_feed\"] .hide-overflow {\n  height: 660px !important;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  max-width: 300px;\n  margin: 0 auto;\n  margin-bottom: 20px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "7ee72845128d4c31b9ecdacb050ce74b"}]}], "name": "Variation #2"}, {"id": "20675790270", "actions": [{"viewId": "20663960257", "changes": [{"dependencies": [], "type": "custom_code", "id": "347f2901c3b44f3692acccb308921a9b", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "Congratulations, " + firstName + '! ' + "You've published your petition.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('.col-lg-5 [data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l', 'mbs');
  copy.classList.remove('mbxl');
  
  heading.innerText = firstName + ", it's time to get your first signatures!";
  headingMobile.innerText = firstName + ", it's time to get your first signatures!";
  copy.innerHTML = "Sharing <b>(and re-sharing!)</b> your petition on multiple channels is the best way to build momentum and get your petition noticed. ";
  
  var tip = document.createElement('p');
  tip.classList = 'txt-l type-l mbxl mtn';
  tip.innerHTML = '<b>💡 Winning tip:</b> share on as many different platforms as you can, and ask others to sign and share too!';
  
  copy.parentNode.insertBefore(tip, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>Skip, I’m done sharing for now</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });
/*
  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/sap-optimization-stepper-fade.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);
*/
  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
  it.innerHTML = '<strong>'+name+'</strong>'+' shared '+shares+' times and got '+sigs+' signatures';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.psf-combo-embedded-card {\n \tmargin-top: 0; \n}\n\n.share-for-starters-custom .psf-combo-embedded-card {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n  background-color: rgba(0,0,0,0) !important;\n}\n\n.col-lg-5 [data-view=\"petitions/components/starter_share_feed\"] .hide-overflow {\n  height: 865px !important;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -40px;\n    margin-left: -40px;\n    margin-right: -40px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 330px;\n    margin: 0 auto;\n    padding: 10px 15px 20px;\n  \tpadding-left: 0;\n  \tpadding-right: 0;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "dbe2fcce2e4a42bcaf0be5d8044fa14d"}]}], "name": "Variation #4"}], "audienceIds": ["and", "11548860030", "14109270364"], "changes": null, "id": "20670060459", "integrationSettings": null}], "id": "20665580391", "weightDistributions": null, "name": "[fdn] - SAP - Share Optimisations New on Desktop - EN", "groupId": null, "commitId": "20671640178", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20681310461"], "experiments": [{"weightDistributions": [{"entityId": "20663760468", "endOfRange": 2500}, {"entityId": "20681310462", "endOfRange": 5000}, {"entityId": "20652920369", "endOfRange": 7500}, {"entityId": "20654470471", "endOfRange": 10000}], "audienceName": "Desktop only,Desktop Window Width", "name": "[fdn] - SAP - Share Optimisations New on Desktop - ES", "bucketingStrategy": null, "variations": [{"id": "20663760468", "actions": [], "name": "Original"}, {"id": "20681310462", "actions": [{"viewId": "20681310461", "changes": [{"dependencies": [], "type": "custom_code", "id": "8b7fbbdce37648d291ce74845af215c5", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = firstName + ' , tu petición se ha publicado con éxito. Da un paso más, ¡Compartirla es clave!';
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('.col-lg-5 [data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = "¡Logra 10 firmas en 24 horas!";
  headingMobile.innerText = "¡Logra 10 firmas en 24 horas!";
  copy.innerHTML = "En nuestra experiencia, una petición que logra 10 firmas en 24 horas tiene más posibilidad de viralizarse. <strong>Invierte 5 minutos y compártela en tus redes sociales.</strong>";
  
  var arrowEl = document.createElement('div');
  arrowEl.classList = 'share-arrow';
  arrowEl.innerHTML = '<span>Invierte 5 minutos y comparte en todos estos canales.</span>';
  
  copy.parentNode.insertBefore(arrowEl, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>No puedo compartir en este momento</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
  });
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+ name +'</strong>'+ ' creó y compartió una petición y logró '+sigs+' firmas';;
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
  it.innerHTML = '<strong>'+ name +'</strong>'+ ' creó y compartió una petición y logró '+sigs+' firmas';
  
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.share-for-starters-custom .psf-combo-embedded-card {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n}\n\n.col-lg-5 [data-view=\"petitions/components/starter_share_feed\"] .hide-overflow {\n  height: 660px !important;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  max-width: 300px;\n  margin: 0 auto;\n  margin-bottom: 20px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "219bf2ad33604a4c9faf4f7d23a046a7"}]}], "name": "Variation #2"}, {"id": "20652920369", "actions": [{"viewId": "20681310461", "changes": [{"dependencies": [], "type": "custom_code", "id": "4b19dc6ac2c44be8915874053cf62b40", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "¡Felicidades! " + firstName + ", tu petición se ha publicado. Completa este paso para lograr las primeras firmas.";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('.col-lg-5 [data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l', 'mbs');
  copy.classList.remove('mbxl');
  
  heading.innerText = "¡Las primeras 24 horas son clave!";
  headingMobile.innerText = "¡Las primeras 24 horas son clave!";
  copy.innerHTML = "En nuestra experiencia, una petición que logra 10 firmas en 24 horas tiene más posibilidad de viralizarse. <strong>Invierte 5 minutos y compártela en tus redes sociales.</strong>";
  
  var tip = document.createElement('p');
  tip.classList = 'txt-l type-l mbxl mtn';
  tip.innerHTML = '💡 Busca grupos o influencers en redes sociales que se interesen por temas como el de tu petición, y comparte tu publicación con ellos.';
  
  copy.parentNode.insertBefore(tip, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>No puedo compartir en este momento</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });
/*
  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/sap-optimization-stepper-fade.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);
*/
  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+ name +'</strong>'+ ' creó y compartió una petición y logró '+sigs+' firmas';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
  it.innerHTML = '<strong>'+ name +'</strong>'+ ' creó y compartió una petición y logró '+sigs+' firmas';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.psf-combo-embedded-card {\n \tmargin-top: 0; \n}\n\n.share-for-starters-custom .psf-combo-embedded-card {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n  background-color: rgba(0,0,0,0) !important;\n}\n\n.col-lg-5 [data-view=\"petitions/components/starter_share_feed\"] .hide-overflow {\n  height: 865px !important;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -40px;\n    margin-left: -40px;\n    margin-right: -40px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 330px;\n    margin: 0 auto;\n    padding: 10px 15px 20px;\n  \tpadding-left: 0;\n  \tpadding-right: 0;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "b72535a4df3144de9e5d48f03e1c0d47"}]}], "name": "Variation #4"}, {"id": "20654470471", "actions": [{"viewId": "20681310461", "changes": [{"dependencies": [], "type": "custom_code", "id": "78DF8474-BBC7-443E-B2A6-9170DBA8924C", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = 'Felicidades! Tu petición se ha publicado. Completa este paso para lograr las primeras firmas.';
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('.col-lg-5 [data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = firstName + ", da un paso más. ¡Comparte tu petición!";
  headingMobile.innerText = firstName + ", da un paso más. ¡Comparte tu petición!";
  copy.innerHTML = "Compartir tu petición en otros canales como Facebook o Whatsapp es la mejor forma de lograr que tu petición alcance a más personas y consiga más apoyo.";
  
  var arrowEl = document.createElement('div');
  arrowEl.classList = 'share-arrow';
  arrowEl.innerHTML = '<span>Invierte 5 minutos y comparte en todos estos canales.</span>';
  
  copy.parentNode.insertBefore(arrowEl, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>No puedo compartir en este momento</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
  });
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+ name +'</strong>'+ ' creó y compartió una petición y logró '+sigs+' firmas';;
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
  it.innerHTML = '<strong>'+ name +'</strong>'+ ' creó y compartió una petición y logró '+sigs+' firmas';
  
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.share-for-starters-custom .psf-combo-embedded-card {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n}\n\n.col-lg-5 [data-view=\"petitions/components/starter_share_feed\"] .hide-overflow {\n  height: 660px !important;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  max-width: 300px;\n  margin: 0 auto;\n  margin-bottom: 20px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "ED898C99-C206-4F01-930E-3FE5B70447CE"}]}], "name": "Variation #3 (duplicate 2)"}], "audienceIds": ["and", "11548860030", "14109270364"], "changes": null, "id": "20670890016", "integrationSettings": null}], "id": "20668040262", "weightDistributions": null, "name": "[fdn] - SAP - Share Optimisations New on Desktop - ES", "groupId": null, "commitId": "20689220300", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20670670349"], "experiments": [{"weightDistributions": [{"entityId": "20656800327", "endOfRange": 3333}, {"entityId": "20683170198", "endOfRange": 6666}, {"entityId": "20670600409", "endOfRange": 10000}], "audienceName": "Desktop only,Desktop Window Width", "name": "[fdn] - SAP - Share Optimisations New on Desktop - TH", "bucketingStrategy": null, "variations": [{"id": "20656800327", "actions": [], "name": "Original"}, {"id": "20683170198", "actions": [{"viewId": "20670670349", "changes": [{"dependencies": [], "type": "custom_code", "id": "5578880d01f44dec983cd80a828c7777", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = 'ยินดีด้วย แคมเปญพร้อมให้แชร์ต่อได้แล้ว!';
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('.col-lg-5 [data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = "ยิ่งคุณ " + firstName + " แชร์มาก เสียงยิ่งดัง!";
  headingMobile.innerText = "ยิ่งคุณ " + firstName + " แชร์มาก เสียงยิ่งดัง!";
  copy.innerHTML = "อย่าอายที่จะบอกให้คนอื่นๆ ช่วยแชร์แคมเปญนี้ ยิ่งถ้ามีโอกาสที่จะทำให้สื่อหรืออินฟลูเอนเซอร์พูดถึงแคมเปญของคุณได้ ก็จะยิ่งทำให้เสียงของแคมเปญนี้ดังขึ้น เป็นที่สนใจของสังคม และมีโอกาสสำเร็จมากขึ้น!";
  
  var arrowEl = document.createElement('div');
  arrowEl.classList = 'share-arrow';
  arrowEl.innerHTML = '<span>แชร์แคมเปญของคุณผ่านช่องทางต่างๆ</span>';
  
  copy.parentNode.insertBefore(arrowEl, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>ยังไม่สะดวก ขอข้ามไปก่อน</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
  });
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+ name +'</strong>'+ ' ได้สร้างเรื่องรณรงค์ และแชร์แคมเปญต่อ จนมีผู้ร่วมลงชื่อสนับสนุนแล้ว '+sigs+' คน';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+ name +'</strong>'+ ' ได้สร้างเรื่องรณรงค์ และแชร์แคมเปญต่อ จนมีผู้ร่วมลงชื่อสนับสนุนแล้ว '+sigs+' คน';
  
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.share-for-starters-custom .psf-combo-embedded-card {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n}\n\n.col-lg-5 [data-view=\"petitions/components/starter_share_feed\"] .hide-overflow {\n  height: 660px !important;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  max-width: 300px;\n  margin: 0 auto;\n  margin-bottom: 20px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "77e21aa83aaf4aa08e6227f57b9f7773"}]}], "name": "Variation #2"}, {"id": "20670600409", "actions": [{"viewId": "20670670349", "changes": [{"dependencies": [], "type": "custom_code", "id": "bfe5e86a28a3416dba6b10538a90e810", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = "แคมเปญพร้อมให้แชร์ต่อได้แล้ว!";
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('.col-lg-5 [data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l', 'mbs');
  copy.classList.remove('mbxl');
  
  heading.innerText = "เริ่มแชร์แคมเปญ ชวนให้เพื่อนของคุณ " + firstName + " ให้ช่วยลงชื่อ!";
  headingMobile.innerText = "เริ่มแชร์แคมเปญ ชวนให้เพื่อนของคุณ " + firstName + " ให้ช่วยลงชื่อ!";
  copy.innerHTML = "แรงกระเพื่อมของแคมเปญนี้จะเกิดขึ้นได้ ก็ด้วยพลังของคนหลายคนช่วยกันแชร์ ลงชื่อ สร้างกระแสสังคมอย่างต่อเนื่อง";
  
  var tip = document.createElement('p');
  tip.classList = 'txt-l type-l mbxl mtn';
  tip.innerHTML = '💡 <strong>เพิ่มโอกาสสำเร็จ:</strong> เราแนะนำให้คุณ ' + firstName + " แชร์แคมเปญนี้อย่างต่อเนื่อง ในหลายช่องทาง";
  
  copy.parentNode.insertBefore(tip, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
  skip.innerHTML = '<span>ยังไม่สะดวก ขอข้ามไปก่อน</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });
/*
  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/sap-optimization-stepper-fade.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);
*/
  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+ name +'</strong>'+ ' ได้สร้างเรื่องรณรงค์ และแชร์แคมเปญต่อ จนมีผู้ร่วมลงชื่อสนับสนุนแล้ว '+sigs+' คน';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+ name +'</strong>'+ ' ได้สร้างเรื่องรณรงค์ และแชร์แคมเปญต่อ จนมีผู้ร่วมลงชื่อสนับสนุนแล้ว '+sigs+' คน';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.psf-combo-embedded-card {\n \tmargin-top: 0; \n}\n\n.share-for-starters-custom .psf-combo-embedded-card {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n  background-color: rgba(0,0,0,0) !important;\n}\n\n.col-lg-5 [data-view=\"petitions/components/starter_share_feed\"] .hide-overflow {\n  height: 865px !important;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -40px;\n    margin-left: -40px;\n    margin-right: -40px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 330px;\n    margin: 0 auto;\n    padding: 10px 15px 20px;\n  \tpadding-left: 0;\n  \tpadding-right: 0;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "496b1cb73362406992060dd4b10a0148"}]}], "name": "Variation #4"}], "audienceIds": ["and", "11548860030", "14109270364"], "changes": null, "id": "20674000389", "integrationSettings": null}], "id": "20670560415", "weightDistributions": null, "name": "[fdn] - SAP - Share Optimisations New on Desktop - TH", "groupId": null, "commitId": "20670770511", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 7500, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20658190848"], "experiments": [{"weightDistributions": [{"entityId": "20654721207", "endOfRange": 909}, {"entityId": "20680370014", "endOfRange": 1818}, {"entityId": "20663540774", "endOfRange": 2727}, {"entityId": "20675271069", "endOfRange": 3636}, {"entityId": "20658110988", "endOfRange": 4545}, {"entityId": "20693190390", "endOfRange": 5454}, {"entityId": "20672350016", "endOfRange": 6363}, {"entityId": "20662080922", "endOfRange": 7272}, {"entityId": "20701250123", "endOfRange": 8181}, {"entityId": "20632800671", "endOfRange": 9090}, {"entityId": "20656390783", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Combo - Value Proposition Copy R4", "bucketingStrategy": null, "variations": [{"id": "20654721207", "actions": [{"viewId": "20658190848", "changes": []}], "name": "Original"}, {"id": "20680370014", "actions": [{"viewId": "20658190848", "changes": [{"dependencies": [], "type": "custom_code", "id": "cef76dd5b0bd49a0a428c102873a94d2", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);
  headings.forEach(function(h){
    h.innerText = (!!fname ? fname + ', c' : 'C') + 'an you chip in '+ currency + banditAmt+' to get this petition on the agenda?';
  });
  
  var svgs = {
  	'web' : '<svg width="51" height="41" viewBox="0 0 51 41" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M1.49505 3.28571L3.47525 1.57143L49.0198 1L51 3.28571V39.2857L49.5149 40.4286L2.9802 41L1 38.7143L1.49505 3.28571Z" fill="white"/> <path d="M47.8906 0H3.10935C1.3929 0 0 1.62465 0 3.62668V37.3733C0 39.3753 1.3929 41 3.10935 41H47.8906C49.6071 41 51 39.3753 51 37.3733V3.62668C51 1.62465 49.6071 0 47.8906 0ZM1.64516 3.62668C1.64516 2.68643 2.30323 1.91888 3.10935 1.91888H47.8906C48.6968 1.91888 49.3548 2.68643 49.3548 3.62668V7.52839H1.64516V3.62668ZM49.3548 37.3733C49.3548 38.3136 48.6968 39.0811 47.8906 39.0811H3.10935C2.30323 39.0811 1.64516 38.3136 1.64516 37.3733V9.44727H49.3548V37.3733Z" fill="#363135"/> <path d="M5.54151 3.87744C5.01893 3.87744 4.58667 4.3097 4.58667 4.83228C4.58667 5.35486 5.01893 5.78712 5.54151 5.78712C6.06409 5.78712 6.49635 5.35486 6.49635 4.83228C6.49635 4.30325 6.07054 3.87744 5.54151 3.87744Z" fill="#363135"/> <path d="M8.97406 5.78712C9.50141 5.78712 9.9289 5.35962 9.9289 4.83228C9.9289 4.30494 9.50141 3.87744 8.97406 3.87744C8.44672 3.87744 8.01923 4.30494 8.01923 4.83228C8.01923 5.35962 8.44672 5.78712 8.97406 5.78712Z" fill="#363135"/> <path d="M12.3998 5.78712C12.9272 5.78712 13.3547 5.35962 13.3547 4.83228C13.3547 4.30494 12.9272 3.87744 12.3998 3.87744C11.8725 3.87744 11.445 4.30494 11.445 4.83228C11.445 5.35962 11.8725 5.78712 12.3998 5.78712Z" fill="#363135"/> <path d="M25.519 21.7391C25.426 21.7391 25.3383 21.7597 25.2557 21.7907C25.235 21.7959 25.2144 21.8062 25.1937 21.8165C25.1111 21.8527 25.0337 21.8991 24.9665 21.9662C24.8994 22.0334 24.853 22.1108 24.8168 22.1934C24.8065 22.2141 24.7962 22.2347 24.791 22.2554C24.76 22.338 24.7394 22.4257 24.7394 22.5135V22.5187C24.7394 22.5858 24.7497 22.6477 24.7652 22.7148L26.851 30.4952C26.9439 30.8411 27.2588 31.0683 27.5996 31.0683C27.6667 31.0683 27.7338 31.058 27.8009 31.0425C28.214 30.9341 28.4566 30.5056 28.3482 30.0925L27.011 25.1052L33.0722 31.1664C33.2219 31.3161 33.4233 31.3936 33.6194 31.3936C33.8156 31.3936 34.017 31.3161 34.1667 31.1664C34.4713 30.8618 34.4713 30.3713 34.1667 30.0719L28.1055 24.0107L33.0928 25.3479C33.5059 25.4615 33.9292 25.2137 34.0428 24.8006C34.1512 24.3876 33.9086 23.9643 33.4955 23.8507L25.7152 21.7649C25.6532 21.7494 25.5861 21.7391 25.519 21.7391Z" fill="#363135"/> <path d="M25.5138 18.2232C25.9423 18.2232 26.2882 17.8773 26.2882 17.4488V14.7744C26.2882 14.3459 25.9423 14 25.5138 14C25.0853 14 24.7394 14.3459 24.7394 14.7744V17.4488C24.7394 17.8773 25.0853 18.2232 25.5138 18.2232Z" fill="#EC2C22"/> <path d="M17.7744 23.2879H20.4488C20.8773 23.2879 21.2232 22.942 21.2232 22.5135C21.2232 22.085 20.8773 21.7391 20.4488 21.7391H17.7744C17.3459 21.7391 17 22.085 17 22.5135C17 22.942 17.3511 23.2879 17.7744 23.2879Z" fill="#EC2C22"/> <path d="M21.3884 25.5441L19.4988 27.4337C19.1942 27.7383 19.1942 28.2288 19.4988 28.5282C19.6485 28.6779 19.8499 28.7554 20.046 28.7554C20.2422 28.7554 20.4436 28.6779 20.5933 28.5282L22.4829 26.6386C22.7875 26.334 22.7875 25.8435 22.4829 25.5441C22.1783 25.2447 21.6878 25.2447 21.3884 25.5441Z" fill="#EC2C22"/> <path d="M29.0965 19.7101C29.2926 19.7101 29.494 19.6326 29.6437 19.4829L31.5333 17.5933C31.8379 17.2887 31.8379 16.7983 31.5333 16.4988C31.2287 16.1942 30.7382 16.1942 30.4388 16.4988L28.5492 18.3884C28.2446 18.693 28.2446 19.1835 28.5492 19.4829C28.6989 19.6326 28.8951 19.7101 29.0965 19.7101Z" fill="#EC2C22"/> <path d="M21.3884 19.4829C21.5381 19.6326 21.7394 19.7101 21.9356 19.7101C22.1318 19.7101 22.3332 19.6326 22.4829 19.4829C22.7875 19.1783 22.7875 18.6878 22.4829 18.3884L20.5933 16.4988C20.2887 16.1942 19.7982 16.1942 19.4988 16.4988C19.1942 16.8034 19.1942 17.2939 19.4988 17.5933L21.3884 19.4829Z" fill="#EC2C22"/> </svg>',
    'email' : '<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M11.1738 8.25891L1.94331 16.032H0.97168V42.266H42.7518V16.032L33.5213 9.71636V2.91494L30.1206 0.97168H12.6313H11.1738V8.25891Z" fill="white"/> <path d="M43.716 42.7979V16.1175C43.716 16.1175 43.807 15.389 43.3517 15.0248L34.0637 8.83277V3.64238C34.0637 1.63907 32.4246 0 30.4213 0H13.3021C11.2988 0 9.65974 1.63907 9.65974 3.64238V8.74171L0.371671 15.1159C-0.083626 15.4801 0.00743342 16.1175 0.00743342 16.1175V42.7979C0.00743342 43.3443 0.462731 43.7085 0.918028 43.7085H42.8054C43.3517 43.7085 43.716 43.3443 43.716 42.7979ZM20.1316 30.3228L1.82862 41.1589V17.8477L20.1316 30.3228ZM21.8617 31.5066L39.4362 41.8873H4.28723L21.8617 31.5066ZM41.8948 17.8477V41.1589L23.5918 30.3228L41.8948 17.8477ZM41.4395 16.0265L34.1547 21.0347V11.0182L41.4395 16.0265ZM13.3021 1.82119H30.4213C31.4229 1.82119 32.2425 2.64072 32.2425 3.64238V22.2185L21.8617 29.3211L11.4809 22.2185V3.64238C11.4809 2.64072 12.3005 1.82119 13.3021 1.82119ZM9.65974 21.0347L2.28392 16.0265L9.65974 11.0182V21.0347Z" fill="#363135"/> <path d="M25.085 11.8996L25.0851 11.8992C25.146 11.6129 24.9616 11.3421 24.6824 11.2372L24.6827 11.2364L24.6701 11.2334C24.2729 11.1402 23.8279 11.0939 23.3841 11.0939C21.0948 11.0939 19.252 12.9176 19.252 15.2091C19.252 15.8246 19.4541 16.3418 19.8155 16.7055C20.1769 17.0692 20.6896 17.2711 21.2952 17.2711C21.8719 17.2711 22.485 17.017 22.9699 16.6747C23.3361 17.1948 23.9203 17.4536 24.5015 17.4536C26.3131 17.4536 28.0989 15.941 28.0992 13.1111C28.1237 11.5569 27.5674 10.252 26.5984 9.33607C25.6299 8.42061 24.256 7.9 22.6554 7.9C18.8122 7.9 15.9 10.7725 15.9 14.5703C15.9 17.7775 18.3289 20.1 21.6353 20.1C22.9117 20.1 23.9466 19.8691 24.9326 19.4061L24.947 19.3994L24.9586 19.3885C25.0668 19.2868 25.1512 19.1571 25.1871 19.0219C25.2231 18.887 25.2117 18.7398 25.1173 18.6186C24.9514 18.3636 24.6065 18.2361 24.3534 18.4079C23.5457 18.8082 22.6888 18.9875 21.6353 18.9875C20.4905 18.9875 19.3487 18.6065 18.4945 17.8655C17.6422 17.1262 17.0716 16.0246 17.0716 14.5703C17.0716 11.8315 18.9803 9.01255 22.6554 9.01255C23.9455 9.01255 25.025 9.42738 25.7811 10.1375C26.5367 10.8472 26.9762 11.8581 26.9762 13.0646C26.9762 15.2157 25.743 16.2954 24.5501 16.2954C24.4654 16.2954 24.315 16.275 24.1773 16.1905C24.0508 16.1128 23.929 15.9776 23.8792 15.7366C24.2607 15.2331 24.5015 14.6843 24.5996 14.1334L25.085 11.8996ZM23.4808 13.819L23.4807 13.819L23.48 13.8228C23.3866 14.3493 23.0928 14.9142 22.697 15.347C22.2998 15.7813 21.8145 16.0673 21.3438 16.0673C20.9552 16.0673 20.7469 15.9402 20.6302 15.7735C20.5085 15.5995 20.4722 15.3628 20.4722 15.1179C20.4722 13.4839 21.8372 12.1152 23.4327 12.1152C23.5896 12.1152 23.7324 12.1158 23.8484 12.1355L23.4808 13.819Z" fill="#EC2C22" stroke="#EC2C22" stroke-width="0.2"/> </svg>',
    'socials' : '<svg width="43" height="44" viewBox="0 0 43 44" fill="none" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" clip-rule="evenodd" d="M12.1937 20.7715C11.8185 20.7713 11.448 20.8545 11.1089 21.0149C10.7698 21.1753 10.4705 21.4091 10.2327 21.6992C9.99489 21.9894 9.82446 22.3287 9.73372 22.6927C9.64297 23.0568 9.63418 23.4364 9.70797 23.8042C9.73337 23.9317 9.72817 24.0634 9.69279 24.1884C9.6574 24.3135 9.59284 24.4283 9.50443 24.5236C9.416 24.6188 9.30624 24.6917 9.18417 24.7362C9.06209 24.7808 8.93118 24.7958 8.8022 24.7799C7.03645 24.5629 5.37191 23.8371 4.01144 22.6907C4.03689 23.185 4.20852 23.7106 4.58052 24.2608L5.1381 25.0854L4.22248 25.4754L4.04593 25.551C4.17732 25.7013 4.33498 25.8548 4.51154 26.0068C4.74756 26.2088 4.99724 26.3943 5.25881 26.5619L5.26784 26.5677H5.26866L6.53985 27.3388L5.20954 28.004C5.14385 28.0368 5.07815 28.0664 5.01246 28.0927C5.29851 28.3304 5.61363 28.5307 5.95024 28.6889L7.09169 29.2284L6.13583 30.0529C5.61438 30.5029 5.08965 30.8388 4.40889 31.0162C5.45297 31.5724 6.61823 31.8621 7.80119 31.8596C11.7478 31.8596 14.9257 28.7102 14.9257 24.8513V24.4243L15.2747 24.1787C15.82 23.796 16.2051 23.2787 16.4811 22.6866H14.7073L14.484 22.2185C14.2783 21.7854 13.954 21.4196 13.5487 21.1635C13.1435 20.9073 12.6739 20.7714 12.1945 20.7715H12.1937ZM2.93076 26.7664C2.85327 26.8551 2.79579 26.9595 2.76221 27.0725C2.72862 27.1854 2.71974 27.3042 2.73614 27.4209C2.82894 28.0787 3.22228 28.6453 3.65751 29.0781C3.77576 29.1956 3.90222 29.3081 4.03525 29.4157L3.97366 29.4321C3.57868 29.5306 3.04573 29.5512 2.15803 29.4649C1.9904 29.4485 1.82176 29.484 1.67498 29.5666C1.5282 29.6493 1.41038 29.775 1.3375 29.9269C1.26462 30.0788 1.2402 30.2494 1.26755 30.4156C1.29491 30.5818 1.37271 30.7356 1.49041 30.8561C2.31223 31.6961 3.29397 32.363 4.3777 32.8175C5.46144 33.2719 6.62521 33.5047 7.80036 33.502C12.4918 33.502 16.3398 29.8591 16.5574 25.2619C17.6168 24.3725 18.1464 23.1678 18.4322 22.0731C18.464 21.9516 18.4674 21.8244 18.4424 21.7014C18.4173 21.5783 18.3643 21.4627 18.2876 21.3633C18.2108 21.2639 18.1123 21.1835 17.9995 21.1281C17.8868 21.0728 17.7629 21.0441 17.6373 21.0441H15.705C15.2324 20.3102 14.5417 19.7428 13.73 19.4217C12.9183 19.1006 12.0264 19.0419 11.1796 19.2539C10.3329 19.4658 9.57378 19.9378 9.00905 20.6034C8.44431 21.2691 8.10231 22.0949 8.03112 22.965C6.5174 22.5709 5.16301 21.7174 4.15432 20.5218C4.06499 20.4162 3.95043 20.3349 3.82127 20.2853C3.6921 20.2358 3.55253 20.2197 3.41548 20.2386C3.27844 20.2574 3.14838 20.3106 3.03737 20.3931C2.92636 20.4756 2.838 20.5849 2.78049 20.7107C2.28285 21.7964 2.1876 23.0479 2.74271 24.3208L2.55056 24.4029C2.36667 24.4813 2.21768 24.624 2.13151 24.8044C2.04534 24.9847 2.02791 25.1903 2.08249 25.3826C2.23522 25.9181 2.57848 26.3911 2.92994 26.7664H2.93076Z" fill="#363135"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M23.9635 29.8909C23.9635 29.0592 24.2938 28.2617 24.8818 27.6737C25.4698 27.0856 26.2674 26.7553 27.0989 26.7553H36.5052C37.3367 26.7553 38.1342 27.0856 38.7222 27.6737C39.3102 28.2617 39.6406 29.0592 39.6406 29.8909V39.2976C39.6406 40.1292 39.3102 40.9267 38.7222 41.5148C38.1342 42.1028 37.3367 42.4331 36.5052 42.4331H27.0989C26.2674 42.4331 25.4698 42.1028 24.8818 41.5148C24.2938 40.9267 23.9635 40.1292 23.9635 39.2976V29.8909ZM27.0989 28.3231C26.6831 28.3231 26.2844 28.4882 25.9904 28.7823C25.6964 29.0763 25.5312 29.475 25.5312 29.8909V39.2976C25.5312 39.7134 25.6964 40.1121 25.9904 40.4062C26.2844 40.7002 26.6831 40.8654 27.0989 40.8654H31.802V35.3781H31.0182C30.8103 35.3781 30.6109 35.2955 30.4639 35.1485C30.3169 35.0015 30.2343 34.8021 30.2343 34.5942C30.2343 34.3863 30.3169 34.1869 30.4639 34.0399C30.6109 33.8929 30.8103 33.8103 31.0182 33.8103H31.802V32.6345C31.802 31.9068 32.0911 31.209 32.6056 30.6944C33.1201 30.1799 33.8179 29.8909 34.5455 29.8909H35.0158C35.2237 29.8909 35.4231 29.9734 35.5701 30.1204C35.7171 30.2675 35.7997 30.4668 35.7997 30.6747C35.7997 30.8826 35.7171 31.082 35.5701 31.229C35.4231 31.376 35.2237 31.4586 35.0158 31.4586H34.5455C34.3911 31.4586 34.2382 31.4891 34.0956 31.5481C33.9529 31.6072 33.8233 31.6938 33.7141 31.803C33.6049 31.9122 33.5183 32.0418 33.4593 32.1845C33.4002 32.3272 33.3698 32.4801 33.3698 32.6345V33.8103H35.0158C35.2237 33.8103 35.4231 33.8929 35.5701 34.0399C35.7171 34.1869 35.7997 34.3863 35.7997 34.5942C35.7997 34.8021 35.7171 35.0015 35.5701 35.1485C35.4231 35.2955 35.2237 35.3781 35.0158 35.3781H33.3698V40.8654H36.5052C36.9209 40.8654 37.3197 40.7002 37.6137 40.4062C37.9077 40.1121 38.0729 39.7134 38.0729 39.2976V29.8909C38.0729 29.475 37.9077 29.0763 37.6137 28.7823C37.3197 28.4882 36.9209 28.3231 36.5052 28.3231H27.0989Z" fill="#363135"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M26.1658 9.85421C26.1658 8.47369 26.5752 7.12417 27.3421 5.97631C28.1091 4.82845 29.1992 3.9338 30.4747 3.4055C31.7501 2.87719 33.1536 2.73897 34.5076 3.00829C35.8615 3.27762 37.1053 3.9424 38.0814 4.91858C39.0576 5.89475 39.7224 7.13848 39.9917 8.49247C40.2611 9.84646 40.1228 11.2499 39.5945 12.5254C39.0662 13.8008 38.1716 14.8909 37.0237 15.6579C35.8759 16.4249 34.5263 16.8342 33.1458 16.8342C31.8252 16.8366 30.5314 16.4623 29.416 15.7552C29.3168 15.6925 29.2053 15.6517 29.089 15.6357C28.9727 15.6197 28.8543 15.6288 28.7418 15.6624L26.3768 16.3678L27.2678 14.2845C27.3196 14.1632 27.3414 14.0312 27.3314 13.8997C27.3214 13.7682 27.2799 13.641 27.2103 13.529C26.5254 12.4258 26.1635 11.1527 26.1658 9.85421ZM33.1458 1.23181C28.3838 1.23181 24.5234 5.09218 24.5234 9.85421C24.5234 11.3635 24.9118 12.7842 25.5951 14.0201L24.1785 17.3327C24.1172 17.4762 24.0981 17.6342 24.1233 17.7882C24.1485 17.9422 24.2171 18.0858 24.3211 18.2022C24.425 18.3186 24.5599 18.403 24.7101 18.4455C24.8602 18.488 25.0194 18.4868 25.1689 18.4421L28.8642 17.3401C30.1674 18.0869 31.6438 18.4788 33.1458 18.4766C37.9078 18.4766 41.7682 14.6162 41.7682 9.85421C41.7682 5.09218 37.9078 1.23181 33.1458 1.23181ZM35.0288 11.646L33.9489 12.4064C33.354 12.0641 32.8077 11.6435 32.3246 11.1558C31.8061 10.6379 31.3577 10.0543 30.991 9.4198L31.6767 8.83759C31.8196 8.71637 31.9167 8.54993 31.952 8.3659C31.9872 8.18188 31.9585 7.99133 31.8705 7.82589L30.9968 6.18353C30.9386 6.07446 30.8566 5.97992 30.7569 5.90696C30.6571 5.834 30.5421 5.7845 30.4206 5.76216C30.299 5.73982 30.1739 5.74522 30.0548 5.77794C29.9356 5.81066 29.8253 5.86986 29.7322 5.95114L29.4727 6.17696C28.8494 6.72058 28.4807 7.61403 28.7862 8.51897C29.2777 9.95038 30.0909 11.25 31.1635 12.3177C32.6523 13.8065 34.1649 14.3929 35.0501 14.6212C35.7629 14.8043 36.4371 14.5588 36.9126 14.1712L37.3979 13.7753C37.5002 13.6919 37.5809 13.585 37.6331 13.4638C37.6854 13.3425 37.7076 13.2105 37.6979 13.0788C37.6882 12.9471 37.647 12.8197 37.5776 12.7074C37.5082 12.5951 37.4128 12.5011 37.2993 12.4335L35.9214 11.6124C35.7852 11.531 35.6283 11.491 35.4697 11.4969C35.3111 11.5029 35.1577 11.5547 35.028 11.646H35.0288Z" fill="#363135"/> </svg>'
  };
  
  subheading.innerHTML = '<div>It can take a while to personally engage people on the issues you care about most — like this petition. But Change.org can help you build more signatures in a fraction of the time. Chipping in allows Change.org to: <ul class="list-bulleted mvn mhxs" style="list-style-type: disc"><li><strong>Find like-minded people</strong> to support the petition</li><li><strong>Distribute this petition</strong> to them across email, social media and our website</li></ul>Within an hour, thousands more supporters could be added if everyone chips in. Can you help reach the signature goal?</div>';
  /*  '<ul class="optly-check-list mvn mhxs xs-mln">'+
    	'<li>Chipping in allows us to <strong>find the people</strong> who are most likely to care about the petition’s goal and <strong>show it</strong> to them via different channels:</li></ul>'+
		'<ul class="optly-outlet-list">' +
    '<li>' + svgs.web + '<span>Change.org</span></li>' +
    '<li>' + svgs.email + '<span>Email</span></li>' +
    '<li>' + svgs.socials + '<span>Social Media</span></li>' +
    '</ul>' +
    'Within an hour, thousands more supporters could be added if everyone chips in. Can you help reach the signature goal?'; */
  
  window.localStorage.setItem('combo_copy_r4', 'v1');
});
}}, {"value": "<style>.optly-check-list {\n  padding-top: 8px;\n}\n\n.optly-check-list li {\n\tpadding-bottom:4px;\n  padding-top: 4px;\n  position: relative;\n  padding-left: 24px;\n}\n\n.optly-check-list li:before {\n  content:'';\n  display: inline-block;\n  height: 13px;\n  width: 15px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='14' viewBox='0 0 16 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.28438 13.1278C4.95104 13.1278 4.68021 13.0028 4.47188 12.7528L0.253125 7.87784C0.065625 7.62784 -0.0177083 7.36742 0.003125 7.09659C0.0239583 6.80492 0.148958 6.55492 0.378125 6.34659C0.607292 6.13826 0.867708 6.05492 1.15937 6.09659C1.45104 6.11742 1.70104 6.24242 1.90937 6.47159L5.28438 10.3778L13.7219 0.377841C13.9094 0.148674 14.149 0.0236742 14.4406 0.00284091C14.7323 -0.0179924 14.9927 0.0757576 15.2219 0.284091C15.451 0.471591 15.576 0.711174 15.5969 1.00284C15.6385 1.27367 15.5552 1.53409 15.3469 1.78409L6.09688 12.7528C5.88854 13.0028 5.61771 13.1278 5.28438 13.1278Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n  background-repeat: no-repeat;\n  position: absolute;\n  top:10px;\n  left: 0px;\n}\n\n.optly-outlet-list {\n\ttext-align: center;\n  margin-top: 20px;\n  margin-bottom: 10px\n}\n\n.optly-outlet-list li  { \n  display: inline-block; \n  text-align: center;\n  width:70px;\n  margin-right: 15px;\n  margin-left:15px;\n}\n\n@media (max-width: 325px) {\n  .optly-outlet-list li  { \n  \tmargin-right: 5px;\n\t\tmargin-left:5px;\n  }\n}\n\n.optly-outlet-list li span {\n\tfont-size: 12.3px;\n}\n.optly-outlet-list svg {\n  display: block;\n  margin: 0 auto;\n  margin-bottom:8px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "ced1ceb2a50348d2a63bfc4165bb1da2"}]}], "name": "Variation #1"}, {"id": "20663540774", "actions": [{"viewId": "20658190848", "changes": [{"dependencies": [], "type": "custom_code", "id": "b6f19a7cbf314a9b9773a7d8bf19cbb5", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  subheading.classList.add('optly-content-area');
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);

  headings.forEach(function(h){ 
    h.innerText = (!!fname ? fname + ', c' : 'C') + 'an you chip in '+currency+banditAmt+' to get this petition on the agenda?';
  });
  subheading.innerHTML = 'Getting support in a timely manner is critical to a petition’s success.<br />' +  
	'Your contribution can help Change.org reach new potential supporters in a matter of hours.<br />' + 
	'Chipping in allows us to:' + '<ul class="optly-check-list mtxs"><li><strong>Promote the petition</strong> on Change.org</li><li><strong>Send the petition</strong> to like-minded community members via email</li></ul><br />Within an hour, thousands more supporters could be added if everyone chips in. Can you help reach the signature goal?';
  window.localStorage.setItem('combo_copy_r4', 'v2');
});
}}, {"value": "<style>.optly-content-area br {\n\tdisplay: block;\n  content: \"\";\n  height:14px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "be1c8ad4a7f94ed0909b0c46a195aa7e"}]}], "name": "Variation #2"}, {"id": "20675271069", "actions": [{"viewId": "20658190848", "changes": [{"dependencies": [], "type": "custom_code", "id": "00d9837799534c61a6d01227e2fa789d", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  subheading.classList.add('optly-content-area');
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);

  headings.forEach(function(h){ 
    h.innerText = (!!fname ? fname + ', c' : 'C') + 'an you chip in '+ currency + banditAmt+' to get this petition on the agenda?';
  });
  subheading.innerHTML = 'Your contribution allows us to:' + '<ul class="optly-check-list"><li><strong>Promote the petition</strong> on Change.org</li><li><strong>Send the petition</strong> to like-minded community members via email</li></ul>' + 
	'<div class="mvxs">Getting support in a timely manner is critical to a petition’s success - we can help petitions reach new potential supporters in a matter of hours. </div>' + 
	'<div>Thousands more supporters could be added if everyone chips in! Can you help reach the signature goal?</div>';
});
}}, {"value": "<style>.optly-content-area br {\n\tdisplay: block;\n  content: \"\";\n  height:7px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "89acbd54a8564dc38fe5c1f0c4abf0f4"}]}], "name": "Variation #4"}, {"id": "20658110988", "actions": [{"viewId": "20658190848", "changes": [{"dependencies": [], "type": "custom_code", "id": "a1435e0f710a4471ac05ef2653dcbefd", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  subheading.classList.add('optly-content-area');
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);

  headings.forEach(function(h){ 
    h.innerText = (!!fname ? fname + ', c' : 'C') + 'an you chip in '+ currency + banditAmt+' to get this petition on the agenda?';
  });
  subheading.innerHTML = 'Your contribution allows us to:' + '<ul class="optly-check-list"><li><strong>Promote the petition</strong> on Change.org</li><li><strong>Send the petition</strong> to like-minded community members via email</li></ul>' + 
	'<div class="mvxs">Chipping in on Change.org is a more effective way to find new potential supporters compared to advertising on other platforms like Facebook.</div>' + 
	'<div>Thousands more supporters could be added if everyone chips in! Can you help reach the signature goal?</div>';
  window.localStorage.setItem('combo_copy_r4', 'v5');
});
}}, {"value": "<style>.optly-check-list {\n  padding-top: 8px;\n}\n\n.optly-check-list li {\n\tpadding-bottom:4px;\n  padding-top: 4px;\n  position: relative;\n  padding-left: 24px;\n}\n\n.optly-check-list li:before {\n  content:'';\n  display: inline-block;\n  height: 13px;\n  width: 15px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='14' viewBox='0 0 16 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.28438 13.1278C4.95104 13.1278 4.68021 13.0028 4.47188 12.7528L0.253125 7.87784C0.065625 7.62784 -0.0177083 7.36742 0.003125 7.09659C0.0239583 6.80492 0.148958 6.55492 0.378125 6.34659C0.607292 6.13826 0.867708 6.05492 1.15937 6.09659C1.45104 6.11742 1.70104 6.24242 1.90937 6.47159L5.28438 10.3778L13.7219 0.377841C13.9094 0.148674 14.149 0.0236742 14.4406 0.00284091C14.7323 -0.0179924 14.9927 0.0757576 15.2219 0.284091C15.451 0.471591 15.576 0.711174 15.5969 1.00284C15.6385 1.27367 15.5552 1.53409 15.3469 1.78409L6.09688 12.7528C5.88854 13.0028 5.61771 13.1278 5.28438 13.1278Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n  background-repeat: no-repeat;\n  position: absolute;\n  top:10px;\n  left: 0px;\n}\n\n.optly-outlet-list {\n\ttext-align: center;\n  margin-top: 20px;\n  margin-bottom: 10px\n}\n\n.optly-outlet-list li  { \n  display: inline-block; \n  text-align: center;\n  width:80px;\n  margin-right: 30px;\n  margin-left: 30px;\n}\n\n@media (max-width: 335px) {\n  .optly-outlet-list li  { \n    width: 60px;\n  \tmargin-right: 5px;\n\t\tmargin-left: 5px;\n  }\n}\n\n.optly-outlet-list li span {\n\tfont-size: 14px;\n}\n.optly-outlet-list svg {\n  display: block;\n  margin: 0 auto;\n  margin-bottom:8px;\n  width:70px;\n  height: auto;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "41b2817b43954b6ab52f72e8360e35b4"}]}], "name": "Variation #5"}, {"id": "20693190390", "actions": [{"viewId": "20658190848", "changes": [{"dependencies": [], "type": "custom_code", "id": "e948df07b3a44842aee9a8988e3ee07c", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  subheading.classList.add('optly-content-area');
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);

  headings.forEach(function(h){ 
    h.innerText = (!!fname ? fname + ', c' : 'C') + 'an you chip in '+ currency + banditAmt+' to get this petition on the agenda?';
  });
  subheading.innerHTML = 'Your contribution allows us to:' + '<ul class="optly-check-list"><li><strong>Promote the petition</strong> on Change.org</li><li><strong>Send the petition</strong> to like-minded community members via email</li></ul>' + 
	'<div class="mvxs">Change.org is on average 30% more effective to find new supporters compared to other digital advertising platforms like Facebook.</div>' + 
	'<div>Thousands more supporters could be added if everyone chips in! Can you help reach the signature goal?</div>';
});
}}, {"value": "<style>.optly-check-list {\n  padding-top: 8px;\n}\n\n.optly-check-list li {\n\tpadding-bottom:4px;\n  padding-top: 4px;\n  position: relative;\n  padding-left: 24px;\n}\n\n.optly-check-list li:before {\n  content:'';\n  display: inline-block;\n  height: 13px;\n  width: 15px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='14' viewBox='0 0 16 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.28438 13.1278C4.95104 13.1278 4.68021 13.0028 4.47188 12.7528L0.253125 7.87784C0.065625 7.62784 -0.0177083 7.36742 0.003125 7.09659C0.0239583 6.80492 0.148958 6.55492 0.378125 6.34659C0.607292 6.13826 0.867708 6.05492 1.15937 6.09659C1.45104 6.11742 1.70104 6.24242 1.90937 6.47159L5.28438 10.3778L13.7219 0.377841C13.9094 0.148674 14.149 0.0236742 14.4406 0.00284091C14.7323 -0.0179924 14.9927 0.0757576 15.2219 0.284091C15.451 0.471591 15.576 0.711174 15.5969 1.00284C15.6385 1.27367 15.5552 1.53409 15.3469 1.78409L6.09688 12.7528C5.88854 13.0028 5.61771 13.1278 5.28438 13.1278Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n  background-repeat: no-repeat;\n  position: absolute;\n  top:10px;\n  left: 0px;\n}\n\n.optly-outlet-list {\n\ttext-align: center;\n  margin-top: 20px;\n  margin-bottom: 10px\n}\n\n.optly-outlet-list li  { \n  display: inline-block; \n  text-align: center;\n  width:80px;\n  margin-right: 15px;\n  margin-left:15px;\n}\n\n@media (max-width: 325px) {\n  .optly-outlet-list li  { \n  \tmargin-right: 5px;\n\t\tmargin-left:5px;\n  }\n}\n\n.optly-outlet-list li span {\n\tfont-size: 14px;\n}\n.optly-outlet-list svg {\n  display: block;\n  margin: 0 auto;\n  margin-bottom:8px;\n  width:70px;\n  height: auto;\n}\n\n.optly-promoteholder {\n\tdisplay: flex;\n  align-items:center;\n}\n\n.optly-promoteholder .optly-promoteholder-img {\n\tpadding:10px;\n  padding-left: 0px;\n  text-align:center;\n}\n\n.optly-promoteholder .optly-promoteholder-text {\n  padding: 10px;\n}\n\n.optly-promoteholder .optly-promoteholder-text strong {\n\tdisplay: block;\n}\n\n.optly-content-area br {\n\tdisplay: block;\n  content: \"\";\n  height:7px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "4c26c382b9a94c3898f965e35a6683a4"}]}], "name": "Variation #6"}, {"id": "20672350016", "actions": [{"viewId": "20658190848", "changes": [{"dependencies": [], "type": "custom_code", "id": "BD986C37-7C66-4745-A52F-EA867448CC20", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  subheading.classList.add('optly-content-area');
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);

  headings.forEach(function(h){ 
    h.innerText = 'Can you chip in '+currency+banditAmt+' to get this petition on the agenda?';
  });
  subheading.innerHTML = 'Getting support in a timely manner is critical to a petition’s success.<br />' +  
	'Your contribution can help Change.org reach new potential supporters in a matter of hours.<br />' + 
	'Chipping in allows us to:' + '<ul class="optly-check-list mtxs"><li><strong>Promote the petition</strong> on Change.org</li><li><strong>Send the petition</strong> to like-minded community members via email</li></ul><br />Within an hour, thousands more supporters could be added if everyone chips in. Can you help reach the signature goal?';
});
}}, {"value": "<style>.optly-content-area br {\n\tdisplay: block;\n  content: \"\";\n  height:14px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "AF88A11B-AD38-4A82-A262-4178422EAE05"}]}], "name": "Variation #3"}, {"id": "20662080922", "actions": [{"viewId": "20658190848", "changes": [{"dependencies": [], "type": "custom_code", "id": "7EACFF51-3702-40AC-8AB1-D15678786053", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  subheading.classList.add('optly-content-area');
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);

  headings.forEach(function(h){ 
    h.innerText = (!!fname ? fname + ', c' : 'C') + 'an you chip in '+ currency + banditAmt+' to get this petition on the agenda?';
  });
  subheading.innerHTML = '<div class="mvxs">Getting support in a timely manner is critical to a petition’s success.</div><div class="mbxs">Your contribution can help us reach new potential supporters in a matter of hours.</div><div class="mbxxs">Your contribution will be used by Change.org to:</div>' + '<ul class="optly-check-list mbxs"><li><strong>Promote the petition</strong> on Change.org</li><li><strong>Send the petition</strong> to like-minded community members via email</li></ul>' + 
	'<div>Within an hour, thousands more supporters could be added if everyone chips in. Can you help reach the signature goal?</div>';
});
}}, {"value": "<style>.optly-check-list {\n  padding-top: 8px;\n}\n\n.optly-check-list li {\n\tpadding-bottom:4px;\n  padding-top: 4px;\n  position: relative;\n  padding-left: 24px;\n}\n\n.optly-check-list li:before {\n  content:'';\n  display: inline-block;\n  height: 13px;\n  width: 15px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='14' viewBox='0 0 16 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.28438 13.1278C4.95104 13.1278 4.68021 13.0028 4.47188 12.7528L0.253125 7.87784C0.065625 7.62784 -0.0177083 7.36742 0.003125 7.09659C0.0239583 6.80492 0.148958 6.55492 0.378125 6.34659C0.607292 6.13826 0.867708 6.05492 1.15937 6.09659C1.45104 6.11742 1.70104 6.24242 1.90937 6.47159L5.28438 10.3778L13.7219 0.377841C13.9094 0.148674 14.149 0.0236742 14.4406 0.00284091C14.7323 -0.0179924 14.9927 0.0757576 15.2219 0.284091C15.451 0.471591 15.576 0.711174 15.5969 1.00284C15.6385 1.27367 15.5552 1.53409 15.3469 1.78409L6.09688 12.7528C5.88854 13.0028 5.61771 13.1278 5.28438 13.1278Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n  background-repeat: no-repeat;\n  position: absolute;\n  top:10px;\n  left: 0px;\n}\n\n.optly-outlet-list {\n\ttext-align: center;\n  margin-top: 20px;\n  margin-bottom: 10px\n}\n\n.optly-outlet-list li  { \n  display: inline-block; \n  text-align: center;\n  width:80px;\n  margin-right: 15px;\n  margin-left:15px;\n}\n\n@media (max-width: 325px) {\n  .optly-outlet-list li  { \n  \tmargin-right: 5px;\n\t\tmargin-left:5px;\n  }\n}\n\n.optly-outlet-list li span {\n\tfont-size: 14px;\n}\n.optly-outlet-list svg {\n  display: block;\n  margin: 0 auto;\n  margin-bottom:8px;\n  width:70px;\n  height: auto;\n}\n\n.optly-promoteholder {\n\tdisplay: flex;\n  align-items:center;\n}\n\n.optly-promoteholder .optly-promoteholder-img {\n\tpadding:10px;\n  padding-left: 0px;\n  text-align:center;\n}\n\n.optly-promoteholder .optly-promoteholder-text {\n  padding: 10px;\n}\n\n.optly-promoteholder .optly-promoteholder-text strong {\n\tdisplay: block;\n}\n\n.optly-content-area br {\n\tdisplay: block;\n  content: \"\";\n  height:7px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "A5F9C851-9733-434D-AA07-187C6F0C090A"}]}], "name": "Variation #7"}, {"id": "20701250123", "actions": [{"viewId": "20658190848", "changes": [{"dependencies": [], "type": "custom_code", "id": "846208C2-31C0-4EB7-A51F-9892999B8420", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  subheading.classList.add('optly-content-area');
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);

  headings.forEach(function(h){ 
    h.innerText = (!!fname ? fname + ', c' : 'C') + 'an you chip in '+ currency + banditAmt+' to get this petition on the agenda?';
  });
  subheading.innerHTML = '<div class="mvxs">Getting support in a timely manner is critical to a petition’s success.</div><div class="mbxs">Sharing the petition with your friends and family is important, but chipping in will help this petition find more potential supporters, faster.</div><div class="mbxxs">Chipping in allows us to:</div>' + '<ul class="optly-check-list mbxs"><li><strong>Promote the petition</strong> on Change.org</li><li><strong>Send the petition</strong> to like-minded community members via email</li></ul>' + 
	'<div>Within an hour, thousands more supporters could be added if everyone chips in. Can you help reach the signature goal?</div>';
});
}}, {"value": "<style>.optly-check-list {\n  padding-top: 8px;\n}\n\n.optly-check-list li {\n\tpadding-bottom:4px;\n  padding-top: 4px;\n  position: relative;\n  padding-left: 24px;\n}\n\n.optly-check-list li:before {\n  content:'';\n  display: inline-block;\n  height: 13px;\n  width: 15px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='14' viewBox='0 0 16 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.28438 13.1278C4.95104 13.1278 4.68021 13.0028 4.47188 12.7528L0.253125 7.87784C0.065625 7.62784 -0.0177083 7.36742 0.003125 7.09659C0.0239583 6.80492 0.148958 6.55492 0.378125 6.34659C0.607292 6.13826 0.867708 6.05492 1.15937 6.09659C1.45104 6.11742 1.70104 6.24242 1.90937 6.47159L5.28438 10.3778L13.7219 0.377841C13.9094 0.148674 14.149 0.0236742 14.4406 0.00284091C14.7323 -0.0179924 14.9927 0.0757576 15.2219 0.284091C15.451 0.471591 15.576 0.711174 15.5969 1.00284C15.6385 1.27367 15.5552 1.53409 15.3469 1.78409L6.09688 12.7528C5.88854 13.0028 5.61771 13.1278 5.28438 13.1278Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n  background-repeat: no-repeat;\n  position: absolute;\n  top:10px;\n  left: 0px;\n}\n\n.optly-outlet-list {\n\ttext-align: center;\n  margin-top: 20px;\n  margin-bottom: 10px\n}\n\n.optly-outlet-list li  { \n  display: inline-block; \n  text-align: center;\n  width:80px;\n  margin-right: 15px;\n  margin-left:15px;\n}\n\n@media (max-width: 325px) {\n  .optly-outlet-list li  { \n  \tmargin-right: 5px;\n\t\tmargin-left:5px;\n  }\n}\n\n.optly-outlet-list li span {\n\tfont-size: 14px;\n}\n.optly-outlet-list svg {\n  display: block;\n  margin: 0 auto;\n  margin-bottom:8px;\n  width:70px;\n  height: auto;\n}\n\n.optly-promoteholder {\n\tdisplay: flex;\n  align-items:center;\n}\n\n.optly-promoteholder .optly-promoteholder-img {\n\tpadding:10px;\n  padding-left: 0px;\n  text-align:center;\n}\n\n.optly-promoteholder .optly-promoteholder-text {\n  padding: 10px;\n}\n\n.optly-promoteholder .optly-promoteholder-text strong {\n\tdisplay: block;\n}\n\n.optly-content-area br {\n\tdisplay: block;\n  content: \"\";\n  height:7px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "27477EB9-2528-489E-8FDD-1A3E415715BA"}]}], "name": "Variation #8"}, {"id": "20632800671", "actions": [{"viewId": "20658190848", "changes": [{"dependencies": [], "type": "custom_code", "id": "729EB175-3FE1-4129-8DCF-80300A55C5BD", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  subheading.classList.add('optly-content-area');
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);

  headings.forEach(function(h){ 
    h.innerText = (!!fname ? fname + ', c' : 'C') + 'an you chip in '+ currency + banditAmt+' to get this petition on the agenda?';
  });
  subheading.innerHTML = '<div class="mbxxs">Your contribution allows us to:</div>' + '<ul class="optly-check-list mbxs"><li><strong>Promote the petition</strong> on Change.org</li><li><strong>Send the petition</strong> to like-minded community members via email</li></ul>' + 
	'<div class="mbxs"><b>Why does it matter?</b></div>' +
  '<div class="mbxs">Getting support in a timely manner is critical to a petition’s success. </div>' +
  '<div>Chipping in enables Change.org to reach hundreds more potential supporters in just a few hours!</div>';
});
}}, {"value": "<style>.optly-check-list {\n  padding-top: 8px;\n}\n\n.optly-check-list li {\n\tpadding-bottom:4px;\n  padding-top: 4px;\n  position: relative;\n  padding-left: 24px;\n}\n\n.optly-check-list li:before {\n  content:'';\n  display: inline-block;\n  height: 13px;\n  width: 15px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='14' viewBox='0 0 16 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.28438 13.1278C4.95104 13.1278 4.68021 13.0028 4.47188 12.7528L0.253125 7.87784C0.065625 7.62784 -0.0177083 7.36742 0.003125 7.09659C0.0239583 6.80492 0.148958 6.55492 0.378125 6.34659C0.607292 6.13826 0.867708 6.05492 1.15937 6.09659C1.45104 6.11742 1.70104 6.24242 1.90937 6.47159L5.28438 10.3778L13.7219 0.377841C13.9094 0.148674 14.149 0.0236742 14.4406 0.00284091C14.7323 -0.0179924 14.9927 0.0757576 15.2219 0.284091C15.451 0.471591 15.576 0.711174 15.5969 1.00284C15.6385 1.27367 15.5552 1.53409 15.3469 1.78409L6.09688 12.7528C5.88854 13.0028 5.61771 13.1278 5.28438 13.1278Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n  background-repeat: no-repeat;\n  position: absolute;\n  top:10px;\n  left: 0px;\n}\n\n.optly-outlet-list {\n\ttext-align: center;\n  margin-top: 20px;\n  margin-bottom: 10px\n}\n\n.optly-outlet-list li  { \n  display: inline-block; \n  text-align: center;\n  width:80px;\n  margin-right: 15px;\n  margin-left:15px;\n}\n\n@media (max-width: 325px) {\n  .optly-outlet-list li  { \n  \tmargin-right: 5px;\n\t\tmargin-left:5px;\n  }\n}\n\n.optly-outlet-list li span {\n\tfont-size: 14px;\n}\n.optly-outlet-list svg {\n  display: block;\n  margin: 0 auto;\n  margin-bottom:8px;\n  width:70px;\n  height: auto;\n}\n\n.optly-promoteholder {\n\tdisplay: flex;\n  align-items:center;\n}\n\n.optly-promoteholder .optly-promoteholder-img {\n\tpadding:10px;\n  padding-left: 0px;\n  text-align:center;\n}\n\n.optly-promoteholder .optly-promoteholder-text {\n  padding: 10px;\n}\n\n.optly-promoteholder .optly-promoteholder-text strong {\n\tdisplay: block;\n}\n\n.optly-content-area br {\n\tdisplay: block;\n  content: \"\";\n  height:7px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "3A95955F-E5E0-4021-9A60-0DFD766CE4C9"}]}], "name": "Variation #9"}, {"id": "20656390783", "actions": [{"viewId": "20658190848", "changes": [{"dependencies": [], "type": "custom_code", "id": "67FE3CFA-FB33-4484-8A42-467EF9CF23C5", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.type-loaded .bg-brighter.psf-combo-shaded-round-border').then(function(combo){
  var fname = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
  var headings = combo.querySelectorAll('h1');
  var subheadings = combo.querySelectorAll('.phxxl.ptl.xs-pam > div');
  var subheading = subheadings[0];
  subheading.classList.add('optly-content-area');
  var jsPromote = document.querySelector('.js-promote');
	var promoteTxt = jsPromote.innerText;
  var banditAmt = promoteTxt.match(/\d+/g)[0];
  var currency = window.getCurrencySymbol(document.querySelector('div[data-view="psf/combo/components/combo_feed"]').dataset.currency);

  headings.forEach(function(h){ 
    h.innerText = (!!fname ? fname + ', c' : 'C') + 'an you chip in '+ currency + banditAmt+' to get this petition on the agenda?';
  });
  subheading.innerHTML = '<div class="mbxs">Signing a petition is only the first step — there’s still so much you can do to help this petition have an impact.</div><div class="mbxs">Sharing the petition with your friends and family is important. But <b>chipping in will help this petition find more potential supporters, faster.</b></div><div class="mbxxs">Your contribution allows us to:</div>' + '<ul class="optly-check-list mbxs"><li><strong>Promote the petition</strong> on Change.org</li><li><strong>Send the petition</strong> to like-minded community members via email</li></ul>' + 
  '<div>Can you help reach the signature goal?</div>';
});
}}, {"value": "<style>.optly-check-list {\n  padding-top: 8px;\n}\n\n.optly-check-list li {\n\tpadding-bottom:4px;\n  padding-top: 4px;\n  position: relative;\n  padding-left: 24px;\n}\n\n.optly-check-list li:before {\n  content:'';\n  display: inline-block;\n  height: 13px;\n  width: 15px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='14' viewBox='0 0 16 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.28438 13.1278C4.95104 13.1278 4.68021 13.0028 4.47188 12.7528L0.253125 7.87784C0.065625 7.62784 -0.0177083 7.36742 0.003125 7.09659C0.0239583 6.80492 0.148958 6.55492 0.378125 6.34659C0.607292 6.13826 0.867708 6.05492 1.15937 6.09659C1.45104 6.11742 1.70104 6.24242 1.90937 6.47159L5.28438 10.3778L13.7219 0.377841C13.9094 0.148674 14.149 0.0236742 14.4406 0.00284091C14.7323 -0.0179924 14.9927 0.0757576 15.2219 0.284091C15.451 0.471591 15.576 0.711174 15.5969 1.00284C15.6385 1.27367 15.5552 1.53409 15.3469 1.78409L6.09688 12.7528C5.88854 13.0028 5.61771 13.1278 5.28438 13.1278Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n  background-repeat: no-repeat;\n  position: absolute;\n  top:10px;\n  left: 0px;\n}\n\n.optly-outlet-list {\n\ttext-align: center;\n  margin-top: 20px;\n  margin-bottom: 10px\n}\n\n.optly-outlet-list li  { \n  display: inline-block; \n  text-align: center;\n  width:80px;\n  margin-right: 15px;\n  margin-left:15px;\n}\n\n@media (max-width: 325px) {\n  .optly-outlet-list li  { \n  \tmargin-right: 5px;\n\t\tmargin-left:5px;\n  }\n}\n\n.optly-outlet-list li span {\n\tfont-size: 14px;\n}\n.optly-outlet-list svg {\n  display: block;\n  margin: 0 auto;\n  margin-bottom:8px;\n  width:70px;\n  height: auto;\n}\n\n.optly-promoteholder {\n\tdisplay: flex;\n  align-items:center;\n}\n\n.optly-promoteholder .optly-promoteholder-img {\n\tpadding:10px;\n  padding-left: 0px;\n  text-align:center;\n}\n\n.optly-promoteholder .optly-promoteholder-text {\n  padding: 10px;\n}\n\n.optly-promoteholder .optly-promoteholder-text strong {\n\tdisplay: block;\n}\n\n.optly-content-area br {\n\tdisplay: block;\n  content: \"\";\n  height:7px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "DCCEF261-7BDA-4460-8A58-2DA6B98DE8F1"}]}], "name": "Variation #10"}], "audienceIds": null, "changes": null, "id": "20677401011", "integrationSettings": null}], "id": "20676580031", "weightDistributions": null, "name": "[niftic] - Combo - Value Proposition Copy R4", "groupId": null, "commitId": "20677380715", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "655361bc508d4e669f753fc62989d2a1", "value": function($){window["getCurrencySymbol"] = function(curName) {
	var curSymbols = {
    'USD': '$', // US Dollar
    'EUR': '€', // Euro
    'CRC': '₡', // Costa Rican Colón
    'GBP': '£', // British Pound Sterling
    'ILS': '₪', // Israeli New Sheqel
    'INR': '₹', // Indian Rupee
    'JPY': '¥', // Japanese Yen
    'KRW': '₩', // South Korean Won
    'NGN': '₦', // Nigerian Naira
    'PHP': '₱', // Philippine Peso
    'PLN': 'zł', // Polish Zloty
    'PYG': '₲', // Paraguayan Guarani
    'THB': '฿', // Thai Baht
    'UAH': '₴', // Ukrainian Hryvnia
    'VND': '₫', // Vietnamese Dong
  };
  var curSymbol = "$";
  if(curSymbols[curName] !== undefined) {
  	curSymbol = curSymbols[curName];
  }
  
  return curSymbol;
};
}}, {"value": "<style>.optly-check-list {\n  padding-top: 8px;\n}\n\n.optly-check-list li {\n\tpadding-bottom:4px;\n  padding-top: 4px;\n  position: relative;\n  padding-left: 24px;\n}\n\n.optly-check-list li:before {\n  content:'';\n  display: inline-block;\n  height: 13px;\n  width: 15px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='16' height='14' viewBox='0 0 16 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.28438 13.1278C4.95104 13.1278 4.68021 13.0028 4.47188 12.7528L0.253125 7.87784C0.065625 7.62784 -0.0177083 7.36742 0.003125 7.09659C0.0239583 6.80492 0.148958 6.55492 0.378125 6.34659C0.607292 6.13826 0.867708 6.05492 1.15937 6.09659C1.45104 6.11742 1.70104 6.24242 1.90937 6.47159L5.28438 10.3778L13.7219 0.377841C13.9094 0.148674 14.149 0.0236742 14.4406 0.00284091C14.7323 -0.0179924 14.9927 0.0757576 15.2219 0.284091C15.451 0.471591 15.576 0.711174 15.5969 1.00284C15.6385 1.27367 15.5552 1.53409 15.3469 1.78409L6.09688 12.7528C5.88854 13.0028 5.61771 13.1278 5.28438 13.1278Z' fill='%23EC2C22'/%3E%3C/svg%3E%0A\");\n  background-repeat: no-repeat;\n  position: absolute;\n  top:10px;\n  left: 0px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "50647e491eff40ed8b7b00db55552e4a"}]}, {"holdback": 4000, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20679140200"], "experiments": [{"weightDistributions": [{"entityId": "20675490118", "endOfRange": 1667}, {"entityId": "20673230047", "endOfRange": 3334}, {"entityId": "20683010239", "endOfRange": 5001}, {"entityId": "20677270210", "endOfRange": 6668}, {"entityId": "20679460104", "endOfRange": 8335}, {"entityId": "20646650057", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Payment - Highlight Amount R2", "bucketingStrategy": null, "variations": [{"id": "20675490118", "actions": [{"viewId": "20679140200", "changes": []}], "name": "Original"}, {"id": "20673230047", "actions": [{"viewId": "20679140200", "changes": [{"dependencies": [], "type": "custom_code", "id": "81b401a6346f44849e55a57129b7a225", "value": function($){var utils = window.optimizely.get("utils");
var testStarted = false;
var localeFormat = window.localeString();

function fireEvent(ev) {
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent(ev);
  });
}

function initTest() {
    utils.waitForElement("#payment-form").then(function(paymentForm) {
        var petitionTextTemp = document.querySelector('button[data-testid="payment-form-amount-button"] > div > div').innerText;
    		var petitionViewsTxt = petitionTextTemp.substr(petitionTextTemp.indexOf(' ')+1);
        var firstName = window.changeTargetingData.viewer.user.displayName  ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
        var formData = document.querySelector('div[data-testid="promoted-petitions-payment-form"] > div').dataset;
        var currency = formData.cur_mark;
        var baseCPM = formData.cpm;
        var bonusCPM = formData.bonus_cpm;
        var bonusCPMThresh = formData.bonus_threshold; 
        var bonusMin = formData.bonus_threshold / 100;
        var paymentCalcNew = document.createElement('div');
				var totalViews = '';
    	var amountInput = document.getElementById('amount'); 
			var promoDisplay = document.createElement('div');
        promoDisplay.innerHTML = '<div class="optly-promo-icon"><svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M13 26C20.1797 26 26 20.1797 26 13C26 5.8203 20.1797 0 13 0C5.8203 0 0 5.8203 0 13C0 20.1797 5.8203 26 13 26Z" fill="#EC2C22"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M6.67446 18.6905C6.80834 18.7884 6.96134 18.8276 7.11435 18.8276C7.40123 18.8276 7.66898 18.6905 7.82199 18.4162L10.6908 13.7542L13.5214 15.5759C13.923 15.8306 14.4394 15.713 14.688 15.3017L17.7672 10.2675L18.0541 11.5799C18.1497 11.9717 18.494 12.2459 18.8765 12.2459C18.9338 12.2459 19.0103 12.2459 19.0677 12.2263C19.5267 12.1284 19.8136 11.6583 19.6989 11.1882L18.953 7.83857C18.8573 7.36846 18.3983 7.09422 17.9393 7.19216L14.6689 7.9561C14.2099 8.05404 13.923 8.52416 14.0377 8.99428C14.1334 9.4644 14.5924 9.75822 15.0514 9.64069L16.3328 9.34687L13.7126 13.6563L10.882 11.8346C10.4804 11.5799 9.96403 11.6975 9.7154 12.1088L6.40671 17.4956C6.15808 17.9069 6.27283 18.4358 6.67446 18.6905Z" fill="white"/></svg></div>' +
        '<div class="optly-promo-text"></div>';
      	promoDisplay.classList.add('pbs', 'optly-promo-holder');
      	promoDisplay.setAttribute('style', 'display:none;');
      	var pvc = document.querySelector('.js-input-msg-promotion-calculator');
        pvc.parentNode.insertBefore(promoDisplay, pvc);
        
      	var viewCalculator = document.createElement('div');
      	viewCalculator.className = document.querySelector('.js-amount').className;
      	viewCalculator.classList.remove('js-amount');
      	viewCalculator.classList.add('optly-view-calculator', 'hide-fully');
      	document.querySelector('.js-amount').parentNode.appendChild(viewCalculator); 
        function calculateCPM(tempvalue) {
            if(tempvalue*100 >= bonusCPMThresh)
                return (1000 * (tempvalue*100) / bonusCPM);
            else
                return (1000 * (tempvalue*100) / baseCPM);
        }
        
        function updateBonus(views, dollars) {
      		var visualHolder = document.querySelector('.optly-promo-text');
      		views = Math.ceil(views / 2).toLocaleString(localeFormat);
      		if(dollars*100 >= bonusCPMThresh) {
        		visualHolder.innerHTML = 'You get an extra '+ views +' views for chipping in over $'+ bonusCPMThresh/100 +'!';
      		}
      		else {
        		visualHolder.innerHTML = '';
      		}
    		}
        var buttons = paymentForm.querySelectorAll('[data-testid="payment-form-amount-button"]');

        buttons.forEach(function(b, i) {
            var dollars = parseInt(b.getAttribute('data-amount'));
            if (dollars*100 >= bonusCPMThresh) {
                var views = b.querySelector('div > div:first-of-type');
                var viewNum = calculateCPM(dollars);
        views.innerHTML = '<div class="optly-best-value type-branded">Recommended</div>' + '<b><span class="type-faded non-bonus">' + (Math.ceil(viewNum / 2)).toLocaleString(localeFormat) + '</span>&nbsp;<span>' + viewNum.toLocaleString(localeFormat) + '</span> petition views</b>';
              	b.parentNode.classList.add('big-btn');
                b.onclick = function() {
                    setTimeout(function() {
                      b.classList.add('btn-active');
                      viewCalculator.classList.add('hide-fully');
                      promoDisplay.setAttribute('style', '');
                      updateBonus(viewNum, dollars);
                    }, 100);
                };
            } else {
                b.onclick = function() {
                    setTimeout(function() {
                        b.classList.add('btn-active');
                        viewCalculator.classList.add('hide-fully');
                        promoDisplay.setAttribute('style', 'display:none;');
                				updateBonus(0, 0);
                    }, 100);
                };
            }
            if (i === buttons.length - 1) {
                // Hide last button
                b.parentElement.classList.add('hide-fully');
                b.classList.add('hide-fully');
            }  
            b.classList.add('type-l');
        });
        amountInput.oninput = function() {
      		var currentVal = amountInput.value;
         	if(currentVal <= 0) {
          	promoDisplay.setAttribute('style', 'display:none;');
            viewCalculator.classList.add('hide-fully');
          	updateBonus(0, 0);
          } else {
        		setTimeout(function() { 
            	if(currentVal*100 >= bonusCPMThresh) {
            		totalViews = Math.ceil((1000 * currentVal*100) / bonusCPM);
                viewCalculator.innerHTML = '<span class="type-faded non-bonus">' + (Math.ceil(totalViews / 2)).toLocaleString(localeFormat) + '</span>&nbsp;<span>' + totalViews.toLocaleString(localeFormat) + '</span>&nbsp;petition views';
                viewCalculator.classList.remove('hide-fully');
                promoDisplay.setAttribute('style', '');
            		updateBonus(calculateCPM(currentVal), currentVal);
          		} else {
            		totalViews = Math.ceil((1000 * currentVal*100) / baseCPM).toLocaleString(localeFormat);
                viewCalculator.innerHTML = totalViews + ' petition views';
                viewCalculator.classList.remove('hide-fully');
                promoDisplay.setAttribute('style', 'display:none;');
            		updateBonus(0, 0);
          		}
            }, 100);
          }
        };
    });
}

utils.waitUntil(function() { return !!window.App; }).then(function() {
	utils.observeSelector('.js-payment-form', function(elem) {
		if(!testStarted) {
   		initTest();
      testStarted = true;
    }
  }, {
    "timeout": 8000,
    "once": false
  });
});
}}, {"value": "<style>.optly-best-value {\n\tfont-size: 12px;\n  line-height: 19px;\n}\n\n\n.non-bonus {\n  font-weight: normal;\n  text-decoration: line-through;\n  opacity: 1;\n  color: #ADACAD;\n}\n\n[data-testid=\"payment-form-amount-button\"] {\n  font-size: 1.25rem !important;\n}\n\n.btn-active {\n    border-style: solid;\n    border-radius: 5px;\n    border-width: 0px;\n    border-color: rgb(219, 217, 219);\n    background-color: rgb(236, 44, 34);\n    width: 100%;\n    height: 60px;\n    font-weight: bold;\n    font-size: 1.25rem !important;\n    color: rgb(255, 255, 255);\n    cursor: pointer;\n}\n\n.btn-active .optly-best-value {\n  color: #fff !important;\n}\n\n.btn-active .non-bonus {\ncolor:#fff;\n}\n\n.btn-taller, .big-btn > button {\n  height: 70px;\n}\n\n.optly-promo-holder {\n\tdisplay: flex;\n  align-items: center;\n}\n\n.optly-promo-holder .optly-promo-icon {\n\tpadding-right: 12px;\n}\n\n.optly-promo-holder .optly-promo-text {\n  font-weight:700;\n  font-size: 16px;\n  line-height:24px;\n}\n\n.optly-view-calculator {\n  background:#F6F4F6;\n  color:#363135;\n  font-size: 20px;\n  font-weight: 700;\n  padding-top:13px;\n  padding-bottom:13px;\n  border-radius: 0px 0px 5px 5px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "50bcaf17d7ed404889192da0f1f67c59"}]}], "name": "Variation #1"}, {"id": "20683010239", "actions": [{"viewId": "20679140200", "changes": [{"dependencies": [], "type": "custom_code", "id": "DE3DB41A-3CAB-45BC-9051-0D3CF5C7B40A", "value": function($){var utils = window.optimizely.get("utils");
var testStarted = false;
var localeFormat = window.localeString();

function fireEvent(ev) {
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent(ev);
  });
}

function initTest() {
    utils.waitForElement("#payment-form").then(function(paymentForm) {
        var petitionTextTemp = document.querySelector('button[data-testid="payment-form-amount-button"] > div > div').innerText;
    		var petitionViewsTxt = petitionTextTemp.substr(petitionTextTemp.indexOf(' ')+1);
        var firstName = window.changeTargetingData.viewer.user.displayName  ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
        var formData = document.querySelector('div[data-testid="promoted-petitions-payment-form"] > div').dataset;
        var currency = formData.cur_mark;
        var baseCPM = formData.cpm;
        var bonusCPM = formData.bonus_cpm;
        var bonusCPMThresh = formData.bonus_threshold; 
        var bonusMin = formData.bonus_threshold / 100;
        var paymentCalcNew = document.createElement('div');
				var totalViews = '';
    	var amountInput = document.getElementById('amount'); 
			var promoDisplay = document.createElement('div');
        promoDisplay.innerHTML = '<div class="optly-promo-icon"><svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M13 26C20.1797 26 26 20.1797 26 13C26 5.8203 20.1797 0 13 0C5.8203 0 0 5.8203 0 13C0 20.1797 5.8203 26 13 26Z" fill="#EC2C22"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M6.67446 18.6905C6.80834 18.7884 6.96134 18.8276 7.11435 18.8276C7.40123 18.8276 7.66898 18.6905 7.82199 18.4162L10.6908 13.7542L13.5214 15.5759C13.923 15.8306 14.4394 15.713 14.688 15.3017L17.7672 10.2675L18.0541 11.5799C18.1497 11.9717 18.494 12.2459 18.8765 12.2459C18.9338 12.2459 19.0103 12.2459 19.0677 12.2263C19.5267 12.1284 19.8136 11.6583 19.6989 11.1882L18.953 7.83857C18.8573 7.36846 18.3983 7.09422 17.9393 7.19216L14.6689 7.9561C14.2099 8.05404 13.923 8.52416 14.0377 8.99428C14.1334 9.4644 14.5924 9.75822 15.0514 9.64069L16.3328 9.34687L13.7126 13.6563L10.882 11.8346C10.4804 11.5799 9.96403 11.6975 9.7154 12.1088L6.40671 17.4956C6.15808 17.9069 6.27283 18.4358 6.67446 18.6905Z" fill="white"/></svg></div>' +
        '<div class="optly-promo-text"></div>';
      	promoDisplay.classList.add('pbs', 'optly-promo-holder');
      	promoDisplay.setAttribute('style', 'display:none;');
      	var pvc = document.querySelector('.js-input-msg-promotion-calculator');
      	pvc.classList.remove('display-inline');
      	pvc.classList.add('hide-fully');
        pvc.parentNode.insertBefore(promoDisplay, pvc);
        
      	var viewCalculator = document.createElement('div');
      	viewCalculator.className = document.querySelector('.js-amount').className;
      	viewCalculator.classList.remove('js-amount');
      	viewCalculator.classList.add('optly-view-calculator', 'hide-fully');
      	document.querySelector('.js-amount').parentNode.appendChild(viewCalculator); 
        function calculateCPM(tempvalue) {
            if(tempvalue*100 >= bonusCPMThresh)
                return (1000 * (tempvalue*100) / bonusCPM);
            else
                return (1000 * (tempvalue*100) / baseCPM);
        }
        
        function updateBonus(views, dollars) {
      		var visualHolder = document.querySelector('.optly-promo-text');
      		views = Math.ceil(views / 2).toLocaleString(localeFormat);
      		if(dollars*100 >= bonusCPMThresh) {
        		visualHolder.innerHTML = 'You get an extra '+ views +' views for chipping in over $'+ bonusCPMThresh/100 +'!';
      		}
      		else {
        		visualHolder.innerHTML = '';
      		}
    		}
        var buttons = paymentForm.querySelectorAll('[data-testid="payment-form-amount-button"]');

        buttons.forEach(function(b, i) {
            var dollars = parseInt(b.getAttribute('data-amount'));
            if (dollars*100 >= bonusCPMThresh) {
                var views = b.querySelector('div > div:first-of-type');
                var viewNum = calculateCPM(dollars);
        views.innerHTML = '<div class="optly-best-value type-branded">Recommended</div>' + '<b><span class="type-faded non-bonus">' + (Math.ceil(viewNum / 2)).toLocaleString(localeFormat) + '</span>&nbsp;<span>' + viewNum.toLocaleString(localeFormat) + '</span> petition views</b>';
              	b.parentNode.classList.add('big-btn');
                b.onclick = function() {
                    setTimeout(function() {
                      b.classList.add('btn-active');
                      viewCalculator.classList.add('hide-fully');
                      promoDisplay.setAttribute('style', '');
                      updateBonus(viewNum, dollars);
                    }, 100);
                };
            } else {
                b.onclick = function() {
                    setTimeout(function() {
                        b.classList.add('btn-active');
                        viewCalculator.classList.add('hide-fully');
                        promoDisplay.setAttribute('style', 'display:none;');
                				updateBonus(0, 0);
                    }, 100);
                };
            }
            if (i === buttons.length - 1) {
                // Hide last button
                b.parentElement.classList.add('hide-fully');
                b.classList.add('hide-fully');
            }  
            b.classList.add('type-l');
        });
        amountInput.oninput = function() {
      		var currentVal = amountInput.value;
         	if(currentVal <= 0) {
          	promoDisplay.setAttribute('style', 'display:none;');
            viewCalculator.classList.add('hide-fully');
          	updateBonus(0, 0);
          } else {
        		setTimeout(function() { 
            	if(currentVal*100 >= bonusCPMThresh) {
            		totalViews = Math.ceil((1000 * currentVal*100) / bonusCPM);
                viewCalculator.innerHTML = '<span class="type-faded non-bonus">' + (Math.ceil(totalViews / 2)).toLocaleString(localeFormat) + '</span>&nbsp;<span>' + totalViews.toLocaleString(localeFormat) + '</span>&nbsp;petition views';
                viewCalculator.classList.remove('hide-fully');
                promoDisplay.setAttribute('style', '');
            		updateBonus(calculateCPM(currentVal), currentVal);
          		} else {
            		totalViews = Math.ceil((1000 * currentVal*100) / baseCPM).toLocaleString(localeFormat);
                viewCalculator.innerHTML = totalViews + ' petition views';
                viewCalculator.classList.remove('hide-fully');
                promoDisplay.setAttribute('style', 'display:none;');
            		updateBonus(0, 0);
          		}
            }, 100);
          }
        };
    });
}

utils.waitUntil(function() { return !!window.App; }).then(function() {
	utils.observeSelector('.js-payment-form', function(elem) {
		if(!testStarted) {
   		initTest();
      testStarted = true;
    }
  }, {
    "timeout": 8000,
    "once": false
  });
});
}}, {"value": "<style>.optly-best-value {\n\tfont-size: 12px;\n  line-height: 19px;\n}\n\n\n.non-bonus {\n  font-weight: normal;\n  text-decoration: line-through;\n  opacity: 1;\n  color: #ADACAD;\n}\n\n[data-testid=\"payment-form-amount-button\"] {\n  font-size: 1.25rem !important;\n}\n\n.btn-active {\n    border-style: solid;\n    border-radius: 5px;\n    border-width: 0px;\n    border-color: rgb(219, 217, 219);\n    background-color: rgb(236, 44, 34);\n    width: 100%;\n    height: 60px;\n    font-weight: bold;\n    font-size: 1.25rem !important;\n    color: rgb(255, 255, 255);\n    cursor: pointer;\n}\n\n.btn-active .optly-best-value {\n  color: #fff !important;\n}\n\n.btn-active .non-bonus {\ncolor:#fff;\n}\n\n.btn-taller, .big-btn > button {\n  height: 70px;\n}\n\n.optly-promo-holder {\n\tdisplay: flex;\n  align-items: center;\n}\n\n.optly-promo-holder .optly-promo-icon {\n\tpadding-right: 12px;\n}\n\n.optly-promo-holder .optly-promo-text {\n  font-weight:700;\n  font-size: 16px;\n  line-height:24px;\n}\n\n.optly-view-calculator {\n  background:#F6F4F6;\n  color:#363135;\n  font-size: 20px;\n  font-weight: 700;\n  padding-top:13px;\n  padding-bottom:13px;\n  border-radius: 0px 0px 5px 5px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "F66B98C2-FA49-429B-8B81-C13B9E056A76"}]}], "name": "Variation #2"}, {"id": "20677270210", "actions": [{"viewId": "20679140200", "changes": [{"dependencies": [], "type": "custom_code", "id": "69D69588-4EDB-417A-BBAA-78F5B846B72C", "value": function($){var utils = window.optimizely.get("utils");
var testStarted = false;
var localeFormat = window.localeString();

function fireEvent(ev) {
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent(ev);
  });
}

function initTest() {
    utils.waitForElement("#payment-form").then(function(paymentForm) {
        var petitionTextTemp = document.querySelector('button[data-testid="payment-form-amount-button"] > div > div').innerText;
    		var petitionViewsTxt = petitionTextTemp.substr(petitionTextTemp.indexOf(' ')+1);
        var firstName = window.changeTargetingData.viewer.user.displayName  ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
        var formData = document.querySelector('div[data-testid="promoted-petitions-payment-form"] > div').dataset;
        var currency = formData.cur_mark;
        var baseCPM = formData.cpm;
        var bonusCPM = formData.bonus_cpm;
        var bonusCPMThresh = formData.bonus_threshold; 
        var bonusMin = formData.bonus_threshold / 100;
        var paymentCalcNew = document.createElement('div');
				var totalViews = '';
    	var amountInput = document.getElementById('amount'); 
			var promoDisplay = document.createElement('div');
        promoDisplay.innerHTML = '<div class="optly-promo-icon"><svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M13 26C20.1797 26 26 20.1797 26 13C26 5.8203 20.1797 0 13 0C5.8203 0 0 5.8203 0 13C0 20.1797 5.8203 26 13 26Z" fill="#EC2C22"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M6.67446 18.6905C6.80834 18.7884 6.96134 18.8276 7.11435 18.8276C7.40123 18.8276 7.66898 18.6905 7.82199 18.4162L10.6908 13.7542L13.5214 15.5759C13.923 15.8306 14.4394 15.713 14.688 15.3017L17.7672 10.2675L18.0541 11.5799C18.1497 11.9717 18.494 12.2459 18.8765 12.2459C18.9338 12.2459 19.0103 12.2459 19.0677 12.2263C19.5267 12.1284 19.8136 11.6583 19.6989 11.1882L18.953 7.83857C18.8573 7.36846 18.3983 7.09422 17.9393 7.19216L14.6689 7.9561C14.2099 8.05404 13.923 8.52416 14.0377 8.99428C14.1334 9.4644 14.5924 9.75822 15.0514 9.64069L16.3328 9.34687L13.7126 13.6563L10.882 11.8346C10.4804 11.5799 9.96403 11.6975 9.7154 12.1088L6.40671 17.4956C6.15808 17.9069 6.27283 18.4358 6.67446 18.6905Z" fill="white"/></svg></div>' +
        '<div class="optly-promo-text"></div>';
      	promoDisplay.classList.add('pbs', 'optly-promo-holder');
      	promoDisplay.setAttribute('style', 'display:none;');
      	var pvc = document.querySelector('.js-input-msg-promotion-calculator');
        pvc.parentNode.insertBefore(promoDisplay, pvc);
        
      	var viewCalculator = document.createElement('div');
      	viewCalculator.className = document.querySelector('.js-amount').className;
      	viewCalculator.classList.remove('js-amount');
      	viewCalculator.classList.add('optly-view-calculator', 'hide-fully');
      	document.querySelector('.js-amount').parentNode.appendChild(viewCalculator); 
        function calculateCPM(tempvalue) {
            if(tempvalue*100 >= bonusCPMThresh)
                return (1000 * (tempvalue*100) / bonusCPM);
            else
                return (1000 * (tempvalue*100) / baseCPM);
        }
        
        function updateBonus(views, dollars) {
      		var visualHolder = document.querySelector('.optly-promo-text');
      		views = Math.ceil(views / 2).toLocaleString(localeFormat);
      		if(dollars*100 >= bonusCPMThresh) {
        		visualHolder.innerHTML = 'You get an extra '+ views +' views for chipping in over $'+ bonusCPMThresh/100 +'!';
      		}
      		else {
        		visualHolder.innerHTML = '';
      		}
    		}
        var buttons = paymentForm.querySelectorAll('[data-testid="payment-form-amount-button"]');

        buttons.forEach(function(b, i) {
            var dollars = parseInt(b.getAttribute('data-amount'));
            if (dollars*100 >= bonusCPMThresh) {
                var views = b.querySelector('div > div:first-of-type');
                var viewNum = calculateCPM(dollars);
        views.innerHTML = '<div class="optly-best-value type-branded">Recommended</div>' + '<b><span class="type-faded non-bonus">' + (Math.ceil(viewNum / 2)).toLocaleString(localeFormat) + '</span>&nbsp;<span>' + viewNum.toLocaleString(localeFormat) + '</span> petition views</b>';
              	b.parentNode.classList.add('big-btn');
                b.onclick = function() {
                    setTimeout(function() {
                      b.classList.add('btn-active');
                      viewCalculator.classList.add('hide-fully');
                      promoDisplay.setAttribute('style', '');
                      updateBonus(viewNum, dollars);
                    }, 100);
                };
            } else {
                b.onclick = function() {
                    setTimeout(function() {
                        b.classList.add('btn-active');
                        viewCalculator.classList.add('hide-fully');
                        promoDisplay.setAttribute('style', 'display:none;');
                				updateBonus(0, 0);
                    }, 100);
                };
            }
            /*if (i === buttons.length - 1) {
                // Hide last button
                b.parentElement.classList.add('hide-fully');
                b.classList.add('hide-fully');
            }  */
            b.classList.add('type-l');
        });
        amountInput.oninput = function() {
      		var currentVal = amountInput.value;
         	if(currentVal <= 0) {
          	promoDisplay.setAttribute('style', 'display:none;');
            viewCalculator.classList.add('hide-fully');
          	updateBonus(0, 0);
          } else {
        		setTimeout(function() { 
            	if(currentVal*100 >= bonusCPMThresh) {
            		totalViews = Math.ceil((1000 * currentVal*100) / bonusCPM);
                viewCalculator.innerHTML = '<span class="type-faded non-bonus">' + (Math.ceil(totalViews / 2)).toLocaleString(localeFormat) + '</span>&nbsp;<span>' + totalViews.toLocaleString(localeFormat) + '</span>&nbsp;petition views';
                viewCalculator.classList.remove('hide-fully');
                promoDisplay.setAttribute('style', '');
            		updateBonus(calculateCPM(currentVal), currentVal);
          		} else {
            		totalViews = Math.ceil((1000 * currentVal*100) / baseCPM).toLocaleString(localeFormat);
                viewCalculator.innerHTML = totalViews + ' petition views';
                viewCalculator.classList.remove('hide-fully');
                promoDisplay.setAttribute('style', 'display:none;');
            		updateBonus(0, 0);
          		}
            }, 100);
          }
        };
    });
}

utils.waitUntil(function() { return !!window.App; }).then(function() {
	utils.observeSelector('.js-payment-form', function(elem) {
		if(!testStarted) {
   		initTest();
      testStarted = true;
    }
  }, {
    "timeout": 8000,
    "once": false
  });
});
}}, {"value": "<style>.optly-best-value {\n\tfont-size: 12px;\n  line-height: 19px;\n}\n\n\n.non-bonus {\n  font-weight: normal;\n  text-decoration: line-through;\n  opacity: 1;\n  color: #ADACAD;\n}\n\n[data-testid=\"payment-form-amount-button\"] {\n  font-size: 1.25rem !important;\n}\n\n.btn-active {\n    border-style: solid;\n    border-radius: 5px;\n    border-width: 0px;\n    border-color: rgb(219, 217, 219);\n    background-color: rgb(236, 44, 34);\n    width: 100%;\n    height: 60px;\n    font-weight: bold;\n    font-size: 1.25rem !important;\n    color: rgb(255, 255, 255);\n    cursor: pointer;\n}\n\n.btn-active .optly-best-value {\n  color: #fff !important;\n}\n\n.btn-active .non-bonus {\ncolor:#fff;\n}\n\n.btn-taller, .big-btn > button {\n  height: 70px;\n}\n\n.optly-promo-holder {\n\tdisplay: flex;\n  align-items: center;\n}\n\n.optly-promo-holder .optly-promo-icon {\n\tpadding-right: 12px;\n}\n\n.optly-promo-holder .optly-promo-text {\n  font-weight:700;\n  font-size: 16px;\n  line-height:24px;\n}\n\n.optly-view-calculator {\n  background:#F6F4F6;\n  color:#363135;\n  font-size: 20px;\n  font-weight: 700;\n  padding-top:13px;\n  padding-bottom:13px;\n  border-radius: 0px 0px 5px 5px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "30C3A627-FD67-40A8-8272-64786C344FFA"}]}], "name": "Variation #3"}, {"id": "20679460104", "actions": [{"viewId": "20679140200", "changes": [{"dependencies": [], "type": "custom_code", "id": "411744A6-F064-4733-A961-1CA7167D3B4E", "value": function($){var utils = window.optimizely.get("utils");
var testStarted = false;
var localeFormat = window.localeString();

function fireEvent(ev) {
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent(ev);
  });
}

function initTest() {
    utils.waitForElement("#payment-form").then(function(paymentForm) {
        var petitionTextTemp = document.querySelector('button[data-testid="payment-form-amount-button"] > div > div').innerText;
    		var petitionViewsTxt = petitionTextTemp.substr(petitionTextTemp.indexOf(' ')+1);
        var firstName = window.changeTargetingData.viewer.user.displayName  ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
        var formData = document.querySelector('div[data-testid="promoted-petitions-payment-form"] > div').dataset;
        var currency = formData.cur_mark;
        var baseCPM = formData.cpm;
        var bonusCPM = formData.bonus_cpm;
        var bonusCPMThresh = formData.bonus_threshold; 
        var bonusMin = formData.bonus_threshold / 100;
        var paymentCalcNew = document.createElement('div');
				var totalViews = '';
    	var amountInput = document.getElementById('amount'); 
			var promoDisplay = document.createElement('div');
        promoDisplay.innerHTML = '<div class="optly-promo-icon"><svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M13 26C20.1797 26 26 20.1797 26 13C26 5.8203 20.1797 0 13 0C5.8203 0 0 5.8203 0 13C0 20.1797 5.8203 26 13 26Z" fill="#EC2C22"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M6.67446 18.6905C6.80834 18.7884 6.96134 18.8276 7.11435 18.8276C7.40123 18.8276 7.66898 18.6905 7.82199 18.4162L10.6908 13.7542L13.5214 15.5759C13.923 15.8306 14.4394 15.713 14.688 15.3017L17.7672 10.2675L18.0541 11.5799C18.1497 11.9717 18.494 12.2459 18.8765 12.2459C18.9338 12.2459 19.0103 12.2459 19.0677 12.2263C19.5267 12.1284 19.8136 11.6583 19.6989 11.1882L18.953 7.83857C18.8573 7.36846 18.3983 7.09422 17.9393 7.19216L14.6689 7.9561C14.2099 8.05404 13.923 8.52416 14.0377 8.99428C14.1334 9.4644 14.5924 9.75822 15.0514 9.64069L16.3328 9.34687L13.7126 13.6563L10.882 11.8346C10.4804 11.5799 9.96403 11.6975 9.7154 12.1088L6.40671 17.4956C6.15808 17.9069 6.27283 18.4358 6.67446 18.6905Z" fill="white"/></svg></div>' +
        '<div class="optly-promo-text"></div>';
      	promoDisplay.classList.add('pbs', 'optly-promo-holder');
      	promoDisplay.setAttribute('style', 'display:none;');
      	var pvc = document.querySelector('.js-input-msg-promotion-calculator');
        pvc.parentNode.insertBefore(promoDisplay, pvc);
        
      	var viewCalculator = document.createElement('div');
      	viewCalculator.className = document.querySelector('.js-amount').className;
      	viewCalculator.classList.remove('js-amount');
      	viewCalculator.classList.add('optly-view-calculator', 'hide-fully');
      	document.querySelector('.js-amount').parentNode.appendChild(viewCalculator); 
        function calculateCPM(tempvalue) {
            if(tempvalue*100 >= bonusCPMThresh)
                return (1000 * (tempvalue*100) / bonusCPM);
            else
                return (1000 * (tempvalue*100) / baseCPM);
        }
        
        function updateBonus(views, dollars) {
      		var visualHolder = document.querySelector('.optly-promo-text');
      		views = Math.ceil(views / 2).toLocaleString(localeFormat);
      		if(dollars*100 >= bonusCPMThresh) {
        		visualHolder.innerHTML = 'You get an extra '+ views +' views for chipping in over $'+ bonusCPMThresh/100 +'!';
      		}
      		else {
        		visualHolder.innerHTML = '';
      		}
    		}
        var buttons = paymentForm.querySelectorAll('[data-testid="payment-form-amount-button"]');

        buttons.forEach(function(b, i) {
            var dollars = parseInt(b.getAttribute('data-amount'));
            if (dollars*100 >= bonusCPMThresh) {
                var views = b.querySelector('div > div:first-of-type');
                var viewNum = calculateCPM(dollars);
              	views.innerHTML = '<div class="optly-best-value type-branded">Best impact</div>' + '<b><span class="type-faded non-bonus">' + (Math.ceil(viewNum / 2)).toLocaleString(localeFormat) + '</span>&nbsp;<span>' + viewNum.toLocaleString(localeFormat) + '</span> petition views</b>';
                /*if(i === 2) {
        					views.innerHTML = '<div class="optly-best-value type-branded">Best impact</div>' + '<b><span class="type-faded non-bonus">' + (Math.ceil(viewNum / 2)).toLocaleString(localeFormat) + '</span>&nbsp;<span>' + viewNum.toLocaleString(localeFormat) + '</span> petiton views</b>';
                  b.parentNode.classList.add('big-btn');
            		} else {
                    views.innerHTML = '<b><span class="type-faded non-bonus">' + (Math.ceil(viewNum / 2)).toLocaleString(localeFormat) + '</span>&nbsp;<span>' + viewNum.toLocaleString(localeFormat) + '</span> petiton views</b>';   
                }*/
              	
                b.onclick = function() {
                    setTimeout(function() {
                      b.classList.add('btn-active');
                      viewCalculator.classList.add('hide-fully');
                      promoDisplay.setAttribute('style', '');
                      updateBonus(viewNum, dollars);
                    }, 100);
                };
            } else {
                b.onclick = function() {
                    setTimeout(function() {
                        b.classList.add('btn-active');
                        viewCalculator.classList.add('hide-fully');
                        promoDisplay.setAttribute('style', 'display:none;');
                				updateBonus(0, 0);
                    }, 100);
                };
            }
            if (i === buttons.length - 1) {
                // Hide last button
                b.parentElement.classList.add('hide-fully');
                b.classList.add('hide-fully');
            }  
            b.classList.add('type-l');
        });
        amountInput.oninput = function() {
      		var currentVal = amountInput.value;
         	if(currentVal <= 0) {
          	promoDisplay.setAttribute('style', 'display:none;');
            viewCalculator.classList.add('hide-fully');
          	updateBonus(0, 0);
          } else {
        		setTimeout(function() { 
            	if(currentVal*100 >= bonusCPMThresh) {
            		totalViews = Math.ceil((1000 * currentVal*100) / bonusCPM);
                viewCalculator.innerHTML = '<span class="type-faded non-bonus">' + (Math.ceil(totalViews / 2)).toLocaleString(localeFormat) + '</span>&nbsp;<span>' + totalViews.toLocaleString(localeFormat) + '</span>&nbsp;petition views';
                viewCalculator.classList.remove('hide-fully');
                promoDisplay.setAttribute('style', '');
            		updateBonus(calculateCPM(currentVal), currentVal);
          		} else {
            		totalViews = Math.ceil((1000 * currentVal*100) / baseCPM).toLocaleString(localeFormat);
                viewCalculator.innerHTML = totalViews + ' petition views';
                viewCalculator.classList.remove('hide-fully');
                promoDisplay.setAttribute('style', 'display:none;');
            		updateBonus(0, 0);
          		}
            }, 100);
          }
        };
    });
}

utils.waitUntil(function() { return !!window.App; }).then(function() {
	utils.observeSelector('.js-payment-form', function(elem) {
		if(!testStarted) {
   		initTest();
      testStarted = true;
    }
  }, {
    "timeout": 8000,
    "once": false
  });
});
}}, {"value": "<style>.optly-best-value {\n\tfont-size: 12px;\n  line-height: 19px;\n}\n\n\n.non-bonus {\n  font-weight: normal;\n  text-decoration: line-through;\n  opacity: 1;\n  color: #ADACAD;\n}\n\n[data-testid=\"payment-form-amount-button\"] {\n  font-size: 1.25rem !important;\n}\n\n.btn-active {\n    border-style: solid;\n    border-radius: 5px;\n    border-width: 0px;\n    border-color: rgb(219, 217, 219);\n    background-color: rgb(236, 44, 34);\n    width: 100%;\n    height: 60px;\n    font-weight: bold;\n    font-size: 1.25rem !important;\n    color: rgb(255, 255, 255);\n    cursor: pointer;\n}\n\n.btn-active .optly-best-value {\n  color: #fff !important;\n}\n\n.btn-active .non-bonus {\ncolor:#fff;\n}\n\n.btn-taller, .big-btn > button {\n  height: 70px;\n}\n\n.optly-promo-holder {\n\tdisplay: flex;\n  align-items: center;\n}\n\n.optly-promo-holder .optly-promo-icon {\n\tpadding-right: 12px;\n}\n\n.optly-promo-holder .optly-promo-text {\n  font-weight:700;\n  font-size: 16px;\n  line-height:24px;\n}\n\n.optly-view-calculator {\n  background:#F6F4F6;\n  color:#363135;\n  font-size: 20px;\n  font-weight: 700;\n  padding-top:13px;\n  padding-bottom:13px;\n  border-radius: 0px 0px 5px 5px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "A3E43F4B-C652-4142-ABC3-9918832DC691"}]}], "name": "Variation #4"}, {"id": "20646650057", "actions": [{"viewId": "20679140200", "changes": [{"dependencies": [], "type": "custom_code", "id": "2D8E424A-ED34-47A5-9484-0663B2C4732D", "value": function($){var utils = window.optimizely.get("utils");
var testStarted = false;
var localeFormat = window.localeString();

function fireEvent(ev) {
	utils.waitUntil(function() { return !!window.App; }).then(function() {
  	window.App.trackEvent(ev);
  });
}

function initTest() {
    utils.waitForElement("#payment-form").then(function(paymentForm) {
        var petitionTextTemp = document.querySelector('button[data-testid="payment-form-amount-button"] > div > div').innerText;
    		var petitionViewsTxt = petitionTextTemp.substr(petitionTextTemp.indexOf(' ')+1);
        var firstName = window.changeTargetingData.viewer.user.displayName  ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : "";
        var formData = document.querySelector('div[data-testid="promoted-petitions-payment-form"] > div').dataset;
        var currency = formData.cur_mark;
        var baseCPM = formData.cpm;
        var bonusCPM = formData.bonus_cpm;
        var bonusCPMThresh = formData.bonus_threshold; 
        var bonusMin = formData.bonus_threshold / 100;
        var paymentCalcNew = document.createElement('div');
				var totalViews = '';
    	var amountInput = document.getElementById('amount'); 
			var promoDisplay = document.createElement('div');
        promoDisplay.innerHTML = '<div class="optly-promo-icon"><svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M13 26C20.1797 26 26 20.1797 26 13C26 5.8203 20.1797 0 13 0C5.8203 0 0 5.8203 0 13C0 20.1797 5.8203 26 13 26Z" fill="#EC2C22"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M6.67446 18.6905C6.80834 18.7884 6.96134 18.8276 7.11435 18.8276C7.40123 18.8276 7.66898 18.6905 7.82199 18.4162L10.6908 13.7542L13.5214 15.5759C13.923 15.8306 14.4394 15.713 14.688 15.3017L17.7672 10.2675L18.0541 11.5799C18.1497 11.9717 18.494 12.2459 18.8765 12.2459C18.9338 12.2459 19.0103 12.2459 19.0677 12.2263C19.5267 12.1284 19.8136 11.6583 19.6989 11.1882L18.953 7.83857C18.8573 7.36846 18.3983 7.09422 17.9393 7.19216L14.6689 7.9561C14.2099 8.05404 13.923 8.52416 14.0377 8.99428C14.1334 9.4644 14.5924 9.75822 15.0514 9.64069L16.3328 9.34687L13.7126 13.6563L10.882 11.8346C10.4804 11.5799 9.96403 11.6975 9.7154 12.1088L6.40671 17.4956C6.15808 17.9069 6.27283 18.4358 6.67446 18.6905Z" fill="white"/></svg></div>' +
        '<div class="optly-promo-text">Get twice as many views for chipping in over $'+ bonusCPMThresh/100 +'!</div>';
      	promoDisplay.classList.add('pbs', 'optly-promo-holder');
      	//promoDisplay.setAttribute('style', 'display:none;');
      	var pvc = document.querySelector('.js-input-msg-promotion-calculator');
      	pvc.classList.remove('display-inline');
      	pvc.classList.add('hide-fully');
        pvc.parentNode.insertBefore(promoDisplay, pvc);
        
      	var viewCalculator = document.createElement('div');
      	viewCalculator.className = document.querySelector('.js-amount').className;
      	viewCalculator.classList.remove('js-amount');
      	viewCalculator.classList.add('optly-view-calculator', 'hide-fully');
      	document.querySelector('.js-amount').parentNode.appendChild(viewCalculator); 
        function calculateCPM(tempvalue) {
            if(tempvalue*100 >= bonusCPMThresh)
                return (1000 * (tempvalue*100) / bonusCPM);
            else
                return (1000 * (tempvalue*100) / baseCPM);
        }
        
        function updateBonus(views, dollars) {
      		var visualHolder = document.querySelector('.optly-promo-text');
      		views = Math.ceil(views / 2).toLocaleString(localeFormat);
      		if(dollars*100 >= bonusCPMThresh) {
        		visualHolder.innerHTML = 'You get an extra '+ views +' views for chipping in over $'+ bonusCPMThresh/100 +'!';
      		}
      		else {
        		visualHolder.innerHTML = 'Get twice as many views for chipping in over $'+ bonusCPMThresh/100 +'!';
      		}
    		}
        var buttons = paymentForm.querySelectorAll('[data-testid="payment-form-amount-button"]');

        buttons.forEach(function(b, i) {
            var dollars = parseInt(b.getAttribute('data-amount'));
            if (dollars*100 >= bonusCPMThresh) {
                var views = b.querySelector('div > div:first-of-type');
                var viewNum = calculateCPM(dollars);
        views.innerHTML = '<div class="optly-best-value type-branded">Recommended</div>' + '<b><span class="type-faded non-bonus">' + (Math.ceil(viewNum / 2)).toLocaleString(localeFormat) + '</span>&nbsp;<span>' + viewNum.toLocaleString(localeFormat) + '</span> petition views</b>';
              	b.parentNode.classList.add('big-btn');
                b.onclick = function() {
                    setTimeout(function() {
                      b.classList.add('btn-active');
                      viewCalculator.classList.add('hide-fully');
                      //promoDisplay.setAttribute('style', '');
                      updateBonus(viewNum, dollars);
                    }, 100);
                };
            } else {
                b.onclick = function() {
                    setTimeout(function() {
                        b.classList.add('btn-active');
                        viewCalculator.classList.add('hide-fully');
                        //promoDisplay.setAttribute('style', 'display:none;');
                		updateBonus(0, 0);
                    }, 100);
                };
            }
            if (i === buttons.length - 1) {
                // Hide last button
                b.parentElement.classList.add('hide-fully');
                b.classList.add('hide-fully');
            }  
            b.classList.add('type-l');
        });
        amountInput.oninput = function() {
      		var currentVal = amountInput.value;
         	if(currentVal <= 0) {
          	//.setAttribute('style', 'display:none;');
            viewCalculator.classList.add('hide-fully');
          	updateBonus(0, 0);
          } else {
        		setTimeout(function() { 
            	if(currentVal*100 >= bonusCPMThresh) {
            		totalViews = Math.ceil((1000 * currentVal*100) / bonusCPM);
                viewCalculator.innerHTML = '<span class="type-faded non-bonus">' + (Math.ceil(totalViews / 2)).toLocaleString(localeFormat) + '</span>&nbsp;<span>' + totalViews.toLocaleString(localeFormat) + '</span>&nbsp;petition views';
                viewCalculator.classList.remove('hide-fully');
                //promoDisplay.setAttribute('style', '');
            		updateBonus(calculateCPM(currentVal), currentVal);
          		} else {
            		totalViews = Math.ceil((1000 * currentVal*100) / baseCPM).toLocaleString(localeFormat);
                viewCalculator.innerHTML = totalViews + ' petition views';
                viewCalculator.classList.remove('hide-fully');
                //promoDisplay.setAttribute('style', 'display:none;');
            		updateBonus(0, 0);
          		}
            }, 100);
          }
        };
    });
}

utils.waitUntil(function() { return !!window.App; }).then(function() {
	utils.observeSelector('.js-payment-form', function(elem) {
		if(!testStarted) {
   		initTest();
      testStarted = true;
    }
  }, {
    "timeout": 8000,
    "once": false
  });
});
}}, {"value": "<style>.optly-best-value {\n\tfont-size: 12px;\n  line-height: 19px;\n}\n\n\n.non-bonus {\n  font-weight: normal;\n  text-decoration: line-through;\n  opacity: 1;\n  color: #ADACAD;\n}\n\n[data-testid=\"payment-form-amount-button\"] {\n  font-size: 1.25rem !important;\n}\n\n.btn-active {\n    border-style: solid;\n    border-radius: 5px;\n    border-width: 0px;\n    border-color: rgb(219, 217, 219);\n    background-color: rgb(236, 44, 34);\n    width: 100%;\n    height: 60px;\n    font-weight: bold;\n    font-size: 1.25rem !important;\n    color: rgb(255, 255, 255);\n    cursor: pointer;\n}\n\n.btn-active .optly-best-value {\n  color: #fff !important;\n}\n\n.btn-active .non-bonus {\ncolor:#fff;\n}\n\n.btn-taller, .big-btn > button {\n  height: 70px;\n}\n\n.optly-promo-holder {\n\tdisplay: flex;\n  align-items: center;\n}\n\n.optly-promo-holder .optly-promo-icon {\n\tpadding-right: 12px;\n}\n\n.optly-promo-holder .optly-promo-text {\n  font-weight:700;\n  font-size: 16px;\n  line-height:24px;\n}\n\n.optly-view-calculator {\n  background:#F6F4F6;\n  color:#363135;\n  font-size: 20px;\n  font-weight: 700;\n  padding-top:13px;\n  padding-bottom:13px;\n  border-radius: 0px 0px 5px 5px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "522905C9-4766-4825-890A-442A86E9F387"}]}], "name": "Variation #5"}], "audienceIds": null, "changes": null, "id": "20654480142", "integrationSettings": null}], "id": "20679140201", "weightDistributions": null, "name": "[niftic] - Payment - Highlight Amount R2", "groupId": null, "commitId": "20681760836", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"value": "<style>body.locale-es-es button[data-testid=\"payment-form-amount-button\"] > div > div, body.locale-es-es #opt-petition-read { font-size: 20px; }\nbody.locale-it-it button[data-testid=\"payment-form-amount-button\"] > div > div, body.locale-it-it #opt-petition-read { font-size: 20px; }\nbody.locale-ru-ru button[data-testid=\"payment-form-amount-button\"] > div > div, body.locale-ru-ru #opt-petition-read { font-size: 20px; }\n@media (max-width: 767px) {\n  body.locale-es-es button[data-testid=\"payment-form-amount-button\"] > div > div, body.locale-es-es #opt-petition-read { font-size: 14px; }\n  body.locale-it-it button[data-testid=\"payment-form-amount-button\"] > div > div, body.locale-it-it #opt-petition-read { font-size: 14px; }\n  body.locale-ru-ru button[data-testid=\"payment-form-amount-button\"] > div > div, body.locale-ru-ru #opt-petition-read { font-size: 14px; }\n\n  #opt-petition-read {\n  \tpadding-left: 15px !important;\n  }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "c9298bb54d4b404bbd1739af19389835"}, {"dependencies": [], "type": "custom_code", "id": "e84855fd45d64bb0bcd3a5cb17329f81", "value": function($){var appStateLocale = window.changeTargetingData.appState.locale;
var lang = '';
var locale = '';
if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
} else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
}
var og_locale = lang+'-'+locale;
lang = lang.toLowerCase();
locale = locale.toLowerCase();
var identity_code = lang +'-'+ locale;

window.localeString = function(value) {
  try {
    Intl.getCanonicalLocales(og_locale);
  } catch (err) {
		return 'en-US';
  }
  return og_locale;
};

window.getTranslations = function() {
  document.body.classList.add("locale-"+identity_code);
  var translations = {
    'en-us': {
      constants: {
      	petitionViews: 'petition views',
        currencyFirst: true,
        freeText: 'Free'
      },
      v1: {
      	title: {
        	inactive: '<u>Bonus:</u> <b>Double your value by chipping in over %bonusMin%</b>',
          active: '<u>Bonus:</u> <b>You get an extra <span id="opt-view-count"></span> views for free</b>'
        }
      },      
      v2: {
      	title: {
        	inactive: 'Double your value by chipping in over %bonusMin%',
          active: 'You got an extra <span id="opt-view-count"></span> views for free! 🎉'
        }
      },
      v3: {
      	title: {
          inactive: 'Get 50% off by chipping in over %bonusMin%',
          active: 'Get 50% off by chipping in over %bonusMin%'
        }
      },
      v7: {
      	heading: 'Chip in to show the petition to more people',
        subHeading: 'You’re a hero, %fname%, for giving anything! But you can <b>double your value by chipping in over %bonusMin%</b>',
        underText: 'Your ad will be displayed on Change.org and in Change.org emails.'
      },
      v8: {
      	heading: 'You are a hero, %fname%!',
        subHeading: 'Chip in to show this petition to more people. <b>Double your value</b> by chipping in over %bonusMin%!',
        underText: 'Your ad will be displayed on Change.org and in Change.org emails.'

      },
      v9: {
      	heading: '<b>You are a hero, %fname%!</b> Chip in to show this petition to more people:',
        underText: '<b><span class="type-branded">Bonus:</span></b> Reach twice as many people when you chip in over %bonusMin%!<br /><br/>Your ad will be displayed on Change.org and in Change.org emails. '
      },
      v10: {
        heading: 'You are a hero, %fname%!',
        subHeading: 'Chip in to show this petition to more people:',
        underText: '<b><span class="type-branded">Bonus:</span></b> Reach twice as many people when you chip in over %bonusMin%!<br /><br/>Your ad will be displayed on Change.org and in Change.org emails. '
      }
    },
    'fr-fr': {
      constants: {
        petitionViews: 'vues de la pétition',
        currencyFirst: false,
        freeText: 'gratuitement'
      },
      v1: {
        title: {
          inactive: '<u>Bonus:</u> <b>Doublez votre portée en contribuant avec plus de %bonusMin%</b>',
          active: '<u>Bonus:</u> <b>Nous vous offrons <span id="opt-view-count"></span> vues gratuitement</b>'
        }
      },      
      v2: {
        title: {
          inactive: 'Doublez votre portée en contribuant avec plus de %bonusMin%',
          active: 'Nous vous offrons <span id="opt-view-count"></span> vues gratuitement 🎉'
        }
      },
      v3: {
        title: {
          inactive: 'Bénéficiez d\'une réduction de 50 % en versant une contribution de plus de %bonusMin%',
          active: 'Bénéficiez d\'une réduction de 50 % en versant une contribution de plus de %bonusMin%'
        }
      },
      v7: {
        heading: 'Soutenez la pétition pour qu\'elle soit présentée à plus de monde',
        subHeading: 'Merci pour votre contribution ! Vous pouvez doubler sa valeur en versant plus de %bonusMin%',
        underText: 'Votre annonce sera diffusée sur Change.org et dans les e-mails que nous envoyons.'
      },
      v8: {
        heading: 'Vous êtes un héros, %fname%!',
        subHeading: 'Soutenez la pétition pour qu\'elle soit présentée à plus de monde. Doublez la valeur de votre contribution en versant plus de %bonusMin%!',
        underText: 'Votre annonce sera diffusée sur Change.org et dans les e-mails que nous envoyons. '

      },
      v9: {
        heading: '<b>Vous êtes un héros, %fname%!</b> Soutenez la pétition pour qu\'elle soit présentée à plus de monde',
        underText: '<b><span class="type-branded">Bonus:</span></b> touchez deux fois plus de personnesen versant plus de %bonusMin%!<br /><br/> Votre annonce sera diffusée sur Change.org et dans les e-mails que nous envoyons. '
      },
      v10: {
        heading: 'Vous êtes un héros, %fname%!',
        subHeading: 'Soutenez la pétition pour qu\'elle soit présentée à plus de monde',
        underText: '<b><span class="type-branded">Bonus:</span></b> touchez deux fois plus de personnesen versant plus de %bonusMin%!<br /><br/>Votre annonce sera diffusée sur Change.org et dans les e-mails que nous envoyons.'
      }
    },
    'it-it': {
      constants: {
        petitionViews: 'visualizzazioni della petizione',
        currencyFirst: false,
        freeText: 'gratuite'
      },
      v1: {
        title: {
          inactive: '<u>Bonus:</u> <b>Raddoppia il tuo valore aggiungendo più di %bonusMin%</b>',
          active: '<u>Bonus:</u> <b>Ricevi <span id="opt-view-count"></span> visualizzazioni extra gratuite</b>'
        }
      },      
      v2: {
        title: {
          inactive: 'Raddoppia il tuo valore aggiungendo più di %bonusMin%',
          active: 'Ricevi <span id="opt-view-count"></span> visualizzazioni extra gratuite 🎉'
        }
      },
      v3: {
        title: {
          inactive: 'Ottieni uno sconto del 50% aggiungendo più di %bonusMin%',
          active: 'Ottieni uno sconto del 50% aggiungendo più di %bonusMin%'
        }
      },
      v7: {
        heading: 'Contribuisci per mostrare la petizione a più persone',
        subHeading: 'Grazie mille per il tuo contributo, %fname%! Puoi raddoppiare il valore del tuo annuncio, contribuendo con più di %bonusMin%.',
        underText: 'Il tuo annuncio verrà mostrato sia sul sito di Change.org sia tramite le nostre email.'
      },
      v8: {
        heading: 'Sei un eroe, %fname%!',
        subHeading: 'Contribuisci per mostrare questa petizione a più persone. Raddoppia il valore del tuo annuncio, contribuendo con una somma maggiore di %bonusMin%!',
        underText: 'Il tuo annuncio verrà mostrato sia sul sito di Change.org sia tramite le nostre email. '
      },
      v9: {
        heading: '<b>Sei un eroe, %fname%!</b> Contribuisci per mostrare la petizione a più persone',
        underText: '<b><span class="type-branded">Bonus:</span></b> raggiungi il doppio delle persone quando contribuisci con più di %bonusMin%!<br /><br/>Il tuo annuncio verrà mostrato sul sito di Change.org sia tramite le nostre email. '
      },
      v10: {
        heading: 'Sei un eroe, %fname%!',
        subHeading: 'Contribuisci per mostrare la petizione a più persone',
        underText: '<b><span class="type-branded">Bonus:</span></b> raggiungi il doppio delle persone quando contribuisci con più di %bonusMin%!<br /><br/>Il tuo annuncio verrà mostrato sul sito di Change.org sia tramite le nostre email.'
      }
    },
    'ru-ru': {
      constants: {
        petitionViews: 'показов петиции',
        currencyFirst: false,
        freeText: 'бесплатно'
      },
      v1: {
        title: {
          inactive: '<u>Бонус:</u> <b>Увеличьте эффект продвижения в 2 раза, сделав вклад на сумму более %bonusMin%.</b>',
          active: '<u>Бонус:</u> <b>Вы получили еще <span id="opt-view-count"></span>  показов бесплатно</b>'
        }
      },      
      v2: {
        title: {
          inactive: 'Увеличьте эффект продвижения в 2 раза, сделав вклад на сумму более %bonusMin%.',
          active: 'Вы получили еще <span id="opt-view-count"></span> показов бесплатно 🎉'
        }
      },
      v3: {
        title: {
          inactive: 'Получите скидку 50%, сделав вклад на сумму более %bonusMin%.',
          active: 'Получите скидку 50%, сделав вклад на сумму более %bonusMin%.'
        }
      },
    },
    'es-es': {
      constants: {
        petitionViews: 'visualizaciones de la petición',
        currencyFirst: false,
        freeText: 'gratuitas'
      },
      v1: {
        title: {
          inactive: '<u>Bonus:</u> <b>Duplica tu alcance aportando más de %bonusMin%</b>',
          active: '<u>Bonus:</u> <b>Te damos <span id="opt-view-count"></span> visualizaciones gratuitas</b>'
        }
      }, 
      v2: {
        title: {
          inactive: 'Duplica tu alcance aportando más de %bonusMin%',
          active: 'Te damos <span id="opt-view-count"></span> visualizaciones gratis 🎉'
        }
      },
      v3: {
        title : {
          inactive: 'Obtén un descuento del 50% si promocionas por encima de %bonusMin%',
          active: 'Obtén un descuento del 50% si promocionas por encima de %bonusMin%'
        }
      },
      v7: {
      	heading: 'Promociona para mostrar la petición a más gente',
        subHeading: '¡Gracias por tu aportación! <b>Puedes doblarla promocionando por encima de %bonusMin%</b>',
        underText: 'Tu anuncio se mostrará en Change.org y en los correos electrónicos que enviamos. '
      },
      v8: {
      	heading: '¡Eres un héroe, %fname%!',
        subHeading: 'Promociona para mostrar esta petición a más gente. Duplica su valor promocionando más de %bonusMin%',
        underText: 'Tu anuncio se mostrar en Change.org y en los correos electrónicos que enviamos. '

      },
      v9: {
      	heading: '<b>¡Eres un héroe, %fname%!</b> Promociona para mostrar esta petición a más gente',
        underText: '<b><span class="type-branded">Bonus:</span></b> Consigue el doble de gente cuando promocionas más de %bonusMin%!<br /><br />Tu anuncio se mostrará en Change.org y en los correos electrónicos que enviamos. '
      },
      v10: {
        heading: '¡Eres un héroe, %fname%!',
        subHeading: 'Promociona para mostrar esta petición a más gente',
        underText: '<b><span class="type-branded">Bonus:</span></b> Consigue el doble de gente cuando promocionas más de %bonusMin%!<br /><br />Tu anuncio se mostrará en Change.org y en los correos electrónicos que enviamos.  '
      }
    }
  };
  if(! translations[identity_code] )
    return translations['en-us'];
  else
  	return translations[identity_code];
};
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20669580445"], "experiments": [{"weightDistributions": [{"entityId": "20685640019", "endOfRange": 2500}, {"entityId": "20665660253", "endOfRange": 5000}, {"entityId": "20650900379", "endOfRange": 7500}, {"entityId": "20646830452", "endOfRange": 10000}], "audienceName": "Mobile only,Screen.width Mobile", "name": "[fdn] - SAP - Share Optimisations on Mobile - ES", "bucketingStrategy": null, "variations": [{"id": "20685640019", "actions": [], "name": "Original"}, {"id": "20665660253", "actions": [{"viewId": "20669580445", "changes": [{"dependencies": [], "type": "custom_code", "id": "73420901c8bc48e69000a8658dc9c9dc", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
 	flashMessage.innerHTML = firstName + ', tu petición se ha publicado con éxito. Da un paso más, ¡Compartirla es clave!';
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
  heading.innerText = "¡Logra 10 firmas en 24 horas!";
  headingMobile.innerText = "¡Logra 10 firmas en 24 horas!";
  copy.innerHTML = "En nuestra experiencia, una petición que logra 10 firmas en 24 horas tiene más posibilidad de viralizarse. <strong>Invierte 5 minutos y compártela en tus redes sociales.</strong>";

  
  var arrowEl = document.createElement('div');
  arrowEl.classList = 'share-arrow';
  arrowEl.innerHTML = '<span>Invierte 5 minutos y comparte en todos estos canales.</span>';
  
  copy.parentNode.insertBefore(arrowEl, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
	skip.innerHTML = '<span>No puedo compartir en este momento</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    shareList.classList.remove('mhxxxl');
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
  });
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+ name +'</strong>'+ ' creó y compartió una petición y logró '+sigs+' firmas';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+ name +'</strong>'+ ' creó y compartió una petición y logró '+sigs+' firmas';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.row.match-height {\n  flex-direction: column;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "2edbdf03e1ea4b5ea0c2ec1f545c70ad"}]}], "name": "Variation #2"}, {"id": "20650900379", "actions": [{"viewId": "20669580445", "changes": [{"dependencies": [], "type": "custom_code", "id": "6983d906eae1404a82b4e1ce115fd7cc", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
	flashMessage.innerHTML = "¡Felicidades! " + firstName + ", tu petición se ha publicado. Completa este paso para lograr las primeras firmas.";

  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  var feed = document.querySelector('[data-view="petitions/components/starter_share_feed"]');
	var ff = document.createElement('div');
  ff.classList = 'feed-fade';
  feed.appendChild(ff);
  
  if (starterShare.querySelector('.page-wrap .photo-component')) {
   	var photo = starterShare.querySelector('.page-wrap .photo-component');
    firstCard.insertBefore(photo, firstCard.firstChild);
  }
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l', 'mbs');
  copy.classList.remove('mbxl');
  
	heading.innerText = "¡Las primeras 24 horas son clave!";
  headingMobile.innerText = "¡Las primeras 24 horas son clave!";
  copy.innerHTML = "En nuestra experiencia, una petición que logra 10 firmas en 24 horas tiene más posibilidad de viralizarse. <strong>Invierte 5 minutos y compártela en tus redes sociales.</strong>";

  
  var tip = document.createElement('p');
  tip.classList = 'txt-l type-l mbxl mtn';
 	tip.innerHTML = '💡 Busca grupos o influencers en redes sociales que se interesen por temas como el de tu petición, y comparte tu publicación con ellos.';
  
  copy.parentNode.insertBefore(tip, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
	skip.innerHTML = '<span>No puedo compartir en este momento</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    shareList.classList.remove('mhxxxl');
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
    /*
    var gmail = starterShare.querySelector('.js-gmail-card');
    var newOrder = gmail ? 
      ['js-gmail-card', 'js-facebook-card','js-copylink-card','js-whatsapp-card','js-twitter-card','js-sms-card'] :
      ['js-facebook-card','js-copylink-card','js-whatsapp-card','js-email-card','js-twitter-card','js-sms-card'];
    newOrder.forEach(function(orderEl, i) {
      var newChild;
      shareOptions.forEach(function(option) {
        if (option.classList.contains(orderEl)) {
          newChild = option;
        }
      });
      shareOptions[i].parentNode.appendChild(newChild);
    });
    */
  });
/*
  var progressWrap = document.createElement('div');
  progressWrap.innerHTML = '<img src="https://static.change.org/psf-experiments/sap-optimization-stepper.png" class="optly-stepper">';
  starterShare.insertBefore(progressWrap, starterShare.firstChild);
*/
  starterShare.querySelector('.page-wrap > div:first-child').classList.remove('bg-default');
  starterShare.querySelector('.page-wrap > div:first-child').classList.add('bg-brighter');
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+ name +'</strong>'+ ' creó y compartió una petición y logró '+sigs+' firmas';
  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+ name +'</strong>'+ ' creó y compartió una petición y logró '+sigs+' firmas';
}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.page-wrap > .bg-brighter {\n\tborder-radius: 5px;\n  margin-bottom: 5px;\n}\n\n.feed-fade {\n      position: absolute;\n    bottom: 0px;\n    width: 100%;\n    height: 60px;\n    background: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 100%);\n    border-radius: 5px;\n}\n\n.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.row.match-height {\n  flex-direction: column;\n}\n\n.share-for-starters-custom {\n\tpadding: 10px;\n  padding-top: 20px;\n}\n\n.share-for-starters-custom, .share-for-starters-custom .bg-default {\n\tbackground: #FFFCF7 !important;\n}\n\n.share-for-starters-custom .box-sm.xs-full-height.page-wrap > .bg-default {\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n  margin-top: 0;\n}\n\n.share-for-starters-custom .row.match-height .psf-combo-embedded-card .photo-component {\n    margin-top: -30px;\n    margin-left: -20px;\n    margin-right: -20px;\n    margin-bottom: 10px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    overflow: hidden;\n}\n\n.share-for-starters-custom .bg-default {\n  padding-bottom: 5px;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-for-starters-custom .js-sms-card [data-view=\"components/share_buttons/sms\"] {\n  color: inherit;\n  text-decoration: none;\n}\n\nul.share-options-list .symbol {\n\tfont-size: 1.375rem !important;\n}\n.optly-stepper {\n    width: 100%;\n    max-width: 100%;\n    margin: auto;\n    padding: 10px 15px 20px;\n  padding-left: 0;\n  padding-right: 0;\n  margin-right: -10px;\n}\n.page-wrap > .bg-brighter {\n    box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.103657);\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "269c836674274c5b849d3868fc4d69a3"}]}], "name": "Variation #4"}, {"id": "20646830452", "actions": [{"viewId": "20669580445", "changes": [{"dependencies": [], "type": "custom_code", "id": "9F09BF7D-AC54-48C0-8B9D-295ECBAFAC61", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('.share-for-starters').then(function(starterShare) {

  var firstName = window.changeTargetingData.viewer.user.displayName ? window.changeTargetingData.viewer.user.displayName.split(" ")[0] : '';
  var flashMessage = document.querySelector('.flash-message-success .col-xs-12 p');
  flashMessage.innerHTML = 'Felicidades! Tu petición se ha publicado. Completa este paso para lograr las primeras firmas.';
  
  starterShare.classList.add('share-for-starters-custom');
  
  var firstCard = starterShare.querySelector('.row.match-height .psf-combo-embedded-card:nth-of-type(1)');
  
  // hide header in safe way
  document.getElementById('main-header-responsive').classList.add('share-hide-header');
  
  // change copy
  var heading = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.hidden-xs');
  var headingMobile = starterShare.querySelector('.row.match-height .psf-combo-embedded-card h1.visible-xs');
  var copy = starterShare.querySelector('.row.match-height .psf-combo-embedded-card p.mbxl.type-l');
  heading.classList.add('txt-l');
  headingMobile.classList.add('txt-l');
  copy.classList.add('txt-l');
  
 	heading.innerText = firstName + ", da un paso más. ¡Comparte tu petición!";
  headingMobile.innerText = firstName + ", da un paso más. ¡Comparte tu petición!";
  copy.innerHTML = "Compartir tu petición en otros canales como Facebook o Whatsapp es la mejor forma de lograr que tu petición alcance a más personas y consiga más apoyo.";


  
  var arrowEl = document.createElement('div');
  arrowEl.classList = 'share-arrow';
  arrowEl.innerHTML = '<span>Invierte 5 minutos y comparte en todos estos canales.</span>';  
  copy.parentNode.insertBefore(arrowEl, copy.nextSibling);
  
  var skip = starterShare.querySelector('.js-default-footer-text');
  skip.classList.add('link-subtle', 'type-weak');
	skip.innerHTML = '<span>No puedo compartir en este momento</span>';
  
  utils.waitForElement('.hide-overflow .activity-feed-item-enter.activity-feed-item-enter-active').then(function() {
		document.querySelector('[data-view="components/footer"]').classList.add('share-hide-header');
  });
  
  utils.waitForElement('.share-for-starters .share-options-list').then(function(shareList) {
    shareList.classList.remove('mhxxxl');
    var shareOptions = starterShare.querySelectorAll('.share-options-list > *');
    var copylink = starterShare.querySelector('[data-share-context="copylink"]');
    shareList.insertBefore(copylink, shareOptions[0].nextSibling);
  });
  
});

utils.waitForElement('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle').then(function(){
	var els = document.querySelectorAll('[data-view="petitions/components/starter_share_feed"] .arrange.arrange-middle');       els.forEach(function(element){
    var it = element.querySelector('.arrange-fill .type-break-word > span');
    var name = it.querySelector('strong').innerText;
    var sigs = it.innerText.replace( /^\D+/g, '');
    sigs = parseInt(sigs);
    var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+ name +'</strong>'+ ' creó y compartió una petición y logró '+sigs+' firmas';

  });
});
utils.observeSelector('[data-view="petitions/components/starter_share_feed"] .activity-feed-item-enter.activity-feed-item-enter-active', function(element) {
  var it = element.querySelector('.arrange-fill .type-break-word > span');
  var name = it.querySelector('strong').innerText;
  var sigs = it.innerText.replace( /^\D+/g, '');
  sigs = parseInt(sigs);
  var shares = Math.ceil(sigs/2);
    shares = shares > 6 ? 7 : shares;
    var rb = Math.random() < 0.5;
    shares = shares === 7 && rb ? 5 : shares;
    it.innerHTML = '<strong>'+ name +'</strong>'+ ' creó y compartió una petición y logró '+sigs+' firmas';

}, {
  "timeout": 60000,
  "once": false
});
}}, {"value": "<style>.share-for-starters-custom li[data-share-context], .share-for-starters-custom li.js-accordion-card {\n    border-radius: 5px;\n    border: 2px solid #adacad !important;\n  \tfont-weight: bold;\n}\n\n.row.match-height {\n  flex-direction: column;\n}\n\n.share-hide-header {\n  display: none !important;\n}\n\n.share-arrow {\n  position: relative;\n  padding-left: 40px;\n  padding-right: 80px;\n  margin-bottom: 10px;\n}\n\n.share-arrow span {\n  background: #FFF9DF;\n}\n\n.share-arrow::after {\n \tcontent: \"\";\n  background-image: url(https://static.change.org/psf-experiments/sap-optimization-arrow.png);\n  position: absolute;\n  width: 34px;\n  height: 34px;\n  top: 10px;\n  right: 40px;\n  background-size: contain;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "4304B37F-870F-49FB-8A9A-FFA8BC58911F"}]}], "name": "Variation #3 (duplicate v2)"}], "audienceIds": ["and", "11487071591", "11800860209"], "changes": null, "id": "20660650455", "integrationSettings": null}], "id": "20688950557", "weightDistributions": null, "name": "[fdn] - SAP - Share Optimisations on Mobile - ES", "groupId": null, "commitId": "20671660729", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"11403094673": {}}, "integrationStringVersion": 2, "viewIds": ["20670600535"], "experiments": [{"weightDistributions": [{"entityId": "20660820664", "endOfRange": 3000}, {"entityId": "20670600536", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[niftic] - Share Initial - Tweet DM Emerson Act", "bucketingStrategy": null, "variations": [{"id": "20660820664", "actions": [{"viewId": "20670600535", "changes": []}], "name": "Original"}, {"id": "20670600536", "actions": [{"viewId": "20670600535", "changes": [{"dependencies": [], "type": "custom_code", "id": "50979b982dec43f2985d2276535e134f", "value": function($){var utils = window.optimizely.get("utils");

utils.waitForElement('[data-view="psf/components/text"]').then(function(shareText) {
  utils.waitForElement('body.type-loaded').then(function() {
        
    var shareCopy = document.querySelector('[data-view="psf/components/text"]>div>span').innerHTML;
    // shareCopy = shareCopy.split('Join')[0] + 'Make an even bigger impact by helping us target the local businesses who are sponsoring the mass killing of sharks.';

    shareText.innerHTML = '' +
      '<div class="row">' +
      '    <div class="col-xs-12">' +
      '        <h1>You can fight food insecurity by tweeting to amend the #EmersonAct now</h1>' +
      '        <p class="mbxl type-l">'+shareCopy+'</p>' +
      '				 <div class="row"><div class="col-sm-9 position-block-center pbs">' + 
      '        		<button class="optly-tweet btn btn-full btn-big bg-twitter type-brighter border-none-a type-m"><span class="symbol symbol-twitter-alt"></span>Tweet about the #EmersonAct Now</button>' +
      '						<div class="optly-show-more-wrap txt-c mts mbl"><a class="optly-show-more link-subtle">No, show other share options <span class="symbol symbol-bracket-down mlxxxs symbol-xs"></span></a></div>' +
      '				 </div></div>' +
      '    </div>' +
      '</div>';
    
    document.querySelector('.js-twitter-share-button').classList.add('hide-fully');
    document.querySelector('.shareButtons').classList.add('hide-fully');
    
    document.querySelector('.optly-show-more').addEventListener('click', function(e){
    	e.preventDefault();
      document.querySelector('.optly-show-more-wrap').classList.add('hide-fully');
      document.querySelector('.shareButtons').classList.remove('hide-fully');
    });

    var tweetBtn = document.querySelector('.optly-tweet');
    tweetBtn.addEventListener('click', function() {
      var tweet = '24% of food in the U.S. is wasted. Amending the #EmersonAct would fight food insecurity—and stop senseless food waste.\n\nSign the petition --> Change.org/EmersonAct';
      utils.waitUntil(function() { return !!window.App; }).then(function() {
        window.App.trackEvent('optly_tweet_dm');
      });
      window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet), 'newwindow', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=500');
    });
  });
});
}}, {"value": "<style>@media (min-width: 778px) {\n [data-view=\"psf/components/text\"] {\n \tpadding: 0 20px;  \n }\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "e1911d20becb4c60b1f92df1b1c5862e"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20674000565", "integrationSettings": null}], "id": "20701020033", "weightDistributions": null, "name": "[niftic] - Share Initial - Tweet DM Emerson Act", "groupId": null, "commitId": "20667460872", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "12d7225b64aa489a82f292f133d324c3", "value": function($){window.getTweet = function() {
	var pId = parseInt(window.changeTargetingData.petition.id);
  var tweetCopy = {
    25799817: 'It’s not too late to add a nurse to your COVID task force, @JoeBiden & @Transition46! The pandemic’s frontline heroes deserve a seat at the table. chng.it/WKkSntNz',
    16651316: '@Disney @DisneyCruise Will you work with Bahamians to find an eco-conscious alternative to the planned cruise port? Travelers care about responsible tourism! chng.it/wtSPytwq'
  };
  return tweetCopy[pId];
};
}}]}], "listTargetingKeys": [], "groups": [], "views": [{"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://www.change.org/search", "match": "simple"}]], "activationType": "url_changed", "name": "Search", "apiName": "11391265293_search", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "11469911702"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://www.change.org/start-a-petition", "match": "simple"}]], "activationType": "url_changed", "name": "Start a petition", "apiName": "11391265293_start_a_petition", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "11470010864"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.location.pathname === "/";
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var user = window.changeTargetingData.viewer.user;
  var appStateLocale = window.changeTargetingData.appState.locale;
  var lang = '';
  if (appStateLocale) {
   	// based on settings
    lang = appStateLocale.split('-')[0];
  } else {
   	// based on browser
    var browserLocale = window.navigator.userLanguage || window.navigator.language;
    if (!!browserLocale.locale) {
    	lang = browserLocale.locale.split('-')[0];
    } else {
    	lang = browserLocale.split('-')[0];
    }
  }
  var langLower = lang.toLowerCase();
	return langLower === 'en' || langLower === 'es' || langLower === 'it' || langLower === 'fr';
}
}]], "activationType": "url_changed", "name": "Homepage [EN, FR, ES, IT]", "apiName": "11391265293_homepage", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "11475710429"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://www.change.org/petitions", "match": "simple"}]], "activationType": "url_changed", "name": "Petitions", "apiName": "11391265293_petitions", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "11484812307"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "change.org", "match": "substring"}]], "activationType": "url_changed", "name": "Sitewide", "apiName": "11391265293_sitewide", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "11492601598"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://www.change.org/s/member", "match": "simple"}]], "activationType": "url_changed", "name": "Membership", "apiName": "11391265293_membership", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "11538580249"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://www.change.org/impact", "match": "simple"}]], "activationType": "url_changed", "name": "Impact", "apiName": "11391265293_impact", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "11544610156"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var user = window.changeTargetingData.viewer.user;
  var appStateLocale = window.changeTargetingData.appState.locale;
  var lang = '';
  if (appStateLocale) {
   	// based on settings
    lang = appStateLocale.split('-')[0];
  } else {
   	// based on browser
    var browserLocale = window.navigator.userLanguage || window.navigator.language;
    if (!!browserLocale.locale) {
    	lang = browserLocale.locale.split('-')[0];
    } else {
    	lang = browserLocale.split('-')[0];
    }
  }
  lang = lang.toLowerCase();
	return lang === 'en' || lang === 'de' || lang === 'es' || lang === 'fr' || lang === 'it' || lang === 'ru';
}
}], ["not", ["or", {"type": "url", "value": "the-new-prime-minister-of-the-united-kingdom-boris-johnson-end-the-social-care-crisis-so-no-one-has-to-sell-their-home-to-pay-for-dementia-care", "match": "substring"}]], ["not", ["or", {"type": "url", "value": "petition_update", "match": "substring"}]], ["not", ["or", {"type": "url", "value": "petition_show", "match": "substring"}]]], "activationType": "url_changed", "name": "PSF_ComboPage", "apiName": "11391265293_url_targeting_for_nifticcomboheroboard_v16_1_1_1", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "11804852214"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://www.change.org/p/biogen-without-spinraza-zahra-will-die/sponsors/new?source_location=combo_psf&psf_variant=combo", "match": "simple"}]], "name": "PPMU_psf", "apiName": "11391265293_ppmu_psf", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "11929431240"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/share\\_for\\_starters.*just\\_created\\=true.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var user = window.changeTargetingData.viewer.user;
  var appStateLocale = window.changeTargetingData.appState.locale;
  var lang = '';
  if (appStateLocale) {
   	// based on settings
    lang = appStateLocale.split('-')[0];
  } else {
   	// based on browser
    var browserLocale = window.navigator.userLanguage || window.navigator.language;
    if (!!browserLocale.locale) {
    	lang = browserLocale.locale.split('-')[0];
    } else {
    	lang = browserLocale.split('-')[0];
    }
  }
	return lang.toLowerCase() === 'en';
}
}]], "activationType": "url_changed", "name": "PetitionStarter_ShareAsk [EN]", "apiName": "11391265293_url_targeting_for_nifticsapshare_page_v1_1", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "11938771521"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "url", "value": "share_abi=1", "match": "substring"}]], "activationType": "url_changed", "name": "ABI Page", "apiName": "11391265293_url_targeting_for_nifticshare_abi_feed", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "12195012439"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\.*$", "match": "regex"}]], "activationType": "url_changed", "name": "PetitionPage", "apiName": "11391265293_url_targeting_for_nifticpetition_sign_success_1_1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "12349002164"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/u\\/.*$", "match": "regex"}]], "name": "Petition Update View", "apiName": "11391265293_url_targeting_for_start_petition_button_on_petition_", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "12377650215"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https:\\/\\/(www\\.)?change\\.org\\/s\\/member\\?lpv_id=1757&amount=500&source_location=psf_carousel(.+)?", "match": "regex"}]], "name": "Membership Page \u2013 1757, PSF Carousel (US)", "apiName": "11391265293_membership_page_gb", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "12381261667"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/share\\_for\\_starters.*just\\_created\\=true.*$", "match": "regex"}]], "activationType": "url_changed", "name": "Starter Share Page", "apiName": "11391265293_starter_share_page", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "12399190432"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://www.change.org/u/me", "match": "substring"}]], "activationType": "url_changed", "name": "My Petitions", "apiName": "11391265293_my_petitions", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "13014010435"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*?share_abi=1).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share\\?share=1.*$", "match": "regex"}]], "activationType": "url_changed", "name": "PSF Second Share Ask", "apiName": "11391265293_url_targeting_for_nifticshare_second_share", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "13190290309"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*?share_abi=1).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return (window.changeTargetingData.recruiter ? window.changeTargetingData.recruiter.id : false) === (window.changeTargetingData.petition.user.id ? window.changeTargetingData.petition.user.id : false);
}
}]], "activationType": "url_changed", "name": "PSF Share - Recruited by Starter", "apiName": "11391265293_psf_share__recruited_by_starter", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "13323040305"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'au', 'gb', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "PSF Combo - All EN Locales", "apiName": "11391265293_psf_combo__recruited_by_starter", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "13340170221"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://www.change.org/s/membership?lpv_id=2460&amount=300", "match": "simple"}], ["or", {"type": "url", "value": "https://www.change.org/s/socios?lpv_id=2587", "match": "simple"}]], "name": "Membership Pages \u2013 Leaner Membership Pages (GB)", "apiName": "11391265293_membership_pages__all_gb", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "13485790361"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/u\\/.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
	return window.changeTargetingData.viewer.loginState !== 'guest';
}
}], ["or", {"type": "element_present", "value": ".js-combo-button"}]], "activationType": "url_changed", "name": "Petition Update - Signed, Non-Guest", "apiName": "11391265293_petition_update", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "13499040282"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://www.change.org/s/member?lpv_id=1757&amount=500&source_location=psf_carousel", "match": "exact"}, {"type": "url", "value": "https://www.change.org/s/membership?lpv_id=1713&amount=300&source_location=psf_carousel", "match": "exact"}, {"type": "url", "value": "https://www.change.org/s/socios?lpv_id=1708&amount=500&source_location=psf_carousel", "match": "exact"}, {"type": "url", "value": "https://www.change.org/s/members-canada?lpv_id=1801&amount=500&source_location=psf_carousel", "match": "exact"}]], "name": "Membership Landing Page \u2013 Multi-region (US, ES, GB, CA)", "apiName": "11391265293_membership_landing_page__all_regions", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "13565330461"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "p\\/[^/]+\\/sponsors\\/new.*", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
return (window.changeTargetingData.viewer.loginState === "authenticated" || window.changeTargetingData.viewer.loginState === "guest");
}
}]], "activationType": "url_changed", "name": "PaymentPage (Authenticated & Guest)", "apiName": "11391265293_url_targeting_for_nifticppmu_feed_gif_2_1_1_1_1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "13676770410"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://www.change.org/s/soutiens?lpv_id=1527&amount=500&source_location=psf_carousel", "match": "exact"}, {"type": "url", "value": "https://www.change.org/s/sustainers?lpv_id=&amount=800&source_location=psf_carousel", "match": "exact"}]], "name": "Membership Landing Page \u2013 Multi-region (FR, AU)", "apiName": "11391265293_membership_landing_page__multiregion_group_b", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "13723460529"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://www.change.org/s/friends?lpv_id=&amount=20000&source_location=psf_carousel", "match": "exact"}]], "name": "Membership Landing Page \u2013 Multi-region (Russia)", "apiName": "11391265293_membership_landing_page__multiregion_group_c", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "13729280286"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://www.change.org/s/sottoscrittori?lpv_id=&amount=500&source_location=psf_carousel", "match": "exact"}]], "name": "Membership Landing Page \u2013 Multi-region (Italy)", "apiName": "11391265293_membership_landing_page__multiregion_italy", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "13787150245"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share_abi=1)(?!.*skip=1)(?!.*share=1).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return !window.changeTargetingData.psfShareCopyBandit;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var user = window.changeTargetingData.viewer.user;
  var appStateLocale = window.changeTargetingData.appState.locale;
  var lang = '';
  if (appStateLocale) {
   	// based on settings
    lang = appStateLocale.split('-')[0];
  } else {
   	// based on browser
    var browserLocale = window.navigator.userLanguage || window.navigator.language;
    if (!!browserLocale.locale) {
    	lang = browserLocale.locale.split('-')[0];
    } else {
    	lang = browserLocale.split('-')[0];
    }
  }
	return lang.toLowerCase() === 'en';
}
}]], "activationType": "url_changed", "name": "PSF - Share Initial", "apiName": "11391265293_psf__share_initial", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "14270340384"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "p\\/[^/]+\\/sponsors\\/new.*", "match": "regex"}]], "activationType": "url_changed", "name": "Payment Page", "apiName": "11391265293_payment_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "14280610173"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "element_present", "value": "div[data-testid=\"ppmu-modal\"]"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en', 'es'];
    var locales = ['ca', 'au', 'es'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "dom_changed", "name": "PPMU Modal - CA, AU, ES [react]", "apiName": "11391265293_ppmu_modal", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "14495670450"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://www.change.org/start-a-petition", "match": "substring"}], ["or", {"type": "element_present", "value": "#content .new-modular[data-step=\"ask\"]"}]], "activationType": "dom_changed", "name": "SAP Flow First Step", "apiName": "11391265293_sap_flow", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "14511190200"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

  var serve = false;
  var currentSource = window.changeTargetingData.appState.utmParams.currentSource;
  var currentTerm = 
window.changeTargetingData.appState.utmParams.currentTerm;
  if (currentSource || currentTerm) {
    if (currentSource === 'petition_signer_confirmation' || currentSource === 'guest_sign_login_link' || currentTerm === 'new_signature_confirmation_reminder_one-sfmc' || currentTerm === 'new_signature_confirmation_reminder_two-sfmc') {
      serve = true;
    }
  }
  return serve;
/*
  var serve = true;
  return serve;*/
}
}]], "activationType": "url_changed", "name": "Combo GDPR Verification", "apiName": "11391265293_combo_gdpr_verification", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "14622620409"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\.*$", "match": "regex"}], ["or", {"type": "element_present", "value": ".js-combo-button"}], ["or", {"type": "custom_code", "value": function jsCondition() {
	return window.changeTargetingData.viewer.loginState !== 'guest';
}
}]], "activationType": "url_changed", "name": "SUPA - Signed, Non-Guests", "apiName": "11391265293_supa", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "14690260103"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "element_present", "value": ".modular-form[data-view=\"petitions/new/components/form\"],.modular-form[data-step=\"ask\"]"}], ["or", {"type": "url", "value": "start-a-petition", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'gb', 'ca', 'au'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "dom_changed", "name": "SAP Flow - First Step", "apiName": "11391265293_sap_flow_1", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "14710640274"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https:\\/\\/www\\.change\\.org\\/s\\/animals\\?lpv_id=2818\\&amount=500", "match": "regex"}]], "name": "Fight for Animals Landing Page", "apiName": "11391265293_fight_for_animals_landing_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "14713460012"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "^(?!.*share_abi=1)(?!.*share=1).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}]], "activationType": "url_changed", "name": "PSF - Share Initial Test", "apiName": "11391265293_psf__share_initial_test", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "14739070525"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.reactFe;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en', 'fr', 'it', 'es', 'de', 'ru', 'tr'];
    var locales = ['us', 'gb', 'ca', 'au', 'fr', 'it', 'es', 'de', 'ru', 'tr'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "Petition - React", "apiName": "11391265293_petition__react_guests", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "14768320679"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https\\:\\/\\/www\\.change\\.org\\/s\\/sustainers\\?lpv_id=2924\\&amount=1500", "match": "regex"}]], "name": "Sustainers 2924 LP", "apiName": "11391265293_sustainers_2924_lp", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "14806040196"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https\\:\\/\\/www\\.change\\.org\\/s\\/animals\\?lpv_id=2942", "match": "regex"}]], "name": "Animals 2942", "apiName": "11391265293_animals_2942", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "14832870840"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https\\:\\/\\/www\\.change\\.org\\/s\\/friends\\?lpv_id=1975", "match": "regex"}]], "name": "Friends 1975", "apiName": "11391265293_friends_1975", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "14888160118"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "www.change.org/s/socios?lpv_id=2986", "match": "substring"}]], "activationType": "url_changed", "name": "Member Banner Test [es]", "apiName": "11391265293_member_banner_test_es", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "15058791086"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "www.change.org/s/member?lpv_id=2989", "match": "substring"}]], "activationType": "url_changed", "name": "Member Banner Test", "apiName": "11391265293_member_banner_test", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "15075190379"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "www.change.org/s/friends?lpv_id=2988&amount=35000", "match": "substring"}]], "activationType": "url_changed", "name": "Member banner [RU]", "apiName": "11391265293_member_banner_ru", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "15112960406"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://www.change.org/p/support-the-equality-act/psf/promote_or_share?source_location=petition_show", "match": "simple"}]], "name": "Taylor Swift Petition", "apiName": "11391265293_taylor_swift_petition", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "15292660566"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://www.change.org/p/the-new-prime-minister-of-the-united-kingdom-boris-johnson-or-jeremy-hunt-end-the-social-care-crisis-so-no-one-has-to-sell-their-home-to-pay-for-dementia-care/psf/promote_or_share", "match": "simple"}]], "name": "GB_dementia-care_petition", "apiName": "11391265293_gb_dementiacare_petition", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "15698160291"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https:\\/\\/www\\.change\\.org\\/p\\/(.+)/u/new", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'gb', 'au', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "source_location=petition_update_advice", "match": "substring"}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Petition Update - Advice", "apiName": "11391265293_url_targeting_for_copy_of_niftic__dashboard__petitio", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "18158541004"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https:\\/\\/www\\.change\\.org\\/p\\/(.+)/dashboard", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'gb', 'au', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.reactFe;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var notClosed = true;
  var notPosted = true;
  if(window.localStorage.getItem('dashboard_post_update_close')) {
  if(parseInt(window.localStorage.getItem('dashboard_post_update_close')) >=2) {
    notClosed = false;
  } else {
    notClosed = true;
  }
  }
  if (window.localStorage.getItem('dashboard_post_update')) {
   notPosted = false; 
  }
  return notClosed && notPosted;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.petition.signatureCount.total >= 100;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Dashboard - Petition Update Advice", "apiName": "11391265293_url_targeting_for_copy_of_niftic__petition_starter_1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "18195000979"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
	return window.changeTargetingData.viewer.loginState.toLowerCase() !== 'guest';
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return !(!!document.querySelector('.js-sign-and-share-components .js-sign-button'));
}
}], ["or", {"type": "url", "value": "andy-beshear-justice-for-breonna-taylor", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return !(!!window.localStorage.getItem('breonna_milestone'));
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - SUPA - 5 Month Milestone", "apiName": "11391265293_url_targeting_for_copy_of_niftic__supa__monuments_po", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "18570393140"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/u\\/.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
	return window.changeTargetingData.viewer.loginState.toLowerCase() !== 'guest';
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'au', 'gb', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "element_present", "value": ".share[data-view=\"petitions/components/share\"]"}], ["or", {"type": "url", "value": "adams-county-district-attorney-justice-for-elijah-mcclain-2", "match": "substring"}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Petition Update - Elijah McClain", "apiName": "11391265293_url_targeting_for_copy_of_niftic__supa__elijah_mcc_2", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "18728650009"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
	return window.changeTargetingData.viewer.loginState.toLowerCase() !== 'guest';
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'au', 'gb', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "element_present", "value": ".share[data-view=\"petitions/components/share\"]"}], ["or", {"type": "url", "value": "adams-county-district-attorney-justice-for-elijah-mcclain-2", "match": "substring"}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - SUPA - Elijah McClain - R3", "apiName": "11391265293_url_targeting_for_copy_of_niftic__supa__elijah_mcc_4", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "18788454631"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "lpv_id=3641", "match": "substring"}, {"type": "url", "value": "lpv_id=3645", "match": "substring"}], ["or", {"type": "url", "value": "s/", "match": "substring"}]], "activationType": "url_changed", "name": "URL Targeting for [nifitc] - Member - MA Landing", "apiName": "11391265293_url_targeting_for_copy_of_nifitc__member__progress__", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "18800260352"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/u\\/.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'au', 'gb', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "save-the-usps", "match": "substring"}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - PUPA - Tweet DM - Save USPS", "apiName": "11391265293_url_targeting_for_copy_of_niftic__supa__tweet_dm___1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "18805870182"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
   	//25799817,
    16651316
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.appState.utmParams.currentMedium === 'grow';
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share__elijah_ca_4", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "18807865535"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "adams-county-district-attorney-justice-for-elijah-mcclain-2/psf/share", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return true;
  // window.changeTargetingData.appState.utmParams.currentMedium === 'twitter';
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share - Elijah Call Tool Tweet DM", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share__elijah_ca_3", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "18818611779"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "p\\/[^/]+\\/promote\\/thank_you.*", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'gb'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var stepperExperiment = window.localStorage.getItem('transparency_r12');
  return !!stepperExperiment;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Thank You - R12", "apiName": "11391265293_url_targeting_for_copy_of_niftic__thank_you__r11__h6", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "18874232428"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https:\\/\\/www\\.change\\.org\\/p\\/(.+)/dashboard", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'gb', 'au', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var treated = window.localStorage.getItem('sap_transparency_view');
  return !!treated;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Dashboard - Transparency Survey", "apiName": "11391265293_url_targeting_for_copy_of_niftic__dashboard__petit_1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "18916522267"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "start-a-petition", "match": "substring"}], ["or", {"type": "custom_code", "value": //.new-modular
function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'au', 'gb', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - SAP - Transparency", "apiName": "11391265293_url_targeting_for_copy_of_niftic__sap__sem__petiti_1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "18944910005"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
   	24144610, 
    25251556, 
    25145269,
    // count every vote
    25360347,
  	25360361,
  	25360366,
  	25360369,
  	25360377,
  	25251556,
  	// crystal mason
    13292213,
    25301534,
    25399759,
    25410185,
  	25421018,
    23575754,
    20778358,
    21131660,
    22240670,
    25468570,
    24817440,
    25621755
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Combo / Share - SMS, Call Tool, Sharable", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__rj_call_too", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "19079550993"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "change.org/yourdemocracy", "match": "substring"}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Voting - Landing Page", "apiName": "11391265293_url_targeting_for_niftic__voting__landing_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "19164361492"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "lpv_id=3678", "match": "substring"}, {"type": "url", "value": "lpv_id=3679", "match": "substring"}], ["or", {"type": "url", "value": "change.org/s/", "match": "substring"}]], "activationType": "url_changed", "name": "URL Targeting for [nifitc] - MA Landing - Weekly Breakdowns", "apiName": "11391265293_url_targeting_for_copy_of_nifitc__member__ma_landing", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "19178110517"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
   	20990048
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Combo - Emergency Money", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__share__sm_2", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "19202872745"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "p\\/[^/]+\\/sponsors\\/new.*", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['id'];
    var locales = ['id'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Payment - HJ Recording id-ID", "apiName": "11391265293_url_targeting_for_copy_of_niftic__payment__new_use_1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "19224590105"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.location.pathname === "/";
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Home - SAP Awareness", "apiName": "11391265293_url_targeting_for_copy_of_niftic__home__geotargeting", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "19224620759"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https:\\/\\/www\\.change\\.org\\/p\\/(.+)/dashboard", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'gb', 'au', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var treated = window.localStorage.getItem('home_sap_awareness');
  return !!treated;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Dashboard - Awareness Survey", "apiName": "11391265293_url_targeting_for_copy_of_niftic__dashboard__transpa", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "19320090372"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "change.org/yourstory", "match": "substring"}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Video Submission - Landing Page", "apiName": "11391265293_url_targeting_for_copy_of_niftic__voting__landing_pa", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "19338570141"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "change.org/start-a-petition", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - SAP - Pre-SAP Support Awareness", "apiName": "11391265293_url_targeting_for_copy_of_niftic__sap__sem__petiti_3", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "19357731136"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https:\\/\\/www\\.change\\.org\\/p\\/(.+)/dashboard", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'gb', 'au', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var treated = window.localStorage.getItem('pre_sap_awareness');
  return !!treated;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Dashboard - Pre-Sap Awareness Survey", "apiName": "11391265293_url_targeting_for_copy_of_niftic__dashboard__awarene", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "19413320262"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    20818498
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM Cancel Student Loans", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial__t_2", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "19572452266"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
	return window.changeTargetingData.viewer.loginState.toLowerCase() !== 'guest';
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'au', 'gb', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "give-2000-month-to-every-american-moneyforthepeople-covid19", "match": "substring"}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - SUPA - Emergency Money Popup", "apiName": "11391265293_url_targeting_for_copy_of_niftic__supa__emergency__1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "19577780796"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
   	25360449
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.appState.utmParams.currentSource === 'grow';
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Combo - Call Tool - Greg Mingo Email", "apiName": "11391265293_url_targeting_for_copy_of__niftic__combo__call_tool_", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "19601693844"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
   	25826794
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.appState.utmParams.currentMedium !== 'staffupdate';
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Combo - NJ Sharables", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__call_tool_2", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "19616943486"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
   	25360449
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.appState.utmParams.currentSource !== 'grow';
}
}]], "activationType": "url_changed", "name": "URL Targeting for  [niftic] - Combo - Call Tool - Greg Mingo", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__share__sm_3", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "19625082556"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "p\\/[^/]+\\/promote\\/thank_you.*", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['es', 'fr', 'it', 'de', 'ru'];
    var locales = ['es', 'fr', 'it', 'de', 'ru'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Thank You - Non-EN Survey", "apiName": "11391265293_url_targeting_for_copy_of_niftic__thank_you__en_surv", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "19702290236"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
   	25826794
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.appState.utmParams.currentMedium === 'staffupdate';
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Combo - NJ Sharables Email", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__nj_sharable", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "19707200112"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
   	26720868,
    26651836,
		26720675,
		26720579
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Impact Template - Combo/Share - Call Tool + Tweet DM", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__share__sm_4", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "19753146908"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    27137176
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}], ["or", {"type": "url", "value": "share=1", "match": "substring"}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM - FL Anti-Trans", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial__t_3", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "19969620057"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    27049763
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM Pandemic Unemployment Benefits", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial__t_5", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20036931948"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "element_present", "value": ".js-modular-sap-container[data-view=\"components/edit_starter_profile/edit_user\"] .js-start-as-org"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us','gb','au','ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "dom_changed", "name": "EN - SAP Flow \u2013 Start As Org Modal", "apiName": "11391265293_sap_flow__start_as_org_modal", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20040668201"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    26955636
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}], ["or", {"type": "url", "value": "share=1", "match": "substring"}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM Grey Television", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial__t_6", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20065088743"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "change.org/start-a-petition", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['in'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Pre-SAP Support Awareness - IN", "apiName": "11391265293_url_targeting_for_copy_of_niftic__sap__presap_suppor", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20118209519"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "start-a-petition", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['za'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic/fdn] - SAP - Media Disclaimer", "apiName": "11391265293_url_targeting_for_copy_of_niftic__sap__add_media_f_1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "20120015306"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "change.org/start-a-petition", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['ja'];
    var locales = ['jp'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Pre-SAP Support Awareness - JP", "apiName": "11391265293_url_targeting_for_copy_of_fdn__sap__presap_support_2", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20160805660"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us','au','ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return !(!!document.querySelector('[data-view="petitions/components/share"]'));
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return !(!!document.querySelector('.js-promote-button'));
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Petition Page - Disable Interrupt", "apiName": "11391265293_url_targeting_for_copy_of_niftic__petition_page__tan", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20166826701"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
   	28285612
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for  [niftic] - Combo - Call Tool - For The People", "apiName": "11391265293_url_targeting_for_copy_of__niftic__combo__call_too_1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20167837227"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "change.org/start-a-petition", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['id'];
    var locales = ['id'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Pre-SAP Support Awareness - ID", "apiName": "11391265293_url_targeting_for_copy_of_fdn__sap__presap_support_a", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20197253641"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "change.org/start-a-petition", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['pt'];
    var locales = ['br'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Pre-SAP Support Awareness - BR", "apiName": "11391265293_url_targeting_for_copy_of_fdn__sap__presap_support_3", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20205522976"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "/co/s/member/post_promote_thank_you", "match": "substring"}, {"type": "url", "value": "/co/s/membership/post_promote_thank_you", "match": "substring"}, {"type": "url", "value": "/co/s/sustainers/post_promote_thank_you", "match": "substring"}, {"type": "url", "value": "/co/s/members-canada/post_promote_thank_you", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'au', 'ca', 'gb'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "PPMU Thank You [EN]", "apiName": "11391265293_ppmu_thank_you_en", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20221861361"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['au', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var lm = !!window.changeTargetingData.petition.lowMonetization;
  return !lm;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Combo - PSF Retention", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__super_signe", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20223160166"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'gb', 'ca', 'au'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "element_present", "value": "div[data-testid=\"ppmu-modal\"]"}]], "activationType": "dom_changed", "name": "PPMU Modal [EN]", "apiName": "11391265293_ppmu_modal_en", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20223571023"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "change.org/start-a-petition", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['es'];
    var locales = ['ar'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Pre-SAP Support Awareness - AR", "apiName": "11391265293_url_targeting_for_copy_of_fdn__sap__presap_support_4", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20232970813"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "start-a-petition", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'au', 'gb', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "ofba=1", "match": "substring"}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - SAP - FB Ads", "apiName": "11391265293_url_targeting_for_copy_of_niftic__sap__sem_v1", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20289492831"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "change.org/start-a-petition", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['th'];
    var locales = ['th'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Pre-SAP Support Awareness - TH", "apiName": "11391265293_url_targeting_for_copy_of_fdn__sap__presap_support_5", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20312737077"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/share_for_starters.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us','ca','au','gb'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - SAP - Share Optimizations New", "apiName": "11391265293_url_targeting_for_copy_of_niftic__sap__share_optimiz", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20320952922"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/share_for_starters.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us','ca','au','gb'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - SAP - Share Optimizations New - Desktop", "apiName": "11391265293_url_targeting_for_copy_of_niftic__sap__share_optim_1", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20321531621"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*skip=1)(?!.*share=1)(?!.*share_abi=1).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['ca', 'au', 'gb','us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Share Shot Validations", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial__s_3", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20324182136"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['pt', 'ja'];
    var locales = ['br', 'jp'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.viewer.user.signatureCount > 17;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var exclude = [
   	28285612
  ];
  return exclude.indexOf(parseInt(window.changeTargetingData.petition.id)) === -1;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var isMember = !!window.changeTargetingData.userIsAMember;
  return !isMember;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Combo - SuSi Member Ask R4 - BR, JP", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__susi_mem_10", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "20326389406"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "change.org/start-a-petition", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['ng'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Pre-SAP Support Awareness - NG", "apiName": "11391265293_url_targeting_for_copy_of_fdn__sap__presap_support_6", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20331887058"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/u\\/.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us','ca','au','gb'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var share = !!document.querySelector('[data-view="petitions/components/share"]');
  var promote = !!document.querySelector('.js-combo-button');
  var tabsHeader = document.querySelector('[data-view="petitions/components/tabs_header"]');
  if (tabsHeader) {
      var signed = tabsHeader.getAttribute('data-signed');
  		return signed && (share || promote);
  } else {
   return false; 
  }
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.petition.user.id !== window.changeTargetingData.viewer.user.id;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Petition Update - Onsite Starter Acquisition R3", "apiName": "11391265293_url_targeting_for_copy_of_niftic__petition_update__3", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "20352565146"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['es'];
    var locales = ['ec',	'py',	'do',	'hn',	'ni',	'cr',	'gt',	'pr',	'sv'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.viewer.loginState.toLowerCase() !== 'guest';
}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - Combo experiment B - LatAm (es-419) - Latino", "apiName": "11391265293_url_targeting_for_copy_of_fdn__combo_experiment_b__l", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20370828208"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
	return window.changeTargetingData.viewer.loginState.toLowerCase() !== 'guest';
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us','ca','au','gb'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var share = !!document.querySelector('[data-view="petitions/components/share"]');
  var promote = !!document.querySelector('.js-combo-button');
  var tabsHeader = document.querySelector('[data-view="petitions/components/tabs_header"]');
  if (tabsHeader) {
      var signed = tabsHeader.getAttribute('data-signed');
  		return signed && (share || promote);
  } else {
   return false; 
  }
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.petition.user.id !== window.changeTargetingData.viewer.user.id;
}
}]], "activationType": "url_changed", "name": "URL Targeting for  [niftic] - SUPA - Onsite Starter Acquisition R3", "apiName": "11391265293_url_targeting_for_copy_of_niftic__supa__onsite_sta_4", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "20375700006"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.viewer.user.signatureCount > 17;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var exclude = [
   	28285612
  ];
  return exclude.indexOf(parseInt(window.changeTargetingData.petition.id)) === -1;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var lm = !!window.changeTargetingData.petition.lowMonetization;
  return !lm;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var isMember = !!window.changeTargetingData.userIsAMember;
  return !isMember;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return !!window.changeTargetingData.appState.utmParams.currentSource && window.changeTargetingData.appState.utmParams.currentSource.indexOf('aa_') !== -1 && window.location.href.indexOf('petition_show') === -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Combo - SuSi Member Ask R9 - AA Traffic", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__susi_mem_13", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20378046064"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'gb', 'ca', 'au'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.petition.user.countryCode.toLowerCase() === 'in' && window.changeTargetingData.viewer.user.countryCode.toLowerCase() !== 'in';
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Combo - Diaspora Survey HJ", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__super_sig_1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20421712757"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/share_for_starters.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['id'];
    var locales = ['id'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Share Optimisation on Mobile - ID", "apiName": "11391265293_url_targeting_for_copy_of_niftic__sap__share_optim_2", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20434613084"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/u\\/.*$", "match": "simple"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us','ca','au','gb'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "Petition Update - EN", "apiName": "11391265293_petition_update__en", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20439172929"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "p\\/[^/]+\\/d.*", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'au', 'ca', 'gb'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "Carousel Page - [EN-US]", "apiName": "11391265293_carousel_page__enus", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20467821684"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    29898034
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM Mako Mania", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial__t_7", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20467865797"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "/co/s/member/post_promote_thank_you", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var uid = parseInt(window.changeTargetingData.viewer.user.id);
  return (uid % 2 == 0);
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - PPMU Thank You - Content Pilot", "apiName": "11391265293_url_targeting_for_niftic__ppmu_thank_you__content_pi", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20476471346"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['id'];
    var locales = ['id'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.viewer.loginState.toLowerCase() !== 'guest';
}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - Combo experiment B - ID", "apiName": "11391265293_url_targeting_for_copy_of_fdn__combo_experiment_b__1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20481034040"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "Combo Page - [EN/US]", "apiName": "11391265293_combo_page__en_", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20483090427"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "change.org/start-a-petition", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "Start a Petition - [EN/US]", "apiName": "11391265293_start_a_petition__enus", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20484950646"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "/co/s/member/post_promote_thank_you", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var uid = parseInt(window.changeTargetingData.viewer.user.id);
  return (uid % 2 !== 0);
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - PPMU Thank You - Content Pilot Control", "apiName": "11391265293_url_targeting_for_copy_of_niftic__ppmu_thank_you__co", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20485269686"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    22955727
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Holt High", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial__pas", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20496642258"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    30136550
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Pass Bill H.R. 4268", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial__t_8", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20503055460"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    30321202
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM Amazon Parks", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial___10", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20506418326"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    30179818
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM Starbucks", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial__hol", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20508131547"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    30208201
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM Safesport", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial__t_9", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20508371440"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    30321536
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM FDA", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial___11", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20520016558"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['gb', 'au', 'ca', 'us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "give-2000-month-to-every-american-moneyforthepeople-covid19", "match": "substring"}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Petition Page - Petition Stories R2", "apiName": "11391265293_url_targeting_for_copy_of_niftic__petition_page__pet", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20529961934"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var uid = parseInt(window.changeTargetingData.viewer.user.id);
  return (uid % 2 !== 0);
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.userIsAMember;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Combo - PSF Member Experience R4 Control", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__psf_membe_5", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20536377798"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "p\\/[^/]+\\/sponsors\\/new.*", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['de'];
    var locales = ['de'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "Payment Page - DE", "apiName": "11391265293_payment_page__de", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20538023701"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    27825238
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM Statute of Limitations", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial___16", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20538128573"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    30369181
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM Afghan Families", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial___17", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20539687745"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var uid = parseInt(window.changeTargetingData.viewer.user.id);
  return (uid % 2 == 0);
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.userIsAMember;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Combo - PSF Member Experience R4", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__psf_membe_4", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20545702495"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "co\\/p\\/[^/]+\\/promote\\/thank_you.*", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['de'];
    var locales = ['de'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "Promote Thank You - DE", "apiName": "11391265293_promote_thank_you__de", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20547512641"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "p\\/[^/]+\\/sponsors\\/new.*", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "Payment Page - EN US", "apiName": "11391265293_payment_page__en", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20551425413"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    30382627
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM Afghan Girls", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial___12", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20554340241"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "co\\/p\\/[^/]+\\/promote\\/thank_you.*", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "Promote Thank You - EN US", "apiName": "11391265293_promote_thank_you__en", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20561356505"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['in'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.viewer.loginState.toLowerCase() !== 'guest';
}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - Combo experiment B - IN - English", "apiName": "11391265293_url_targeting_for_copy_of_fdn__combo_experiment_b__i", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20562731641"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    28919090
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM Amen'ra Sba", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial___13", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20563382700"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    30342479
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM Dr Smith", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial___14", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20563443013"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['my'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.viewer.loginState.toLowerCase() !== 'guest';
}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - Combo experiment B - MY", "apiName": "11391265293_url_targeting_for_copy_of_fdn__combo_experiment_b__3", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20568790223"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    29204457
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Instagram Share - Pride Emojis", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial___15", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20569351909"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['hi'];
    var locales = ['in'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.viewer.loginState.toLowerCase() !== 'guest';
}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - Combo experiment B - IN - Hindi", "apiName": "11391265293_url_targeting_for_copy_of_fdn__combo_experiment_b__2", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20582340188"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    30484652
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM Bob Ross Inc", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial__bob", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20586160259"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https:\\/\\/www\\.change\\.org\\/p\\/(.+)/dashboard", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'ca'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return !!window.changeTargetingData.petition.organization && !!window.changeTargetingData.petition.organization.id;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Starter Dashboard - Organization Message", "apiName": "11391265293_url_targeting_for_copy_of_niftic__starter_dashboar_1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "20588631369"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var isMember = !!window.changeTargetingData.userIsAMember;
  return !isMember;
}
}], ["or", {"type": "url", "value": "cause_eligible=true", "match": "substring"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.viewer.loginState.toLowerCase() !== 'guest';
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var comboMovement = !!document.querySelector('[data-view="psf/combo/components/movement_combo"]');
  return !comboMovement;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Combo - Membership Vertical Acquisitions \u2013 Women's Rights", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__membershi_1", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20596780187"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    30477267
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Bob Ross Boycott", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial___18", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20608180227"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['fr'];
    var locales = ['fr'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var m = !!window.changeTargetingData.userIsAMember;
  return !m;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return window.changeTargetingData.viewer.user.signatureCount < 18;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Combo - Copy Localized - FR", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__value_pro_1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20615500211"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/membership-ask.*$", "match": "regex"}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - SuSi - Copy", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__value_pro_2", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20623890149"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "p\\/[^/]+\\/promote\\/thank_you.*", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var comboR4 = window.localStorage.getItem('combo_copy_r4');
  return !!comboR4;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Thank You - Copy R4 Survey", "apiName": "11391265293_url_targeting_for_copy_of_niftic__thank_you__r11", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "20636560963"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/share_for_starters.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['id'];
    var locales = ['id'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Share Optimisation on Desktop - ID", "apiName": "11391265293_url_targeting_for_copy_of_niftic__sap__share_optim_3", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20637630064"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'ca', 'au'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}], ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/promote_or_share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var m = !!window.changeTargetingData.userIsAMember;
  return !m;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return !!window.changeTargetingData.viewer.user.displayName;
}
}], ["or", {"type": "custom_code", "value": function jsCondition() {
  return true;
  // return window.changeTargetingData.viewer.user.signatureCount < 18;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Combo - Value Proposition Copy R4", "apiName": "11391265293_url_targeting_for_copy_of_niftic__combo__value_pro_3", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20658190848"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/share_for_starters.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['in','my','ng','za'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Share Optimisations New on Desktop - EN", "apiName": "11391265293_url_targeting_for_copy_of_niftic__sap__share_optim_5", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20663960257"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/share_for_starters.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['es'];
    var locales =['mx','co','cl','pe','bo','cr','do','ec','gt', 'ni','pa','pr','py','sv','ve','hn'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Share Optimisations on Mobile - ES", "apiName": "11391265293_url_targeting_for_copy_of_fdn__sap__share_optimisa_2", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20669580445"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^(?!.*share=1)(?!.*skip=1)(?!.*share_abi).*https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/psf\\/share.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
  var include = [
    30456266
  ];
  return include.indexOf(parseInt(window.changeTargetingData.petition.id)) !== -1;
}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Share Initial - Tweet DM Emerson Act", "apiName": "11391265293_url_targeting_for_copy_of_niftic__share_initial___19", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "20670600535"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/share_for_starters.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['th'];
    var locales = ['th'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Share Optimisations New on Desktop - TH", "apiName": "11391265293_url_targeting_for_copy_of_fdn__sap__share_optimisa_5", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20670670349"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "p\\/[^/]+\\/sponsors\\/new.*", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['us', 'au', 'ca', 'gb'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [niftic] - Payment - Highlight Amount R2", "apiName": "11391265293_url_targeting_for_copy_of_niftic__payment__highlight", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "20679140200"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/share_for_starters.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['th'];
    var locales = ['th'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Share Optimisation on Mobile - TH", "apiName": "11391265293_url_targeting_for_copy_of_fdn__sap__share_optimisa_4", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20681050393"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/share_for_starters.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['en'];
    var locales = ['in','my','ng','za'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Share Optimisations on Mobile - EN", "apiName": "11391265293_url_targeting_for_copy_of_niftic__sap__share_optim_6", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20681190257"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https:\\/\\/www\\.change\\.org\\/p\\/[^/]+\\/share_for_starters.*$", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {

    var languages = ['es'];
    var locales = ['mx','co','cl','pe','bo','cr','do','ec','gt','ni','pa','pr','py','sv','ve','hn'];

    var justLanguages = false;
    var justLocales = false;

    // Don't change
    var appStateLocale = window.changeTargetingData.appState.locale;
    var lang = '';
    var locale = '';
    if (appStateLocale) {
        var localeData = appStateLocale.split('-');
        lang = localeData[0];
        locale = localeData[1];
        var appCountryCode = window.changeTargetingData.appState.countryCode;
        if (appCountryCode && appCountryCode !== locale) {
            locale = appCountryCode;
        }
    } else {
        var browserLocale = window.navigator.userLanguage || window.navigator.language;
        var browserLocaleData = !!browserLocale.locale ? browserLocale.locale.split('-') : browserLocale.split('-');
        lang = browserLocaleData[0];
        locale = browserLocaleData[1];
    }

    var localeMatch = locales.indexOf(locale.toLowerCase()) != -1;
    var languageMatch = languages.indexOf(lang.toLowerCase()) != -1;
    if (justLanguages) {
        return languageMatch;
    } else if (justLocales) {
        return localeMatch;
    } else {
        return localeMatch && languageMatch;
    }

}
}]], "activationType": "url_changed", "name": "URL Targeting for [fdn] - SAP - Share Optimisations New on Desktop - ES", "apiName": "11391265293_url_targeting_for_copy_of_fdn__sap__share_optimisa_1", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "20681310461"}], "projectId": "11391265293", "plugins": [function(PluginManager) {
  
  PluginManager.registerAnalyticsTracker('11403094673', {
      preRedirectPolicy: 'PERSIST_BEFORE_REDIRECT',
      postRedirectPolicy: 'TRACK_IMMEDIATELY',
      nonRedirectPolicy: 'TRACK_IMMEDIATELY',
      trackLayerDecision: function(decisionData) {
        var extension = decisionData.integrationSettings && decisionData.integrationSettings['11403094673'];
        if (!extension) {
          return;
        }
        var campaign = {
          id: decisionData.layerId,
          name: decisionData.layerName,
          policy: decisionData.layerPolicy,
          integrationStringVersion: decisionData.integrationStringVersion,
        };
        var campaignId = campaign.id;
        var experimentId = decisionData.experimentId;
        var variationId = decisionData.variationId;
        var isHoldback = decisionData.isLayerHoldback;
        extension.$fieldDefaults = [];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(extension);
        console.log('track decision');
if (!window.optimizelyTreatments) window.optimizelyTreatments = [];

var treatmentData = {};
treatmentData[experimentId] = variationId;

window.optimizelyTreatments.push(treatmentData);
      },
      serializeSettings: JSON.stringify,
      deserializeSettings: JSON.parse,
    });
    
}
], "namespace": "11391265293", "tagGroups": [], "integrationSettings": [], "interestGroups": [], "dimensions": [{"segmentId": null, "id": "12161354792", "apiName": "content_score", "name": "content_score"}], "audiences": [{"conditions": ["and", ["or", ["or", {"value": "iphone", "type": "device", "name": null, "match": null}, {"value": "mobile", "type": "device", "name": null, "match": null}]]], "id": "11487071591", "name": "Mobile only"}, {"conditions": ["and", ["or", ["or", {"value": "desktop", "type": "device", "name": null, "match": null}]]], "id": "11548860030", "name": "Desktop only"}, {"conditions": ["and", ["or", ["or", {"value": "screen.width < 768", "type": "code", "name": null, "match": null}]]], "id": "11800860209", "name": "Screen.width Mobile"}, {"conditions": ["and", ["or", ["or", {"value": "window.innerWidth > 768", "type": "code", "name": null, "match": null}]]], "id": "14109270364", "name": "Desktop Window Width"}], "anonymizeIP": true, "projectJS": function(){window.optimizely = window.optimizely || [];
var PJS = {};
PJS.isDev = /cro(metrics)?-debug|optimizely_local/.test(window.location.search) || localStorage && localStorage.getItem("cro-debug");
PJS.log = PJS.isDev && console && console.info && console.info.bind(console, '[PJS]') || function () {};
PJS.error = function (errorCode, details) {
  if (console && console.error) console.error('PJS Error:', errorCode, '\n', details);
};

try {
  (function () {
    /**
     * Local Storage Required
     * @author Eric Newland <eric@crometrics.com>
     * @author Andrew Wessels <andrew.wessels@crometrics.com>
     * Date: 2/1/18
     *
     * Disable Optimizely if localStorage isn't available.
     */
    try {
      var key = 'optimizely-store-required';
      window.localStorage.setItem(key, true);
      window.localStorage.removeItem(key);
    } catch (e) {
      //Disable Optimizely if localStorage fails.
      window.optimizely.push({
        "type": "disable"
      });
    }
  })();
} catch (e) {
  PJS.error('x/local-storage-required', e);
}

try {
  (function () {
    /*
      [PJS] Crometrics Test Cookie
      Authors: 
        Matthew Tyree (matthew.tyree@crometrics.com)
        Matthew Gossage (matthew.gossage@crometrics.com)
      Last Modified: 06/13/2018
      Version: crometrics-test-cookie-1.0.0
    
      Track and persist the crometrics QA cookie if a given url param, or the cookie
      itself, is present.
    
      This cookie defaults to a lifetime of 15 minutes (renewed every time this module runs).
      The default for Optimizely QA links is 15 minutes, so that's what we're using here.
    */
    var COOKIE_NAME = "crometrics_test_cookie";
    var DISABLE_RE = /crometrics_test_cookie=false/;
    var ENABLE_RE = /crometrics_test_cookie=true/;

    var disable = DISABLE_RE.test(window.location.search);
    var enable = ENABLE_RE.test(window.location.search) || ENABLE_RE.test(window.document.cookie);

    // This will match if the cookie or enable query param are present.
    if (enable) {
      if (disable) {
        // If we've been told to disable it, then do so.
        window.document.cookie = COOKIE_NAME + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/';
      } else {
        // Otherwise, persist (or enable) the cookie.
        var date = new Date();
        date.setTime(date.getTime() + 15 * 60 * 1000);

        window.document.cookie = COOKIE_NAME + '=true; expires=' + date.toGMTString() + '; path=/';

        window.optimizely.push({
          type: "addListener",
          filter: { type: "analytics", name: "trackEvent" },
          handler: function handler(event) {
            PJS.log('Metric fired: ' + event.data.name + ' <' + event.data.apiName + '>');
          }
        });
      }
    }
  })();
} catch (e) {
  PJS.error('x/crometrics-test-cookie', e);
}

try {
  (function () {
    /*
      Hide QA Modal
      Author: Eric Newland (eric@crometrics.com)
      Last Modified: 05/02/17
      Version: crometrics-hideqamodal-1.0.0
    
      Logic for hiding the QA modal in Optimizely X
    */
    function getCookie(name) {
      'use strict';

      var nameEQ = name + '=';
      var ca = document.cookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) === ' ') {
          c = c.substring(1, c.length);
        }if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
      }
      return null;
    }

    function getParam(name, optSearch) {
      'use strict';

      optSearch = optSearch || location.search;
      name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
      var regex = new RegExp('[\\?&]' + name + '=([^&#]*)'),
          results = regex.exec(optSearch);
      return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    }

    var hideModal = function hideModal() {
      var qaParam = getParam('qa');
      if (qaParam === 'hide') {
        // Set a long-term cookie that will hide the modal at all resolutions.
        var date = new Date();
        date.setFullYear(date.getFullYear() + 10);
        document.cookie = 'CRO_HideQAModal=true; path=/; expires=' + date.toUTCString() + ';';
      } else if (qaParam === 'show') {
        // Clear the cookie.
        document.cookie = 'CRO_HideQAModal=true; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
      }

      var cookie = getCookie('CRO_HideQAModal');
      if (cookie) {
        var html = document.documentElement;
        html.className += ' hide-optly-qa-modal';
      }

      // CSS to go inside a media query for small screens
      var hideModalMobile = 'optly-preview__firstvisit { display: none; } optly-preview { top: 75px; right: 15px; max-width: calc(100vw - 30px); } optly-preview optly-wrap { border-width: 0; } optly-preview.is-collapsed { opacity: .25; } optly-preview .optly-tabs-nav__item:last-child { padding-left: 40px; }';

      // Add our cookie class to each rule and add an additional rule for large screens only.
      // This will appear outside the mobile media query.
      var hideModalEverywhere = hideModalMobile.replace(/([^}]*})/gi, '.hide-optly-qa-modal $1') + ' @media (min-width:471px) and (min-height:701px) { .hide-optly-qa-modal optly-preview.is-collapsed:hover { opacity: 1; } }';
      document.addEventListener('DOMContentLoaded', function () {
        var mediaQuery = document.createElement('style');
        mediaQuery.innerHTML = '@media (max-width: 470px), (max-height: 700px) { ' + hideModalMobile + ' } ' + hideModalEverywhere;
        document.body.appendChild(mediaQuery);
      }, false);
    };

    // Paste from here down into PJS with Optimizely already initialized.
    window.optimizely.push({
      type: "addListener",
      filter: {
        type: "lifecycle",
        name: "initialized"
      },
      handler: hideModal
    });
  })();
} catch (e) {
  PJS.error('x/hide-qa-modal', e);
}
}, "visitorAttributes": [], "enableForceParameters": true, "accountId": "11391265293", "events": [{"category": "other", "name": "Activate petition", "eventType": "custom", "viewId": null, "apiName": "activate_petition", "id": "11467840433", "eventFilter": null}, {"category": "other", "name": "Subs - Landing page view", "eventType": "custom", "viewId": null, "apiName": "subs_landing_page_view", "id": "11468030315", "eventFilter": null}, {"category": "other", "name": "Modular SAP - Description click continue", "eventType": "custom", "viewId": null, "apiName": "modular_sap_description_click_continue", "id": "11468040328", "eventFilter": null}, {"category": "other", "name": "Sponsor view", "eventType": "custom", "viewId": null, "apiName": "sponsor_view", "id": "11469840549", "eventFilter": null}, {"category": "other", "name": "SAP profile - Phone entered", "eventType": "custom", "viewId": null, "apiName": "sap_profile_phone_entered", "id": "11469980476", "eventFilter": null}, {"category": "other", "name": "SAP media - Save click", "eventType": "custom", "viewId": null, "apiName": "sap_media_save_click", "id": "11469990308", "eventFilter": null}, {"category": "other", "name": "Combo PSF - Share", "eventType": "custom", "viewId": null, "apiName": "combo_psf_share", "id": "11471910676", "eventFilter": null}, {"category": "other", "name": "SAP - Complete profile click continue", "eventType": "custom", "viewId": null, "apiName": "sap_complete_profile_click_continue", "id": "11475750387", "eventFilter": null}, {"category": "other", "name": "Post promote - Offer success", "eventType": "custom", "viewId": null, "apiName": "post_promote_offer_success", "id": "11475780604", "eventFilter": null}, {"category": "other", "name": "Petition view", "eventType": "custom", "viewId": null, "apiName": "petition_view", "id": "11479390270", "eventFilter": null}, {"category": "other", "name": "Combo PSF - View", "eventType": "custom", "viewId": null, "apiName": "combo_psf_view", "id": "11481150205", "eventFilter": null}, {"category": "other", "name": "Modular SAP - Target click continue", "eventType": "custom", "viewId": null, "apiName": "modular_sap_target_click_continue", "id": "11481180580", "eventFilter": null}, {"category": "other", "name": "Post promote - Membership ask modal view", "eventType": "custom", "viewId": null, "apiName": "post_promote_membership_ask_modal_view", "id": "11481190363", "eventFilter": null}, {"category": "other", "name": "Modular SAP - Enter text ask", "eventType": "custom", "viewId": null, "apiName": "modular_sap_enter_text_ask", "id": "11488470430", "eventFilter": null}, {"category": "other", "name": "SAP media - Add media attempt", "eventType": "custom", "viewId": null, "apiName": "sap_media_add_media_attempt", "id": "11488560312", "eventFilter": null}, {"category": "other", "name": "Sign intent", "eventType": "custom", "viewId": null, "apiName": "sign_intent", "id": "11490360336", "eventFilter": null}, {"category": "other", "name": "Combo PSF - Promote", "eventType": "custom", "viewId": null, "apiName": "combo_psf_promote", "id": "11492430467", "eventFilter": null}, {"category": "other", "name": "Share petition", "eventType": "custom", "viewId": null, "apiName": "share_petition", "id": "11492430469", "eventFilter": null}, {"category": "other", "name": "SAP media - Upload photo click", "eventType": "custom", "viewId": null, "apiName": "sap_media_upload_photo_click", "id": "11496460266", "eventFilter": null}, {"category": "other", "name": "Petition edit view", "eventType": "custom", "viewId": null, "apiName": "petition_edit_view", "id": "11498310293", "eventFilter": null}, {"category": "other", "name": "Combo PSF - Share initial view", "eventType": "custom", "viewId": null, "apiName": "combo_psf_share_initial_view", "id": "11498320364", "eventFilter": null}, {"category": "other", "name": "Identified SAP continue with email click", "eventType": "custom", "viewId": null, "apiName": "identified_sap_cont_w_email_click", "id": "11498470577", "eventFilter": null}, {"category": "other", "name": "Sign", "eventType": "custom", "viewId": null, "apiName": "sign", "id": "11500210170", "eventFilter": null}, {"category": "other", "name": "Combo PSF - Skip", "eventType": "custom", "viewId": null, "apiName": "combo_psf_skip", "id": "11500380505", "eventFilter": null}, {"category": "other", "name": "Subs - Customer cancellation", "eventType": "custom", "viewId": null, "apiName": "subs_customer_cancellation", "id": "11500510695", "eventFilter": null}, {"category": "other", "name": "Modular SAP - Ask click continue", "eventType": "custom", "viewId": null, "apiName": "modular_sap_ask_click_continue", "id": "11502160438", "eventFilter": null}, {"category": "other", "name": "SAP Auth or ID intent", "eventType": "custom", "viewId": null, "apiName": "sap_auth_or_id_intent", "id": "11502180118", "eventFilter": null}, {"category": "other", "name": "SAP media - Add media success", "eventType": "custom", "viewId": null, "apiName": "sap_media_add_media_success", "id": "11504170091", "eventFilter": null}, {"category": "other", "name": "PP - Model success", "eventType": "custom", "viewId": null, "apiName": "pp_model_success", "id": "11504340212", "eventFilter": null}, {"category": "other", "name": "Subs - Modal success", "eventType": "custom", "viewId": null, "apiName": "subs_modal_success", "id": "11504360266", "eventFilter": null}, {"category": "other", "name": "Sign intent valid", "eventType": "custom", "viewId": null, "apiName": "sign_intent_valid", "id": "11535256198", "eventFilter": null}, {"category": "other", "name": "Submit Payment", "eventType": "click", "viewId": "12381261667", "apiName": "11391265293_submit_payment", "id": "12375422843", "eventFilter": {"filterType": "target_selector", "selector": ".js-submit-payment"}}, {"category": "other", "name": "SMS Sign Up Iframe Click", "eventType": "click", "viewId": "19164361492", "apiName": "11391265293_sms_sign_up_iframe_click", "id": "19181551073", "eventFilter": {"filterType": "target_selector", "selector": "#embed-frame-6izqt"}}, {"category": "other", "name": "SMS Sign Up Iframe Click BPBsjAe1ymnG2JsofaJMR", "eventType": "click", "viewId": "19338570141", "apiName": "11391265293_sms_sign_up_iframe_click_BPBsjAe1ymnG2JsofaJMR", "id": "19318330673", "eventFilter": {"filterType": "target_selector", "selector": "#embed-frame-6izqt"}}], "experimental": {"trimPages": false}, "revision": "36476"},g=i(133),h="initializeOptimizelyPreview";if(g.initGlobalStore(p),d.populateDirectiveData(),s.clientHasAlreadyInitialized())return void a.warn("Main / Disabling because Optimizely has already initialized on this page load. Are there multiple snippets on the page?");if(s.shouldBailForDesktopApp())return void a.log("Main / Disabling because of desktop app.");if(s.conflictInObservingChanges())return void a.log("Main / Disabling: Observe Changes Indefinitely is on, but browser does not support it.");if(s.shouldLoadInnie())l.registerFunction("getProjectId",(function(){return p.projectId})),l.registerFunction("getAccountId",(function(){return p.accountId})),f.addScriptAsync("https://app.optimizely.com/js/innie.js"),a.log("Main / Disabling in favor of the editor client.");else if(s.shouldLoadPreview()){var _;_=s.isSlave()?window.optimizely:window.optimizely=window.optimizely||[],_.push({type:"load",data:p}),a.log("Main / Disabling in favor of the preview client."),i(147).setupPreviewGlobal(),i(147).pushToPreviewGlobal({type:"pushPreviewData",name:"liveCommitData",data:p}),s.isSlave()||(l.registerFunction("getProjectId",(function(){return p.projectId})),f.addScriptSync("https://cdn-assets-prod.s3.amazonaws.com/js/preview2/11391265293.js"))}else if(s.shouldBootstrapDataForPreview()){l.registerFunction(h,(function(t){e(t),l.unregisterFunction(h)}));var v=s.isSlave()?PROJECT_ID_FOR_SLAVE_PREVIEW:l.getFunction("getProjectId")();u=t(s.getProjectToken(),v,s.getPreviewLayerIds()),f.addScriptSync(u),i(147).setupPreviewGlobal(),f.addScriptAsync("/dist/js/preview_ui.js")}else s.shouldBootstrapDataForEditor()?(l.registerFunction(h,(function(t){e(t),l.unregisterFunction(h)})),f.addScriptAsync(window.optimizely_editor_data_endpoint)):s.shouldInitialize()&&e(p);r.timeEnd("block")}try{n()}catch(e){try{i(120).handleError(e)}catch(e){console.log(e)}}}),(function(e,t,i){function n(){s();var e=x.getRumData();return e.extras=e.extras||{},e.extras.beacon={cjsTimeout:!0},e=_.pickBy(e,(function(e){return!_.isUndefined(e)})),a(e)}function r(e){var t=P.getPromise("RUM_FIRST_BEACON");return t?t.then(e):E.makeAsyncRequest("RUM_FIRST_BEACON",e)}function a(e){return _.isEmpty(e)?w.resolve():r((function(){return O.request({url:B,method:"POST",data:e,withCredentials:!0}).then((function(e){return E.resolveRequest("RUM_FIRST_BEACON",e),e}))["catch"]((function(e){throw A.error("POST to client-rum failed:",e),E.rejectRequest("RUM_FIRST_BEACON",e),e}))}))}function o(){var e=y.getCurrentScript();if(e)return e.src}function s(){var e={id:x.getRumId(),v:j,account:k.getAccountId(),project:k.getSnippetId()||k.getProjectId(),snippet:k.getSnippetId(),revision:k.getRevision(),clientVersion:V.getClientVersion(),hasSlave:!1,wxhr:!0,extras:{}},t=b.getPersistedBehaviorEventCount(),i=m.getEventCount();e["numBehaviorEvents"]=i;var n=i-t;_.extend(e.extras,{behaviorEventCountDiff:n,behaviorEventCountDecreased:n<0}),_.assign(e,c(),d()),S.dispatch(C.SET_RUM_DATA,{data:e})}function c(){var e=D.getGlobal("performance");if(e){var t,i=x.getScriptSrc();try{if(i){A.debug("Using derived script src: ",i);var n=e.getEntriesByName(i);n.length>0&&(t=n[0])}if(!t){var r=/\/\/[^.]+\.optimizely\.(com|test)\/(js|api\/client)\/[\d]+\.js/gi;A.debug("Scanning resource timing entries with regex");var a=e.getEntriesByType("resource");t=_.find(a,(function(e){return r.test(e.name)}))}if(t)return _.mapValues(N.ResourceTimingAttributes,(function(e,i){var n=t[i];return"number"==typeof n?Math.round(1e3*(n||0))/1e3:"serverTiming"===i?n||[]:void 0}))}catch(e){return}}}function u(){try{return!y.querySelector("body")}catch(e){return null}}function l(){try{D.getGlobal("requestAnimationFrame")((function(){var e=x.getRumData().timebase;S.dispatch(C.SET_RUM_DATA,{data:{render:I.now()-(e||0)}})}))}catch(e){return}}function d(){return F.getDurationsFor(_.values(N.RUMPerformanceTimingAttributes))}function f(){var e=T.keys(),t=_.filter(_.map(e,(function(e){var t=b.getStorageKeyFromKey(e);return t?{key:e,isForeign:b.isForeignKey(e),category:t,size:e.length+T.getItem(e).length}:null}))),i=_.reduce(t,(function(e,t){var i=t.key,n=b.getIdFromKey(i);if(!n)return e;var r=t.isForeign?e.foreign:e.local;return r[n]=!0,e}),{local:{},foreign:{}}),n=_.chain(t).filter({isForeign:!0}).reduce((function(e,t){var i=t.key.split("_")[0];return e[i]=!0,e}),{}).value(),r={local:0,foreign:0},a={local:{},foreign:{}};_.forEach(t,(function(e){var t=e.isForeign?"foreign":"local";r[t]+=e.size,a[t][e.category]||(a[t][e.category]=0),a[t][e.category]+=e.size}));var o={numKeys:T.allKeys().length,sizeKeys:T.allKeys().toString().length,sizeValues:T.allValues().toString().length,idCounts:{local:_.keys(i.local).length,foreign:_.keys(i.foreign).length},foreignOriginCount:_.keys(n).length,byteTotals:r,byteTotalsByCategory:a},s=R.estimateStorage();return s.then((function(e){return _.assign(o,{storageEstimate:e})}))}function p(){var e=D.getGlobal("performance"),t=e?e.timing:{},i=F.getMarks()||{},n=x.getApiData(),r=x.getDOMObservationData(),o=G.get("state").getActiveExperimentIds(),s=x.getFeaturesNeededData(),c=y.parseUri(x.getScriptSrc()),u=x.getRumData()||{},l=u.extras||{};_.assign(l,{apiCalls:n,DOMObservationData:r,paintTimings:h(),activeExperimentIds:o,numPages:U.getNumberOfPages(),snippet:{scheme:c.protocol.slice(0,-1),host:c.host,path:c.pathname},networkInfo:g(),experimental:k.getExperimental(),featuresNeeded:s,beacon:{cjsOnload:!0}});var d=D.getGlobal("Prototype");d&&!_.isUndefined(d.Version)&&(l.prototypeJS=d.Version);var p=!1;p=!0;var v=M.getFrames();v.length&&(l.xdFramesLoaded=v.length);var E={id:x.getRumId(),v:j,project:k.getSnippetId()||k.getProjectId(),navigationTimings:t,userTimings:i,xd:p,apis:_.keys(n),extras:l,sampleRate:u.sampleRate};f().then((function(e){var t=_.assign(E,{lsMetrics:e});a(t)}))}function g(){var e=D.getGlobal("navigator");if(e&&e.connection)return _.pick(e.connection,["downlink","rtt","effectiveType"])}function h(){var e=D.getGlobal("performance");if(e)try{var t=e.getEntriesByType("paint");if(_.isEmpty(t))return;return _.reduce(t,(function(e,t){return e[t.name]=Math.round(t.startTime),e}),{})}catch(e){return}}var _=i(2),v=i(5),E=i(6),m=i(71),I=i(24),y=i(80),S=i(9),T=i(81).LocalStorage,A=i(23),R=i(90),w=i(12).Promise,b=i(74),D=i(40),O=i(91),C=i(7),N=i(25),L=i(16),P=L.get("stores/async_request"),V=L.get("stores/client_metadata"),k=L.get("stores/global"),x=L.get("stores/rum"),F=L.get("stores/performance"),M=L.get("stores/xdomain"),U=L.get("stores/view_data"),G=i(93),B="https://rum.optimizely.com/rum",z=3e3,j="1.0",H=.01;t.initialize=function(){var e,t=v.generate().replace(/-/g,"");e=Math.random()<H;var i=o();S.dispatch(C.SET_RUM_DATA,{id:t,RumHost:B,inRumSample:e,src:i,data:{id:t,sync:u(),timebase:I.now(),sampleRate:H,url:i,extras:{initialDOMState:y.getReadyState()}}})},t.queueBeacons=function(){return x.getSampleRum()?(l(),y.isLoaded()?D.setTimeout(p,z):D.addEventListener("load",p),new w(function(e,t){D.setTimeout((function(){n().then(e,t)}),z)}).catch((function(e){A.warn("RUM / Error sending data:",e)}))):w.resolve()}}),(function(e,t,i){e.exports=i(3)._.noConflict()}),(function(e,t,i){(function(e,i){(function(){function n(e,t){return e.set(t[0],t[1]),e}function r(e,t){return e.add(t),e}function a(e,t){return c(be(e),fi)}function o(e,t){return!!e.length&&f(e,t,0)>-1}function s(e,t,i){for(var n=-1,r=e.length;++n<r;)if(i(t,e[n]))return!0;return!1}function c(e,t){for(var i=-1,n=t.length,r=e.length;++i<n;)e[r+i]=t[i];return e}function u(e,t,i){for(var n=-1,r=e.length;++n<r;){var a=e[n],o=t(a);if(null!=o&&(s===Ti?o===o:i(o,s)))var s=o,c=a}return c}function l(e,t,i,n){var r;return i(e,(function(e,i,a){if(t(e,i,a))return r=n?i:e,!1})),r}function d(e,t,i){for(var n=e.length,r=i?n:-1;i?r--:++r<n;)if(t(e[r],r,e))return r;return-1}function f(e,t,i){if(t!==t)return I(e,i);for(var n=i-1,r=e.length;++n<r;)if(e[n]===t)return n;return-1}function p(e,t,i,n,r){return r(e,(function(e,r,a){i=n?(n=!1,e):t(i,e,r,a)})),i}function g(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}function h(e){return function(t){return e(t)}}function _(e,t){return me(t,(function(t){return e[t]}))}function v(e){return e&&e.Object===Object?e:null}function E(e,t){if(e!==t){var i=null===e,n=e===Ti,r=e===e,a=null===t,o=t===Ti,s=t===t;if(e>t&&!a||!r||i&&!o&&s||n&&s)return 1;if(e<t&&!i||!s||a&&!n&&r||o&&r)return-1}return 0}function m(e){return gn[e]}function I(e,t,i){for(var n=e.length,r=t+(i?0:-1);i?r--:++r<n;){var a=e[r];if(a!==a)return r}return-1}function y(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function S(e,t){return e="number"==typeof e||dn.test(e)?+e:-1,t=null==t?Pi:t,e>-1&&e%1==0&&e<t}function T(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}function A(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}function R(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}function w(e){if(jt(e)&&!dr(e)){if(e instanceof b)return e;if(bn.call(e,"__wrapped__"))return tt(e)}return new b(e)}function b(e,t){this.e=e,this.u=[],this.l=!!t}function D(){}function O(e,t){return N(e,t)&&delete e[t]}function C(e,t){if(Xn){var i=e[t];return i===bi?Ti:i}return bn.call(e,t)?e[t]:Ti}function N(e,t){return Xn?e[t]!==Ti:bn.call(e,t)}function L(e,t,i){e[t]=Xn&&i===Ti?bi:i}function P(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function V(){this.d={hash:new D,map:Yn?new Yn:[],string:new D}}function k(e){var t=this.d;return Ze(e)?O("string"==typeof e?t.string:t.hash,e):Yn?t.map["delete"](e):W(t.map,e)}function x(e){var t=this.d;return Ze(e)?C("string"==typeof e?t.string:t.hash,e):Yn?t.map.get(e):X(t.map,e)}function F(e){var t=this.d;return Ze(e)?N("string"==typeof e?t.string:t.hash,e):Yn?t.map.has(e):Q(t.map,e)}function M(e,t){var i=this.d;return Ze(e)?L("string"==typeof e?i.string:i.hash,e,t):Yn?i.map.set(e,t):J(i.map,e,t),this}function U(e){var t=-1,i=e?e.length:0;for(this.d=new P;++t<i;)this.push(e[t])}function G(e,t){var i=e.d;if(Ze(t)){var n=i.d,r="string"==typeof t?n.string:n.hash;return r[t]===bi}return i.has(t)}function B(e){var t=this.d;if(Ze(e)){var i=t.d,n="string"==typeof e?i.string:i.hash;n[e]=bi}else t.set(e,bi)}function z(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function j(){this.d={array:[],map:null}}function H(e){var t=this.d,i=t.array;return i?W(i,e):t.map["delete"](e)}function K(e){var t=this.d,i=t.array;return i?X(i,e):t.map.get(e)}function Y(e){var t=this.d,i=t.array;return i?Q(i,e):t.map.has(e)}function q(e,t){var i=this.d,n=i.array;n&&(n.length<Ri-1?J(n,e,t):(i.array=null,i.map=new P(n)));var r=i.map;return r&&r.set(e,t),this}function W(e,t){var i=$(e,t);if(i<0)return!1;var n=e.length-1;return i==n?e.pop():zn.call(e,i,1),!0}function X(e,t){var i=$(e,t);return i<0?Ti:e[i][1]}function Q(e,t){return $(e,t)>-1}function $(e,t){for(var i=e.length;i--;)if(Ct(e[i][0],t))return i;return-1}function J(e,t,i){var n=$(e,t);n<0?e.push([t,i]):e[n][1]=i}function Z(e,t,i,n){return e===Ti||Ct(e,Rn[i])&&!bn.call(n,i)?t:e}function ee(e,t,i){(i===Ti||Ct(e[t],i))&&("number"!=typeof t||i!==Ti||t in e)||(e[t]=i)}function te(e,t,i){var n=e[t];bn.call(e,t)&&Ct(n,i)&&(i!==Ti||t in e)||(e[t]=i)}function ie(e,t){return e&&nr(t,oi(t),e)}function ne(e){return"function"==typeof e?e:hi}function re(e,t,i,n,r,a,o){var s;if(n&&(s=a?n(e,r,a,o):n(e)),s!==Ti)return s;if(!zt(e))return e;var c=dr(e);if(c){if(s=Xe(e),!t)return be(e,s)}else{var u=We(e),l=u==Ui||u==Gi;if(fr(e))return Ce(e,t);if(u==ji||u==Vi||l&&!a){if(y(e))return a?e:{};if(s=Qe(l?{}:e),!t)return s=ie(s,e),i?Me(e,s):s}else{if(!pn[u])return a?e:{};s=$e(e,u,t)}}o||(o=new z);var d=o.get(e);return d?d:(o.set(e,s),(c?tr:fe)(e,(function(r,a){te(s,a,re(r,t,i,n,a,e,o))})),i&&!c?Me(e,s):s)}function ae(e){return zt(e)?Gn(e):{}}function oe(e,t,i){if("function"!=typeof e)throw new TypeError(wi);return setTimeout((function(){e.apply(Ti,i)}),t)}function se(e,t,i,n){var r=-1,a=o,c=!0,u=e.length,l=[],d=t.length;if(!u)return l;i&&(t=me(t,h(i))),n?(a=s,c=!1):t.length>=Ri&&(a=G,c=!1,t=new U(t));e:for(;++r<u;){var f=e[r],p=i?i(f):f;if(c&&p===p){for(var g=d;g--;)if(t[g]===p)continue e;l.push(f)}else a(t,p,n)||l.push(f)}return l}function ce(e,t){var i=!0;return tr(e,(function(e,n,r){return i=!!t(e,n,r)})),i}function ue(e,t){var i=[];return tr(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i}function le(e,t,i,n){n||(n=[]);for(var r=-1,a=e.length;++r<a;){var o=e[r];t>0&&Vt(o)&&(i||dr(o)||Lt(o))?t>1?le(o,t-1,i,n):c(n,o):i||(n[n.length]=o)}return n}function de(e,t){return null==e?e:ir(e,t,si)}function fe(e,t){return e&&ir(e,t,oi)}function pe(e,t){return ue(t,(function(t){return Gt(e[t])}))}function ge(e,t,i,n,r){return e===t||(null==e||null==t||!zt(e)&&!jt(t)?e!==e&&t!==t:he(e,t,ge,i,n,r))}function he(e,t,i,n,r,a){var o=dr(e),s=dr(t),c=ki,u=ki;o||(c=Cn.call(e),c=c==Vi?ji:c),s||(u=Cn.call(t),u=u==Vi?ji:u);var l=c==ji&&!y(e),d=u==ji&&!y(t),f=c==u;a||(a=[]);var p=_t(a,(function(t){return t[0]===e}));if(p&&p[1])return p[1]==t;if(a.push([e,t]),f&&!l){var g=o||$t(e)?He(e,t,i,n,r,a):Ke(e,t,c,i,n,r,a);return a.pop(),g}if(!(r&Ni)){var h=l&&bn.call(e,"__wrapped__"),_=d&&bn.call(t,"__wrapped__");if(h||_){var g=i(h?e.value():e,_?t.value():t,n,r,a);return a.pop(),g}}if(!f)return!1;var g=Ye(e,t,i,n,r,a);return a.pop(),g}function _e(e){var t=typeof e;return"function"==t?e:null==e?hi:("object"==t?Ie:Re)(e)}function ve(e){return Hn(Object(e))}function Ee(e){e=null==e?e:Object(e);var t=[];for(var i in e)t.push(i);return t}function me(e,t){var i=-1,n=Pt(e)?Array(e.length):[];return tr(e,(function(e,r,a){n[++i]=t(e,r,a)})),n}function Ie(e){var t=oi(e);return function(i){var n=t.length;if(null==i)return!n;for(i=Object(i);n--;){var r=t[n];if(!(r in i&&ge(e[r],i[r],Ti,Ci|Ni)))return!1}return!0}}function ye(e,t,i,n,r){if(e!==t){var a=dr(t)||$t(t)?Ti:si(t);tr(a||t,(function(o,s){if(a&&(s=o,o=t[s]),zt(o))r||(r=new z),Se(e,t,s,i,ye,n,r);else{var c=n?n(e[s],o,s+"",e,t,r):Ti;c===Ti&&(c=o),ee(e,s,c)}}))}}function Se(e,t,i,n,r,a,o){var s=e[i],c=t[i],u=o.get(c);if(u)return void ee(e,i,u);var l=a?a(s,c,i+"",e,t,o):Ti,d=l===Ti;d&&(l=c,dr(c)||$t(c)?dr(s)?l=s:Vt(s)?l=be(s):(d=!1,l=re(c,!a)):Wt(c)||Lt(c)?Lt(s)?l=ti(s):!zt(s)||n&&Gt(s)?(d=!1,l=re(c,!a)):l=s:d=!1),o.set(c,l),d&&r(l,c,n,a,o),o["delete"](c),ee(e,i,l)}function Te(e,t){return e=Object(e),It(t,(function(t,i){return i in e&&(t[i]=e[i]),t}),{})}function Ae(e,t){var i={};return de(e,(function(e,n){t(e,n)&&(i[n]=e)})),i}function Re(e){return function(t){return null==t?Ti:t[e]}}function we(e,t,i){var n=-1,r=e.length;t<0&&(t=-t>r?0:r+t),i=i>r?r:i,i<0&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0;for(var a=Array(r);++n<r;)a[n]=e[n+t];return a}function be(e){return we(e,0,e.length)}function De(e,t){var i;return tr(e,(function(e,n,r){return i=t(e,n,r),!i})),!!i}function Oe(e,t){var i=e;return It(t,(function(e,t){return t.func.apply(t.thisArg,c([e],t.args))}),i)}function Ce(e,t){if(t)return e.slice();var i=new e.constructor(e.length);return e.copy(i),i}function Ne(e){var t=new e.constructor(e.byteLength);return new xn(t).set(new xn(e)),t}function Le(e){return It(A(e),n,new e.constructor)}function Pe(e){var t=new e.constructor(e.source,un.exec(e));return t.lastIndex=e.lastIndex,t}function Ve(e){return It(R(e),r,new e.constructor)}function ke(e){return er?Object(er.call(e)):{}}function xe(e,t){var i=t?Ne(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function Fe(e,t,i,n){i||(i={});for(var r=-1,a=t.length;++r<a;){var o=t[r],s=n?n(i[o],e[o],o,i,e):e[o];te(i,o,s)}return i}function Me(e,t){return nr(e,ar(e),t)}function Ue(e){return bt((function(t,i){var n=-1,r=i.length,a=r>1?i[r-1]:Ti;for(a="function"==typeof a?(r--,a):Ti,t=Object(t);++n<r;){var o=i[n];o&&e(t,o,n,a)}return t}))}function Ge(e,t){return function(i,n){if(null==i)return i;if(!Pt(i))return e(i,n);for(var r=i.length,a=t?r:-1,o=Object(i);(t?a--:++a<r)&&n(o[a],a,o)!==!1;);return i}}function Be(e){return function(t,i,n){for(var r=-1,a=Object(t),o=n(t),s=o.length;s--;){var c=o[e?s:++r];if(i(a[c],c,a)===!1)break}return t}}function ze(e){return function(){var t=arguments,i=ae(e.prototype),n=e.apply(i,t);return zt(n)?n:i}}function je(e,t,i,n){function r(){for(var t=-1,s=arguments.length,c=-1,u=n.length,l=Array(u+s),d=this&&this!==Tn&&this instanceof r?o:e;++c<u;)l[c]=n[c];for(;s--;)l[c++]=arguments[++t];return d.apply(a?i:this,l)}if("function"!=typeof e)throw new TypeError(wi);var a=t&Di,o=ze(e);return r}function He(e,t,i,n,r,a){var o=-1,s=r&Ni,c=r&Ci,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;for(var d=!0;++o<u;){var f,p=e[o],g=t[o];if(f!==Ti){if(f)continue;d=!1;break}if(c){if(!De(t,(function(e){return p===e||i(p,e,n,r,a)}))){d=!1;break}}else if(p!==g&&!i(p,g,n,r,a)){d=!1;break}}return d}function Ke(e,t,i,n,r,a,o){switch(i){case xi:case Fi:return+e==+t;case Mi:return e.name==t.name&&e.message==t.message;case zi:return e!=+e?t!=+t:e==+t;case Hi:case Yi:return e==t+""}return!1}function Ye(e,t,i,n,r,a){var o=r&Ni,s=oi(e),c=s.length,u=oi(t),l=u.length;if(c!=l&&!o)return!1;for(var d=c;d--;){var f=s[d];if(!(o?f in t:bn.call(t,f)))return!1}for(var p=!0,g=o;++d<c;){f=s[d];var h,_=e[f],v=t[f];if(!(h===Ti?_===v||i(_,v,n,r,a):h)){p=!1;break}g||(g="constructor"==f)}if(p&&!g){var E=e.constructor,m=t.constructor;E!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof E&&E instanceof E&&"function"==typeof m&&m instanceof m)&&(p=!1)}return p}function qe(e,t){var i=e[t];return Kt(i)?i:Ti}function We(e){return Cn.call(e)}function Xe(e){var t=e.length,i=e.constructor(t);return t&&"string"==typeof e[0]&&bn.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function Qe(e){return"function"!=typeof e.constructor||et(e)?{}:ae(Mn(e))}function $e(e,t,i){var n=e.constructor;switch(t){case Xi:return Ne(e);case xi:case Fi:return new n(+e);case Qi:case $i:case Ji:case Zi:case en:case tn:case nn:case rn:case an:return xe(e,i);case Bi:return Le(e);case zi:case Yi:return new n(e);case Hi:return Pe(e);case Ki:return Ve(e);case qi:return ke(e)}}function Je(e){var t=e?e.length:Ti;return Bt(t)&&(dr(e)||Qt(e)||Lt(e))?g(t,String):null}function Ze(e){var t=typeof e;return"number"==t||"boolean"==t||"string"==t&&"__proto__"!=e||null==e}function et(e){var t=e&&e.constructor,i="function"==typeof t&&t.prototype||Rn;return e===i}function tt(e){var t=new b(e.e,e.l);return t.u=be(e.u),t}function it(e){return ue(e,Boolean)}function nt(e,t){return e&&e.length?d(e,_e(t,3)):-1}function rt(e){var t=e?e.length:0;return t?le(e,1):[]}function at(e){var t=e?e.length:0;return t?le(e,Li):[]}function ot(e){return e?e[0]:Ti}function st(e,t,i){var n=e?e.length:0;i="number"==typeof i?i<0?Kn(n+i,0):i:0;for(var r=(i||0)-1,a=t===t;++r<n;){var o=e[r];if(a?o===t:o!==o)return r}return-1}function ct(e){var t=e?e.length:0;return t?e[t-1]:Ti}function ut(e,t,i){var n=e?e.length:0;return t=null==t?0:+t,i=i===Ti?n:+i,n?we(e,t,i):[]}function lt(e){var t=w(e);return t.l=!0,t}function dt(e,t){return t(e),e}function ft(e,t){return t(e)}function pt(){return Oe(this.e,this.u)}function gt(e,t,i){return t=i?Ti:t,ce(e,_e(t))}function ht(e,t){return ue(e,_e(t))}function _t(e,t){return l(e,_e(t),tr)}function vt(e,t){return tr(e,ne(t))}function Et(e,t,i,n){e=Pt(e)?e:fi(e),i=i&&!n?pr(i):0;var r=e.length;return i<0&&(i=Kn(r+i,0)),Qt(e)?i<=r&&e.indexOf(t,i)>-1:!!r&&f(e,t,i)>-1}function mt(e,t){return me(e,_e(t))}function It(e,t,i){return p(e,_e(t),i,arguments.length<3,tr)}function yt(e){return null==e?0:(e=Pt(e)?e:oi(e),e.length)}function St(e,t,i){return t=i?Ti:t,De(e,_e(t))}function Tt(e,t){var i=0;return t=_e(t),me(me(e,(function(e,n,r){return{value:e,index:i++,criteria:t(e,n,r)}})).sort((function(e,t){return E(e.criteria,t.criteria)||e.index-t.index})),Re("value"))}function At(e,t){var i;if("function"!=typeof t)throw new TypeError(wi);return e=pr(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=Ti),i}}function Rt(e){if("function"!=typeof e)throw new TypeError(wi);return function(){return!e.apply(this,arguments)}}function wt(e){return At(2,e)}function bt(e,t){if("function"!=typeof e)throw new TypeError(wi);return t=Kn(t===Ti?e.length-1:pr(t),0),function(){for(var i=arguments,n=-1,r=Kn(i.length-t,0),a=Array(r);++n<r;)a[n]=i[t+n];var o=Array(t+1);for(n=-1;++n<t;)o[n]=i[n];return o[t]=a,e.apply(this,o)}}function Dt(e){return zt(e)?dr(e)?be(e):nr(e,oi(e)):e}function Ot(e){return re(e,!0,!0)}function Ct(e,t){return e===t||e!==e&&t!==t}function Nt(e,t){return e>t}function Lt(e){return Vt(e)&&bn.call(e,"callee")&&(!Bn.call(e,"callee")||Cn.call(e)==Vi)}function Pt(e){return null!=e&&Bt(rr(e))&&!Gt(e)}function Vt(e){return jt(e)&&Pt(e)}function kt(e){return e===!0||e===!1||jt(e)&&Cn.call(e)==xi}function xt(e){return jt(e)&&Cn.call(e)==Fi}function Ft(e){if(Pt(e)&&(dr(e)||Qt(e)||Gt(e.splice)||Lt(e)))return!e.length;for(var t in e)if(bn.call(e,t))return!1;return!0}function Mt(e,t){return ge(e,t)}function Ut(e){return"number"==typeof e&&jn(e)}function Gt(e){var t=zt(e)?Cn.call(e):"";return t==Ui||t==Gi}function Bt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Pi}function zt(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function jt(e){return!!e&&"object"==typeof e}function Ht(e){return qt(e)&&e!=+e}function Kt(e){return null!=e&&(Gt(e)?Ln.test(wn.call(e)):jt(e)&&(y(e)?Ln:ln).test(e))}function Yt(e){return null===e}function qt(e){return"number"==typeof e||jt(e)&&Cn.call(e)==zi}function Wt(e){if(!jt(e)||Cn.call(e)!=ji||y(e))return!1;var t=Mn(e);if(null===t)return!0;var i=t.constructor;return"function"==typeof i&&i instanceof i&&wn.call(i)==On}function Xt(e){return zt(e)&&Cn.call(e)==Hi}function Qt(e){return"string"==typeof e||!dr(e)&&jt(e)&&Cn.call(e)==Yi}function $t(e){return jt(e)&&Bt(e.length)&&!!fn[Cn.call(e)]}function Jt(e){return e===Ti}function Zt(e,t){return e<t}function ei(e){return Pt(e)?e.length?be(e):[]:fi(e)}function ti(e){return nr(e,si(e))}function ii(e){return"string"==typeof e?e:null==e?"":e+""}function ni(e,t){var i=ae(e);return t?hr(i,t):i}function ri(e,t){return e&&fe(e,ne(t))}function ai(e,t){return null!=e&&bn.call(e,t)}function oi(e){var t=et(e);if(!t&&!Pt(e))return ve(e);var i=Je(e),n=!!i,r=i||[],a=r.length;for(var o in e)!bn.call(e,o)||n&&("length"==o||S(o,a))||t&&"constructor"==o||r.push(o);return r}function si(e){for(var t=-1,i=et(e),n=Ee(e),r=n.length,a=Je(e),o=!!a,s=a||[],c=s.length;++t<r;){var u=n[t];o&&("length"==u||S(u,c))||"constructor"==u&&(i||!bn.call(e,u))||s.push(u)}return s}function ci(e,t){var i={};return t=_e(t,3),fe(e,(function(e,n,r){i[n]=t(e,n,r)})),i}function ui(e,t){return t=_e(t),Ae(e,(function(e,i){return!t(e,i)}))}function li(e,t){return null==e?{}:Ae(e,_e(t))}function di(e,t,i){var n=null==e?Ti:e[t];return n===Ti&&(n=i),Gt(n)?n.call(e):n}function fi(e){return e?_(e,oi(e)):[]}function pi(e){return e=ii(e),e&&sn.test(e)?e.replace(on,m):e}function gi(e){return function(){return e}}function hi(e){return e}function _i(e){return Ie(hr({},e))}function vi(e,t,i){var n=oi(t),r=pe(t,n);null!=i||zt(t)&&(r.length||!n.length)||(i=t,t=e,e=this,r=pe(t,oi(t)));var a=!(zt(i)&&"chain"in i)||i.chain,o=Gt(e);return tr(r,(function(i){var n=t[i];e[i]=n,o&&(e.prototype[i]=function(){var t=this.l;if(a||t){var i=e(this.e),r=i.u=be(this.u);return r.push({func:n,args:arguments,thisArg:e}),i.l=t,i}return n.apply(e,c([this.value()],arguments))})})),e}function Ei(){return Tn._===this&&(Tn._=Nn),this}function mi(){}function Ii(e){var t=++Dn;return ii(e)+t}function yi(e){return e&&e.length?u(e,hi,Nt):Ti}function Si(e){return e&&e.length?u(e,hi,Zt):Ti}var Ti,Ai="4.6.1",Ri=200,wi="Expected a function",bi="__lodash_hash_undefined__",Di=1,Oi=32,Ci=1,Ni=2,Li=1/0,Pi=9007199254740991,Vi="[object Arguments]",ki="[object Array]",xi="[object Boolean]",Fi="[object Date]",Mi="[object Error]",Ui="[object Function]",Gi="[object GeneratorFunction]",Bi="[object Map]",zi="[object Number]",ji="[object Object]",Hi="[object RegExp]",Ki="[object Set]",Yi="[object String]",qi="[object Symbol]",Wi="[object WeakMap]",Xi="[object ArrayBuffer]",Qi="[object Float32Array]",$i="[object Float64Array]",Ji="[object Int8Array]",Zi="[object Int16Array]",en="[object Int32Array]",tn="[object Uint8Array]",nn="[object Uint8ClampedArray]",rn="[object Uint16Array]",an="[object Uint32Array]",on=/[&<>"'`]/g,sn=RegExp(on.source),cn=/[\\^$.*+?()[\]{}|]/g,un=/\w*$/,ln=/^\[object .+?Constructor\]$/,dn=/^(?:0|[1-9]\d*)$/,fn={};fn[Qi]=fn[$i]=fn[Ji]=fn[Zi]=fn[en]=fn[tn]=fn[nn]=fn[rn]=fn[an]=!0,fn[Vi]=fn[ki]=fn[Xi]=fn[xi]=fn[Fi]=fn[Mi]=fn[Ui]=fn[Bi]=fn[zi]=fn[ji]=fn[Hi]=fn[Ki]=fn[Yi]=fn[Wi]=!1;var pn={};pn[Vi]=pn[ki]=pn[Xi]=pn[xi]=pn[Fi]=pn[Qi]=pn[$i]=pn[Ji]=pn[Zi]=pn[en]=pn[Bi]=pn[zi]=pn[ji]=pn[Hi]=pn[Ki]=pn[Yi]=pn[qi]=pn[tn]=pn[nn]=pn[rn]=pn[an]=!0,pn[Mi]=pn[Ui]=pn[Wi]=!1;var gn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},hn={"function":!0,object:!0},_n=hn[typeof t]&&t&&!t.nodeType?t:Ti,vn=hn[typeof e]&&e&&!e.nodeType?e:Ti,En=vn&&vn.exports===_n?_n:Ti,mn=v(_n&&vn&&"object"==typeof i&&i),In=v(hn[typeof self]&&self),yn=v(hn[typeof window]&&window),Sn=v(hn[typeof this]&&this),Tn=mn||yn!==(Sn&&Sn.window)&&yn||In||Sn||Function("return this")(),An=Array.prototype,Rn=Object.prototype,wn=Function.prototype.toString,bn=Rn.hasOwnProperty,Dn=0,On=wn.call(Object),Cn=Rn.toString,Nn=Tn._,Ln=RegExp("^"+wn.call(bn).replace(cn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pn=En?Ti:Ti,Vn=Tn.Reflect,kn=Tn.Symbol,xn=Tn.Uint8Array,Fn=Vn?Vn.enumerate:Ti,Mn=Object.getPrototypeOf,Un=Object.getOwnPropertySymbols,Gn=Object.create,Bn=Rn.propertyIsEnumerable,zn=An.splice,jn=Tn.isFinite,Hn=Object.keys,Kn=Math.max,Yn=qe(Tn,"Map"),qn=qe(Tn,"Set"),Wn=qe(Tn,"WeakMap"),Xn=qe(Object,"create"),Qn=Yn?wn.call(Yn):"",$n=qn?wn.call(qn):"",Jn=Wn?wn.call(Wn):"",Zn=kn?kn.prototype:Ti,er=Zn?Zn.valueOf:Ti,tr=Ge(fe),ir=Be();Fn&&!Bn.call({valueOf:1},"valueOf")&&(Ee=function(e){return T(Fn(e))});var nr=Fe,rr=Re("length"),ar=Un||function(){return[]};(Yn&&We(new Yn)!=Bi||qn&&We(new qn)!=Ki||Wn&&We(new Wn)!=Wi)&&(We=function(e){var t=Cn.call(e),i=t==ji?e.constructor:null,n="function"==typeof i?wn.call(i):"";if(n)switch(n){case Qn:return Bi;case $n:return Ki;case Jn:return Wi}return t});var or=bt((function(e,t){return dr(e)||(e=null==e?[]:[Object(e)]),t=le(t,1),a(e,t)})),sr=bt((function(e,t,i){return je(e,Di|Oi,t,i)})),cr=bt((function(e,t){return oe(e,1,t)})),ur=bt((function(e,t,i){return oe(e,gr(t)||0,i)})),lr=bt((function(e,t){return je(e,Oi,Ti,t)})),dr=Array.isArray,fr=Pn?function(e){return e instanceof Pn}:gi(!1),pr=Number,gr=Number,hr=Ue((function(e,t){nr(t,oi(t),e)})),_r=Ue((function(e,t){nr(t,si(t),e)})),vr=Ue((function(e,t,i,n){Fe(t,si(t),e,n)})),Er=bt((function(e){return e.push(Ti,Z),vr.apply(Ti,e)})),mr=Ue((function(e,t,i){ye(e,t,i)})),Ir=bt((function(e,t){return null==e?{}:(t=me(le(t,1),String),Te(e,se(si(e),t)))})),yr=bt((function(e,t){return null==e?{}:Te(e,le(t,1))})),Sr=_e;b.prototype=ae(w.prototype),b.prototype.constructor=b,D.prototype=Xn?Xn(null):Rn,P.prototype.clear=V,P.prototype["delete"]=k,P.prototype.get=x,P.prototype.has=F,P.prototype.set=M,U.prototype.push=B,z.prototype.clear=j,z.prototype["delete"]=H,z.prototype.get=K,z.prototype.has=Y,z.prototype.set=q,w.assign=hr,w.assignIn=_r,w.before=At,w.bind=sr,w.chain=lt,w.compact=it,w.concat=or,w.create=ni,w.defaults=Er,w.defer=cr,w.delay=ur,w.filter=ht,w.flatten=rt,w.flattenDeep=at,w.iteratee=Sr,w.keys=oi,w.map=mt,w.mapValues=ci,w.matches=_i,w.merge=mr,w.mixin=vi,w.negate=Rt,w.omit=Ir,w.omitBy=ui,w.once=wt,w.partial=lr,w.pick=yr,w.pickBy=li,w.slice=ut,w.sortBy=Tt,w.tap=dt,w.thru=ft,w.toArray=ei,w.values=fi,w.extend=_r,vi(w,w),w.clone=Dt,w.cloneDeep=Ot,w.escape=pi,w.every=gt,w.find=_t,w.findIndex=nt,w.forEach=vt,w.forOwn=ri,w.has=ai,w.head=ot,w.identity=hi,w.includes=Et,w.indexOf=st,w.isArguments=Lt,w.isArray=dr,w.isBoolean=kt,w.isDate=xt,w.isEmpty=Ft,w.isEqual=Mt,w.isFinite=Ut,w.isFunction=Gt,w.isNaN=Ht,w.isNull=Yt,w.isNumber=qt,w.isObject=zt,w.isRegExp=Xt,w.isString=Qt,w.isUndefined=Jt,w.last=ct,w.max=yi,w.min=Si,w.noConflict=Ei,w.noop=mi,w.reduce=It,w.result=di,w.size=yt,w.some=St,w.uniqueId=Ii,w.each=vt,w.first=ot,vi(w,(function(){var e={};return fe(w,(function(t,i){bn.call(w.prototype,i)||(e[i]=t)})),e})(),{chain:!1}),w.VERSION=Ai,tr(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],(function(e){var t=(/^(?:replace|split)$/.test(e)?String.prototype:An)[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|join|replace|shift)$/.test(e);w.prototype[e]=function(){var e=arguments;return n&&!this.l?t.apply(this.value(),e):this[i]((function(i){return t.apply(i,e)}))}})),w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=pt,(yn||In||{})._=w,_n&&vn&&(En&&((vn.exports=w)._=w),_n._=w)}).call(this)}).call(t,i(4)(e),(function(){return this})())}),(function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}),(function(e,t){t.generate=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}}),(function(e,t,i){var n=i(7),r=i(9),a=i(12).Promise,o=i(16),s=o.get("stores/async_request");t.makeAsyncRequest=function(e,t){var i=s.getPromise(e);if(i)return i;var o,c,u=new a(function(e,t){o=e,c=t});return r.dispatch(n.REGISTER_ASYNC_DEFERRED,{source:e,promise:u,resolver:o,rejecter:c}),t&&t(),u},t.resolveRequest=function(e,t){r.dispatch(n.RESOLVE_DEFERRED,{source:e,resolveWith:t})},t.rejectRequest=function(e,t){r.dispatch(n.REJECT_DEFERRED,{source:e,rejectWith:t})}}),(function(e,t,i){var n=i(8);e.exports=n({LOG:null,SET_LOGLEVEL:null,INITIALIZE_STATE:null,SET_DOMCONTENTLOADED:null,ACTIVATE:null,UPDATE_BEHAVIOR_STORE:null,DATA_LOADED:null,SET_CLIENT_NAME:null,SET_CLIENT_VERSION:null,LOAD_PERSISTED_LAYER_STATES:null,RECORD_GLOBAL_DECISION:null,RECORD_LAYER_DECISION:null,ENSURE_ORIGINAL_PUSHSTATE:null,ENSURE_ORIGINAL_REPLACESTATE:null,SET_VISITOR_ATTRIBUTES:null,SET_VISITOR_ATTRIBUTE_PENDING:null,LOAD_EXISTING_VISITOR_PROFILE:null,SET_VISITOR_EVENTS:null,SET_FOREIGN_VISITOR_EVENTS:null,SET_FOREIGN_VISITOR_EVENT_QUEUE:null,SET_VISITOR_ID:null,SET_VISITOR_ID_VIA_API:null,REFRESH_SESSION:null,LOAD_SESSION_STATE:null,UPDATE_VARIATION_ID_MAP:null,MERGE_VARIATION_ID_MAP:null,UPDATE_PREFERRED_LAYER_MAP:null,MERGE_PREFERRED_LAYER_MAP:null,RECORD_LAYER_DECISION_EVENT_ID:null,TRACK_VIEW_ACTIVATED_EVENT:null,REGISTER_ASYNC_DEFERRED:null,RESOLVE_DEFERRED:null,REJECT_DEFERRED:null,REGISTER_PLUGIN:null,ADD_CLEANUP_FN:null,CLEAR_CLEANUP_FN:null,ACTION_EXECUTED:null,REGISTER_ACTION:null,SET_VIEW_ACTIVE_STATE:null,UPDATE_PARSED_VIEW_METADATA:null,UPDATE_USER_SUPPLIED_METADATA:null,REGISTER_VIEWS:null,SET_GLOBAL_TAGS:null,SET_VIEW_BATCHING:null,RESET_VIEW_STATES:null,ATTACH_EVENT_STREAM_PUBLISHERS:null,DETACH_EVENT_STREAM_PUBLISHERS:null,LOAD_DIRECTIVE:null,SET_COOKIE_AGE:null,SET_COOKIE_DOMAIN:null,SET_COOKIE_AUTO_REFRESH:null,XDOMAIN_SET_DEFAULT_FRAME:null,XDOMAIN_ADD_FRAME:null,XDOMAIN_SET_MESSAGE:null,XDOMAIN_ADD_SUBSCRIBER:null,
XDOMAIN_SET_CANONICAL_ORIGINS:null,XDOMAIN_SET_DISABLED:null,ADD_EMITTER_HANDLER:null,REMOVE_EMITTER_HANDLER:null,SET_INTEGRATION_SETTINGS:null,ADD_CHANGE:null,SET_CHANGE_APPLIER:null,REMOVE_ACTION_STATE:null,ANNOUNCE_PENDING_REDIRECT:null,LOAD_REDIRECT_DATA:null,REGISTER_TRACKED_REDIRECT_DATA:null,SET_PENDING_EVENT:null,REMOVE_PENDING_EVENT:null,LOAD_PENDING_EVENTS:null,SANDBOXED_FUNCTIONS_ADDED:null,SET_RUM_DATA:null,RECORD_API_USAGE:null,INITIALIZE_CHANGE_METRICS:null,RECORD_ACTIVATION_TYPE_USAGE:null,RECORD_AUDIENCE_USAGE:null,RECORD_CHANGE_MACROTASK_RATE:null,RECORD_CHANGE_OVERHEATED:null,RECORD_CHANGE_TYPE_USAGE:null,RECORD_DOM_OBSERVATION_OCCURENCE:null,RECORD_INTEGRATION_USAGE:null,RECORD_LAYER_FEATURE_USAGE:null,RECORD_LAYER_POLICY_USAGE:null,RECORD_RECOMMENDATIONS_USAGE:null,RECORD_VIEW_FEATURE_USAGE:null,RECORD_VIEWS_INITIALLY_ACTIVATED_COUNT:null,RECORD_VISITOR_ID_LOCATOR_USAGE:null,RECORD_VISITOR_ID_ERROR:null,RECORD_STICKY_BUCKETING_FEATURE:null,SET_PERFORMANCE_MARKS_DATA:null,FINALIZE_BATCH_SNAPSHOT:null,REGISTER_PREVIOUS_BATCH:null,REGISTER_TRACKER_VISITOR:null,REGISTER_TRACKER_EVENT:null,REGISTER_TRACKER_DECISION:null,RESET_TRACKER_EVENTS:null,RESET_TRACKER_PREVIOUS_BATCHES:null,RESET_TRACKER_STORE:null,SET_TRACKER_POLLING:null,SET_TRACKER_BATCHING:null,SET_TRACKER_SEND_EVENTS:null,SET_TRACKER_PERSISTABLE_STATE:null,SET_TRACKER_DIRTY:null,UPDATE_TRACKER_VISITOR_ATTRIBUTES:null,SET_UA_DATA:null})}),(function(e,t){"use strict";var i=function(e){var t,i={};if(!(e instanceof Object)||Array.isArray(e))throw new Error("keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(i[t]=t);return i};e.exports=i}),(function(e,t,i){var n=i(10);e.exports=n.create()}),(function(e,t,i){function n(e){e=e||{},this.f={},this.g={},this.I=0,this.S=[],this.T=[]}function r(e,t){return function(){var i=e.indexOf(t);i!==-1&&e.splice(i,1)}}var a=i(2),o=i(11);n.prototype.registerStores=function(e){a.forOwn(e,a.bind((function(e,t){this.f[t]=new o(t,this,e)}),this))},n.prototype.getStore=function(e){return this.f[e]},n.prototype.dispatch=function(e,t){this.dispatchId++,a.each(this.S,a.bind((function(i){i.call(this,e,t)}),this)),a.forOwn(this.f,(function(i){i.A(e,t)})),a.each(this.T,a.bind((function(i){i.call(this,e,t)}),this)),a.forOwn(this.f,a.bind((function(e,t){e.hasChanges()&&this.g[t]&&(e.resetChange(),a.each(this.g[t],(function(t){t(e)})))}),this))},n.prototype.reset=function(){this.g={},a.forOwn(this.f,(function(e,t){e.R()}))},n.prototype.getState=function(){var e={};return a.forOwn(this.f,(function(t,i){e[i]=t.w()})),e},n.prototype.onPreAction=function(e){var t=this.S;return t.push(e),r(t,e)},n.prototype.onPostAction=function(e){var t=this.T;return t.push(e),r(t,e)},n.prototype.b=function(e,t){this.g[e]||(this.g[e]=[]),this.g[e].push(t);var i=this.g[e];return r(i,t)},e.exports={create:function(e){return new n(e)}}}),(function(e,t,i){function n(e,t,i){this.D=e,this.O=t,this.C=0,this.N=!1,this.L={},r.extend(this,i),this.P={},this.initialize&&this.initialize()}var r=i(2);n.prototype.A=function(e,t){var i=this.L[e];i&&"function"==typeof i&&i.call(this,t,e)},n.prototype.w=function(){return r.cloneDeep(this.P)},n.prototype.on=function(e,t){this.L[e]=r.bind(t,this)},n.prototype.observe=function(e){return this.O.b(this.D,e)},n.prototype.emitChange=function(){this.N=!0,this.C++},n.prototype.hasChanges=function(){return this.N},n.prototype.resetChange=function(){this.N=!1},n.prototype.getStateId=function(){return this.C},n.prototype.R=function(){this.reset&&"function"==typeof this.reset&&this.reset(),this.initialize()},e.exports=n}),(function(e,t,i){e.exports=i(13)}),(function(e,t,i){(function(t,n){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.0
	 */
!(function(t,i){e.exports=i()})(this,(function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function r(e){return"function"==typeof e}function a(e){X=e}function o(e){Q=e}function s(){return function(){return t.nextTick(f)}}function c(){return"undefined"!=typeof W?function(){W(f)}:d()}function u(){var e=0,t=new Z(f),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=f,function(){return e.port2.postMessage(0)}}function d(){var e=setTimeout;return function(){return e(f,1)}}function f(){for(var e=0;e<q;e+=2){var t=ie[e],i=ie[e+1];t(i),ie[e]=void 0,ie[e+1]=void 0}q=0}function p(){try{var e=i(15);return W=e.runOnLoop||e.runOnContext,c()}catch(e){return d()}}function g(e,t){var i=arguments,n=this,r=new this.constructor(_);void 0===r[re]&&k(r);var a=n._state;return a?!(function(){var e=i[a-1];Q((function(){return L(a,r,e,n._result)}))})():D(n,r,e,t),r}function h(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var i=new t(_);return A(i,e),i}function _(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function E(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(e){return ce.error=e,ce}}function I(e,t,i,n){try{e.call(t,i,n)}catch(e){return e}}function y(e,t,i){Q((function(e){var n=!1,r=I(i,t,(function(i){n||(n=!0,t!==i?A(e,i):w(e,i))}),(function(t){n||(n=!0,b(e,t))}),"Settle: "+(e._label||" unknown promise"));!n&&r&&(n=!0,b(e,r))}),e)}function S(e,t){t._state===oe?w(e,t._result):t._state===se?b(e,t._result):D(t,void 0,(function(t){return A(e,t)}),(function(t){return b(e,t)}))}function T(e,t,i){t.constructor===e.constructor&&i===g&&t.constructor.resolve===h?S(e,t):i===ce?(b(e,ce.error),ce.error=null):void 0===i?w(e,t):r(i)?y(e,t,i):w(e,t)}function A(t,i){t===i?b(t,v()):e(i)?T(t,i,m(i)):w(t,i)}function R(e){e._onerror&&e._onerror(e._result),O(e)}function w(e,t){e._state===ae&&(e._result=t,e._state=oe,0!==e._subscribers.length&&Q(O,e))}function b(e,t){e._state===ae&&(e._state=se,e._result=t,Q(R,e))}function D(e,t,i,n){var r=e._subscribers,a=r.length;e._onerror=null,r[a]=t,r[a+oe]=i,r[a+se]=n,0===a&&e._state&&Q(O,e)}function O(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n=void 0,r=void 0,a=e._result,o=0;o<t.length;o+=3)n=t[o],r=t[o+i],n?L(i,n,r,a):r(a);e._subscribers.length=0}}function C(){this.error=null}function N(e,t){try{return e(t)}catch(e){return ue.error=e,ue}}function L(e,t,i,n){var a=r(i),o=void 0,s=void 0,c=void 0,u=void 0;if(a){if(o=N(i,n),o===ue?(u=!0,s=o.error,o.error=null):c=!0,t===o)return void b(t,E())}else o=n,c=!0;t._state!==ae||(a&&c?A(t,o):u?b(t,s):e===oe?w(t,o):e===se&&b(t,o))}function P(e,t){try{t((function(t){A(e,t)}),(function(t){b(e,t)}))}catch(t){b(e,t)}}function V(){return le++}function k(e){e[re]=le++,e._state=void 0,e._result=void 0,e._subscribers=[]}function x(e,t){this._instanceConstructor=e,this.promise=new e(_),this.promise[re]||k(this.promise),Y(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&w(this.promise,this._result))):b(this.promise,F())}function F(){return new Error("Array Methods must be provided an Array")}function M(e){return new x(this,e).promise}function U(e){var t=this;return new t(Y(e)?function(i,n){for(var r=e.length,a=0;a<r;a++)t.resolve(e[a]).then(i,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function G(e){var t=this,i=new t(_);return b(i,e),i}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function j(e){this[re]=V(),this._result=this._state=void 0,this._subscribers=[],_!==e&&("function"!=typeof e&&B(),this instanceof j?P(this,e):z())}function H(){var e=void 0;if("undefined"!=typeof n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=j}var K=void 0;K=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y=K,q=0,W=void 0,X=void 0,Q=function(e,t){ie[q]=e,ie[q+1]=t,q+=2,2===q&&(X?X(f):ne())},$="undefined"!=typeof window?window:void 0,J=$||{},Z=J.MutationObserver||J.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ie=new Array(1e3),ne=void 0;ne=ee?s():Z?u():te?l():void 0===$?p():d();var re=Math.random().toString(36).substring(16),ae=void 0,oe=1,se=2,ce=new C,ue=new C,le=0;return x.prototype._enumerate=function(){for(var e=this.length,t=this._input,i=0;this._state===ae&&i<e;i++)this._eachEntry(t[i],i)},x.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,n=i.resolve;if(n===h){var r=m(e);if(r===g&&e._state!==ae)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(i===j){var a=new i(_);T(a,e,r),this._willSettleAt(a,t)}else this._willSettleAt(new i(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},x.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===ae&&(this._remaining--,e===se?b(n,i):this._result[t]=i),0===this._remaining&&w(n,this._result)},x.prototype._willSettleAt=function(e,t){var i=this;D(e,void 0,(function(e){return i._settledAt(oe,t,e)}),(function(e){return i._settledAt(se,t,e)}))},j.all=M,j.race=U,j.resolve=h,j.reject=G,j._setScheduler=a,j._setAsap=o,j._asap=Q,j.prototype={constructor:j,then:g,"catch":function(e){return this.then(null,e)}},j.polyfill=H,j.Promise=j,j}))}).call(t,i(14),(function(){return this})())}),(function(e,t){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function o(){h&&p&&(h=!1,p.length?g=p.concat(g):_=-1,g.length&&s())}function s(){if(!h){var e=r(o);h=!0;for(var t=g.length;t;){for(p=g,g=[];++_<t;)p&&p[_].run();_=-1,t=g.length}p=null,h=!1,a(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,d,f=e.exports={};!(function(){try{l="function"==typeof setTimeout?setTimeout:i}catch(e){l=i}try{d="function"==typeof clearTimeout?clearTimeout:n}catch(e){d=n}})();var p,g=[],h=!1,_=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];g.push(new c(e,t)),1!==g.length||h||r(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}}),(function(e,t){}),(function(e,t,i){var n=i(2),r=i(17),a=i(9),o=i(18),s=r.create(),c={action_data:i(21),async_request:i(27),audience_data:i(28),change_data:i(29),cleanup:i(30),client_metadata:i(31),cookie_options:i(33),event_data:i(34),event_emitter:i(35),dimension_data:i(36),directive:i(37),global:i(38),history:i(39),integration_settings:i(41),layer:i(42),layer_data:i(43),log:i(45),observed_redirect:i(46),pending_events:i(47),performance:i(48),plugins:i(49),provider_status:i(50),pending_redirect:i(51),rum:i(52),sandbox:i(53),session:i(54),tracker_optimizely:i(55),ua_data:i(56),view:i(57),view_data:i(58),visitor:i(59),visitor_attribute_entity:i(60),visitor_events:i(61),visitor_events_manager:i(66),visitor_id:i(67),visitor_bucketing:i(68),xdomain:i(69)};c["group_data"]=i(70),a.registerStores(c),n.forOwn(c,(function(e,t){s.register("stores/"+t,a.getStore(t))})),s.register("core/plugins/matchers/key_value",o),e.exports=s}),(function(e,t,i){function n(){this.V={}}var r=i(2);n.prototype.register=function(e,t){if(1===arguments.length){var i=this;return void r.each(e,(function(e,t){i.register(t,e)}))}if(this.V[e])throw new Error("Module already registered for: "+e);this.V[e]=t},n.prototype.get=function(e){return this.V[e]},n.prototype.getModuleKeys=function(){var e=this.V;return r.keys(e)},n.prototype.evaluate=function(e){var t=e.length,i=e.slice(0,t-1),n=e[t-1];if("function"!=typeof n)throw new Error("Evaluate must take a function as last element in array");var a=r.map(i,r.bind(this.get,this));return n.apply(null,a)},n.prototype.reset=function(){this.V={}},e.exports={create:function(){return new n}}}),(function(e,t,i){var n=i(2),r=i(19).getFieldValue,a=i(20);e.exports=function(e,t){var i=r(e,t.name.split("."));return n.isArray(i)?n.some(i,n.partial(a.hasMatch,t.value,t.match)):a.hasMatch(t.value,t.match,i)}}),(function(e,t,i){var n=i(2);t.getFieldValue=function(e,t){n.isArray(t)||(t=[t]);for(var i=e,r=0;r<t.length;r++){var a=t[r];if(!n.isObject(i)||!i.hasOwnProperty(a))return;i=i[a]}return i},t.setFieldValue=function(e,t,i){if(!n.isArray(t)||n.isEmpty(t))throw new Error("Attempted to set an invalid key path: "+t);for(var r=e,a=0;a<t.length-1;a++){var o=t[a];n.isObject(r[o])||(r[o]={}),r=r[o]}r[t[t.length-1]]=i}}),(function(e,t,i){var n=i(2);t.hasMatch=function(e,t,i){var r=!n.isUndefined(i)&&null!==i,a=!n.isUndefined(e)&&null!==e,o=t||(a?"exact":"exists");switch(o){case"exists":return r;case"exact":return r&&String(i)===e;case"substring":return r&&String(i).indexOf(e)>-1;case"regex":try{if(a&&r){var s=new RegExp(e);return s.test(String(i))}return!1}catch(e){}return!1;case"range":var c=e.split(":"),u=parseFloat(c[0]),l=parseFloat(c[1]),d=parseFloat(i);return d>=u&&d<=l;default:return!1}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(22),o=i(23);e.exports={initialize:function(){this.P={actions:{},actionState:{}},this.on(r.DATA_LOADED,this.k),this.on(r.ACTION_EXECUTED,this.F),this.on(r.SET_CHANGE_APPLIER,this.M),this.on(r.REMOVE_ACTION_STATE,this.U)},k:function(e){var t=this;n.isEmpty(e.data.layers)||(n.each(e.data.layers,(function(e){var i;if(e.changes){var r="layerId:"+e.id;i={id:r,layerId:e.id,changeSet:e.changes,type:"layer"},a.deepFreeze(i),t.P.actions[r]=i}n.each(e.experiments,(function(r){if(r.changes){var o="experimentId:"+r.id;i={id:o,layerId:e.id,experimentId:r.id,changeSet:r.changes,type:"experiment"},a.deepFreeze(i),t.P.actions[o]=i}n.each(r.variations,(function(o){n.each(o.actions,(function(n){var s=n.pageId||n.viewId,c=r.id+":"+o.id+":"+s;i={id:c,layerId:e.id,experimentId:r.id,variationId:o.id,pageId:s,changeSet:n.changes,type:"variation"},a.deepFreeze(i),t.P.actions[c]=i}))}))}))})),this.emitChange())},F:function(e){var t=e.actionId;n.isUndefined(t)||this.P.actionState[t]||(this.P.actionState[t]={})},M:function(e){var t=e.actionId,i=e.changeId;return this.P.actionState[t]?void(this.P.actionState[t][i]=e.changeApplier):void o.warn("Action Data / Attempted to set changeApplier for inactive action: ",t)},U:function(e){delete this.P.actionState[e.actionId]},get:function(e){return a.safeReference(this.P.actions[e])},getActionState:function(e){return a.safeReference(this.P.actionState[e])},getByChangeId:function(e){return n.find(this.P.actions,{changeSet:[{id:e}]})},getAllActionIdsByPageId:function(e){return n.map(n.filter(this.P.actions,{pageId:e}),"id")},getChangeApplier:function(e,t){var i=this.P.actionState[t];if(i)return i[e]},getExperimentVariationActions:function(e,t){return a.safeReference(n.filter(this.P.actions,{experimentId:e,variationId:t}))},getLayerActions:function(e){return a.safeReference(n.filter(this.P.actions,{id:"layerId:"+e}))},getExperimentActions:function(e){return a.safeReference(n.filter(this.P.actions,{id:"experimentId:"+e}))},getAll:function(){return a.safeReference(n.values(this.P.actions))}}}),(function(e,t,i){var n=i(2),r=!1;t.deepFreeze=function e(t){r&&n.isObject(t)&&!n.isFunction(t)&&(n.forOwn(t,e),Object.freeze(t))},t.safeReference=function e(t){return r?!n.isObject(t)||n.isFunction(t)||Object.isFrozen(t)?t:n.isArray(t)?n.map(t,e):n.reduce(t,(function(t,i,n){return t[n]=e(i),t}),{}):n.cloneDeep(t)}}),(function(e,t,i){function n(){this.logLevel=null,this.logMatch=null,this.logs=[],this.timebase=o.now()}var r=i(2),a=i(7),o=i(24),s=i(25),c=i(9),u=i(26);n.prototype.G=function(){return!r.isNull(this.logLevel)},n.prototype.setLogLevel=function(e){var t=this.B(e);null===t?console.error("Unknown log level: "+e):this.logLevel!==t&&(this.log("Setting log level to "+t),this.logLevel=t,this.flush())},n.prototype.setLogMatcher=function(e){r.isString(e)?this.logMatcher=e:this.logMatcher="",this.logGroup=0},n.prototype.shouldLog=function(e){return this.G()&&this.logLevel>=e},n.prototype.matchesLogMessage=function(e,t){var i=this.logMatcher;if(!this.logMatcher)return!0;if(this.logGroup)return"GROUPSTART"===e?this.logGroup++:"GROUPEND"===e&&this.logGroup--,!0;var n=r.some(t,(function(e){if(!r.isString(e))try{e=u.stringify(e)}catch(e){}return r.isString(e)&&r.includes(e,i)}));return n&&"GROUPSTART"===e&&this.logGroup++,n},n.prototype.storeLog=function(e,t){var i={logLevel:e,logMessage:t};c.dispatch(a.LOG,i)},n.prototype.flush=function(){var e=i(16),t=e.get("stores/log");this.logGroup=0;var n=t.getLogs();r.each(n,r.bind((function(e){this.z(e.logLevel,e.logMessage,!0)}),this))},n.prototype.z=function(e,t,i){var n,a=e;if(console)switch(e){case"GROUPSTART":n=console.groupCollapsed,a=s.LogLevel.DEBUG;break;case"GROUPEND":n=console.groupEnd,a=s.LogLevel.DEBUG;break;case s.LogLevel.ERROR:n=console.error;break;case s.LogLevel.WARN:n=console.warn;break;case s.LogLevel.DEBUG:n=console.debug;break;default:n=console.log}try{i||this.G()&&!this.shouldLog(a)||(r.isArray(t)&&r.isString(t[0])&&(t=this.j(t)),this.storeLog(e,t)),n&&this.shouldLog(a)&&this.matchesLogMessage(e,t)&&n.apply(console,t)}catch(e){console&&(console.error?console.error(e):console.log(e))}},n.prototype.debug=function(){this.z(s.LogLevel.DEBUG,[].slice.call(arguments))},n.prototype.log=function(){this.z(s.LogLevel.INFO,[].slice.call(arguments))},n.prototype.logAlways=function(){var e=this.j([].slice.call(arguments));console&&console.log&&console.log.apply&&console.log.apply(console,e),this.storeLog(s.LogLevel.INFO,e)},n.prototype.warn=function(){this.z(s.LogLevel.WARN,[].slice.call(arguments))},n.prototype.error=function(e){var t=[].slice.call(arguments);1===t.length&&e.stack?(this.z(s.LogLevel.ERROR,[this.H(),e]),this.z(s.LogLevel.INFO,[e.stack])):this.z(s.LogLevel.ERROR,t)},n.prototype.groupCollapsed=function(){this.z("GROUPSTART",[].slice.call(arguments))},n.prototype.groupEnd=function(){this.z("GROUPEND",[].slice.call(arguments))},n.prototype.j=function(e){var t=this.H().toString();return t.length<6&&(t=("     "+t).slice(-6)),[t+"| Optly / "+e[0]].concat(e.slice(1))},n.prototype.H=function(){return this.timebase?o.now()-this.timebase:0},n.prototype.B=function(e){return e&&(e=e.toUpperCase(),"TRUE"===e&&(e="INFO"),"FALSE"===e&&(e="OFF"),"ALL"===e&&(e="DEBUG"),!r.isUndefined(s.LogLevel[e]))?s.LogLevel[e]:null},e.exports=new n}),(function(e,t){t.now=function(){return+new Date}}),(function(e,t,i){var n=i(2),r=i(8);t.COOKIES={OPT_OUT:"optimizelyOptOut",PREVIEW:"optimizelyPreview",REDIRECT:"optimizelyRedirectData",SESSION_STATE:"optimizelySessionState",TOKEN:"optimizelyToken",VISITOR_ID:"optimizelyEndUserId",VISITOR_UUID:"optimizelyPPID"},t.LayerActivationTypes={CONDITIONAL:"conditional",IMMEDIATE:"immediate",MANUAL:"manual",READY:"ready",TIMEOUT:"timeout"},t.LogLevel={OFF:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},t.Lifecycle=r({preActivate:null,postVisitorProfileLoad:null,postViewsActivated:null,postActivate:null}),t.ViewActivationTypes={immediate:"immediate",manual:"manual",callback:"callback",polling:"polling",URLChanged:"url_changed",DOMChanged:"dom_changed"},t.StorageKeys={PENDING_EVENTS:"pending_events",RELAYED_EVENTS:"relayed_events"},t.PluginTypes=r({visitorProfileProviders:null,viewProviders:null,audienceMatchers:null,viewMatchers:null,analyticsTrackers:null,viewTagLocators:null,userFeatureDefs:null,apiModules:null,changeAppliers:null,deciders:null,eventImplementations:null,viewTriggers:null}),t.ResourceTimingAttributes=r({connectStart:null,connectEnd:null,decodedBodySize:null,domainLookupStart:null,domainLookupEnd:null,duration:null,encodedBodySize:null,fetchStart:null,requestStart:null,responseStart:null,responseEnd:null,secureConnectionStart:null,startTime:null,transferSize:null,serverTiming:null}),t.RUMPerformanceTimingAttributes=r({blockTime:null}),t.AttributionTypes=r({FIRST_TOUCH:null,LAST_TOUCH:null}),t.SandboxedFunctions=r({XMLHttpRequest:null}),t.PerformanceData=r({performance_marks:null,resource_timing:null,performance_timing:null}),t.PerformanceCounters=r({mutation_observer_invocation:null,polling_invocation:null,match_selector_invocation:null}),t.VisitorStorageKeys={EVENTS:"events",EVENT_QUEUE:"event_queue",LAYER_MAP:"layer_map",LAYER_STATES:"layer_states",SESSION_STATE:"session_state",VISITOR_PROFILE:"visitor_profile",VARIATION_MAP:"variation_map",TRACKER_OPTIMIZELY:"tracker_optimizely"},t.AllStorageKeys=n.assign({},t.StorageKeys,t.VisitorStorageKeys),t.ListTargetingKeyTypes={COOKIE:"c",QUERY:"q",JS_VARIABLE:"j"},t.VisitorIdLocatorType={COOKIE:"cookie",JS_VARIABLE:"js",LOCALSTORAGE:"localStorage",QUERY:"query"}}),(function(e,t,i){function n(e){var t=[Array.prototype],i=[];r.each(t,(function(e){r.isUndefined(e.toJSON)||(i.push(e.toJSON),delete e.toJSON)}));var n,a;try{n=e()}catch(e){a=e}finally{r.each(i,(function(e,i){t[i].toJSON=e}))}if(a)throw a;return n}var r=i(2);t.stringify=function(){return n(r.bind((function(){return JSON.stringify.apply(null,this)}),arguments))},t.parse=JSON.parse}),(function(e,t,i){var n=i(7);e.exports={initialize:function(){this.P={},this.on(n.REGISTER_ASYNC_DEFERRED,this.K),this.on(n.RESOLVE_DEFERRED,this.Y),this.on(n.REJECT_DEFERRED,this.q)},getRequest:function(e){return this.P[e]},getPromise:function(e){var t=this.getRequest(e);if(t)return t.promise},K:function(e){this.P[e.source]={promise:e.promise,resolver:e.resolver,rejecter:e.rejecter}},Y:function(e){var t=this.getRequest(e.source);if(!t)throw new Error("No request registered for source: "+e.source);t.resolver(e.resolveWith)},q:function(e){var t=this.getRequest(e.source);if(!t)throw new Error("No request registered for source: "+e.source);if(!t.rejecter)throw new Error("No rejecter registered for source: "+e.source);t.rejecter(e.rejectWith)}}}),(function(e,t,i){function n(e,t){return t||(t={}),e?(r.each(e,(function(e){if(!r.isString(e)){if(r.isObject(e)){var i=e.type,a=e.name||"_";t[i]||(t[i]={}),t[i][a]=!0}r.isArray(e)&&n(e,t)}})),t):t}var r=i(2),a=i(7),o=i(22);e.exports={initialize:function(){this.P={audiences:{},featuresNeeded:{}},this.on(a.DATA_LOADED,this.k)},k:function(e){r.isEmpty(e.data.audiences)||(r.each(e.data.audiences,r.bind((function(e){o.deepFreeze(e),r.merge(this.P.featuresNeeded,n(e.conditions)),this.P.audiences[e.id]=e}),this)),this.emitChange())},getAll:function(){return o.safeReference(r.values(this.P.audiences))},getFeaturesNeeded:function(e){return o.safeReference(this.P.featuresNeeded[e]||{})},getAudiencesMap:function(){return o.safeReference(this.P.audiences)},get:function(e){return o.safeReference(this.P.audiences[e])},getAudienceName:function(e){var t=r.find(r.values(this.P.audiences),{id:e});return t.name||"Aud "+e}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(22);e.exports={initialize:function(){this.P={},this.on(r.ADD_CHANGE,this.W),this.on(r.DATA_LOADED,this.k)},getChange:function(e){return this.P[e]},k:function(e){n.isEmpty(e.data.changes)||n.each(e.data.changes,n.bind(this.W,this))},W:function(e){a.deepFreeze(e),this.P[e.id]=e,this.emitChange()}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(25);e.exports={initialize:function(){this.P={},n.each(a.Lifecycle,n.bind((function(e){this.P[e]=[]}),this)),this.on(r.ADD_CLEANUP_FN,this.X),this.on(r.CLEAR_CLEANUP_FN,this.Q)},getCleanupFns:function(e){return n.cloneDeep(this.P[e])},X:function(e){this.P[e.lifecycle].push(e.cleanupFn),this.emitChange()},Q:function(e){var t=this.P[e.lifecycle];if(e.cleanupFn){var i=t.indexOf(e.cleanupFn);i>-1&&(t.splice(i,1),this.emitChange())}else this.P[e.lifecycle]=[],this.emitChange()}}}),(function(e,t,i){var n=i(7),r=i(32);e.exports={initialize:function(){this.P={name:r.NAME,version:r.VERSION},this.on(n.SET_CLIENT_NAME,this.$),this.on(n.SET_CLIENT_VERSION,this.J)},getClientName:function(){return this.P.name},getClientVersion:function(){return this.P.version},$:function(e){e&&(this.P.name=e),this.emitChange()},J:function(e){e&&(this.P.version=e),this.emitChange()}}}),(function(e,t,i){t.VERSION="0.166.0",t.NAME="js"}),(function(e,t,i){var n=i(7),r=15552e3,a=!0;e.exports={initialize:function(){this.P={currentDomain:null,defaultAgeSeconds:r,autoRefresh:a},this.on(n.SET_COOKIE_DOMAIN,this.Z),this.on(n.SET_COOKIE_AGE,this.ee),this.on(n.SET_COOKIE_AUTO_REFRESH,this.te)},getCurrentDomain:function(){return this.P.currentDomain},getDefaultAgeInSeconds:function(){return this.P.defaultAgeSeconds},getAutoRefresh:function(){return this.P.autoRefresh},Z:function(e){this.P.currentDomain=e,this.emitChange()},ee:function(e){this.P.defaultAgeSeconds=e,this.emitChange()},te:function(e){this.P.autoRefresh=e,this.emitChange()}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(22);e.exports={initialize:function(){this.P={},this.on(r.DATA_LOADED,this.k)},getAll:function(){return a.safeReference(n.values(this.P))},getEventsMap:function(){return a.safeReference(this.P)},get:function(e){return a.safeReference(this.P[e])},getByApiName:function(e){return a.safeReference(n.find(n.values(this.P),{apiName:e}))},getByPageId:function(e){return a.safeReference(n.filter(this.P,{pageId:e}))},k:function(e){n.isEmpty(e.data.events)||(n.each(e.data.events,n.bind((function(e){e.pageId||(e.pageId=e.viewId),a.deepFreeze(e),this.P[e.id]=e}),this)),this.emitChange())}}}),(function(e,t,i){function n(e){var t=[];return e&&r.isObject(e)?(e.type&&t.push(e.type),t.push(o),e.type&&e.name&&t.push(e.name),t.join("")):o}var r=i(2),a=i(7),o="|";e.exports={initialize:function(){this.P={handlers:{}},this.on(a.ADD_EMITTER_HANDLER,this.ne),this.on(a.REMOVE_EMITTER_HANDLER,this.re)},getHandlers:function(e,t){var i=[null,{type:e.type},{type:e.type,name:e.name}],a=[];return r.each(i,r.bind((function(e){var t=n(e),i=this.P.handlers[t];i&&(a=a.concat(i))}),this)),t&&(a=r.filter(a,(function(e){return!e.publicOnly}))),a},ne:function(e){var t=n(e.filter);this.P.handlers[t]||(this.P.handlers[t]=[]),this.P.handlers[t].push({handler:e.handler,token:e.token,publicOnly:!!e.publicOnly,emitErrors:!!e.emitErrors}),this.emitChange()},re:function(e){var t=!1,i=e.token;r.forOwn(this.P.handlers,r.bind((function(e,n){var a=r.filter(e,(function(e){return e.token!==i}));a.length!==e.length&&(t=!0,this.P.handlers[n]=a)}),this)),t&&this.emitChange()}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(22);e.exports={initialize:function(){this.P={},this.on(r.DATA_LOADED,this.k)},k:function(e){n.isEmpty(e.data.dimensions)||(n.each(e.data.dimensions,n.bind((function(e){a.deepFreeze(e),this.P[e.id]=e}),this)),this.emitChange())},getAll:function(){return a.safeReference(n.values(this.P))},getById:function(e){return a.safeReference(this.P[e])},getByApiName:function(e){return a.safeReference(n.find(n.values(this.P),{apiName:e}))}}}),(function(e,t,i){var n=i(2),r=i(7);e.exports={initialize:function(){this.P={disabled:!1,forceAudienceIds:[],forceVariationIds:[],alreadyInitialized:!1,mutationObserverAPISupported:!1,isEditor:!1,isPreview:!1,isLegacyPreview:!1,isSlave:!1,previewLayerIds:[],projectToken:null,shouldOptOut:!1,trackingDisabled:!1,isRunningInV2Editor:!1,isRunningInDesktopApp:!1,forceTracking:!1},this.on(r.LOAD_DIRECTIVE,this.ae)},getAll:function(){return n.cloneDeep(this.P)},conflictInObservingChanges:function(){return!this.P.mutationObserverAPISupported},isDisabled:function(){return this.P.disabled},isEditor:function(){return this.P.isEditor},clientHasAlreadyInitialized:function(){return this.P.alreadyInitialized},getForceAudienceIds:function(){return this.P.forceAudienceIds},getForceVariationIds:function(){return this.P.forceVariationIds},getPreviewLayerIds:function(){return this.P.previewLayerIds},getProjectToken:function(){return this.P.projectToken},getForceTracking:function(){return this.P.forceTracking},shouldActivate:function(){return!this.P.isEditor&&!this.isDisabled()},shouldBootstrapDataForPreview:function(){return this.P.isPreview},shouldBootstrapDataForEditor:function(){return this.P.isEditor},shouldInitialize:function(){return!(this.shouldLoadPreview()||this.isDisabled()||this.getProjectToken())},shouldLoadPreview:function(){return!(this.P.isPreview||this.P.isLegacyPreview||!this.getProjectToken()||this.P.isEditor)},shouldBailForDesktopApp:function(){return!this.P.isEditor&&this.P.isRunningInDesktopApp},shouldLoadInnie:function(){return!this.P.isSlave&&!this.P.isEditor&&this.P.isRunningInV2Editor},shouldObserveChangesIndefinitely:function(){return this.P.mutationObserverAPISupported},shouldObserveChangesUntilTimeout:function(){return!this.shouldObserveChangesIndefinitely()},shouldOptOut:function(){return this.P.shouldOptOut},shouldSendTrackingData:function(){return!this.P.trackingDisabled&&(!!this.P.forceTracking||!this.P.isPreview&&n.isEmpty(this.getForceVariationIds())&&n.isEmpty(this.getForceAudienceIds()))},isSlave:function(){return this.P.isSlave},isRunningInDesktopApp:function(){return this.P.isRunningInDesktopApp},isRunningInV2Editor:function(){return this.P.isRunningInV2Editor},ae:function(e){n.extend(this.P,e),this.emitChange()}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(22);e.exports={initialize:function(){this.P={holdback:0,isGlobalHoldback:null,listTargetingKeys:[],revision:null,projectId:null,accountId:null,namespace:null,activationId:null,activationTimestamp:null,dcpServiceId:null,dcpKeyfieldLocators:[],recommenderServices:[],anonymizeIP:null,projectJS:null,snippetId:null,plugins:[],domContentLoaded:!1,experimental:{}},this.on(r.DATA_LOADED,this.oe),this.on(r.ACTIVATE,this.se),this.on(r.RECORD_GLOBAL_DECISION,this.ce),this.on(r.SET_DOMCONTENTLOADED,this.ue)},getRevision:function(){return this.P.revision},getGlobalHoldbackThreshold:function(){return this.P.holdback},getProjectId:function(){return this.P.projectId},getSnippetId:function(){return this.P.snippetId},getAccountId:function(){return this.P.accountId},getNamespace:function(){return this.P.namespace},getActivationId:function(){return this.P.activationId},getActivationTimestamp:function(){return this.P.activationTimestamp},getAnonymizeIP:function(){return this.P.anonymizeIP},isGlobalHoldback:function(){return!!this.P.isGlobalHoldback},getListTargetingKeys:function(){return this.P.listTargetingKeys.slice()},getDCPServiceId:function(){return this.P.dcpServiceId},getDCPKeyfieldLocators:function(){return this.P.dcpKeyfieldLocators},getRecommenderServices:function(){return this.P.recommenderServices},getProjectJS:function(){return this.P.projectJS},getPlugins:function(){return this.P.plugins},getExperimental:function(){return a.safeReference(this.P.experimental)},domContentLoadedHasFired:function(){return this.P.domContentLoaded},se:function(e){this.P.activationId=e.activationId,this.P.activationTimestamp=e.activationTimestamp,this.P.isGlobalHoldback=null},ce:function(e){var t=e.isGlobalHoldback;if(null!==this.P.isGlobalHoldback&&this.P.isGlobalHoldback!==t)throw new Error("Attempted to change already set global holdback!");this.P.isGlobalHoldback=t,this.emitChange()},oe:function(e){var t=n.pick(e.data,["holdback","accountId","projectId","snippetId","namespace","revision","listTargetingKeys","dcpServiceId","dcpKeyfieldLocators","recommenderServices","anonymizeIP","plugins","projectJS","experimental"]);if(0!==n.keys(t).length){var i={listTargetingKeys:[],dcpServiceId:null,dcpKeyfieldLocators:[]};n.extend(this.P,i,t),this.emitChange()}},ue:function(){this.P.domContentLoaded=!0,this.emitChange()}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(40);e.exports={initialize:function(){this.P={originalPushState:null,originalReplaceState:null},this.on(r.ENSURE_ORIGINAL_PUSHSTATE,this.le),this.on(r.ENSURE_ORIGINAL_REPLACESTATE,this.de)},getOriginalPushState:function(){return this.P.originalPushState},getOriginalReplaceState:function(){return this.P.originalReplaceState},le:function(){this.P.originalPushState||(this.P.originalPushState=n.bind(a.getGlobal("history").pushState,a.getGlobal("history")))},de:function(){this.P.originalReplaceState||(this.P.originalReplaceState=n.bind(a.getGlobal("history").replaceState,a.getGlobal("history")))}}}),(function(e,t,i){var n=i(2),r=i(23);t.getUserAgent=function(){return window.navigator.userAgent},t.getLocationSearch=function(){return window.location.search},t.getNavigatorLanguage=function(){return window.navigator.language||window.navigator.userLanguage},t.getHref=function(){return window.location.href},t.getLocation=function(){return window.location},t.setLocation=function(e){window.location.replace(e)},t.setGlobal=function(e,t){window[e]=t},t.getGlobal=function(e){return window[e]},t.getGlobalByPath=function(e){for(var t=e.split("."),i=window;t.length;)try{i=i[t.shift()]}catch(t){throw r.error("Attempted to access nonexistent property. Path ",e),new Error("Attempted to access nonexistent property. Path ",e)}return i},t.addEventListener=function(){return window.addEventListener.apply(window,arguments)},t.removeEventListener=function(){return window.removeEventListener.apply(window,arguments)},t.isMutationObserverAPISupported=function(){return!n.isUndefined(window.MutationObserver)},t.alert=function(e){alert(e)},t.setTimeout=function(e,t){return setTimeout((function(){try{e()}catch(e){r.warn("Deferred function threw error:",e)}}),t)},t.setInterval=function(e,t){return setInterval((function(){try{e()}catch(e){r.warn("Polling function threw error:",e)}}),t)}}),(function(e,t,i){var n=i(2),r=i(7);e.exports={initialize:function(){this.P={},this.on(r.DATA_LOADED,this.k),this.on(r.SET_INTEGRATION_SETTINGS,this.fe)},k:function(e){n.isEmpty(e.data.integrationSettings)||(n.each(e.data.integrationSettings,n.bind((function(e){this.P[e.id]=e}),this)),this.emitChange())},fe:function(e){var t=this.P[e.id];t?n.extend(t,e):this.P[e.id]=e},getAll:function(){return n.cloneDeep(n.values(this.P))},get:function(e){return n.cloneDeep(this.P[e])},getReference:function(e){return this.P[e]}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(23),o="*";e.exports={initialize:function(){this.P={},this.on(r.LOAD_PERSISTED_LAYER_STATES,this.pe),this.on(r.RECORD_LAYER_DECISION,this.ge),this.on(r.RECORD_LAYER_DECISION_EVENT_ID,this.he)},getLayerState:function(e,t){if(this.P[e]){var i=this.P[e];if(n.keys(i).length>1&&!t)throw new Error("View Id must be specified when more than one layerState for layer.");return t?n.cloneDeep(n.find(i,{pageId:t})):n.cloneDeep(i[o])}},getLayerStates:function(e){var t=[];for(var i in this.P)n.forEach(this.P[i],(function(i){(n.isUndefined(e)||i.namespace===e)&&t.push(n.cloneDeep(i))}));return t},getLayerStatesForAnalytics:function(){var e=[];for(var t in this.P)n.forEach(this.P[t],(function(t){e.push(n.pick(t,["layerId","decision","decisionEventId"]))}));return e},pe:function(e){e.merge||(this.P={}),
n.each(e.layerStates,n.bind((function(e){var t=e.layerId;e.pageId||(e.pageId=e.viewId);var i=e.pageId||o,r=this.P[t];if(n.isUndefined(r))this.P[t]={},this.P[t][i]=e;else{var a=r[i];(!a||e.decisionTimestamp>(a.decisionTimestamp||0))&&(this.P[t][i]=e)}}),this)),this.emitChange()},ge:function(e){var t={layerId:e.layerId,revision:e.revision,namespace:e.namespace,pageId:e.pageId,decisionTicket:e.decisionTicket,decision:e.decision,decisionActivationId:e.activationId,decisionTimestamp:e.timestamp,decisionEventId:null},i=this.P[e.layerId]||{};e.pageId?(delete i[o],i[e.pageId]=t):(i={},i[o]=t),this.P[e.layerId]=i,this.emitChange()},he:function(e){var t=e.layerId,i=e.pageId||o;return this.P[t]?this.P[t][i]?(this.P[t][i].decisionEventId=e.decisionId,void this.emitChange()):void a.warn("Not recording decision event: Layer state not found for view",i):void a.warn("Not recording decision event: Campaign not registered",t)}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(22),o=i(44);e.exports={initialize:function(){this.P={layers:{},experiments:{},variations:{}},this.on(r.DATA_LOADED,this.k)},k:function(e){if(!n.isEmpty(e.data.layers)){var t=this;n.each(e.data.layers,(function(e){n.each(e.experiments,(function(i){e.pageIds||(e.pageIds=e.viewIds),i.campaignName||o.isSingleExperimentPolicy(e.policy)?o.isSingleExperimentPolicy(e.policy)&&e.groupId&&(i.groupId=e.groupId):i.campaignName=e.name,n.each(i.variations,(function(e){n.each(e.actions,(function(e){e.pageId||(e.pageId=e.viewId)})),t.P.variations[e.id]=e})),t.P.experiments[i.id]=i})),a.deepFreeze(e),t.P.layers[e.id]=e})),this.emitChange()}},getAll:function(){return a.safeReference(n.values(this.P.layers))},getCampaignsMap:function(){return a.safeReference(this.P.layers)},getExperimentsMap:function(){return a.safeReference(this.P.experiments)},getVariationsMap:function(){return a.safeReference(this.P.variations)},getCount:function(){return n.keys(this.P.layers).length},getAllByPageIds:function(e){return a.safeReference(n.filter(this.P.layers,(function(t){return n.some(e,n.partial(n.includes,t.pageIds))})))},get:function(e){return a.safeReference(this.P.layers[e])},getLayerByExperimentId:function(e){var t=n.find(this.P.layers,(function(t){return n.find(t.experiments,{id:e})}));return a.safeReference(t)},getExperimentByVariationId:function(e){var t;return n.some(this.P.layers,(function(i){return n.some(i.experiments,(function(i){return n.find(i.variations,{id:e})&&(t=i),t})),t})),a.safeReference(t)}}}),(function(e,t){var i="single_experiment",n="multivariate";t.isSingleExperimentPolicy=function(e){return e===i||e===n}}),(function(e,t,i){var n=i(7);e.exports={initialize:function(){this.P={logs:[]},this.on(n.LOG,this._e)},getLogs:function(){return this.P.logs},_e:function(e){this.P.logs.push(e),this.emitChange()},w:function(){return this.P.logs.slice()}}}),(function(e,t,i){var n=i(7),r=i(22);e.exports={initialize:function(){this.P={data:null,hasTracked:null},this.on(n.LOAD_REDIRECT_DATA,this.ve),this.on(n.REGISTER_TRACKED_REDIRECT_DATA,this.Ee)},get:function(){return r.safeReference(this.P.data)},hasTracked:function(){return this.P.hasTracked},ve:function(e){r.deepFreeze(e),this.P.data=e,this.P.hasTracked=!1,this.emitChange()},Ee:function(){this.P.hasTracked=!0}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(26),o=1e3;e.exports={initialize:function(){this.P={},this.on(r.SET_PENDING_EVENT,this.me),this.on(r.REMOVE_PENDING_EVENT,this.Ie),this.on(r.LOAD_PENDING_EVENTS,this.ye)},getEvents:function(){return this.P},getEventsString:function(){return a.stringify(this.P)},me:function(e){n.keys(this.P).length>=o&&this.Se();var t=e.id,i=e.retryCount;this.P[t]&&this.P[t].retryCount===i||(this.P[t]={id:t,timeStamp:e.timeStamp,data:e.data,retryCount:i},this.emitChange())},Ie:function(e){delete this.P[e.id],this.emitChange()},ye:function(e){this.P=e.events,this.Se(),this.emitChange()},Se:function(){for(var e=n.sortBy(this.P,"timeStamp"),t=0;t<=e.length-o;t++)delete this.P[e[t].id];this.emitChange()}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(25);e.exports={initialize:function(){this.P={},this.P[a.PerformanceData.performance_marks]={},this.on(r.SET_PERFORMANCE_MARKS_DATA,this.Te)},Te:function(e){n.isUndefined(this.P[a.PerformanceData.performance_marks][e.name])&&(this.P[a.PerformanceData.performance_marks][e.name]=[]),this.P[a.PerformanceData.performance_marks][e.name].push(e.data),this.emitChange()},getMarks:function(){return n.mapValues(this.P[a.PerformanceData.performance_marks],(function(e){return n.map(e,(function(e){return[e.startTime,e.duration]}))}))},getDurationsFor:function(e){return n.reduce(e,n.bind((function(e,t){var i=this.P[a.PerformanceData.performance_marks][t];return i&&(e[t]=Math.round(n.reduce(i,(function(e,t){return e+t.duration}),0))),e}),this),{})}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(25),o=i(23);e.exports={initialize:function(){this.P=n.mapValues(a.PluginTypes,(function(){return{}})),this.on(r.REGISTER_PLUGIN,this.Ae)},Ae:function(e){var t=e.type,i=e.name,n=e.plugin;if(!t||!i)throw new Error("Missing information needed to register plugins: "+t+":"+i);if(!this.P[t])throw new Error("Invalid plugin type specified: "+t);this.P[t][i]=n,o.debug("Plugin Store: Registering Plugin :",e)},getAllPlugins:function(e){if(e){if(this.P[e])return this.P[e];throw new Error("Invalid plugin type: "+e)}return this.P},getPlugin:function(e,t){if(!t||!e)throw new Error("Missing plugin parameters");var i=this.getAllPlugins(e);return i[t]||null}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(19);e.exports={initialize:function(){this.P={},this.on(r.SET_VISITOR_ATTRIBUTE_PENDING,this.Re)},getPendingAttributeValue:function(e){return e=n.isArray(e)?e.concat("pending"):[e,"pending"],a.getFieldValue(this.P,e)},Re:function(e){a.setFieldValue(this.P,e.key,{pending:e.pending}),this.emitChange()}}}),(function(e,t,i){var n=i(2),r=i(7);e.exports={initialize:function(){this.P={layerId:null},this.on(r.ANNOUNCE_PENDING_REDIRECT,this.ve)},isExpectingRedirect:function(){return n.isString(this.P.layerId)},getLayerId:function(){return this.P.layerId},ve:function(e){this.isExpectingRedirect()||(this.P.layerId=e.layerId,this.emitChange())}}}),(function(e,t,i){var n=i(2),r=i(7);e.exports={initialize:function(){this.P={inRumSample:!1,id:null,src:null,RumHost:null,data:{extras:{}},apis:{},DOMObservation:{},featuresNeeded:{}},this.on(r.SET_RUM_DATA,this.we),this.on(r.RECORD_API_USAGE,this.be),this.on(r.INITIALIZE_CHANGE_METRICS,this.De),this.on(r.RECORD_ACTIVATION_TYPE_USAGE,this.Oe),this.on(r.RECORD_AUDIENCE_USAGE,this.Ce),this.on(r.RECORD_CHANGE_MACROTASK_RATE,this.Ne),this.on(r.RECORD_CHANGE_OVERHEATED,this.Le),this.on(r.RECORD_CHANGE_TYPE_USAGE,this.Pe),this.on(r.RECORD_DOM_OBSERVATION_OCCURENCE,this.Ve),this.on(r.RECORD_INTEGRATION_USAGE,this.ke),this.on(r.RECORD_LAYER_FEATURE_USAGE,this.xe),this.on(r.RECORD_LAYER_POLICY_USAGE,this.Fe),this.on(r.RECORD_VIEW_FEATURE_USAGE,this.Me),this.on(r.RECORD_VIEWS_INITIALLY_ACTIVATED_COUNT,this.Ue),this.on(r.RECORD_VISITOR_ID_LOCATOR_USAGE,this.Ge),this.on(r.RECORD_VISITOR_ID_ERROR,this.Be),this.on(r.RECORD_STICKY_BUCKETING_FEATURE,this.ze)},we:function(e){n.merge(this.P,e),this.emitChange()},be:function(e){this.P.apis[e.methodName]||(this.P.apis[e.methodName]=0),this.P.apis[e.methodName]++,this.emitChange()},De:function(){n.isUndefined(this.P.data.extras.changeMacrotaskRate)&&(this.P.data.extras.changeMacrotaskRate=0),n.isUndefined(this.P.data.extras.numOverheatedChanges)&&(this.P.data.extras.numOverheatedChanges=0)},Ne:function(e){n.isUndefined(this.P.data.extras.changeMacrotaskRate)&&(this.P.data.extras.changeMacrotaskRate=0),e.changeMacrotaskRate>this.P.data.extras.changeMacrotaskRate&&(this.P.data.extras.changeMacrotaskRate=e.changeMacrotaskRate),this.emitChange()},Le:function(){n.isUndefined(this.P.data.extras.numOverheatedChanges)&&(this.P.data.extras.numOverheatedChanges=0),this.P.data.extras.numOverheatedChanges++,this.emitChange()},Ve:function(e){this.P.DOMObservation[e.counterName]||(this.P.DOMObservation[e.counterName]=0),this.P.DOMObservation[e.counterName]++,this.emitChange()},je:function(e,t,i){n.isUndefined(this.P.featuresNeeded[e])&&(this.P.featuresNeeded[e]={});var r=this.P.featuresNeeded[e];n.each(t,(function(e){r[e]||(r[e]={}),r[e][i]||(r[e][i]=!0)}))},ke:function(e){this.je("integrations",e.integrations,e.layerId)},Pe:function(e){this.je("changeTypes",e.changeTypes,e.layerId)},Oe:function(e){this.je("activationTypes",[e.activationType],e.entityId),this.emitChange()},Me:function(e){this.je("viewFeatures",e.featuresUsed,e.entityId),this.emitChange()},xe:function(e){this.je("layerFeatures",[e.feature],e.entityId),this.emitChange()},Fe:function(e){this.je("policy",[e.policy],e.layerId),this.emitChange()},Ce:function(e){this.je("audiences",e.audienceTypes,e.layerId),this.emitChange()},Ue:function(e){this.P.data.extras.viewsInitiallyActivatedCount=e.viewsInitiallyActivatedCount,this.emitChange()},Ge:function(e){this.je("visitorIdLocatorType",[e.visitorIdLocatorType],e.entityId),this.emitChange()},Be:function(e){this.P.data.extras.errorCustomVisitorId=e.isError,this.emitChange()},ze:function(e){this.je("stickyBucketing",[e.feature],e.id)},getSampleRum:function(){return this.P.inRumSample},getRumId:function(){return this.P.id},getRumHost:function(){return this.P.RumHost},getApiData:function(){return this.P.apis},getDOMObservationData:function(){return this.P.DOMObservation},getRumData:function(){return n.cloneDeep(this.P.data)},getScriptSrc:function(){return this.P.src},getFeaturesNeededData:function(){var e=this.P.featuresNeeded,t={};return n.forOwn(e,(function(e,i){var r=n.keys(e);n.isEmpty(r)||(t[i]={}),n.forEach(r,(function(r){t[i][r]=n.keys(e[r]).length}))})),t}}}),(function(e,t,i){var n=i(7);e.exports={initialize:function(){this.P={initialized:!1,natives:{}},this.on(n.SANDBOXED_FUNCTIONS_ADDED,this.He)},He:function(e){if(!e.sandboxedFunctions)throw new Error("No sandboxedFunctions found in payload");this.P.natives=e.sandboxedFunctions,this.P.initialized=!0,this.emitChange()},getAll:function(){return this.P.natives},get:function(e){if(!e)throw new Error("Missing name parameter");return this.P.natives[e]||null},isInitialized:function(){return this.P.initialized}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(24),o=i(5),s=18e5;e.exports={initialize:function(){this.P={lastSessionTimestamp:0,sessionId:null},this.on(r.REFRESH_SESSION,this.Ke),this.on(r.LOAD_SESSION_STATE,this.Ye)},getState:function(){return n.cloneDeep(this.P)},getSessionId:function(){return this.P.sessionId},Ye:function(e){this.P.sessionId=e.sessionId,this.P.lastSessionTimestamp=e.lastSessionTimestamp,this.emitChange()},Ke:function(){var e=a.now(),t=this.P.lastSessionTimestamp;(!this.P.sessionId||e-t>s)&&(this.P.sessionId=o.generate()),this.P.lastSessionTimestamp=e,this.emitChange()}}}),(function(e,t,i){var n=i(2),r=i(7);e.exports={initialize:function(){this.qe(),this.on(r.FINALIZE_BATCH_SNAPSHOT,this.We),this.on(r.REGISTER_PREVIOUS_BATCH,this.Xe),this.on(r.REGISTER_TRACKER_VISITOR,this.Qe),this.on(r.REGISTER_TRACKER_EVENT,this.$e),this.on(r.REGISTER_TRACKER_DECISION,this.Je),this.on(r.RESET_TRACKER_EVENTS,this.Ze),this.on(r.RESET_TRACKER_STORE,this.qe),this.on(r.RESET_TRACKER_PREVIOUS_BATCHES,this.et),this.on(r.SET_TRACKER_POLLING,this.tt),this.on(r.SET_TRACKER_BATCHING,this.it),this.on(r.SET_TRACKER_SEND_EVENTS,this.nt),this.on(r.SET_TRACKER_PERSISTABLE_STATE,this.rt),this.on(r.SET_TRACKER_DIRTY,this.at),this.on(r.UPDATE_TRACKER_VISITOR_ATTRIBUTES,this.ot)},getPersistableState:function(){return this.P.isDirty?this.hasEventsToSend()||this.hasPreviousBatchesToSend()?{data:this.P.data,decisions:this.P.decisions,decisionEvents:this.P.decisionEvents,previousBatches:this.P.previousBatches}:{}:null},rt:function(e){n.isEmpty(this.P.data)||n.isEmpty(e.data)||(this.We(),this.P.previousBatches.push(this.getEventBatch())),this.P.data=e.data||{},this.P.decisions=e.decisions||[],this.P.decisionEvents=e.decisionEvents||[],n.isEmpty(this.P.previousBatches)||n.isEmpty(e.previousBatches)?this.P.previousBatches=e.previousBatches||[]:this.P.previousBatches=this.P.previousBatches.concat(e.previousBatches),this.emitChange()},at:function(e){this.P.isDirty=e,this.emitChange()},$e:function(e){var t=this.st();!n.isEmpty(t.snapshots)&&n.isEmpty(this.P.decisionEvents)||this.ct(),this.ut().events.push(e.event),this.P.decisions=e.decisions,this.at(!0)},Je:function(e){this.P.decisionEvents.push(e.decisionEvent),this.P.decisions=e.decisions,this.at(!0)},Qe:function(e){n.isEmpty(this.P.data)?this.P.data=e.data:this.We(),this.P.data.visitors.push(e.visitor),this.P.decisions=e.decisions,this.P.decisionEvents=[],this.at(!0)},Xe:function(e){this.P.previousBatches.push(e),this.at(!0)},qe:function(){this.P={polling:!1,shouldBatch:!0,data:{},decisions:[],decisionEvents:[],canSend:!1,isDirty:!1,previousBatches:[]},this.emitChange()},Ze:function(){var e=this.st();this.P.data.visitors=[e],e.snapshots=[],this.at(!0)},et:function(){this.P.previousBatches=[],this.at(!0)},tt:function(e){this.P.polling=e,this.emitChange()},it:function(e){this.P.shouldBatch=e,this.emitChange()},nt:function(e){this.P.canSend=e,this.emitChange()},getEventBatch:function(){return n.cloneDeep(this.P.data)},getPreviousBatches:function(){return n.cloneDeep(this.P.previousBatches)},dt:function(){return this.P.decisionEvents.slice()},ft:function(){this.P.decisionEvents=[]},pt:function(){return this.P.decisions.slice()},isPolling:function(){return this.P.polling},shouldBatch:function(){return this.P.shouldBatch},ut:function(){return n.last(this.st().snapshots)},st:function(){return n.last(this.P.data.visitors)},ct:function(){var e=this.dt(),t=this.st();t.snapshots.push({decisions:this.pt(),events:e}),this.ft(),this.at(!0)},We:function(){this.P.decisionEvents.length>0&&this.ct()},hasEventsToSend:function(){if(!n.isEmpty(this.P.decisionEvents))return!0;if(!n.isEmpty(this.P.data)){var e=n.some(this.P.data.visitors||[],(function(e){return e.snapshots.length>0}));if(e)return!0}return!1},hasPreviousBatchesToSend:function(){return!n.isEmpty(this.P.previousBatches)},canSend:function(){return this.P.canSend},ot:function(e){var t=this.st();t&&(t.attributes=e.attributes)}}}),(function(e,t,i){var n=i(2),r=i(7);e.exports={initialize:function(){this.P={},this.on(r.SET_UA_DATA,this.k)},k:function(e){n.isEmpty(this.P)&&(this.P=e.data)},get:function(){return n.cloneDeep(this.P)}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(23),o=!1,s={globalTags:{},viewStates:{},shouldBatch:!1};e.exports={initialize:function(){this.P=n.cloneDeep(s),this.on(r.REGISTER_VIEWS,this.ht),this.on(r.SET_VIEW_ACTIVE_STATE,this._t),this.on(r.UPDATE_PARSED_VIEW_METADATA,this.vt),this.on(r.UPDATE_USER_SUPPLIED_METADATA,this.Et),this.on(r.TRACK_VIEW_ACTIVATED_EVENT,this.mt),this.on(r.SET_GLOBAL_TAGS,this.It),this.on(r.RESET_VIEW_STATES,this.yt),this.on(r.SET_VIEW_BATCHING,this.it)},getAll:function(){var e={};for(var t in this.P.viewStates)e[t]=this.getViewState(t);return e},shouldBatch:function(){return this.P.shouldBatch},getViewState:function(e){var t=n.cloneDeep(this.P.viewStates[e]),i=this.P.globalTags;return t.metadata=n.extend({},t.parsedMetadata,i,t.userSuppliedMetadata),t},getActiveViewTags:function(){var e=this.getActiveViewStates(),t=n.map(e,(function(e){return e.metadata})),i=[{}].concat(t);return n.extend.apply(n,i)},getActivationEventId:function(e){return this.P.viewStates[e]?this.P.viewStates[e].activationEventId:null},getActiveViewStates:function(){return n.reduce(this.P.viewStates,n.bind((function(e,t,i){return this.isViewActive(i)&&e.push(this.getViewState(i)),e}),this),[])},isViewActive:function(e){var t=this.P.viewStates[e];return t||a.warn("No Page registered with id",e),!!t.isActive},getGlobalTags:function(){return n.cloneDeep(this.P.globalTags)},yt:function(){this.P.viewStates={},this.emitChange()},ht:function(e){n.each(e.views,n.bind((function(e){var t=e.id;o&&this.P.viewStates[t]||(this.P.viewStates[t]={id:t,isActive:n.isBoolean(e.isActive)?e.isActive:null,activatedTimestamp:null,activationEventId:null,parsedMetadata:{},userSuppliedMetadata:{}})}),this)),this.emitChange()},_t:function(e){var t=e.view.id;if(!this.P.viewStates[t])throw new Error("No view exists with id "+t);this.P.viewStates[t].isActive=e.isActive,e.isActive?this.P.viewStates[t].activatedTimestamp=e.timestamp:(this.P.viewStates[t].parsedMetadata={},this.P.viewStates[t].userSuppliedMetadata={}),this.emitChange()},vt:function(e){var t=e.pageId;if(!this.P.viewStates[t])throw new Error("No view exists with id "+t);n.assign(this.P.viewStates[t].parsedMetadata,e.metadata),this.emitChange()},Et:function(e){var t=e.pageId;if(!this.P.viewStates[t])throw new Error("No view exists with id "+t);n.assign(this.P.viewStates[t].userSuppliedMetadata,e.metadata),this.emitChange()},mt:function(e){var t=e.pageId;this.P.viewStates[t]&&(this.P.viewStates[t].activationEventId=e.eventData.eventId,this.emitChange())},It:function(e){n.extend(this.P.globalTags,e),this.emitChange()},it:function(e){this.P.shouldBatch=e,this.emitChange()}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(22);e.exports={initialize:function(){this.P={views:{},apiNamesToViews:{}},this.on(r.DATA_LOADED,this.k)},getAll:function(){return a.safeReference(n.values(this.P.views))},getPagesMap:function(){return a.safeReference(this.P.views)},get:function(e){return a.safeReference(this.P.views[e])},getByApiName:function(e){return a.safeReference(this.P.apiNamesToViews[e])},apiNameToId:function(e){var t=this.P.apiNamesToViews[e];if(t)return t.id},idToApiName:function(e){var t=this.P.views[e];if(t)return t.apiName},getNumberOfPages:function(){return n.keys(this.P.views).length},getAllViewsForActivationType:function(e){return n.filter(this.P.views,{activationType:e})},k:function(e){n.isEmpty(e.data.views)||(n.each(e.data.views,n.bind((function(e){a.deepFreeze(e),this.P.views[e.id]=e,this.P.apiNamesToViews[e.apiName]=e}),this)),this.emitChange())}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(19);e.exports={initialize:function(){this.P={profile:{},metadata:{},visitorId:null},this.on(r.SET_VISITOR_ID_VIA_API,this.St),this.on(r.SET_VISITOR_ATTRIBUTES,this.Tt),this.on(r.LOAD_EXISTING_VISITOR_PROFILE,this.At)},getVisitorProfile:function(){return this.P.profile},getVisitorProfileMetadata:function(){return this.P.metadata},getAttribute:function(e){var t=this.P.profile;return n.cloneDeep(a.getFieldValue(t,e))},getAttributeMetadata:function(e){return n.cloneDeep(this.P.metadata[e])},getVisitorIdFromAPI:function(){return this.P.visitorId},At:function(e){this.P.profile=e.profile,this.P.metadata=e.metadata,this.emitChange()},Tt:function(e){n.each(e.attributes,n.bind((function(e){var t=e.key;a.setFieldValue(this.P.profile,t,e.value),e.metadata&&n.forOwn(e.metadata,n.bind((function(e,i){a.setFieldValue(this.P.metadata,t.concat(i),e)}),this))}),this)),this.emitChange()},St:function(e){this.P.visitorId=e,this.emitChange()}}}),(function(e,t,i){var n=i(2),r=i(7);e.exports={initialize:function(){this.P={},this.on(r.DATA_LOADED,this.Rt)},getCustomBehavioralAttributes:function(){return n.filter(this.P,(function(e){return!!e.rule_json}))},getVisitorAttribute:function(e){var t=n.values(this.P);if(e.datasourceId&&(t=n.filter(t,{dcp_datasource_id:String(e.datasourceId)})),e.attributeName&&e.attributeId)throw new Error("Must not specify both attribute name and attribute ID");if(e.attributeId){var i=this.P[e.attributeId];if(!i)throw new Error("Unrecognized attribute ID: "+e.attributeId);return i}if(e.attributeName){var r=n.filter(t,{name:e.attributeName});if(!r.length)throw new Error("Unrecognized attribute name: "+e.attributeName);if(r.length>1)throw new Error("Too many attributes with name: "+e.attributeName);return r[0]}throw new Error("Must specify attribute name or attribute ID")},Rt:function(e){n.isEmpty(e.data.visitorAttributes)||(n.each(e.data.visitorAttributes,n.bind((function(e){this.P[e.id]=e}),this)),this.emitChange())}}}),(function(e,t,i){var n=(i(2),i(7));i(62).Event;e.exports={initialize:function(){this.P={events:[],foreignEvents:{},foreignEventQueues:{}},this.on(n.SET_VISITOR_EVENTS,this.k),this.on(n.SET_FOREIGN_VISITOR_EVENTS,this.wt),this.on(n.SET_FOREIGN_VISITOR_EVENT_QUEUE,this.bt)},getEvents:function(){return this.P.events},getForeignEvents:function(){return this.P.foreignEvents},getForeignEventQueues:function(){return this.P.foreignEventQueues},k:function(e){this.P.events=e,this.emitChange()},wt:function(e){this.P.foreignEvents[e.key]=e.value},bt:function(e){this.P.foreignEventQueues[e.key]=e.value}}}),(function(e,t,i){function n(e,t,i,n,r){this[o.FIELDS.NAME]=e,this[o.FIELDS.TYPE]=t,a.isString(i)&&i.trim().length>0&&(this[o.FIELDS.CATEGORY]=i),n&&a.keys(n).length>0&&(this[o.FIELDS.OPTIONS]=n),a.isUndefined(r)||(this[o.FIELDS.REVENUE]=r)}function r(e,t,i,n){this.eventBase=e,this[o.FIELDS.TIME]=t,a.isUndefined(i)||(this[o.FIELDS.SESSION_ID]=i),a.isUndefined(n)||(this[o.FIELDS.SESSION_INDEX]=n)}var a=i(2),o=i(63),s=i(19).getFieldValue,c=i(64);t.EventBase=n,n.prototype.digest=function(){var e=function(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(t)},t=[];if(t.push(e(o.FIELDS.NAME,this[o.FIELDS.NAME])),t.push(e(o.FIELDS.TYPE,this[o.FIELDS.TYPE])),this[o.FIELDS.CATEGORY]&&t.push(e(o.FIELDS.CATEGORY,this[o.FIELDS.CATEGORY])),this[o.FIELDS.REVENUE]&&t.push(e(o.FIELDS.REVENUE,this[o.FIELDS.REVENUE])),!this[o.FIELDS.OPTIONS])return t.join("&");var i=this[o.FIELDS.OPTIONS]||{},n=a.filter(a.keys(i),(function(e){return i.hasOwnProperty(e)}));n=n.sort();for(var r=0;r<n.length;r++)t.push(e(n[r],i[n[r]]));return t.join("&")},n.prototype.hash=function(){return this.hash_?this.hash_:(this.hash_=c.hashToHex(c.toByteString(this.digest()),c.Seed.BEHAVIOR_EVENT),this.hash_)},n.prototype.setHash=function(e){this.hash_=e},n.prototype.reHash=function(){this.hash_=null,this.hash()},n.prototype.equals=function(e){if(this.hash()!==e.hash())return!1;if(this[o.FIELDS.NAME]!==e[o.FIELDS.NAME]||this[o.FIELDS.TYPE]!==e[o.FIELDS.TYPE]||this[o.FIELDS.CATEGORY]!==e[o.FIELDS.CATEGORY]||this[o.FIELDS.REVENUE]!==e[o.FIELDS.REVENUE])return!1;if(!this[o.FIELDS.OPTIONS]&&!e[o.FIELDS.OPTIONS])return!0;var t=this[o.FIELDS.OPTIONS]||{},i=e[o.FIELDS.OPTIONS]||{},n=a.filter(a.keys(t),(function(e){return t.hasOwnProperty(e)})),r=a.filter(a.keys(i),(function(e){return i.hasOwnProperty(e)}));if(n.length!==r.length)return!1;for(var s=0;s<n.length;s++){var c=n[s];if(!i.hasOwnProperty(c)||t[c]!==i[c])return!1}return!0},n.prototype.getValueOrDefault=function(e,t){var i=s(this,e);return a.isUndefined(i)?t:i},n.prototype.setFieldValue=function(e,t){e!==o.FIELDS.NAME&&e!==o.FIELDS.TYPE&&e!==o.FIELDS.CATEGORY&&e!==o.FIELDS.REVENUE&&e!==o.FIELDS.OPTIONS||(this[e]=t,this.reHash())},t.Event=r,r.prototype.getValueOrDefault=function(e,t){if(0===e.length)return this;var i={};i[o.FIELDS.TIME]=this[o.FIELDS.TIME],i[o.FIELDS.SESSION_ID]=this[o.FIELDS.SESSION_ID],i[o.FIELDS.SESSION_INDEX]=this[o.FIELDS.SESSION_INDEX];var n=s(i,e);return a.isUndefined(n)?this.eventBase.getValueOrDefault(e,t):n},r.prototype.setFieldValue=function(e,t){e===o.FIELDS.TIME||e===o.FIELDS.SESSION_ID||e===o.FIELDS.SESSION_INDEX?this[e]=t:this.eventBase.setFieldValue(e,t)};var u={n:"name",y:"type",c:"category",r:"revenue",s:"session_id",o:"tags",si:"session_index"};r.prototype.readableEvent=function(){var e,t,i=function(e){return a.isString(e)?'"'+e+'"':e},n=this,r=[];a.each([o.FIELDS.NAME,o.FIELDS.TYPE,o.FIELDS.CATEGORY,o.FIELDS.REVENUE,o.FIELDS.SESSION_ID],(function(o){e=u[o],t=n.getValueOrDefault([o]),a.isUndefined(t)||r.push(e+": "+i(t))}));var s=[];if(e=u[o.FIELDS.OPTIONS],t=n.getValueOrDefault([o.FIELDS.OPTIONS]),a.isUndefined(t)||(a.each(t,(function(e,t){s.push(t+": "+String(i(e)))})),r.push(e+": {\n\t\t"+s.join(",\n\t\t")+"\n\t}")),t=n.getValueOrDefault([o.FIELDS.TIME]),a.isNumber(t)&&(t=i(new Date(t).toString())),!a.isUndefined(t)){var c="timestamp";r.push(c+": "+t)}return"{\n\t"+r.join(",\n\t")+"\n}"},r.prototype.toObject=function(e){var t,i,n={},r=this;a.each([o.FIELDS.NAME,o.FIELDS.TYPE,o.FIELDS.CATEGORY,o.FIELDS.REVENUE,o.FIELDS.OPTIONS,o.FIELDS.SESSION_INDEX],(function(e){t=u[e],i=r.getValueOrDefault([e],e===o.FIELDS.OPTIONS?{}:void 0),a.isUndefined(i)||(n[t]=i)}));var s=u[o.FIELDS.OPTIONS],c=u[o.FIELDS.REVENUE];if(e&&e.revenueAsTag&&n[c]&&(n[s]=n[s]||{},n[s][c]=n[c],delete n[c]),i=r.getValueOrDefault([o.FIELDS.TIME]),a.isNumber(i))if(e&&e.timeAsTimestamp){var l="timestamp";n[l]=new Date(i)}else{var d="time";n[d]=i}return n}}),(function(e,t){t.FIELDS={NAME:"n",TIME:"t",TYPE:"y",CATEGORY:"c",REVENUE:"r",SESSION_ID:"s",OPTIONS:"o",SESSION_INDEX:"si"},t.FIELDS_V0_2={name:t.FIELDS.NAME,time:t.FIELDS.TIME,type:t.FIELDS.TYPE,category:t.FIELDS.CATEGORY,tags:t.FIELDS.OPTIONS,session_index:t.FIELDS.SESSION_INDEX}}),(function(e,t,i){var n=i(65).v3,r={IGNORING:0,BUCKETING:1,FALLBACK:2,HOLDBACK:3,BEHAVIOR_EVENT:2716770798},a=Math.pow(2,32),o=function(e,t,i){return Math.floor(c(e,t)*i)},s=function(e,t){var i=n(e,t);return(i>>>16).toString(16)+(65535&i).toString(16)},c=function(e,t){var i=n(e,t);return(i>>>0)/a},u=function(e){var t=String.fromCharCode;return e.replace(/[\S\s]/gi,(function(e){e=e.charCodeAt(0);var i=t(255&e);return e>255&&(i=t(e>>>8&255)+i),e>65535&&(i=t(e>>>16)+i),i}))};e.exports={Seed:r,hashToHex:s,hashToInt:o,hashToReal:c,toByteString:u}}),(function(e,t,i){!(function(){function t(e,t){for(var i,n=e.length,r=t^n,a=0;n>=4;)i=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>24,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^i,n-=4,++a;switch(n){case 3:r^=(255&e.charCodeAt(a+2))<<16;case 2:r^=(255&e.charCodeAt(a+1))<<8;case 1:r^=255&e.charCodeAt(a),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)}return r^=r>>>13,r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16),r^=r>>>15,r>>>0}function i(e,t){var i,n,r,a,o,s,c,u;for(i=3&e.length,n=e.length-i,r=t,o=3432918353,s=461845907,u=0;u<n;)c=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,c=(65535&c)*o+(((c>>>16)*o&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295,r^=c,r=r<<13|r>>>19,a=5*(65535&r)+((5*(r>>>16)&65535)<<16)&4294967295,r=(65535&a)+27492+(((a>>>16)+58964&65535)<<16);switch(c=0,i){case 3:c^=(255&e.charCodeAt(u+2))<<16;case 2:c^=(255&e.charCodeAt(u+1))<<8;case 1:c^=255&e.charCodeAt(u),c=(65535&c)*o+(((c>>>16)*o&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295,r^=c}return r^=e.length,r^=r>>>16,r=2246822507*(65535&r)+((2246822507*(r>>>16)&65535)<<16)&4294967295,r^=r>>>13,r=3266489909*(65535&r)+((3266489909*(r>>>16)&65535)<<16)&4294967295,r^=r>>>16,r>>>0}var n=i;n.v2=t,n.v3=i;e.exports=n})()}),(function(e,t,i){var n=i(7);e.exports={initialize:function(){this.P={baseMap:{},eventQueue:[],lastEvent:null,initialized:!1,cleared:!1},this.on(n.UPDATE_BEHAVIOR_STORE,this.Dt)},getBaseMap:function(){return this.P.baseMap},getEventQueue:function(){return this.P.eventQueue},getLastEvent:function(){return this.P.lastEvent},getCleared:function(){return this.P.cleared},getInitialized:function(){return this.P.initialized},Dt:function(e){this.P[e.key]=e.value}}}),(function(e,t,i){var n=i(2),r=i(7);e.exports={initialize:function(){this.P={randomId:null,visitorIdLocator:null},this.on(r.SET_VISITOR_ID,this.k),this.on(r.DATA_LOADED,this.Ot)},getBucketingId:function(){return this.getRandomId()},getRandomId:function(){return this.P.randomId},getVisitorIdLocator:function(){return this.P.visitorIdLocator},k:function(e){n.extend(this.P,e),this.emitChange()},Ot:function(e){n.isEmpty(e.data.visitorIdLocator)||(this.P.visitorIdLocator=e.data.visitorIdLocator,this.emitChange())}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(26);e.exports={initialize:function(){this.P={variationIdMap:{},preferredLayerMap:{}},this.on(r.UPDATE_VARIATION_ID_MAP,this.Ct),this.on(r.MERGE_VARIATION_ID_MAP,this.Nt),this.on(r.UPDATE_PREFERRED_LAYER_MAP,this.Lt),this.on(r.MERGE_PREFERRED_LAYER_MAP,this.Pt)},getVariationIdMap:function(){return n.cloneDeep(this.P.variationIdMap)},getVariationIdMapString:function(){return a.stringify(this.P.variationIdMap)},Ct:function(e){var t=this.P.variationIdMap,i=t[e.layerId]||{};i[e.experimentId]!==e.variationId&&(i[e.experimentId]=e.variationId,this.P.variationIdMap[e.layerId]=i,this.emitChange())},Nt:function(e){var t=this.getVariationIdMap(),i=e.variationIdMap;n.each(t||{},(function(e,t){i[t]?n.assign(i[t],e):i[t]=e})),this.P.variationIdMap=i,this.emitChange()},getPreferredLayerMap:function(){return n.cloneDeep(this.P.preferredLayerMap)},getPreferredLayerMapString:function(){return a.stringify(this.P.preferredLayerMap)},getPreferredLayerId:function(e){return this.P.preferredLayerMap[e]},Lt:function(e){this.P.preferredLayerMap[e.groupId]!==e.layerId&&(this.P.preferredLayerMap[e.groupId]=e.layerId,this.emitChange())},Pt:function(e){var t=this.getPreferredLayerMap(),i=e.preferredLayerMap;n.assign(i,t),this.P.preferredLayerMap=i,this.emitChange()}}}),(function(e,t,i){var n=i(2),r=i(23),a=i(7),o=1e3;e.exports={initialize:function(){this.P={frames:[],defaultFrame:null,messages:[],subscribers:[],canonicalOrigins:null,disabled:!1},this.on(a.XDOMAIN_SET_DEFAULT_FRAME,this.Vt),this.on(a.XDOMAIN_ADD_FRAME,this.kt),this.on(a.XDOMAIN_SET_MESSAGE,this.xt),this.on(a.XDOMAIN_ADD_SUBSCRIBER,this.Ft),this.on(a.XDOMAIN_SET_CANONICAL_ORIGINS,this.Mt),this.on(a.XDOMAIN_SET_DISABLED,this.Ut)},getMessages:function(){return n.cloneDeep(this.P.messages)},getOffset:function(){return 0===this.P.messages.length?0:this.P.messages[0].data.id},getNextMessageId:function(){return this.P.messages.length+this.getOffset()},getMessageById:function(e){return this.P.messages[e-this.getOffset()]},getSubscribers:function(){return this.P.subscribers},getFrames:function(){return this.P.frames},getNextFrameId:function(){return this.P.frames.length},getDefaultFrame:function(){return this.P.defaultFrame},getCanonicalOrigins:function(){return n.cloneDeep(this.P.canonicalOrigins)},isDisabled:function(){return this.P.disabled},Vt:function(e){this.P.defaultFrame=e},kt:function(e){this.P.frames.push(e)},xt:function(e){for(this.P.messages[e.messageId-this.getOffset()]=e.message;this.P.messages.length>o;){var t=this.P.messages.shift();r.debug("XDomainStorage: Cleared old message: "+t.data.id)}},Ft:function(e){this.P.subscribers.push(e.subscriber)},Mt:function(e){this.P.canonicalOrigins=e.canonicalOrigins},Ut:function(e){this.P.disabled=e.disabled}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(22);e.exports={initialize:function(){this.P={},this.on(r.DATA_LOADED,this.k)},k:function(e){n.isEmpty(e.data.groups)||(n.each(e.data.groups,n.bind((function(e){a.deepFreeze(e),this.P[e.id]=e}),this)),this.emitChange())},getAll:function(){return a.safeReference(n.values(this.P))},getGroupsMap:function(){return a.safeReference(this.P)},get:function(e){return a.safeReference(this.P[e])}}}),(function(e,t,i){var n=i(72);t.initializeStore=n.initialize,t.addEvent=n.addEvent,t.getEvents=n.getEvents,t.getEventCount=n.getEventCount}),(function(e,t,i){function n(e){I.dispatch(v.SET_VISITOR_EVENTS,e)}function r(e){I.dispatch(v.UPDATE_BEHAVIOR_STORE,{key:"baseMap",value:e})}function a(e){I.dispatch(v.UPDATE_BEHAVIOR_STORE,{key:"eventQueue",value:e})}function o(e){I.dispatch(v.UPDATE_BEHAVIOR_STORE,{key:"lastEvent",value:e})}function s(e){I.dispatch(v.UPDATE_BEHAVIOR_STORE,{key:"cleared",value:e})}function c(){I.dispatch(v.UPDATE_BEHAVIOR_STORE,{key:"initialized",value:!0})}function u(){return O.getEvents()}function l(){return C.getBaseMap()}function d(){return C.getEventQueue()}function f(){return C.getLastEvent()}function p(){return C.getCleared()}function g(){return C.getInitialized()}function h(){var e=u().concat(d()),t=!1;return e.length>L&&(e=e.slice(-L),t=!0),n(e),a([]),t}var _=i(2),v=i(7),E=i(24),m=i(73),I=i(9),y=i(23),S=i(74),T=t,A=i(62).Event,R=i(63),w=i(62).EventBase,b=i(89),D=i(16),O=D.get("stores/visitor_events"),C=D.get("stores/visitor_events_manager"),N={EVENTBASE:"eb",HASH:"h",TIMEBASE:"tb",TIMESTAMPS:"ts",
DELTA:"d",INDEX:"i"},L=1e3;t.initialize=function(e,t){if(!g()){T.Gt(e,t);var i=u();i.length>0&&o(i[i.length-1]);var n=d();n.length>0&&o(n[n.length-1]),c()}},t.addEvent=function(e){y.debug("Behavior store: adding event",e);var t=T.Bt(e);o(t),a(d().concat(t)),b.reindexIfNecessary(f(),u(),d()),T.zt(d())},t.getEvents=function(){return d().length>0&&(h()&&b.sessionize(u()),T.jt(u()),T.zt(d())),u()},t.getEventCount=function(){return d().length+u().length},T.Gt=function(e,t){T.Ht(e,t)&&(T.jt(u()),T.zt(d())),b.sessionize(u())},T.Ht=function(e,t){if(0===e.length&&0===t.length)return n([]),a([]),!1;var i=!1,r=e[0]||t[0];return N.EVENTBASE in r?(n(T.Kt(e)),a(T.Kt(t))):(i=!0,n(T.Yt(e)),a(T.Yt(t))),d().length>0&&(h(),i=!0),n(T._updateBaseMapAndMaybeDedupe(u())),T._migrateEventBasesAndUpdateStore()&&(i=!0),i},T.Yt=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i],r=T.qt(n);t[i]=new A(r,n[R.FIELDS.TIME])}return t},T._migrateEventBasesAndUpdateStore=function(){var e=!1,t=T.Wt();return b.applyMigrations(t)&&(e=!0,r({}),n(T._updateBaseMapAndMaybeDedupe(u())),a(T._updateBaseMapAndMaybeDedupe(d()))),e},T.Xt=function(){return E.now()},T.Bt=function(e){var t,i=e.name,n=e.type||"default",r=e.category||m.OTHER,a=e.tags||{};e.revenue&&(t=e.revenue);var o=new w(i,n,r,a,t);o=T.Qt(o);var s=T.Xt(),c=new A(o,s,-1);return b.updateSessionId(f(),c),b.updateSessionIndex(f(),c),c},T._updateBaseMapAndMaybeDedupe=function(e){for(var t=0;t<e.length;t++)e[t].eventBase=T.Qt(e[t].eventBase);return e},T.jt=function(e){var t=T.$t(e);S.persistBehaviorEvents(t)},T.zt=function(e){var t=T.$t(e);S.persistBehaviorEventQueue(t)},T.Jt=function(){p()||(n([]),a([]),T.jt(u()),T.zt(d()),r({}),o(null),s(!0))},T.Qt=function(e){var t=e.hash(),i=l(),n=i[t];if(_.isUndefined(n))return i[t]=[e],r(i),e;for(var a=0;a<n.length;a++)if(e.equals(n[a]))return n[a];return n.push(e),r(i),e},T.Wt=function(){var e=[],t=l();for(var i in t)t.hasOwnProperty(i)&&(e=e.concat(t[i]));return e},T.$t=function(e){for(var t=function(e){var t={};t[R.FIELDS.NAME]=e.getValueOrDefault([R.FIELDS.NAME]),t[R.FIELDS.TYPE]=e.getValueOrDefault([R.FIELDS.TYPE]);var i=e.getValueOrDefault([R.FIELDS.CATEGORY]);_.isUndefined(i)||(t[R.FIELDS.CATEGORY]=i);var n=e.getValueOrDefault([R.FIELDS.REVENUE]);_.isUndefined(n)||(t[R.FIELDS.REVENUE]=n);var r=e.getValueOrDefault([R.FIELDS.OPTIONS]);return _.isUndefined(r)||(t[R.FIELDS.OPTIONS]=r),t},i=N,n=[],r="_idx_",a=0;a<e.length;a++){var o,s,c=e[a],u=c.eventBase;if(u.hasOwnProperty(r)){o=n[u[r]];var l=c[R.FIELDS.TIME]-(o[i.TIMEBASE]||0);s={},s[i.DELTA]=l,s[i.INDEX]=a,o[i.TIMESTAMPS].push(s)}else o={},o[i.EVENTBASE]=t(c),o[i.HASH]=u.hash(),o[i.TIMEBASE]=c[R.FIELDS.TIME],s={},s[i.DELTA]=0,s[i.INDEX]=a,o[i.TIMESTAMPS]=[s],n.push(o),u[r]=n.length-1}for(a=0;a<e.length;a++)delete e[a].eventBase[r];return n},T.qt=function(e,t){var i=new w(e[R.FIELDS.NAME],e[R.FIELDS.TYPE],e[R.FIELDS.CATEGORY],e[R.FIELDS.OPTIONS],e[R.FIELDS.REVENUE]);return _.isUndefined(t)||i.setHash(t),i},T.Kt=function(e){for(var t=N,i=[],n=0;n<e.length;n++)for(var r=e[n],a=T.qt(r[t.EVENTBASE],r[t.HASH]),o=r[t.TIMEBASE],s=r[t.TIMESTAMPS],c=0;c<s.length;c++){var u=s[c],l=new A(a,o+u[t.DELTA]),d=u[t.INDEX];i[d]=l}return i},t.deserialize=function(e){return T.Kt(e)},t.mergeAllEvents=function(e){var t=[].concat.apply([],e);return t.sort(b.sessionSortPredicate),b.sessionize(t),t}}),(function(e,t){e.exports={OTHER:"other"}}),(function(e,t,i){function n(){return u(z.LAYER_MAP)||{}}function r(e,t){D.dispatch(O.UPDATE_PREFERRED_LAYER_MAP,{groupId:e,layerId:t})}function a(){var e=$.getPreferredLayerMapString();p(z.LAYER_MAP,e,!0)}function o(e){D.dispatch(O.SET_TRACKER_PERSISTABLE_STATE,e)}function s(e,t){function i(e,i){var n;t.attributionType&&(n=P.now()),D.dispatch(O.SET_VISITOR_ATTRIBUTES,{attributes:[{key:e,value:i,metadata:{lastModified:n}}]})}if(t.getter){var n=t.provides;if(b.isArray(n)||(n=[n]),!ee||!b.includes(["queryParams","url"],n[0])){var r=t.isSticky&&!b.isUndefined(F.getFieldValue(e,n));if(!r){var a;try{var o=V.evaluate(t.getter);b.isFunction(o)&&(o=o((function(){return F.getFieldValue(e,n)}),(function(e){i(n,e)}))),b.isUndefined(o)||(t.isAsync?(a=o.then((function(e){i(n,e)}),(function(e){U.warn('Failed to evaluate provider for "'+t.provides+'"; error was:',e)})),D.dispatch(O.SET_VISITOR_ATTRIBUTE_PENDING,{key:n,pending:a})):i(n,o))}catch(e){U.warn('Failed to evaluate getter for provider for "'+t.provides+'"; error was: '+e.message)}return a}}}}function c(){m(u(z.EVENTS)||[],u(z.EVENT_QUEUE)||[]);var e=f(z.LAYER_STATES);b.forEach(e,(function(e){e.item=b.map(e.item,d)})),I(l(e)),y(u(z.SESSION_STATE)||{}),A(u(z.VISITOR_PROFILE)||{});var i=u(z.TRACKER_OPTIMIZELY);i&&o(i),t.loadForeignData(),t.removeLegacySessionStateCookies()}function u(e){var t=g(e),i=M.getItem(t);return b.isString(i)&&(i=R(i)),i}function l(e){var t=[];return b.each(e,(function(e){b.each(e.item,(function(i){i.namespace=e.namespace,t.push(i)}))})),t}function d(e){var t;return t=e.layerId?e:{layerId:e.i,pageId:e.p,decisionTimestamp:e.t,decisionTicket:{audienceIds:e.a||[]},decision:{layerId:e.i,experimentId:e.x||null,variationId:e.v||null,isLayerHoldback:e.h||!1}}}function f(e){var t=Q.getBucketingId(),i=[],n=t+"\\$\\$([^$]+?)\\$\\$"+e,r=new RegExp(n);return b.each(M.keys(),(function(e){var n=e.match(r);if(n){var a={namespace:n[1],userId:t,item:R(M.getItem(e))};i.push(a)}})),i}function p(e,t,i){try{var n=g(e);i||(t=x.stringify(t));try{M.setItem(n,t)}catch(e){throw U.warn("Visitor / Unable to set localStorage key, error was:",e),new Error("Unable to set localStorage")}w.setItem(n,t)}catch(e){U.warn("Unable to persist visitor data:",e.message)}}function g(e){var i=Q.getBucketingId();if(!i)throw new Error("Visitor bucketingId not set");var n=t.getNamespace();if(!n)throw new Error("Namespace is not set");return[i,n,e].join("$$")}function h(e,i){if(!Q.getBucketingId())throw new Error("Cannot update local store because bucketingId not set");if(v(e)){var n=t.getStorageKeyFromKey(e);if(b.includes(z,n)){var r=g(n);if(!(e.indexOf(r)<=0)&&(i=R(i)))if(n===z.EVENT_QUEUE)D.dispatch(O.SET_FOREIGN_VISITOR_EVENT_QUEUE,{key:e,value:N.deserialize(i)});else if(n===z.EVENTS)D.dispatch(O.SET_FOREIGN_VISITOR_EVENTS,{key:e,value:N.deserialize(i)});else if(n===z.LAYER_STATES)D.dispatch(O.LOAD_PERSISTED_LAYER_STATES,{layerStates:b.map(i,d),merge:!0});else if(n===z.VARIATION_MAP)D.dispatch(O.MERGE_VARIATION_ID_MAP,{variationIdMap:i});else if(n===z.VISITOR_PROFILE){var a=["custom"],o=i;b.each(a,(function(e){var t=q.getPlugin(k.PluginTypes.visitorProfileProviders,e);if(t){if(o.profile&&o.metadata){var i=_(o,e,t.attributionType);if(!b.isEmpty(i)){var n=[];b.forOwn(i.data,(function(t,r){var a=i.metadata[r],o={key:[e,r],value:t,metadata:a};n.push(o)})),D.dispatch(O.SET_VISITOR_ATTRIBUTES,{attributes:n})}}}else U.debug("Attribute type",e,"not used by any audiences")}))}}}}function _(e,t,i){var n=J.getAttribute(t),r=J.getAttributeMetadata(t),a=e.profile[t],o=e.metadata[t];if(b.isEmpty(n))return{data:a,metadata:o};var s={};return b.forOwn(a,(function(e,t){var n;r&&r[t]&&(n=r[t].lastModified);var a;o&&o[t]&&(a=o[t].lastModified),(i===k.AttributionTypes.FIRST_TOUCH&&n>=a||i===k.AttributionTypes.LAST_TOUCH&&a>=n||b.isUndefined(n)&&a)&&(s.data=s.data||{},s.data[t]=e,a&&(s.metadata=s.metadata||{},s.metadata[t]=s.metadata[t]||{},s.metadata[t].lastModified=a))})),s}function v(e){var t=e.split("$$")[0];return t.indexOf("://")>0}function E(){var e=J.getVisitorProfile(),t=J.getVisitorProfileMetadata(),i=q.getAllPlugins(k.PluginTypes.visitorProfileProviders);if(i){var n=b.reduce(i,(function(e,t){return t.provides&&(e[t.provides]=t),e}),{});e=b.omitBy(e,(function(e,t){var i=n[t];return i&&i.isTransient}))}return{profile:e,metadata:t}}function m(e,t){C.initializeStore(e,t)}function I(e){D.dispatch(O.LOAD_PERSISTED_LAYER_STATES,{layerStates:b.filter(e,(function(e){return!!e.decision}))})}function y(e){e=b.extend({lastSessionTimestamp:0,sessionId:null},e),D.dispatch(O.LOAD_SESSION_STATE,e)}function S(e){var t,i=e.name;switch(e.type){case k.VisitorIdLocatorType.COOKIE:t=L.get(i);break;case k.VisitorIdLocatorType.JS_VARIABLE:t=j.getGlobalByPath(i);break;case k.VisitorIdLocatorType.LOCALSTORAGE:try{var n=j.getGlobal("localStorage");t=n.getItem(i)}catch(e){throw new Error("Unable to read localStorage: "+e.toString())}break;case k.VisitorIdLocatorType.QUERY:t=B.getQueryParamValue(i)}try{if(!t)throw U.error("Visitor / Customer provided visitor id cannot be found. Type:",e.type," Name:",i),new Error("Failure to obtain visitor id from "+e.type);if(!b.isString(t)&&!b.isNumber(t))throw U.error("Visitor / Customer provided visitor id is not a string or number. Type:",e.type," Name:",i," Id Type:",typeof t),new Error("Customer provided visitor id is not a string or number")}catch(e){throw W.getSampleRum()&&D.dispatch(O.RECORD_VISITOR_ID_ERROR,{isError:!0}),e}return W.getSampleRum()&&(D.dispatch(O.RECORD_VISITOR_ID_ERROR,{isError:!1}),D.dispatch(O.RECORD_VISITOR_ID_LOCATOR_USAGE,{visitorIdLocatorType:e.type,entityId:t})),String(t)}function T(){return"oeu"+P.now()+"r"+Math.random()}function A(e){var t,i,n=q.getAllPlugins(k.PluginTypes.visitorProfileProviders),r=b.filter(n,(function(e){return b.isFunction(e.restorer)}));e.profile&&e.metadata?(t=e.profile,i=e.metadata):(t=e,i={}),t=b.reduce(t,(function(e,t,i){var n=t,a=b.find(r,{provides:i});return a&&(n=a.restorer(t)),e[i]=n,e}),{}),D.dispatch(O.LOAD_EXISTING_VISITOR_PROFILE,{profile:t,metadata:i})}function R(e){try{return x.parse(e)}catch(t){return U.debug("Failed to parse: ",e,t),null}}var w,b=i(2),D=i(9),O=i(7),C=i(71),N=i(72),L=i(75),P=i(24),V=i(16),k=i(25),x=i(26),F=i(19),M=i(81).LocalStorage,U=i(23),G=i(12).Promise,B=i(84),z=i(25).VisitorStorageKeys,j=i(40);w=i(85);var H=V.get("stores/cookie_options"),K=V.get("stores/global"),Y=V.get("stores/layer"),q=V.get("stores/plugins"),W=V.get("stores/rum"),X=V.get("stores/session"),Q=V.get("stores/visitor_id"),$=V.get("stores/visitor_bucketing"),J=V.get("stores/visitor"),Z=V.get("stores/provider_status"),ee=!1;t.getOrGenerateId=function(){return{randomId:t.getCurrentId()||T()}},t.getCurrentId=function(){var e=Q.getVisitorIdLocator();return e?S(e):J.getVisitorIdFromAPI()||L.get(k.COOKIES.VISITOR_ID)},t.hasSomeData=function(){return M.keys().length>0},t.setId=function(e){var i=Q.getBucketingId();D.dispatch(O.SET_VISITOR_ID,e),Q.getBucketingId()!==i&&(c(),t.deleteOldLocalData(),w.deleteData(e));try{Q.getVisitorIdLocator()||t.maybePersistVisitorId(e)}catch(e){if(U.error("Visitor / Unable to persist visitorId, disabling tracking"),D.dispatch(O.LOAD_DIRECTIVE,{trackingDisabled:!0}),e instanceof L.MismatchError)throw U.error("Visitor / Cookie not set to correct value:",e),new Error("Cookie mismatch error while persisting visitorId");throw e}t.refreshSession()},t.getVariationIdMap=function(){return u(z.VARIATION_MAP)||{}},t.updateVariationIdMap=function(e,t,i){D.dispatch(O.UPDATE_VARIATION_ID_MAP,{layerId:e,experimentId:t,variationId:i})},t.persistVariationIdMap=function(){var e=$.getVariationIdMapString();p(z.VARIATION_MAP,e,!0)},t.getPreferredLayerMap=n,t.updatePreferredLayerMap=r,t.persistTrackerOptimizelyData=function(e){p(z.TRACKER_OPTIMIZELY,e)},t.refreshSession=function(){D.dispatch(O.REFRESH_SESSION)},t.populateEagerVisitorData=function(e,i){var n=b.filter(e,(function(e){return!e.isLazy})),r=t.populateVisitorData(n,i);return r},t.populateLazyVisitorData=function(e,i){var n=b.filter(e,(function(e){return e.isLazy}));return t.populateVisitorData(n,i)},t.populateVisitorData=function(e,t){t=t||{};var i=b.partial(s,t),n=b(e).filter({isAsync:!0}).map(i).filter().value();return b.forEach(b.filter(e,(function(e){return!e.isAsync})),i),n.length>0?G.all(n):G.resolve()},t.persistBehaviorEvents=function(e){p(z.EVENTS,e)},t.persistBehaviorEventQueue=function(e){p(z.EVENT_QUEUE,e)},t.getPersistedBehaviorEventCount=function(){var e=u(z.EVENTS)||[],t=u(z.EVENT_QUEUE)||[];return N.deserialize(e).length+N.deserialize(t).length},t.persistLayerStates=function(){var e=Y.getLayerStates(t.getNamespace());e=b.map(e,(function(e){return b.omit(e,"namespace")})),p(z.LAYER_STATES,e)},t.persistSessionState=function(){p(z.SESSION_STATE,X.getState())},t.persistVisitorProfile=function(){p(z.VISITOR_PROFILE,E())},t.persistVisitorBucketingStore=function(){t.persistVariationIdMap(),a()},t.getUserIdFromKey=function(e,i){var n;return b.includes(e,i)&&b.includes(e,"_")&&b.includes(e,"$$")&&b.includes(e.slice(e.indexOf("$$")),t.getNamespace())&&(n=e.slice(e.indexOf("_")+1,e.indexOf("$$"))),n},t.maybePersistVisitorId=function(e){e.randomId&&(H.getAutoRefresh()||t.getCurrentId()!==e.randomId?(L.set(k.COOKIES.VISITOR_ID,e.randomId),U.log("Persisting visitorId:",e.randomId)):U.log("Not persisting visitorId: value is not changed and also auto-refresh is disabled"))},t.getAttribute=function(e){return J.getAttribute(e)},t.getPendingAttributeValue=function(e){return Z.getPendingAttributeValue(e)},t.isForeignKey=v,t.checkKeyForVisitorId=function(e){var i=Q.getBucketingId()||t.getCurrentId(),n=t.getIdFromKey(e);return!n||n===i},t.getIdFromKey=function(e){var i=e.split("$$")[0],n=t.getStorageKeyFromKey(e),r=b.includes(k.StorageKeys,n);if(r)return null;var a=i.indexOf("_"),o=a===-1;return o?i:i.substring(a+1)},t.getStorageKeyFromKey=function(e){var t,i=e.split("$$").pop(),n=i.indexOf("://")>-1;if(n){var r=i.indexOf("_");t=i.substring(r+1)}else t=i;return b.includes(b.values(k.AllStorageKeys),t)?t:null},t.deleteOldLocalData=function(){var e=M.keys();b.each(e,(function(e){t.isForeignKey(e)||t.checkKeyForVisitorId(e)||M.removeItem(e)}))},t.deleteOldForeignData=function(){var e=M.keys();b.each(e,(function(e){t.isForeignKey(e)&&M.removeItem(e)}))},t.loadForeignData=function(){b.each(M.keys(),(function(e){var t=M.getItem(e);t&&h(e,t)}))},t.getNamespace=function(){return K.getNamespace()},t.serializeFieldKey=function(e){return b.isArray(e)?e.join("$$"):e},t.removeLegacySessionStateCookies=function(){var e=L.getAll();b.forEach(b.keys(e),(function(e){0===e.indexOf(k.COOKIES.SESSION_STATE+"$$")&&L.remove(e)}))}}),(function(e,t,i){function n(e,i){i!==!1&&(i=!0);for(var n,a,o=e.hostname.split("."),s=[],c=null,l=o.length-1;l>=0;l--)if(s.unshift(o[l]),n=s.join("."),!r.includes(h,n)){a={domain:i?"."+n:n};try{t.set(_,Math.random().toString(),a),t.remove(_,a),c=a.domain;break}catch(e){}}return d.dispatch(u.SET_COOKIE_DOMAIN,c),c}var r=i(2),a=i(76).create,o=i(24),s=i(80),c=i(40),u=i(7),l=i(16),d=i(9),f=l.get("stores/cookie_options"),p=t.SetError=a("CookieSetError"),g=t.MismatchError=a("CookieMismatchError");t.getAll=function(e){r.isUndefined(e)&&(e=!0);var i,n,a,o,c;i=s.getCookieString().split(/\s*;\s*/);var u={};for(a=0;a<i.length;a++)if(n=i[a],o=n.indexOf("="),o>0&&(c=t.safeDecodeURIComponent(n.substring(0,o)),void 0===u[c])){var l=n.substring(o+1);e&&(l=t.safeDecodeURIComponent(l)),u[c]=l}return u},t.safeDecodeURIComponent=function(e){try{return decodeURIComponent(e)}catch(t){return e}},t.get=function(e,i){var n=t.getAll(i);return n[e]},t.set=function(e,i,a,u){a=r.extend({encodeValue:!0},a),u!==!1&&(u=!0);var l=[];if(r.isUndefined(a.domain)){var d=f.getCurrentDomain();d||(d=n(c.getLocation(),!0)),a.domain=d}if(a.domain&&l.push("domain="+a.domain),r.isUndefined(a.path)&&(a.path="/"),a.path&&l.push("path="+a.path),r.isUndefined(a.expires)){var h=r.isUndefined(a.maxAge)?f.getDefaultAgeInSeconds():a.maxAge;a.expires=new Date(o.now()+1e3*h)}if(r.isUndefined(a.expires)||l.push("expires="+a.expires.toUTCString()),a.secure&&l.push("secure"),l=l.join(";"),s.setCookie(e+"="+(a.encodeValue?encodeURIComponent(i):i)+";"+l),u){var _=a.encodeValue,v=t.get(e,_);if(v!==i){if(!v)throw new p('Failed to set cookie "'+e+'"');throw new g('Expected "'+i+'" for "'+e+'", got "'+v+'"')}}},t.remove=function(e,i){for(var n=c.getLocation().hostname.split(".");n.length>0;)t.set(e,null,r.extend({},i,{domain:"."+n.join("."),expires:new Date(0)}),!1),n.shift()};var h=["optimizely.test"],_="optimizelyDomainTestCookie"}),(function(e,t,i){var n=i(77),r=n("InternalError");t.BaseError=r,t.create=function(e){return n(e,r)}}),(function(e,t,i){function n(e,t){function i(t){if(!(this instanceof i))return new i(t);try{throw new Error(t)}catch(t){t.name=e,this.stack=t.stack}r&&this.stack&&(this.stack=a(this.stack,e,t)),this.message=t||"",this.name=e}return i.prototype=new(t||Error),i.prototype.constructor=i,i.prototype.inspect=function(){return this.message?"["+e+": "+this.message+"]":"["+e+"]"},i.prototype.name=e,i}var r=i(78)(),a=i(79);e.exports=n}),(function(e,t){"use strict";e.exports=function(){var e=new Error("yep");return!!e.stack&&"Error: yep\n"===e.stack.substr(0,11)}}),(function(e,t){"use strict";e.exports=function(e,t,i){var n=t;return i&&(n+=": "+i),e=n+e.slice(e.indexOf("\n"))}}),(function(e,t,i){function n(){return"loading"===t.getReadyState()}var r=i(16),a=r.get("stores/global");t.getDocumentElement=function(){return document.documentElement},t.getCookieString=function(){return document.cookie||""},t.setCookie=function(e){document.cookie=e},t.querySelector=function(e){return document.querySelector(e)},t.querySelectorAll=function(e){return document.querySelectorAll(e)},t.parseUri=function(e){var i=t.createElement("a");return i.href=e,i},t.childrenOf=function(e){return Array.prototype.slice.call(e.querySelectorAll("*"))},t.createElement=function(e){return document.createElement(e)},t.isReady=function(){return a.domContentLoadedHasFired()||"interactive"===document.readyState||"complete"===document.readyState},t.isLoaded=function(){return"complete"===document.readyState},t.addReadyHandler=function(e){return document.addEventListener("DOMContentLoaded",e),function(){t.removeReadyHandler(e)}},t.removeReadyHandler=function(e){return function(){document.removeEventListener("DOMContentLoaded",e)}},t.getReferrer=function(){return document.referrer},t.getReadyState=function(){return document.readyState},t.write=function(e){if(!n())throw new Error("Aborting attempt to write to already-loaded document");document.write(e)},t.appendToHead=function(e){return t.appendTo(document.head,e)},t.appendTo=function(e,t){e.appendChild(t)},t.addEventListener=function(e,t,i){return document.addEventListener(e,t,i),function(){document.removeEventListener(e,t,i)}},t.getCurrentScript=function(){if(document.currentScript)return document.currentScript},t.parentElement=function(e){for(var t=e.parentNode;t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;return t}}),(function(e,t,i){var n,r,a="optimizely_data",o=i(76).create,s=i(82),c=i(40),u=t.Error=o("StorageError");try{r=c.getGlobal("localStorage")}catch(e){throw new u("Unable to read localStorage: "+e.toString())}if(!r)throw new u("localStorage is undefined");n=s.create(r,a),t.LocalStorage=n,t.isOptimizelyKey=function(e){return e.slice(0,a.length)===a}}),(function(e,t,i){function n(e,t){this.Zt=e,this.ei=t}var r=i(2),a=i(23),o="$$";n.prototype.ti=function(e){return[this.ei,e].join(o)},n.prototype.ii=function(e){return e.replace(this.ei+o,"")},n.prototype.setItem=function(e,t){try{this.Zt.setItem(this.ti(e),t)}catch(t){a.warn("Failed to save",e,"to localStorage:",t)}},n.prototype.removeItem=function(e){this.Zt.removeItem(this.ti(e))},n.prototype.getItem=function(e){var t=null;try{t=this.Zt.getItem(this.ti(e))}catch(e){}return t},n.prototype.keys=function(){var e=r.keys(this.Zt);return r.map(r.filter(e,r.bind((function(e){return r.includes(e,this.ei)}),this)),r.bind(this.ii,this))},n.prototype.allKeys=function(){return r.keys(this.Zt)},n.prototype.allValues=function(){return r.values(this.Zt)},e.exports={create:function(e,t){return new n(e,t)},mockStorage:{keys:function(){},getItem:function(e){},removeItem:function(e){},setItem:function(e,t){}}}}),(function(e,t,i){function n(){return c.getGlobal("performance")}var r=i(7),a=i(76).create,o=i(24),s=i(9),c=i(40),u=i(16),l=u.get("stores/rum"),d="optimizely:",f=t.Error=a("PerformanceError");t.time=function(e){if(l.getSampleRum()){var t=n();if(t&&t.mark){var i=d+e;t.clearMarks(i+"Begin"),t.mark(i+"Begin")}}},t.timeEnd=function(e){if(l.getSampleRum()){var t=n();if(t&&t.mark){var i=d+e,a=t.getEntriesByName(i+"Begin");if(0===a.length)throw new f("Called timeEnd without matching time: "+e);t.clearMarks(i+"End"),t.mark(i+"End");var o=t.getEntriesByName(i+"End"),c=e+"Time",u=o[0].startTime-a[0].startTime;s.dispatch(r.SET_PERFORMANCE_MARKS_DATA,{name:c,data:{startTime:Math.round(1e3*a[0].startTime)/1e3,duration:Math.round(1e3*u)/1e3}})}}},t.now=function(){var e=n();return e?e.now():o.now()}}),(function(e,t,i){var n=i(2),r=i(40);t.getQueryParams=function(){var e=r.getLocationSearch()||"";if(0===e.indexOf("?")&&(e=e.substring(1)),0===e.length)return[];for(var t=e.split("&"),i=[],n=0;n<t.length;n++){var a="",o="",s=t[n].split("=");s.length>0&&(a=s[0]),s.length>1&&(o=s[1]),i.push([a,o])}return i},t.getQueryParamValue=function(e){for(var i=t.getQueryParams(),n=0;n<i.length;n++)if(i[n][0]===e)return i[n][1]},t.queryStringFromMap=function(e){return n.map(e,(function(e,t){return t+"="+e})).join("&")}}),(function(e,t,i){function n(e){var t;if(!o.find(I.getFrames(),{origin:e.origin}))return void m.debug("XDomain","No frame found for origin: "+e.origin);try{t=h.parse(e.data)}catch(t){return void m.debug("XDomain","Ignoring malformed message event:",e)}if("ERROR"===t.type)l.dispatch(c.XDOMAIN_SET_DISABLED,{disabled:!0}),d.emitInternalError(new y("Xdomain Error: "+t.response));else if("SYNC"===t.type)o.each(I.getSubscribers(),(function(e){e(t.response.key,t.response.value)}));else{var i=I.getMessageById(t.id);if(!i){if(m.warn("XDomain","No stored message found for ID",t.id),o.isNumber(t.id)){var n=I.getNextMessageId();t.id>=n?d.emitInternalError(new y("Message ID is greater than expected maximum ID ("+t.id+">"+n+")")):t.id<0?d.emitInternalError(new y("Message ID is < 0: "+t.id)):d.emitInternalError(new y("No stored message found for message ID: "+t.id))}else d.emitInternalError(new y("Message ID is not a number: "+t.id));return}if(!i.resolver)return void m.warn("XDomain","Message already resolved, ignoring:",t.id);i.resolver(t.response),l.dispatch(c.XDOMAIN_SET_MESSAGE,{messageId:t.id,message:{data:{id:t.id,type:i.data.type,key:i.data.key},startTime:i.startTime,endTime:p.now()}})}}function r(e,t){return t||(t=I.getDefaultFrame()),new s(function(i){var n={data:o.extend({},e,{id:I.getNextMessageId()}),resolver:i};t?I.isDisabled()||a(n,t):l.dispatch(c.XDOMAIN_SET_MESSAGE,{messageId:n.data.id,message:n})})}function a(e,t){var i=e.data;l.dispatch(c.XDOMAIN_SET_MESSAGE,{messageId:e.data.id,message:o.extend({},e,{startTime:p.now()})}),t.target.postMessage(h.stringify(i),t.origin)}var o=i(2),s=i(12).Promise,c=i(7),u=i(16),l=i(9),d=i(86),f=i(76).create,p=i(24),g=i(80),h=i(26),_=i(88),v=i(74),E=i(40),m=i(23),I=u.get("stores/xdomain"),y=t.Error=f("XDomainStorageError");t.setItem=function(e,t,i){return r({type:"PUT",key:e,value:t},i)},t.getItem=function(e,t){return r({type:"GET",key:e},t)},t.fetchAll=function(e){return r({type:"GETALL"},e)},t.deleteData=function(e,t){return r({type:"DELETE",visitorId:e},t)},t.subscribe=function(e){l.dispatch(c.XDOMAIN_ADD_SUBSCRIBER,{subscriber:e})},t.loadIframe=function(e,t){return new s(function(i){var n=g.createElement("iframe");n.src=e+t,n.hidden=!0,n.setAttribute("tabindex","-1"),n.setAttribute("title","Optimizely Internal Frame"),n.style.display="none",n.height=0,n.width=0,n.onload=function(){var r={id:I.getNextFrameId(),target:n.contentWindow,origin:e,path:t};l.dispatch(c.XDOMAIN_ADD_FRAME,r),i(r)},g.appendTo(g.querySelector("body"),n)})},t.getXDomainUserId=function(e,t){var i,n={},r=o.keys(e);return o.each(t,(function(e){n[e]=[],o.each(r,(function(t){var r=v.getUserIdFromKey(t,e);!i&&r&&(i=r),r&&!o.includes(n[e],r)&&n[e].push(r)}))})),m.debug("XDomain: Found userIds:",n),i},t.load=function(e,i){E.addEventListener("message",n);var r=function(){return!!g.querySelector("body")},s=function(){return t.loadIframe(e,i)};return _.pollFor(r).then(s).then((function(e){l.dispatch(c.XDOMAIN_SET_DEFAULT_FRAME,e),I.isDisabled()||o.each(I.getMessages(),(function(t){t.startTime||a(t,e)}))}))}}),(function(e,t,i){var n=i(87);t.emitError=function(e,t,i){var r=!0;n.emit({type:"error",name:e.name||"Error",data:{error:e,metadata:t}},i||!1,r)},t.emitInternalError=function(e,i){t.emitError(e,i,!0)},t.emitAnalyticsEvent=function(e,t){var i={type:"analytics",name:"trackEvent",data:e};n.emit(i,t)}}),(function(e,t,i){var n=i(2),r=i(5),a=i(7),o=i(86),s=i(16),c=i(9),u=i(23),l=s.get("stores/event_emitter");t.on=function(e){return e.token||(e.token=r.generate()),c.dispatch(a.ADD_EMITTER_HANDLER,e),e.token},t.off=function(e){c.dispatch(a.REMOVE_EMITTER_HANDLER,{token:e})},t.emit=function(e,t,i){var r=l.getHandlers(e,t);n.each(r,(function(n){try{n.handler.call({$di:s},e)}catch(r){!i&&n.emitErrors?(u.error("Error in handler for event:",e,r),o.emitError(r,null,t)):u.warn("Suppressed error in handler for event:",e,r)}}))}}),(function(e,t,i){var n=i(2),r=i(12).Promise,a=i(40),o=100,s=50;t.pollFor=function(e,t,i){var c,u;return n.isFunction(i)?u=i:(c=i||o,u=function(){return c--,c<-1}),t=t||s,new r(function(i,n){!(function r(){var o;if(!u()){try{var s=e();if(s)return i(s)}catch(e){o=e}return a.setTimeout(r,t)}n(o||new Error("Poll timed out"))})()})}}),(function(e,t,i){function n(e,i){var n;n=t.isInSameSession(e,i)?e.getValueOrDefault([s.FIELDS.SESSION_ID]):i.getValueOrDefault([s.FIELDS.TIME]),i.setFieldValue(s.FIELDS.SESSION_ID,n)}function r(e,i,n){var r,a=e.getValueOrDefault([s.FIELDS.SESSION_INDEX]);r=t.isInSameSession(i,e)?a:n?a+1:a-1,i.setFieldValue(s.FIELDS.SESSION_INDEX,r)}var a=i(62).Event,o=i(24),s=i(63),c=i(62).EventBase;t.CURRENT_SESSION_INDEX=0;var u=18e5;t.isInSameSession=function(e,t){var i=e.getValueOrDefault([s.FIELDS.TIME],0),n=t.getValueOrDefault([s.FIELDS.TIME],0);return Math.abs(i-n)<u},t.updateSessionId=function(e,t){if(!e)return void t.setFieldValue(s.FIELDS.SESSION_ID,t.getValueOrDefault([s.FIELDS.TIME]));var i=e.getValueOrDefault([s.FIELDS.TIME]),r=e.getValueOrDefault([s.FIELDS.SESSION_ID]),o=t.getValueOrDefault([s.FIELDS.TIME]);i="number"!=typeof i?o-36e5:i,r="number"!=typeof r?i:r,e=new a(new c("",""),i,r),n(e,t)},t.updateSessionIndex=function(e,t){if(!e)return void t.setFieldValue(s.FIELDS.SESSION_INDEX,0);var i=e.getValueOrDefault([s.FIELDS.TIME]),n=e.getValueOrDefault([s.FIELDS.SESSION_INDEX]),o=t.getValueOrDefault([s.FIELDS.TIME]),u=e.getValueOrDefault([s.FIELDS.SESSION_ID]);i="number"!=typeof i?o-36e5:i,n="number"!=typeof n?0:n,u="number"!=typeof u?i:u,e=new a(new c("",""),i,u,n),r(e,t,!1)},t.sessionize=function(e){var i=e.length;if(0!==i){e[0].setFieldValue(s.FIELDS.SESSION_ID,e[0].getValueOrDefault([s.FIELDS.TIME]));for(var a=1;a<i;a++)n(e[a-1],e[a]);var c=t.CURRENT_SESSION_INDEX,l=e[i-1].getValueOrDefault([s.FIELDS.TIME]),d=o.now();d-l>u&&(c+=1),e[i-1].setFieldValue(s.FIELDS.SESSION_INDEX,c);for(var a=i-1;a>0;a--)r(e[a],e[a-1],!0)}},t.reindexIfNecessary=function(e,t,i){function n(e){for(var t=0;t<e.length;t++){var i=e[t].getValueOrDefault([s.FIELDS.SESSION_INDEX]);e[t].setFieldValue(s.FIELDS.SESSION_INDEX,i+1)}}e.getValueOrDefault([s.FIELDS.SESSION_INDEX])===-1&&(n(t),n(i))},t.sessionSortPredicate=function(e,t){return e[s.FIELDS.TIME]-t[s.FIELDS.TIME]},t.applyMigrations=function(e){return!1}}),(function(e,t,i){var n=i(12).Promise,r=i(40);t.estimateStorage=function(){var e=r.getGlobal("navigator");try{return e.storage.estimate()}catch(e){return n.resolve({usage:null,quota:null})}}}),(function(e,t,i){var n=i(2),r=i(7),a=i(24),o=i(9),s=i(26),c=i(23),u=i(12).Promise,l=i(92),d=3;t.isCORSSupported=function(){var e=l.get("XMLHttpRequest");return"withCredentials"in new e},t.request=function(e){return e=n.extend({method:"GET",async:!0,contentType:"text/plain;charset=UTF-8"},e),new u(function(i,r){if(!t.isCORSSupported())return r("CORS is not supported");var a=l.get("XMLHttpRequest"),o=new a;o.onload=function(){e.success&&e.success(o),i(o)},o.onerror=function(){e.error&&e.error(o),r(o)},n.isObject(e.data)&&(e.data=s.stringify(e.data)),o.open(e.method,e.url,e.async),e.withCredentials&&(o.withCredentials=e.withCredentials),o.setRequestHeader("Content-Type",e.contentType),o.send(e.data)})},t.retryableRequest=function(e,i,s,l){if(!i)return u.reject(new Error("No id specified for request."));if(!t.isCORSSupported())return u.reject(new Error("CORS is not supported."));n.isUndefined(l)&&(l=d),n.isUndefined(s)&&(s=0);var f={id:i,timeStamp:a.now(),data:e,retryCount:s};return o.dispatch(r.SET_PENDING_EVENT,f),c.debug("Sending event ",i),t.request(e).then((function(e){return o.dispatch(r.REMOVE_PENDING_EVENT,{id:i}),e}),(function(e){throw f.retryCount>=l?(o.dispatch(r.REMOVE_PENDING_EVENT,{id:i}),c.warn("Event ",f," could not be sent after ",l," attempts.")):(f.retryCount++,o.dispatch(r.SET_PENDING_EVENT,f),c.debug("Event ",f," failed to send, with error ",e," It will be retried ",l-s," times.")),e}))},t.sendBeacon=t.request}),(function(e,t,i){var n=i(2),r=i(7),a=i(24),o=i(16),s=i(80),c=i(25),u=i(9),l=i(23),d=o.get("stores/sandbox"),f=i(40);t.shouldSandbox=function(){return!1},t.get=function(e){if(!e)throw new Error("Name is required");if(t.shouldSandbox()){d.isInitialized()||p();var i=d.get(e);if(i)return i}return f.getGlobal(e)};var p=function(){try{var e="optimizely_"+a.now(),t=s.createElement("iframe");t.name=e,t.style.display="none",s.appendToHead(t);var i=t.contentWindow,o=t.contentDocument;o.write("<script></script>"),o.close();var d=n.mapValues(c.SandboxedFunctions,(function(e){return i[e]}));u.dispatch(r.SANDBOXED_FUNCTIONS_ADDED,{sandboxedFunctions:d}),t.parentNode.removeChild(t)}catch(e){l.warn("Unable to create a sandbox: ",e)}}}),(function(e,t,i){var n=i(2),r=i(23),a=i(94),o=i(16),s=o.get("stores/plugins"),c=i(7),u=i(25),l=i(9),d=!1,f=[i(107),i(108),i(128)],p=["clientMetadata","cookieDomain","disable","load","optOut","rum"];t.push=function(e,t){var i,a,o,s;if(!n.isArray(e)&&n.isObject(e))s=n.isUndefined(e.version)?1:e.version,i=e.type,o=[e];else if(n.isArray(e))s=0,i=e[0],o=e.slice(1);else{if(!n.isString(e))return r.warn("API / Ignoring non-array/object/string argument:",e),!1;s=0,i=e,o=[]}if(f[s]&&(a=f[s][i]),t&&p.indexOf(i)===-1)return r.debug("API / Ignoring non high priority function:",i,o),!1;if(!a)return r.warn('API / No function found for "'+i+'" (v'+s+") with arguments:",o),!1;r.log('API / Executing: "'+i,'" with arguments:',o);try{a.apply(null,o),l.dispatch(c.RECORD_API_USAGE,{methodName:s?"v"+s+"."+i:i})}catch(e){r.error(e)}return!0},t.get=function(e){if(d&&"state"!==e)return void r.warn('Module "'+e+'" not found.');r.log('API / Getting module: "'+e+'"');var t=a[e];return t?n.isArray(t)&&(t=o.evaluate(t)):t=s.getPlugin(u.PluginTypes.apiModules,e),t?(l.dispatch(c.RECORD_API_USAGE,{methodName:"get."+e}),t):void r.warn('Module "'+e+'" not found.')}}),(function(e,t,i){function n(e,t,i,n){var r=e.getLayerState(n),a=t.get(n),s=i.get();if(!r||!a)return s?{layer:{name:s.layerName,id:s.layerId,policy:s.layerPolicy,integrationStringVersion:s.integrationStringVersion},experiment:{name:s.experimentName,id:s.experimentId},variation:{name:s.variationName,id:s.variationId},isLayerHoldback:!1}:null;if(l.isSingleExperimentPolicy(a.policy)&&r.decision.isLayerHoldback)return null;var c=r.decision.experimentId,u=r.decision.variationId;if(!c||!u)return null;var d,f;return(d=o.find(a.experiments,{id:c}))?(f=o.find(d.variations,{id:u}),f?{layer:{name:a.name,id:a.id,policy:a.policy,integrationStringVersion:a.integrationStringVersion},experiment:{name:d.name,id:d.id},variation:{name:f.name,id:f.id},isLayerHoldback:r.decision.isLayerHoldback}:null):null}function r(e,t,i,n,r,s){var c=[],u=e.getLayerStates();s.onlySingleExperiments&&(u=o.filter(u,(function(e){var i=t.get(e.layerId);return i&&l.isSingleExperimentPolicy(i.policy)})));var f=o.map(u,(function(e){var t=!!e.decision.variationId,i=e.decisionActivationId&&e.decisionActivationId===n.getActivationId(),r=d.getExperimentAndVariation(),a=r?r.variationId:null,s=t&&e.decision.variationId===a;return o.extend(e,{isActive:t&&i||s,visitorRedirected:s})})),p=r?o.filter(f,r):f;return o.each(p,(function(e){var n=a(e,t,i,s.includeOfferConsistency);n&&c.push(n)})),c}function a(e,t,i,n){var r,a,s=e.layerId,c=t.get(s)||{},u=o.map(c.experiments,(function(e){
return o.pick(e,["id","name"])}));if(n||!c.decisionMetadata||!c.decisionMetadata.offerConsistency){var l={id:s,campaignName:c.name||null,experiment:null,allExperiments:u,variation:null,reason:e.decision.reason,isActive:!!e.isActive,visitorRedirected:e.visitorRedirected,isInCampaignHoldback:e.decision.isLayerHoldback};e.decision&&e.decision.experimentId&&(r=o.find(c.experiments,{id:e.decision.experimentId})),r&&(l.experiment=o.pick(r,["id","name","campaignName"])),r&&e.decision.variationId&&(a=o.find(r.variations,{id:e.decision.variationId})),a&&(l.variation=o.pick(a,["id","name"]));var d=o.map(e.decisionTicket.audienceIds,(function(e){return o.pick(i.get(e),["id","name"])}));return l.audiences=d,c.decisionMetadata&&c.decisionMetadata.offerConsistency&&(l.pageId=e.pageId),l}}var o=i(2),s=i(95),c=i(96),u=i(98),l=i(44),d=i(99);t.data=["stores/audience_data","stores/client_metadata","stores/event_data","stores/layer_data","stores/view_data","stores/group_data","stores/interest_group","stores/tag_group","stores/global",function(e,t,i,n,r,a,s,l,d){var f={},p={},g={},h={audiences:e.getAudiencesMap(),events:i.getEventsMap(),campaigns:f,pages:r.getPagesMap(),experiments:p,variations:g,projectId:d.getProjectId(),snippetId:d.getSnippetId(),accountId:d.getAccountId(),dcpServiceId:d.getDCPServiceId(),revision:d.getRevision(),clientName:t.getClientName(),clientVersion:t.getClientVersion()},_=u.dereferenceChangeId;return o.each(n.getAll(),(function(e){c.defineProperty(f,e.id,(function(){var t=o.extend({},e);return c.defineProperty(t,"changes",(function(){return o.map(e.changes,_)}),"campaign"),c.defineProperty(t,"experiments",(function(){return o.map(e.experiments,(function(e){return p[e.id]}))}),"campaign"),t}),"campaignMap","byId"),o.each(e.experiments,(function(e){c.defineProperty(p,e.id,(function(){var t=o.extend({},e);return c.defineProperty(t,"changes",(function(){return o.map(e.changes,_)}),"experiment"),c.defineProperty(t,"variations",(function(){return o.map(e.variations,(function(e){return g[e.id]}))}),"experiment"),t}),"experimentMap","byId"),o.each(e.variations,(function(e){c.defineProperty(g,e.id,(function(){var t=o.extend({},e);return c.defineProperty(t,"actions",(function(){return o.map(e.actions,(function(e){return o.extend({},e,{changes:o.map(e.changes,_)})}))}),"variation"),t}),"variationMap","byId")}))}))})),h.groups=a.getGroupsMap(),h}],t.visitor=["stores/visitor",function(e){return o.cloneDeep(e.getVisitorProfile())}],t.visitor_id=["stores/visitor_id",function(e){return{randomId:e.getRandomId()}}],t.state=["stores/audience_data","stores/layer_data","stores/layer","stores/view_data","stores/view","stores/global","stores/observed_redirect",function(e,t,i,a,c,u,f){return{getCampaignStates:function(n){var a={},s=r(i,t,e,u,n,{includeOfferConsistency:!1});return o.each(s,(function(e){a[e.id]=e})),a},getExperimentStates:function(n){var a=r(i,t,e,u,n,{includeOfferConsistency:!1,onlySingleExperiments:!0}),s=["audiences","variation","reason","visitorRedirected","isActive"],c=o.reduce(a,(function(e,t){var i=t.allExperiments[0];return e[i.id]=o.extend({},o.pick(t,s),{id:i.id,experimentName:i.name,isInExperimentHoldback:t.isInCampaignHoldback}),e}),{});return c},getCampaignStateLists:function(n){var a={},s=r(i,t,e,u,n,{includeOfferConsistency:!0});return o.each(s,(function(e){var t=e.id;a[t]||(a[t]=[]),a[t].push(e)})),a},getPageStates:function(e){var t=c.getAll(),i=o.reduce(t,(function(e,t){var i=a.get(t.id);return e[t.id]=o.extend({},o.pick(i,["id","name","apiName","category","staticConditions","tags"]),o.pick(t,["isActive","metadata"])),e[t.id].isActive=!!e[t.id].isActive,e}),{});return e?o.pickBy(i,e):i},isGlobalHoldback:function(){return u.isGlobalHoldback()},getActivationId:function(){return u.getActivationId()},getVariationMap:function(){var e=i.getLayerStates(),n={};return o.each(e,(function(e){var i=t.get(e.layerId);if(e.decision&&e.decision.experimentId&&(n[e.decision.experimentId]={id:e.decision.variationId,name:null,index:null},i)){var r=o.find(i.experiments,{id:e.decision.experimentId});if(r&&e.decision.variationId)var a=o.find(r.variations,{id:e.decision.variationId}),s=o.findIndex(r.variations,{id:e.decision.variationId});a&&(n[e.decision.experimentId]={id:e.decision.variationId,name:a.name,index:s})}})),n},getActiveExperimentIds:function(){var e={};return o.each(this.getCampaignStateLists({isActive:!0}),(function(t){o.each(t,(function(t){e[t.experiment.id]=!0}))})),o.keys(e)},getRedirectInfo:function(){var e=d.getExperimentAndVariation();return e&&(e.referrer=d.getReferrer()),e},getDecisionString:function(e){if(!e)throw new Error("Must pass a config to getDecisionString");e=o.extend({maxLength:255,shouldCleanString:!1},e);var r=n(i,t,f,e.campaignId);return r?s.generateAnalyticsString(r.layer,r.experiment,r.variation,r.isLayerHoldback,e.maxLength,e.shouldCleanString):null},getDecisionObject:function(e){if(!e)throw new Error("Must pass a config to getDecisionObject");e=o.extend({maxLength:255,shouldCleanString:!1},e);var r=n(i,t,f,e.campaignId);if(!r)return null;var a=s.formatNamesAndIdsForAnalytics(r.layer,r.experiment,r.variation,e.shouldCleanString),c=o.mapValues(a.names,(function(t,i){return s.combineAndTruncateIdAndName(t,a.idStrings[i],e.maxLength)})),u={experiment:c.experiment,variation:c.variation};return l.isSingleExperimentPolicy(r.layer.policy)||o.extend(u,{campaign:c.layer,holdback:r.isLayerHoldback}),u}}}],t.utils=i(100).create(),t.jquery=["env/jquery",function(e){return e}],t.event_emitter=i(106)}),(function(e,t,i){function n(e){return e.replace(/[^a-zA-Z0-9\.\~\!\*\(\)\']+/g,"_")}function r(e){return!c.isEmpty(e)&&c.includes(["and","or","not"],e[0])}function a(e,t){var i="";return c.isEmpty(t)?i=d:(i=c.reduce(t,(function(t,i){var r=e.get(i);return r?t+n(r.name?r.name:r.id)+",":t}),""),i=i.slice(0,-1)),i}function o(e,i,n,r,a,o){if(!_.isSingleExperimentPolicy(e.policy)||!r){var s=!_.isSingleExperimentPolicy(e.policy)&&r,u=t.formatNamesAndIdsForAnalytics(e,i,n,o),d=[u.names.experiment,u.names.variation],p=[u.idStrings.experiment,u.idStrings.variation];_.isSingleExperimentPolicy(e.policy)||(d.unshift(u.names.layer),p.unshift(u.idStrings.layer));var g=c.reduce(p,(function(e,t){return e+t.length}),0),h=d.length-1+(s?1:0),v=h*l.length,E=g+v;if(s&&(E+=f.length),E>a)throw new Error("The analytics string size is too low to send the entity IDs.");for(var m=a-E,I=d.length,y=[],S=d.length-1;S>=0;S--){var T=d[S],A=Math.min(T.length,Math.floor(m/I));m-=A,I--,y.unshift(T.substring(0,A))}var R=c.map(y,(function(e,t){return e+p[t]}));return s&&R.push(f),R.join(l)}}function s(e,i,n,r,a,o){var s=r?f:p,u=3*l.length,d=t.formatNamesAndIdsForAnalytics(e,i,n,o),g=d.names,h=d.idStrings,v=c.reduce(h,(function(e,t){return e+t.length}),0);if(v+u+s.length>a)throw new Error("The analytics string size is too low to send the campaign, experiment, and variation IDs.");var E=a-v-u-s.length,m={};m.variation=Math.min(g.variation.length,Math.floor(E/3)),E-=m.variation,m.experiment=Math.min(g.experiment.length,Math.floor(E/2)),E-=m.experiment,m.layer=E;var I={};c.each(g,(function(e,t){I[t]=e.substring(0,m[t])}));var y=[];return _.isSingleExperimentPolicy(e.policy)||y.push(I.layer+h.layer),y=y.concat([I.experiment+h.experiment,I.variation+h.variation,s]),y.join(l)}var c=i(2),u=i(16),l=":",d="everyone_else",f="holdback",p="treatment",g="",h=i(23),_=i(44),v=!1;t.formatNamesAndIdsForAnalytics=function(e,t,i,o){var s={layer:e.name||g,experiment:t.name||g,variation:i.name||g};o&&(s=c.mapValues(s,n));var l=v?1===e.integrationStringVersion:!e.integrationStringVersion||1===e.integrationStringVersion;if(s.experiment===g&&l)if(r(t.audienceIds))s.experiment="Exp";else{var d=u.get("stores/audience_data");s.experiment=a(d,t.audienceIds)}var f={layer:"("+n(e.id)+")",experiment:"("+n(t.id)+")",variation:"("+n(i.id)+")"};return{names:s,idStrings:f}},t.combineAndTruncateIdAndName=function(e,t,i){var n=i-t.length;if(n<0&&(h.warn("maxLength must be at least long enough to fit the entity ID, which is length"+t.length+". Defaulting to only use entity ID as name."),e=g),e===g)return t;if(e.length>n){var r=Math.min(e.length,n);return e=e.substring(0,r),e+t}return e+" "+t},t.generateAnalyticsString=function(e,t,i,n,r,a){return e.integrationStringVersion&&2===e.integrationStringVersion?o(e,t,i,n,r,a):s(e,t,i,n,r,a)}}),(function(e,t,i){var n=i(97),r=i(7),a=i(9),o=i(23);t.defineProperty=function(e,t,i,s,c){n(e,t,(function(){var e=["prop",s,c||t].join(".");return o.debug('Evaluating getter: "'+e+'"'),a.dispatch(r.RECORD_API_USAGE,{methodName:e}),i()}),!0)}}),(function(e,t){"use strict";function i(e,t,i,n){Object.defineProperty(e,t,{get:function(){var e=i.call(this);return Object.defineProperty(this,t,{value:e,enumerable:!!n,writable:!0}),e},set:function(e){return Object.defineProperty(this,t,{value:e,enumerable:!!n,writable:!0}),e},enumerable:!!n,configurable:!0})}e.exports=i}),(function(e,t,i){function n(e){var i=r.cloneDeep(e);return i.changes&&(i.changes=r.map(i.changes,t.dereferenceChangeId)),i.experiments&&r.each(i.experiments,(function(e){e.changes&&(e.changes=r.map(e.changes,t.dereferenceChangeId)),e.variations&&r.each(e.variations,(function(e){e.actions&&r.each(e.actions,(function(e){e.changes&&(e.changes=r.map(e.changes,t.dereferenceChangeId))}))}))})),i}var r=i(2),a=i(16),o=i(22),s=i(96),c=a.get("stores/change_data");t.translateDecisionToCampaignDecision=function(e){return u(r.cloneDeep(e),{layerId:"campaignId",isLayerHoldback:"isCampaignHoldback"})},t.translateLayerEventToCampaignEvent=function(e){var t={};return s.defineProperty(t,"campaign",(function(){var t=n(e.data.layer);return t}),"campaignEvent"),t.decisionTicket=e.data.decisionTicket,t.decision=this.translateDecisionToCampaignDecision(e.data.decision),t.audiences=e.data.audiences,{type:"lifecycle",name:"campaignDecided",data:t}},t.translateViewActivatedToPageActivated=function(e){return{type:"lifecycle",name:"pageActivated",data:{page:e.data.view}}},t.dereferenceChangeId=function(e){var t=c.getChange(e);return t?o.safeReference(t):e};var u=function(e,t){var i=r.omit(e,r.keys(t));return r.each(t,(function(t,n){i[t]=e[n]})),i}}),(function(e,t,i){var n=i(2),r=i(16),a=r.get("stores/observed_redirect");t.getReferrer=function(){var e=a.get();return e?e.referrer:null},t.getExperimentAndVariation=function(){var e=a.get();return e&&n.isString(e.variationId)?n.pick(e,["experimentId","variationId"]):null}}),(function(e,t,i){var n=i(12).Promise,r=i(101).observeSelector,a=i(102).poll,o=i(104).waitForElement,s=i(105).waitUntil;t.create=function(){return{observeSelector:r,poll:a,Promise:n,waitForElement:o,waitUntil:s}}}),(function(e,t,i){function n(){if(f.shouldObserveChangesIndefinitely()){var e={attributes:!0,childList:!0,subtree:!0,characterData:!0},t=p.getDocumentElement(),i=new MutationObserver(function(){this.disconnect(),l.each(l.keys(E),a),this.observe(t,e)});return function(n){var r=E[n];i.observe(t,e),r.cancelObservation=function(){delete E[n],l.isEmpty(E)&&i.disconnect()}}}return function(e){var t=h.poll(l.partial(a,e));E[e].cancelObservation=function(){t(),delete E[e]}}}function r(e){var t=E[e];t&&t.cancelObservation&&t.cancelObservation()}function a(e){if(E[e]){if(o(E[e]))return 0===E[e].matchedCount&&l.isFunction(E[e].options.onTimeout)&&E[e].options.onTimeout(),void r(e);var t=document.querySelectorAll(E[e].selector);t.length&&(l.each(t,(function(t){t.ni&&t.ni[e]||E[e].callbackQueue.push(t)})),s(e))}}function o(e){var t=e.options.timeout;if(null!==t)if("function"==typeof t)try{return t()}catch(e){}else if(Date.now()-e.startTime>t)return!0;return!1}function s(e){for(;E[e]&&E[e].callbackQueue.length;){var t=E[e].callbackQueue.shift();if(c(t,e),E[e].matchedCount=E[e].matchedCount+1,E[e].callback(t),E[e]&&E[e].options.once)return void r(e)}}function c(e,t){e.ni||(e.ni={}),e.ni[t]=!0}function u(e){try{document.querySelector(e)}catch(e){return!1}return!0}var l=i(2),d=(i(7),i(16)),f=d.get("stores/directive"),p=i(80),g=(i(25),i(9),i(5).generate),h=i(102),_=i(40),v=(d.get("stores/rum"),{once:!1,onTimeout:null,timeout:null}),E={},m=function(e){(m=n())(e)};t.observeSelector=function(e,t,i){if(!u(e))throw new Error("observeSelector expects a valid css selector as its first argument");if(!l.isFunction(t))throw new Error("observeSelector expects a function as its second argument");if(i&&(!l.isObject(i)||l.isFunction(i)))throw new Error("observeSelector expects an object as its third argument");var n=g();return i=l.assign({},v,i||{}),E[n]={callback:t,callbackQueue:[],matchedCount:0,options:i,selector:e,startTime:Date.now()},m(n),_.setTimeout(l.bind(a,null,n),0),l.partial(r,n)}}),(function(e,t,i){function n(e){l[e]&&a.each(l[e].callbacks,(function(e){e.call(null)}))}function r(e,t){l[t]&&l[t].callbacks[e]&&(delete l[t].callbacks[e],a.some(l[t].callbacks)||(clearInterval(l[t].id),delete l[t]))}var a=i(2),o=(i(7),i(16)),s=(i(25),i(9),i(5).generate),c=i(40),u=i(103).DEFAULT_INTERVAL,l=(o.get("stores/rum"),{});t.poll=function(e,t){a.isNumber(t)||(t=u),l[t]||(l[t]={callbacks:{},id:c.setInterval(a.partial(n,t),t)});var i=s();return l[t].callbacks[i]=e,a.partial(r,i,t)},t.cancelAll=function(){a.each(l,(function(e,t){clearInterval(e.id),delete l[t]}))}}),(function(e,t){e.exports={DEFAULT_INTERVAL:20}}),(function(e,t,i){var n=i(12).Promise,r=i(101).observeSelector;t.waitForElement=function(e){return new n(function(t,i){r(e,t,{once:!0})})}}),(function(e,t,i){var n=i(12).Promise,r=i(102).poll;t.waitUntil=function(e){return new n(function(t,i){if(e())return void t();var n=r((function(){e()&&(n(),t())}))})}}),(function(e,t,i){var n=i(87);t.on=function(e){return e.publicOnly=!0,n.on(e)},t.off=n.off,t.emit=function(e){n.emit(e)}}),(function(e,t,i){function n(e){var t,i={};if(e)if(r(e))t=Number(e);else{if("object"!=typeof e)throw new Error("tracker","Revenue argument",e,"not a number.");if(i=a.extend({},e),"revenue"in i){if(!r(i["revenue"]))throw new Error("tracker","Revenue value",i["revenue"],"not a number.");t=Number(i["revenue"]),delete i["revenue"]}}return a.isUndefined(t)||(i.revenue=t),i}function r(e){return a.isNumber(e)||a.isString(e)&&Number(e)==e}var a=i(2),o=i(108);t.activateGeoDelayedExperiments=function(e,t){t||(t=e.lists?"odds":"cdn3"),o.dataFromSource({data:e,source:t})},t.activateSiteCatalyst=function(e){e&&e.sVariable&&o.integrationSettings({id:"adobe_analytics",settings:{sVariableReference:e.sVariable}})},t.bucketUser=t.bucketVisitor=function(e,t){if(e&&t){var i={experimentId:String(e)};t>256?i.variationId=String(t):i.variationIndex=String(t),o.bucketVisitor(i)}},t.disable=function(e){o.disable({scope:e})},t.log=function(e){a.isUndefined(e)&&(e=!0),o.log({level:e?"INFO":"OFF"})},t.optOut=function(e){a.isUndefined(e)&&(e=!0),o.optOut({isOptOut:e})},t.setCookieDomain=function(e){o.cookieDomain({cookieDomain:e})},t.setCookieExpiration=function(e){o.cookieExpiration({cookieExpirationDays:e})},t.setDimensionValue=function(e,t){var i={};i[e]=t,o.user({attributes:i})},t.setUserId=function(e){o.user({userId:e})},t.storeThirdPartyData=function(e,t){o.dataFromSource({source:e,data:t})},t.trackEvent=function(e,t){o.event({eventName:e,tags:n(t)})}}),(function(e,t,i){function n(e){var t;return e.eventId&&(t=I.create(e.eventId,e.eventName,"custom")),D.updateAllViewTags(),function(){var i=p.trackCustomEvent(e.eventName,e.tags,t);i?R.log("API / Tracking custom event:",e.eventName,e.tags):R.log("API / Not tracking custom event:",e.eventName)}}function r(e){var t;return e.eventData&&(t=I.create(e.eventData.id,e.eventData.apiName,"click",e.eventData)),function(){var e=p.trackClickEvent(t);e?R.log("API / Tracking click event:",e):R.log("API / Not tracking click event:",e)}}function a(e){var t=e.eventData,i=A.createLayerState(t.layerId,t.experimentId,t.variationId,t.isLayerHoldback),n=A.createSingle(t.layerId,t.experimentId,t.variationId);return function(){A.recordLayerDecision(i.layerId,i.decisionTicket,i.decision),R.log("API / Tracking decision event:",i),p.trackDecisionEvent(i.decision,i.decisionTicket,n)}}function o(e){var t=D.create(e.eventData.id,e.eventData.apiName),i=D.createState(t.id);return function(){var e=p.trackViewActivation(t,i);e?R.log("API / Tracking pageview event:",e):R.log("API / Not tracking pageview event:",e)}}var s=i(2),c=i(7),u=i(93),l=i(94),d=i(109),f=i(25),p=i(110),g=i(117),h=i(6),_=i(76).create,v=i(24),E=i(118),m=i(120),I=i(121),y=i(87),S=i(9),T=i(26),A=i(113),R=i(23),w=i(122),b=i(114),D=i(123),O=i(74),C=i(16),N=C.get("stores/dimension_data"),L=C.get("stores/view"),P=C.get("stores/view_data"),V=C.get("stores/visitor_id"),k=C.get("stores/layer_data"),x=C.get("stores/directive"),F=!1,M=!1,U=F||M,G=86400,B=90,z=t.ApiListenerError=_("ApiListenerError");t.event=function(e){var t;switch(e.eventType){case"click":t=r(e);break;case"decision":t=a(e);break;case"pageview":t=o(e);break;case"custom":default:t=n(e)}V.getBucketingId()?t():S.dispatch(c.ADD_CLEANUP_FN,{lifecycle:f.Lifecycle.postActivate,cleanupFn:t})},t.clientMetadata=function(e){U&&(S.dispatch(c.SET_CLIENT_NAME,e.clientName),S.dispatch(c.SET_CLIENT_VERSION,e.clientVersion)),F&&e.forceVariationIds&&S.dispatch(c.LOAD_DIRECTIVE,{forceVariationIds:e.forceVariationIds})},t.priorRedirectString=function(e){U&&b.load(e.value)},t.microsnippetError=function(e){if(U){var t=e.errorData.metadata&&e.errorData.metadata.err||{};t.name=e.errorData.code;var i={engine:e.engine,msVersion:e.errorData.msVersion,requestId:e.errorData.requestId,projectId:e.errorData.projectId,snippetKey:e.errorData.snippetKey,args:e.errorData.args};m.handleError(t,i)}},t.rum=function(e){S.dispatch(c.SET_RUM_DATA,e.eventData)},t.initialViewStates=function(e){var t=s.map(e.states,(function(e,t){return{id:t,isActive:e}}));D.registerViews(t)},t.page=function(e){var t=P.getByApiName(e.pageName);if(!t)throw new Error('Unknown page "'+e.pageName+'"');var i=!e.hasOwnProperty("isActive")||e.isActive,n=function(){i?D.activateViaAPI(t,e.tags):(D.deactivate(t),R.log("API / Deactivated Page",D.description(t)))};V.getBucketingId()?n():S.dispatch(c.ADD_CLEANUP_FN,{lifecycle:f.Lifecycle.postViewsActivated,cleanupFn:n})},t.tags=function(e){D.setGlobalTags(e.tags)},t.user=function(e){U&&e.visitorId&&(V.getBucketingId()?(R.log("API / Setting visitor Id:",e.visitorId),O.setId({randomId:e.visitorId})):(R.log("API / Setting visitor Id for activation:",e.visitorId),S.dispatch(c.SET_VISITOR_ID_VIA_API,e.visitorId))),F&&s.each(["IP","location","queryParams","url"],(function(t){e[t]&&(R.log("API / Setting",t,":",e[t]),j(t,e[t],!1))})),R.log("API / Setting visitor custom attributes:",e.attributes),s.each(e.attributes,(function(e,t){var i,n,r=t,a=N.getById(t)||N.getByApiName(t);a&&(r=a.id,i=a.apiName,n=a.segmentId||a.id);var o={id:n,value:e};i&&(o.name=i),j(r,o,!0)}))};var j=function(e,t,i){var n=[{key:i?["custom",e]:[e],value:t,metadata:{lastModified:v.now()}}],r=function(){S.dispatch(c.SET_VISITOR_ATTRIBUTES,{attributes:n})};V.getBucketingId()?r():S.dispatch(c.ADD_CLEANUP_FN,{lifecycle:f.Lifecycle.postVisitorProfileLoad,cleanupFn:r})};t.optOut=function(e){var t=!e.hasOwnProperty("isOptOut")||e.isOptOut;E.setOptOut(t)},t.cookieExpiration=function(e){var t=e.cookieExpirationDays;t<B&&(R.error('Argument "cookieExpirationDays"=',t,"less than minimum days:",B,", setting to minimum."),t=B),R.log("API / Setting cookie age to",t,"days."),S.dispatch(c.SET_COOKIE_AGE,t*G)},t.extendCookieLifetime=function(e){e=s.extend({isEnabled:!0},e),R.log("API / Setting cookie automatic lifetime extension to",e.isEnabled),S.dispatch(c.SET_COOKIE_AUTO_REFRESH,e.isEnabled)},t.cookieDomain=function(e){R.log("API / Setting cookie domain to",e.cookieDomain),S.dispatch(c.SET_COOKIE_DOMAIN,e.cookieDomain)},t.disable=function(e){if(e.scope){if("tracking"!==e.scope)throw new Error('Unknown "scope" for disable: '+e.scope);R.log("API / Disabling tracking"),S.dispatch(c.LOAD_DIRECTIVE,{trackingDisabled:!0})}else R.log("API / Disabling everything"),S.dispatch(c.LOAD_DIRECTIVE,{disabled:!0})},t.log=function(e){var t=e.level,i=e.match;s.isUndefined(t)&&(t="INFO"),s.isUndefined(i)&&(i=""),R.setLogMatcher(i),R.setLogLevel(t)},t.registerModule=function(e){var t="custom/"+e.moduleName;if(l[t]||u.get(t))throw new Error('Module name "'+t+'" is reserved. Will not be registered as plugin.');w.registerApiModule(t,e.module)},t.dataFromSource=function(e){var t=e.source;h.makeAsyncRequest(t),h.resolveRequest(t,e.data)},t.addListener=function(e){if(!s.isFunction(e.handler))throw new Error("A handler function must be supplied");e=s.omit(e,"type"),e.publicOnly=!0,e.emitErrors=!0;var t=e.handler;e.handler=function(e){try{return t(e)}catch(e){throw new z(e)}},y.on(e)},t.removeListener=function(e){if(!e.token)throw new Error("Must supply a token to removeListener");y.off(e.token)},t.load=function(e){e.data=s.extend({},e.data),d.normalizeClientData(e.data),S.dispatch(c.DATA_LOADED,{data:e.data})},t.integrationSettings=function(e){if(!e.id)throw new Error("id is required");if(!e.settings)throw new Error("settings is required");S.dispatch(c.SET_INTEGRATION_SETTINGS,s.extend({},e.settings,{id:e.id}))},t.bucketVisitor=function(e){if(!e.variationId&&s.isUndefined(e.variationIndex)||e.variationId&&e.variationIndex)throw new Error("One of a variationId or a variationIndex is required.");if(!e.experimentId)throw new Error("An experimentId is required.");var t,i,n=e.campaignId;if(n){if(t=k.get(n),!t)throw new Error("Could not find layer "+n)}else if(t=k.getLayerByExperimentId(e.experimentId),n=t.id,!n)throw new Error("Could not find layer for experiment "+e.experimentId);if(i=s.find(t.experiments,{id:e.experimentId}),!i)throw new Error("Could not find experiment "+e.experimentId+" in layer "+n);var r=e.variationId;if(s.isUndefined(e.variationIndex)){if(!s.find(i.variations,{id:r}))throw new Error("Cound not find variation "+r+" in experiment "+e.experimentId)}else if(r=i.variations[e.variationIndex].id,!r)throw new Error("Could not find variation at index "+e.variationIndex+" in experiment "+e.experimentId);O.updateVariationIdMap(n,e.experimentId,r),V.getBucketingId()&&O.persistVariationIdMap()},t.waitForOriginSync=function(e){if(!s.isArray(e.canonicalOrigins))throw new Error("canonicalOrigins must be an array. Got: "+T.stringify(e.canonicalOrigins));s.each(e.canonicalOrigins,(function(e){if(!s.isString(e))throw new Error("Each item in canonicalOrigins must be a string. Found type "+typeof e)})),S.dispatch(c.XDOMAIN_SET_CANONICAL_ORIGINS,{canonicalOrigins:e.canonicalOrigins})},t.disableCrossOrigin=function(){R.log("API / cross origin tracking is DISABLED"),S.dispatch(c.XDOMAIN_SET_DISABLED,{disabled:!0})},t.activate=function(){x.shouldActivate()&&!F?(s.forEach(L.getActiveViewStates(),(function(e){D.deactivate(P.get(e.id))})),S.dispatch(c.RESET_VIEW_STATES),g.emitActivateEvent()):R.debug("Not activating.")},t.sendEvents=function(){g.emitSendEvents()},t.holdEvents=function(){g.emitHoldEvents()}}),(function(e,t,i){var n=i(2),r=i(25);t.normalizeClientData=function(e){!e.listTargetingKeys&&e.listTargetingCookies&&(e.listTargetingKeys=n.map(e.listTargetingCookies,(function(e){return{type:r.ListTargetingKeyTypes.COOKIE,key:e}})),delete e.listTargetingCookies)}}),(function(e,t,i){function n(e,t,i){var n=u({activeViewStates:z.getActiveViewStates(),visitorProfile:W.getVisitorProfile(),layerStates:H.getLayerStatesForAnalytics()}),r=i&&i.pageId?d(i):z.getActiveViewTags(),a=v.extend({},r,t),o=i&&i.category?i.category:w.OTHER;return v.extend(n,{eventEntityId:i&&i.id,eventApiName:e,eventCategory:o,eventTags:a})}function r(e,t){var i=u({activeViewStates:z.getActiveViewStates(),visitorProfile:W.getVisitorProfile(),layerStates:H.getLayerStatesForAnalytics()});return v.extend(i,{pageId:e.id,pageApiName:e.apiName,viewCategory:e.category,eventTags:t.metadata})}function a(e){var t=u({activeViewStates:z.getActiveViewStates(),visitorProfile:W.getVisitorProfile(),layerStates:H.getLayerStatesForAnalytics()}),i=e.config&&e.config.selector?e.config.selector:e.eventFilter.selector,n=e.apiName,r=e.category||w.OTHER,a=e.id,o=d(e);return v.extend(t,{eventApiName:n,eventCategory:r,eventEntityId:a,eventTags:o,pageId:e.pageId,selector:i})}function o(){var e=u({activeViewStates:[],visitorProfile:W.getVisitorProfile(),layerStates:H.getLayerStatesForAnalytics()});return v.extend(e,{eventTags:{}})}function s(e,t,i,n){var r=null,a=null,o=null;if(t.experimentId){var s=v.find(n.experiments,{id:t.experimentId});if(s&&(r=s.name||null,o=s.integrationSettings,t.variationId)){var c=v.find(s.variations,{id:t.variationId});c&&(a=c.name||null)}}var u=V.getReferrer()||A.getReferrer(),l={sessionId:B.getSessionId(),decisionTicketAudienceIds:i.audienceIds,visitorId:$.getRandomId(),decisionId:e,activationId:G.getActivationId(),namespace:G.getNamespace(),timestamp:y.now(),pageId:i.pageId||null,variationId:t.variationId,variationName:a,experimentId:t.experimentId,experimentName:r,layerId:t.layerId,layerName:n.name,layerPolicy:n.policy,accountId:G.getAccountId(),projectId:G.getProjectId(),revision:String(G.getRevision()),clientName:U.getClientName(),clientVersion:U.getClientVersion(),referrer:u,integrationStringVersion:te?n.integrationStringVersion:n.integrationStringVersion||1,integrationSettings:v.extend({},n.integrationSettings,o)};return l}function c(e,t){var i=v.extend({},e,{isLayerHoldback:t,isGlobalHoldback:!1,clientName:v.isNull(e.clientName)?S.NAME:e.clientName,integrationStringVersion:te?e.integrationStringVersion:v.isNull(e.integrationStringVersion)?1:e.integrationStringVersion,anonymizeIP:v.isNull(G.getAnonymizeIP())?void 0:G.getAnonymizeIP(),activationId:G.getActivationId(),decisionTicketAudienceIds:[],sessionId:B.getSessionId(),activeViewStates:[],userFeatures:f(W.getVisitorProfile()),layerStates:H.getLayerStatesForAnalytics()});return i}function u(e){var t=V.getReferrer()||A.getReferrer(),i={eventId:M.generate(),timestamp:y.now(),revision:G.getRevision(),clientName:U.getClientName(),clientVersion:U.getClientVersion(),projectId:G.getProjectId(),accountId:G.getAccountId(),activationId:G.getActivationId(),sessionId:B.getSessionId(),isGlobalHoldback:G.isGlobalHoldback(),namespace:G.getNamespace(),referrer:t,visitorId:$.getRandomId(),activeViewStates:e.activeViewStates,layerStates:e.layerStates,userFeatures:f(e.visitorProfile)};return i}function l(e){var t=z.getViewState(e),i=t&&t.isActive?t.metadata:{};return i}function d(e){var t={};return e.pageId?l(e.pageId):t}function f(e){var t=j.getAllPlugins(R.PluginTypes.visitorProfileProviders),i=v.filter(t,{shouldTrack:!0}),n={id:null,type:null,name:"",value:null,shouldIndex:!0};return v.reduce(i,(function(t,i){try{var r=i.provides,a=e[r],o=[];if(!v.isUndefined(a)){v.isObject(a)?o=v.map(a,(function(e,t){var i=v.isObject(e)?e:{value:e};return v.extend({},{type:r,name:t},i)})):o.push({type:r,value:a});var s=v(o).map((function(e){return v.pick(v.extend({},n,e),v.keys(n))})).filter((function(e){return!!e.value})).value();t=t.concat(s)}}catch(e){L.warn("Error evaluating userFeature against visitorProfile:",e)}return t}),[])}function p(e,t,i){var n=g(e,i);L.debug("Found "+n.length+" analytics integrations defining a "+e+" hook"),L.debug("Calling each with data: ",t),v.each(n,(function(e){try{L.debug("Calling plugin: "+e.name),e.hookFn(t),L.debug("Called plugin: "+e.name)}catch(e){L.error(e)}}))}function g(e,t){var i=[];return v.each(j.getAllPlugins(R.PluginTypes.analyticsTrackers),(function(n,r){if(n[e]&&(!t||!n[t]))try{i.push({name:r,hookFn:T.evaluate(n[e])})}catch(e){L.error(e)}})),i}function h(e,t,i){var n=_(e,t);L.debug("Found "+n.length+" analytics integrations  defining a trackLayerDecision "+e+" timing of "+t.join("|")),L.debug("Calling each with data: ",i),v.each(n,(function(e){try{L.debug("Calling plugin: "+e.name),e.hookFn(i),L.debug("Called plugin: "+e.name)}catch(e){L.error(e)}}))}function _(e,t){var i=[];return v.each(j.getAllPlugins(R.PluginTypes.analyticsTrackers),(function(n,r){v.includes(t,n[e])&&i.push({name:r,hookFn:n.trackLayerDecision})})),i}var v=i(2),E=i(7),m=i(86),I=i(71),y=i(24),S=i(32),T=i(16),A=i(80),R=i(25),w=i(73),b=i(87),D=i(111),O=i(112),C=i(9),N=i(113),L=i(23),P=(i(83),i(12).Promise),V=i(99),k=i(114),x=i(116),F=i(115),M=i(5),U=T.get("stores/client_metadata"),G=T.get("stores/global"),B=T.get("stores/session"),z=T.get("stores/view"),j=T.get("stores/plugins"),H=T.get("stores/layer"),K=T.get("stores/layer_data"),Y=T.get("stores/observed_redirect"),q=T.get("stores/pending_redirect"),W=T.get("stores/visitor"),X=T.get("stores/directive"),Q=T.get("stores/event_data"),$=T.get("stores/visitor_id"),J="COOKIE",Z=!0,ee=1e3,te=!1;t.trackClientActivation=function(){if(X.shouldSendTrackingData()){var e=o();return p("onClientActivation",e),e}},t.trackCustomEvent=function(e,t,i){t=t||{},i||(i=Q.getByApiName(e));var r=n(e,t,i),a={name:e,type:O.CUSTOM,category:r.eventCategory,tags:v.omit(r.eventTags,"revenue")};if(v.isUndefined(t.revenue)||(a.revenue=t.revenue),m.emitAnalyticsEvent({name:i?i.name||i.apiName:e,apiName:i?i.apiName:void 0,type:O.CUSTOM,tags:v.omit(r.eventTags,"revenue"),category:r.eventCategory,metrics:a.revenue?{revenue:a.revenue}:{}},!X.shouldSendTrackingData()),X.shouldSendTrackingData())return I.addEvent(a),p("onCustomEvent",r),r},t.trackDecisionEvent=function(e,t,i){i||(i=K.get(e.layerId));var n=M.generate();C.dispatch(E.RECORD_LAYER_DECISION_EVENT_ID,{layerId:e.layerId,pageId:t.pageId,decisionId:n});var r=s(n,e,t,i),a=q.isExpectingRedirect(),o=q.getLayerId(),u=N.description(i);if(a&&o===i.id&&(k.persist(r,J),L.log("Relaying decision for redirect Campaign",u)),!X.shouldSendTrackingData())return void L.log("Analytics / Not tracking decision for Campaign",N.description(i));var l=c(r,e.isLayerHoldback);if(a&&o===i.id){var d=F.TrackLayerDecisionTimingFlags.preRedirectPolicy;l.timing=d,h(d,[F.PreRedirectPolicies.PERSIST_BEFORE_AND_TRACK_DURING_REDIRECT],l),L.log("Called trackLayerDecision for redirect Campaign",u,l)}else{var d=F.TrackLayerDecisionTimingFlags.nonRedirectPolicy;l.timing=d,h(d,[F.NonRedirectPolicies.TRACK_IMMEDIATELY],l),L.log("Called trackLayerDecision for non-redirect Campaign",u,l)}},t.trackPostRedirectDecisionEvent=function(){if(!X.shouldSendTrackingData())return P.resolve();if(Y.hasTracked())return P.resolve();var e=Y.get();if(!e)return P.resolve();var t=c(e,!1),i=F.TrackLayerDecisionTimingFlags.postRedirectPolicy;if(t.timing=i,h(i,[F.PostRedirectPolicies.TRACK_IMMEDIATELY],t),Z){var n=new P(function(e){var t=b.on({filter:{type:D.TYPES.LIFECYCLE,name:"originsSynced"},handler:function(){e(),b.off(t)}})}),r=x.makeTimeoutPromise(ee);return P.race([n,r]).then((function(){L.log("Calling trackers after successful sync")}),(function(e){L.warn("Calling trackers after failed sync:",e)})).then((function(){t=c(e,!1),t.timing=F.TrackLayerDecisionTimingFlags.postRedirectPolicy,h(F.TrackLayerDecisionTimingFlags.postRedirectPolicy,[F.PostRedirectPolicies.TRACK_AFTER_SYNC],t),C.dispatch(E.REGISTER_TRACKED_REDIRECT_DATA)}))["catch"]((function(e){L.error("Error when calling trackers after sync:",e)}))}return h(F.TrackLayerDecisionTimingFlags.postRedirectPolicy,[F.PostRedirectPolicies.TRACK_AFTER_SYNC],t),C.dispatch(E.REGISTER_TRACKED_REDIRECT_DATA),P.resolve()},t.trackClickEvent=function(e){var t=a(e),i={name:e.apiName,type:e.eventType,category:t.eventCategory,tags:t.eventTags};if(m.emitAnalyticsEvent({name:e.name||e.apiName,apiName:e?e.apiName:void 0,type:e.eventType,category:t.eventCategory,tags:t.eventTags,metrics:{}},!X.shouldSendTrackingData()),X.shouldSendTrackingData())return I.addEvent(i),p("onClickEvent",t),t},t.trackViewActivation=function(e,t){if(t||(t=z.getViewState(e.id)),!t.isActive)return void L.debug("Inactive view passed to `trackViewActivation`");var i=r(e,t);return m.emitAnalyticsEvent({name:e.name||i.pageApiName,apiName:i.pageApiName,type:O.PAGEVIEW,category:i.viewCategory,tags:i.eventTags,metrics:{}},!X.shouldSendTrackingData()),X.shouldSendTrackingData()?(I.addEvent({name:i.pageApiName,type:O.PAGEVIEW,category:i.viewCategory,tags:i.eventTags}),C.dispatch(E.TRACK_VIEW_ACTIVATED_EVENT,{pageId:e.id,eventData:i}),p("onPageActivated",i),i):void 0}}),(function(e,t){t.TYPES={ACTION:"action",ANALYTICS:"analytics",EDITOR:"editor",LIFECYCLE:"lifecycle"}}),(function(e,t){
e.exports={CLICK:"click",CUSTOM:"custom",ENGAGEMENT:"engagement",PAGEVIEW:"pageview"}}),(function(e,t,i){var n=i(2),r=i(7),a=i(24),o=i(16),s=i(9),c=o.get("stores/global"),u=o.get("stores/session"),l=2e3;t.recordLayerDecision=function(e,t,i){return s.dispatch(r.RECORD_LAYER_DECISION,{layerId:e,decision:i,decisionTicket:t,sessionId:u.getSessionId(),activationId:c.getActivationId(),timestamp:a.now(),revision:c.getRevision(),namespace:c.getNamespace(),pageId:t.pageId}),i},t.relatedAudienceIds=function(e){var t={},i=["and","or","not"];return n.each(e.experiments,(function(e){n.each(n.flattenDeep(e.audienceIds),(function(e){n.includes(i,e)||(t[e]=!0)}))})),n.keys(t)},t.getActivationTimeout=function(e){var t=e.activation;return t&&null!==t.timeout&&void 0!==t.timeout?t.timeout:l},t.description=function(e){return(e.name?'"'+e.name+'" ':"")+"("+e.id+")"},t.createSingle=function(e,t,i){var n={id:e,policy:"single_experiment",holdback:0,experiments:[{id:t||"",variations:[{id:i||"",actions:[]}]}],integrationStringVersion:1};return n},t.createLayerState=function(e,t,i,n){var r={layerId:e,decision:{layerId:e,experimentId:t,variationId:i,isLayerHoldback:n||!1},decisionTicket:{audienceIds:[]}};return r},t.getIntegrationTypes=function(e){return n.keys(n.reduce(n.keys(e.integrationSettings),(function(e,t){return n.isNaN(Number(t))||(t="custom"),e[t]=1,e}),{}))}}),(function(e,t,i){function n(e){try{var t=r(e)}catch(e){return v.error("Relay / Error computing redirect relay cookie: ",e),void p.emitError(e)}v.debug("Relay / Setting redirect relay cookie:",t);try{f.set(h.COOKIES.REDIRECT,t,{maxAge:5,encodeValue:!1})}catch(e){v.error("Relay / Failed to set redirect relay cookie",e),p.emitError(e)}}function r(e){var t=[],i=l.reduce(e,(function(e,i,n){var r=S[n];return r?(r.isMulti?l.forEach(i,(function(t,i){t=r.valueToValueString?r.valueToValueString(t,i):String(t),l.isNull(t)||(t=(r.encodeValueString||encodeURIComponent)(t),e.push(encodeURIComponent(r.relayName+I+i)+"="+t))})):l.isNull(i)||(i=(r.valueToValueString||String)(i),i=(r.encodeValueString||encodeURIComponent)(i),e.push(r.relayName+"="+i)),e):(t.push(n),e)}),[]);if(t.length)throw new Error("Relay / Don't know how to relay some fields:",t);return i.sort(),i.join("&")}function a(){var e=f.get(h.COOKIES.REDIRECT,!1);if(e)return v.log("Relay / Found redirect cookie:",e),e}function o(e){var t={},i=e.split("&");return l.forEach(i,(function(e){var i=e.split("=");if(2!==i.length)return void v.warn("Relay / Skipping invalid segment:",e);var n=f.safeDecodeURIComponent(i[0]),r=T[n];if(!r&&(r=l.find(y,(function(e){return e.isMulti&&0===n.indexOf(e.relayName+I)})),!r))return void v.warn("Relay / Skipping segment with unknown field identifier:",e,n);var a=i[1];try{if(r.isMulti){t[r.name]=t[r.name]||{};var o=n.substring(r.relayName.length+I.length);a=(r.decodeValueString||f.safeDecodeURIComponent)(a),a=(r.valueFromValueString||l.identity)(a,o),t[r.name][o]=a}else a=(r.decodeValueString||f.safeDecodeURIComponent)(a),a=(r.valueFromValueString||l.identity)(a),t[r.name]=a}catch(t){return v.warn("Relay / Skipping segment due to decode or parse error:",e,t),void p.emitError(t)}})),t}function s(e,t){var i=null;if(e){var n=m.getPlugin(h.PluginTypes.analyticsTrackers,t);if(n&&l.isFunction(n.serializeSettings))try{i=n.serializeSettings(e)}catch(e){v.warn("Analytics / Failed to persist integrationSettings for plugin:",t,e)}}return i}function c(e,t){var i=null,n=m.getPlugin(h.PluginTypes.analyticsTrackers,t);if(n&&l.isFunction(n.deserializeSettings))try{i=n.deserializeSettings(e)}catch(e){v.warn("Analytics / Failed to persist integrationSettings for plugin:",t,e)}return i}function u(e){var t=e.pageId||void 0;_.dispatch(d.RECORD_LAYER_DECISION,{layerId:e.layerId,decision:{layerId:e.layerId,experimentId:e.experimentId,variationId:e.variationId,isLayerHoldback:!1},decisionTicket:{audienceIds:e.decisionTicketAudienceIds,bucketingId:e.visitorId,globalHoldback:0,preferredVariationMap:void 0,pageId:t,activationId:e.activationId},sessionId:e.sessionId,activationId:e.activationId,timestamp:e.timestamp,revision:e.revision,namespace:e.namespace,pageId:t}),_.dispatch(d.RECORD_LAYER_DECISION_EVENT_ID,{layerId:e.layerId,pageId:t,decisionId:e.decisionId}),_.dispatch(d.ACTION_EXECUTED,{sessionId:e.sessionId,layerId:e.layerId,pageId:e.pageId,timestamp:e.timestamp,activationId:e.activationId})}var l=i(2),d=i(7),f=i(75),p=i(86),g=i(16),h=i(25),_=i(9),v=i(23),E=i(115),m=g.get("stores/plugins"),I=".",y=[{name:"sessionId",relayName:"s"},{name:"decisionTicketAudienceIds",relayName:"as",valueToValueString:function(e){return l.map(e,encodeURIComponent).join(",")},encodeValueString:l.identity,decodeValueString:l.identity,valueFromValueString:function(e){return l.map(e.split(","),f.safeDecodeURIComponent)}},{name:"decisionId",relayName:"d"},{name:"activationId",relayName:"aId"},{name:"pageId",relayName:"vId",isNullable:!0},{name:"variationId",relayName:"v",isNullable:!0},{name:"referrer",relayName:"r"},{name:"timestamp",relayName:"t",valueFromValueString:Number},{name:"visitorId",relayName:"i"},{name:"projectId",relayName:"p"},{name:"revision",relayName:"n"},{name:"clientName",relayName:"cN",isNullable:!0},{name:"clientVersion",relayName:"cV"},{name:"namespace",relayName:"ns"},{name:"accountId",relayName:"a"},{name:"layerId",relayName:"l"},{name:"layerName",relayName:"lN",isNullable:!0},{name:"layerPolicy",relayName:"lP"},{name:"experimentId",relayName:"x",isNullable:!0},{name:"experimentName",relayName:"xN",isNullable:!0},{name:"variationName",relayName:"vN",isNullable:!0},{name:"integrationStringVersion",relayName:"isv",valueFromValueString:Number,isNullable:!0},{name:"integrationSettings",relayName:"iS",isMulti:!0,valueToValueString:s,valueFromValueString:c,isNullable:!0}],S={},T={};l.forEach(y,(function(e){S[e.name]=e,T[e.relayName]=e})),t.persist=function(e,t){t===E.RedirectRelayMedia.COOKIE?n(e):v.error("Relay / Unsupported redirect relay medium: "+t)},t.load=function(e){if(e||(e=a()),e){var t=o(e);if(t){var i=[];return l.forEach(y,(function(e){(l.isNull(t[e.name])||l.isUndefined(t[e.name]))&&(e.isNullable?t[e.name]=null:(delete t[e.name],i.push(e.name)))})),i.length?void v.error("Relay / Observed redirect data with missing fields:",i):(_.dispatch(d.LOAD_REDIRECT_DATA,t),_.dispatch(d.ADD_CLEANUP_FN,{lifecycle:h.Lifecycle.postVisitorProfileLoad,cleanupFn:function(){u(t)}}),t)}}}}),(function(e,t,i){var n=i(8);t.TrackLayerDecisionTimingFlags=n({preRedirectPolicy:null,postRedirectPolicy:null,nonRedirectPolicy:null}),t.PreRedirectPolicies=n({PERSIST_BEFORE_AND_TRACK_DURING_REDIRECT:null,PERSIST_BEFORE_REDIRECT:null}),t.PostRedirectPolicies=n({TRACK_IMMEDIATELY:null,TRACK_AFTER_SYNC:null}),t.NonRedirectPolicies=n({TRACK_IMMEDIATELY:null}),t.RedirectRelayMedia=n({COOKIE:null})}),(function(e,t,i){var n=i(12).Promise,r=i(40);t.makeTimeoutPromise=function(e){return new n(function(t,i){r.setTimeout((function(){i(new Error("Timed out after "+e+" ms"))}),e)})}}),(function(e,t,i){function n(e){var t=["type","selector","attributes","value"],i=r.extend({},e);return i.changeSet=r.map(e.changeSet,(function(e){return r.pick(l.dereferenceChangeId(e),t)})),i}var r=i(2),a=i(16),o=a.get("stores/audience_data"),s=i(87),c=i(111),u=i(96),l=i(98);t.emitLayerDecided=function(e){var t=e.decisionTicket?e.decisionTicket.audienceIds:[],i=r.map(t,(function(e){return{id:e,name:o.get(e).name}})),n={type:c.TYPES.LIFECYCLE,name:"layerDecided",data:r.extend(e,{audiences:i})},a=l.translateLayerEventToCampaignEvent(n);s.emit(n),s.emit(a)},t.emitViewActivated=function(e){var t={type:c.TYPES.LIFECYCLE,name:"viewActivated",data:e},i=l.translateViewActivatedToPageActivated(t);s.emit(t),s.emit(i)},t.emitViewsActivated=function(e){var t={type:c.TYPES.LIFECYCLE,name:"viewsActivated",data:e};s.emit(t)},t.emitPageDeactivated=function(e){var t={type:c.TYPES.LIFECYCLE,name:"pageDeactivated",data:e};s.emit(t)},t.emitActivateEvent=function(){s.emit({type:c.TYPES.LIFECYCLE,name:"activate"},!0)},t.emitActivatedEvent=function(){s.emit({type:c.TYPES.LIFECYCLE,name:"activated"})},t.emitInitializedEvent=function(){var e={type:c.TYPES.LIFECYCLE,name:"initialized"};window.optimizely&&(window.optimizely.initialized=!0),s.emit(e)},t.emitOriginsSyncedEvent=function(){var e={type:c.TYPES.LIFECYCLE,name:"originsSynced"};s.emit(e)},t.emitActionAppliedEvent=function(e){var t={type:e.type,campaignId:e.layerId,pageId:e.pageId,experimentId:e.experimentId,variationId:e.variationId};u.defineProperty(t,"changes",(function(){return n(e).changeSet}),"actionAppliedEvent");var i={type:c.TYPES.ACTION,name:"applied",data:t};s.emit(i)},t.emitActionsForDecisionAppliedEvent=function(e,t){var i={decision:e};u.defineProperty(i,"actions",(function(){return r.map(t,n)}),"appliedAllForDecisionEvent");var a={type:c.TYPES.ACTION,name:"appliedAllForDecision",data:i};s.emit(a)},t.emitSendEvents=function(){var e={type:c.TYPES.ANALYTICS,name:"sendEvents"};s.emit(e)},t.emitHoldEvents=function(){var e={type:c.TYPES.ANALYTICS,name:"holdEvents"};s.emit(e)}}),(function(e,t,i){function n(){var e=Boolean(m.result(window.optimizely,"initialized"));R.dispatch(I.LOAD_DIRECTIVE,{alreadyInitialized:e})}function r(){R.dispatch(I.LOAD_DIRECTIVE,{mutationObserverAPISupported:C.isMutationObserverAPISupported()})}function a(){var e=C.getUserAgent()||"";if(!m.isString(e))return void w.warn("Directive / userAgent not a string");e=e.toLowerCase();var t=["googlebot","yahoo! slurp","bingbot","bingpreview","msnbot","keynote","ktxn","khte","gomezagent","alertsite","yottaamonitor","pingdom.com_bot","aihitbot","baiduspider","adsbot-google","mediapartners-google","applebot","catchpoint","phantomjs","moatbot","facebookexternalhit"],i=function(t){if(m.includes(e,t))return w.warn("Directive / Matches bot:",t),!0};m.some(t,i)&&(w.log("Directive / Disabling tracking"),R.dispatch(I.LOAD_DIRECTIVE,{trackingDisabled:!0}))}function o(){var e=S.get(A.COOKIES.OPT_OUT),t=D.getQueryParamValue(N.OPT_OUT),i="You have successfully opted out of Optimizely for this domain.",n="You are NOT opted out of Optimizely for this domain.",r="true"===t||"false"===t;if(r){var a="true"===t;R.dispatch(I.LOAD_DIRECTIVE,{shouldOptOut:a}),C.alert(a?i:n)}else e&&R.dispatch(I.LOAD_DIRECTIVE,{shouldOptOut:"true"===e})}function s(){var e=!1,t=[N.AB_PREVIEW,N.DISABLE];t.push(N.EDITOR);for(var i=0;i<t.length;i++)if("true"===D.getQueryParamValue(t[i])){w.warn("Directive / Not activating because "+t[i]+" is set."),e=!0;break}R.dispatch(I.LOAD_DIRECTIVE,{disabled:e})}function c(){R.dispatch(I.LOAD_DIRECTIVE,{isPreview:!1})}function u(){var e=D.getQueryParamValue(N.LEGACY_PREVIEW);e&&w.log("Directive / Is legacy preview mode"),R.dispatch(I.LOAD_DIRECTIVE,{isLegacyPreview:!!e})}function l(){R.dispatch(I.LOAD_DIRECTIVE,{isEditor:!1})}function d(){R.dispatch(I.LOAD_DIRECTIVE,{isSlave:!1})}function f(){var e=C.getGlobal("optlyDesktop"),t=!(!e||m.isUndefined(e["p13nInner"]));t&&w.log("Directive / Is running in desktop app editor"),R.dispatch(I.LOAD_DIRECTIVE,{isRunningInDesktopApp:t})}function p(){var e="true"===D.getQueryParamValue(N.EDITOR_V2);e&&w.log("Directive / Is running in editor"),R.dispatch(I.LOAD_DIRECTIVE,{isRunningInV2Editor:e})}function g(){var e=S.get(A.COOKIES.TOKEN)||null,t=D.getQueryParamValue(N.TOKEN)||e;R.dispatch(I.LOAD_DIRECTIVE,{projectToken:t})}function h(){var e=S.get(A.COOKIES.PREVIEW),t=[],i=D.getQueryParamValue(N.FORCE_AUDIENCES);if(i)t=S.safeDecodeURIComponent(i).split(",");else if(e)try{var n=O.parse(e);t=n.forceAudienceIds}catch(t){var r=new b("Failed to parse previewCookie in registerForceAudienceIds: "+e),a={originalMessage:t.message,userError:!0};y.emitError(r,a)}t.length&&(w.log("Directive / Force Audience IDs:",t),R.dispatch(I.LOAD_DIRECTIVE,{forceAudienceIds:t}))}function _(){var e=S.get(A.COOKIES.PREVIEW),t=[],i=D.getQueryParamValue(N.FORCE_VARIATIONS);if(i)t=S.safeDecodeURIComponent(i).split(",");else if(e)try{var n=O.parse(e);t=n.forceVariationIds}catch(t){var r=new b("Failed to parse previewCookie in registerForceVariationIds: "+e),a={originalMessage:t.message,userError:!0};y.emitError(r,a)}t.length&&(w.log("Directive / Force Variation IDs:",t),R.dispatch(I.LOAD_DIRECTIVE,{forceVariationIds:t}))}function v(){var e=D.getQueryParamValue(N.FORCE_TRACKING);e&&R.dispatch(I.LOAD_DIRECTIVE,{forceTracking:e})}function E(){var e="OFF",t=D.getQueryParamValue("optimizely_log");if(t){var i=t.split(":");""!==i[0]&&(e=String(i[0]).toUpperCase()),"undefined"!=typeof i[1]&&w.setLogMatch(i[1])}w.setLogLevel(e)}var m=i(2),I=i(7),y=i(86),S=i(75),T=i(76).create,A=i(25),R=i(9),w=i(23),b=t.JSONParseError=T("JSONParseError"),D=i(119),O=i(26),C=i(40),N={AB_PREVIEW:"optimizely_show_preview",DISABLE:"optimizely_disable",EDITOR:"optimizely_editor",EDITOR_V2:"optimizely_p13n",FORCE_AUDIENCES:"optimizely_x_audiences",FORCE_VARIATIONS:"optimizely_x",LEGACY_PREVIEW:"optimizely_show_preview",OPT_OUT:"optimizely_opt_out",PREVIEW_LAYER_IDS:"optimizely_preview_layer_ids",TOKEN:"optimizely_token",FORCE_TRACKING:"optimizely_force_tracking"};t.populateDirectiveData=function(){E(),a(),n(),r(),o(),s(),l(),c(),u(),d(),f(),p(),g(),h(),_(),v()};var L=31536e3;t.setOptOut=function(e){e?(w.warn("Directive / Opting out"),S.set(A.COOKIES.OPT_OUT,"true",{maxAge:10*L},!0)):S.remove(A.COOKIES.OPT_OUT),R.dispatch(I.LOAD_DIRECTIVE,{shouldOptOut:e})}}),(function(e,t,i){var n=i(84),r=i(40);t.getLanguage=function(){return r.getNavigatorLanguage()},t.getQueryParams=n.getQueryParams,t.getQueryParamValue=n.getQueryParamValue,t.getUrl=function(){return r.getHref()}}),(function(e,t,i){function n(e){return e&&e.engine?e.engine:_?"edge-tracking":h?"edge-helper":f.getClientName()}var r=i(2),a=i(76).BaseError,o=i(24),s=i(16),c=i(80),u=i(23),l=i(40),d=i(91),f=s.get("stores/client_metadata"),p=s.get("stores/global"),g="https://errors.client.optimizely.com",h=!1,_=!1;t.handleError=function(e,t){function i(){return d.request({url:g+"/log",method:"POST",data:v,contentType:"application/json"}).then((function(e){u.log("Error Monitor / Logged error with response: ",e)}),(function(e){u.error("Failed to log error, response was: ",e)}))}var s=e.name||"Error",h=e.message||"",_=e.stack||null;e instanceof a&&(h instanceof Error?(h=h.message,_=e.message.stack):_=null);var v={timestamp:o.now(),clientEngine:n(t),clientVersion:f.getClientVersion(),accountId:p.getAccountId(),projectId:p.getProjectId(),errorClass:s,message:h,stacktrace:_},E=r.map(p.getExperimental(),(function(e,t){return{key:"exp_"+t,value:String(e)}}));t&&r.forEach(t,(function(e,t){r.isObject(e)||E.push({key:t,value:String(e)})}),[]),r.isEmpty(E)||(v.metadata=E),u.error("Logging error",v),c.isLoaded()?i():l.addEventListener("load",i)}}),(function(e,t,i){var n=i(2);t.create=function(e,t,i,r){var a=n.extend({category:"other"},r,{id:e,apiName:t,eventType:i});return a}}),(function(e,t,i){var n=i(2),r=i(7),a=i(16),o=i(25),s=i(87),c=i(9);t.registerApiModule=function(e,t){n.isArray(t)&&(t=a.evaluate(t)),c.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.apiModules,name:e,plugin:t})},t.registerDependency=function(e,t){var i=a.get(e);i||a.register(e,t)},t.registerVisitorProfileProvider=function(e){c.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.visitorProfileProviders,name:e.provides,plugin:e})},t.registerViewProvider=function(e){c.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.viewProviders,name:e.provides,plugin:e})},t.registerAudienceMatcher=function(e,t){c.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.audienceMatchers,name:e,plugin:t})},t.registerViewMatcher=function(e,t){c.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.viewMatchers,name:e,plugin:t})},t.registerAnalyticsTracker=function(e,t){c.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.analyticsTrackers,name:e,plugin:t})},t.registerViewTagLocator=function(e,t){c.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.viewTagLocators,name:e,plugin:t})},t.registerAudiencePlugin=function(e){e.dependencies&&n.each(e.dependencies,(function(e,i){t.registerDependency(i,e)}));var i,r="vendor."+e.vendor;i=n.isString(e.provider)?a.get(e.provider)(e.vendor):n.isFunction(e.provider)?e.provider(e.vendor):n.cloneDeep(e.provider),t.registerVisitorProfileProvider(n.extend(i,{provides:r}));var o;o=n.isString(e.matcher)?a.get(e.matcher):e.matcher;var s={fieldsNeeded:[r],match:function(e,t){return o(e[r],t)}};t.registerAudienceMatcher(r,s)},t.registerWidget=function(e){n.isArray(e)&&(e=a.evaluate(e));var t=s.on({filter:{type:"showWidget",name:e.widgetId},handler:e.showFn}),i=s.on({filter:{type:"hideWidget",name:e.widgetId},handler:e.hideFn});return{showToken:t,hideToken:i}},t.registerChangeApplier=function(e,t){c.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.changeAppliers,name:e,plugin:t})},t.registerDecider=function(e,t){c.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.deciders,name:e,plugin:t})},t.registerEventImplementation=function(e,t){c.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.eventImplementations,name:e,plugin:t})},t.registerViewTrigger=function(e,t){c.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.viewTriggers,name:e,plugin:t})}}),(function(e,t,i){function n(e,t){r.forEach(e,(function(e){if(e.eventType!==d.CUSTOM){var i=_.getPlugin(l.PluginTypes.eventImplementations,e.eventType);i?t?i.attach(e):i.detach(e):p.warn("No implementation found for event type:",e.eventType,"needed for event:",e)}}))}var r=i(2),a=i(7),o=i(117),s=i(124),c=i(24),u=i(16),l=i(25),d=i(112),f=i(9),p=i(23),g=i(125),h=u.get("stores/event_data"),_=u.get("stores/plugins"),v=u.get("stores/rum"),E=u.get("stores/view"),m=u.get("stores/view_data");t.parseViewTags=function(e){var i=t.evaluateViewTags(e);t.setParsedViewTags(e.id,i)},t.updateAllViewTags=function(){var e=E.getActiveViewStates();r.each(e,(function(e){var i=m.get(e.id);t.parseViewTags(i)}))},t.evaluateViewTags=function(e){if(!e.tags)return{};var t=r.reduce(e.tags,(function(e,t){try{e[t.apiName]=g.getTagValue(t)}catch(e){e instanceof g.Error?p.warn("Page / Ignoring unparseable tag",t,e):p.error(e)}return e}),{});return t},t.createViewTicket=function(){var e={};return r.each(_.getAllPlugins(l.PluginTypes.viewProviders),(function(t){e[t.provides]=u.evaluate(t.getter)})),e},t.registerViews=function(e){f.dispatch(a.REGISTER_VIEWS,{views:e})},t.activateViaAPI=function(e,i){i&&t.setUserSuppliedViewTags(e.id,i),t.activateMultiple([e],i)},t.getViewsAndActivate=function(e){var i=m.getAllViewsForActivationType(e);t.activateMultiple(i)},t.activateMultiple=function(e,i){var s=[];return r.each(e,(function(e){var c,u=E.getViewState(e.id),d=t.createViewTicket();if(u.isActive)if(e.deactivationEnabled)try{t.hasValidStaticConditions(e,d)||t.deactivate(e)}catch(i){p.error("Page / Error evaluating whether to deactivate page ",t.description(e),i)}else p.log("Not activating Page, already active ",t.description(e));else{try{if(c=t.hasValidStaticConditions(e,d),!c)return r.isBoolean(u.isActive)||t.setViewActiveState(e,!1),void p.log("Page / Failed to match page conditions for "+t.description(e),e.staticConditions)}catch(i){return r.isBoolean(u.isActive)||t.setViewActiveState(e,!1),void p.error("Page / Error evaluating whether to activate page ",t.description(e),i)}if(s.push(e),t.setViewActiveState(e,!0),p.log("Activated Page",t.description(e)),o.emitViewActivated({view:e,metadata:i}),v.getSampleRum()){var g=e.activationType||l.ViewActivationTypes.immediate;f.dispatch(a.RECORD_ACTIVATION_TYPE_USAGE,{activationType:g,entityId:e.id})}var _=h.getByPageId(e.id);n(_,!0)}})),r.isEmpty(s)||o.emitViewsActivated({views:s}),s},t.deactivate=function(e){var i=E.getViewState(e.id);if(!i.isActive)return void p.log("Not deactivating Page, already inactive ",t.description(e));t.setViewActiveState(e,!1),p.log("Deactivated Page",t.description(e)),o.emitPageDeactivated({page:e});var r=h.getByPageId(e.id);n(r,!1)},t.setViewActiveState=function(e,t){f.dispatch(a.SET_VIEW_ACTIVE_STATE,{view:e,timestamp:c.now(),isActive:t})},t.setGlobalTags=function(e){f.dispatch(a.SET_GLOBAL_TAGS,e)},t.setParsedViewTags=function(e,t){f.dispatch(a.UPDATE_PARSED_VIEW_METADATA,{pageId:e,metadata:t})},t.setUserSuppliedViewTags=function(e,t){f.dispatch(a.UPDATE_USER_SUPPLIED_METADATA,{pageId:e,metadata:t})},t.hasValidStaticConditions=function(e,t){var i={};if(r.isEmpty(e.staticConditions))return!0;var n=_.getAllPlugins(l.PluginTypes.viewMatchers);p.groupCollapsed("Page / Evaluating staticConditions:",e.staticConditions),p.debug("Matching to current value:",t);var o=s.evaluate(e.staticConditions,(function(e){var r=e.type,a=n[r];if(!a)throw new Error("Page / No matcher found for type="+r);return a&&(i[e.type]||(i[e.type]=!0)),a.match(t,e)}));return p.groupEnd(),v.getSampleRum()&&o&&f.dispatch(a.RECORD_VIEW_FEATURE_USAGE,{featuresUsed:r.keys(i),entityId:e.id}),o},t.description=function(e){return'"'+e.name+'" ('+e.id+")"},t.isActivationTypeImmediate=function(e){return e===l.ViewActivationTypes.immediate||!e},t.shouldTriggerImmediately=function(e){return e===l.ViewActivationTypes.DOMChanged||e===l.ViewActivationTypes.URLChanged||e===l.ViewActivationTypes.immediate||!e},t.create=function(e,t){var i={id:e,apiName:t,category:"other"};return i},t.createState=function(e){var t={id:e,isActive:!0,metadata:{},parsedMetadata:{},userSuppliedMetadata:{}};return t}}),(function(e,t,i){function n(e,t){for(var i,n,r=0;r<e.length;r++){if(i=o(e[r],t),i===!1)return!1;s.isUndefined(i)&&(n=!0)}if(!n)return!0}function r(e,t){for(var i,n=!1,r=0;r<e.length;r++){if(i=o(e[r],t),i===!0)return!0;s.isUndefined(i)&&(n=!0)}if(!n)return!1}function a(e,t){if(1!==e.length)return!1;var i=o(e[0],t);return s.isUndefined(i)?void 0:!i}function o(e,t){var i;if(s.isArray(e)){var n,r;e[0]in d?(n=e[0],r=e.slice(1)):(n=l.OR,r=e),u.groupCollapsed('Condition / Applying operator "'+n+'" with args',c.stringify(r));try{i=d[n](r,t),u.debug("Condition / Result:",i)}finally{u.groupEnd()}return i}return i=t(e),u.debug("Condition / Evaluated:",c.stringify(e),":",i),i}var s=i(2),c=i(26),u=i(23),l={AND:"and",OR:"or",NOT:"not"},d={};d[l.AND]=n,d[l.OR]=r,d[l.NOT]=a,e.exports={evaluate:o}}),(function(e,t,i){var n=i(25).PluginTypes,r=i(16),a=r.get("stores/plugins");t.getTagValue=function(e){var i=a.getPlugin(n.viewTagLocators,e.locatorType);if(!i)throw new t.Error("No locator registered for tag locatorType: "+e.locatorType);return i(e)},t.enums=i(126),t.Error=i(127).Error}),(function(e,t){t.locatorType={CSS_SELECTOR:"css_selector",JAVASCRIPT:"javascript",URL_REGEX:"url_regex"},t.valueType={STRING:"string",NUMBER:"number",CURRENCY:"currency"},t.nodeNames={INPUT:"INPUT",SELECT:"SELECT"}}),(function(e,t,i){var n=i(76).create;t.Error=n("TagError")}),(function(e,t){}),(function(e,t,i){var n=i(16);n.register("env/jquery",i(130))}),(function(e,t,i){var n,r=i(40);try{n=$}catch(e){}var a=r.getGlobal("$");n&&n!==a?e.exports=n:e.exports=a}),(function(e,t,i){var n=i(23),r=i(40),a="optimizelyDataApi";t.registerFunction=function(e,t){var i=r.getGlobal(a);i||(i={},r.setGlobal(a,i)),i[e]||(i[e]=t)},t.unregisterFunction=function(e){var t=r.getGlobal(a);t&&t[e]&&(t[e]=function(){n.log('Ignoring attempt to call "'+a+"."+e+'" which has been unregistered.')})},t.getFunction=function(e){return r.getGlobal(a)[e]}}),(function(e,t,i){var n=i(80),r=i(23),a=i(91);t.addScriptAsync=function(e,t){var i=n.querySelector("head"),a=n.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,t&&(a.onload=t),i.insertBefore(a,i.firstChild),r.debug("Asynchronously requesting "+e)},t.addScriptSync=function(e,i){try{var o="optimizely_synchronous_script_"+Math.floor(1e5*Math.random());if(e.indexOf('"')!==-1)return void r.error("Blocked attempt to load unsafe script: "+e);n.write('<script id="'+o+'" src="'+e+'"></script>');var s=n.querySelector("#"+o);if(!s)throw new Error("Document.write failed to append script");s.onload=i,s.onerror=function(n){r.warn("Failed to load script ("+e+") synchronously:",n),t.addScriptAsync(e,i)}}catch(n){r.debug("Document.write failed for "+e+": "+n.message);var c=function(e){var t=new Function(e.responseText);t(),i&&i()};return a.request({url:e,async:!1,contentType:"text/plain",success:c})["catch"]((function(n){r.error("Failed to load "+e+" via synchronous XHR: "+n.message),t.addScriptAsync(e,i)}))}}}),(function(e,t,i){function n(){var e=null;b.isNumber(e)&&0===ve.getCount()?($.log("Activating after delay of",e,"ms because no Experiments are running"),q.dispatch(L.SET_RUM_DATA,{data:{activateDfd:!0}}),ue.setTimeout(V.emitActivateEvent,e)):V.emitActivateEvent()}function r(e){Oe.handleError(e.data.error,e.data.metadata)}function a(){b.isArray(window.optimizely)&&(window.optimizely=b.filter(window.optimizely,(function(e){var t=!0;return!De.push(e,t)})))}function o(){var e=i(85),n=!!ce.getCurrentId(),r=!!n&&ce.hasSomeData();n?r?$.log("xd / Existing visitor; has data on this origin"):$.log("xd / Existing visitor; new to this origin"):$.log("xd / New visitor");var a=he.getAccountId(),o="https://a11391265293.cdn.optimizely.com".replace("__SUBDOMAIN__","a"+a+"."),c="/client_storage/a"+a+".html";e.subscribe((function(e,t){ce.checkKeyForVisitorId(e)&&Q.setItem(e,t)}));var u=e.fetchAll().then((function(t){if(!Re.getVisitorIdLocator()){var i=be.getCanonicalOrigins();if(i){var n=e.getXDomainUserId(t,i);n&&($.log("Syncing cross-origin visitor randomId:",n),ce.maybePersistVisitorId({randomId:n}))}}return ce.deleteOldForeignData(),t})).then(t.persistItemsWithId).then((function(e){if(ce.loadForeignData(),n&&!r){var t=!b.isEmpty(e);$.debug("xd / Loaded foreign data? ",t),s(t)}$.log("Loaded visitor data from foreign origins"),V.emitOriginsSyncedEvent()}),(function(e){throw n&&!r&&($.debug("xd / Failed to load foreign data:",e),s(!1,e)),e}));return ie.all([e.load(o,c)["catch"]((function(e){throw $.debug("xd / Failed to load iframe:",e),n&&!r&&s(!1,e),e})),u["catch"]((function(e){$.debug("xd / Ignored error syncing foreign data (expected if waitForOriginSync used):",e.message),$.debug("xd / Enqueuing sync to happen after visitorId set."),q.dispatch(L.ADD_CLEANUP_FN,{lifecycle:j.Lifecycle.postVisitorProfileLoad,cleanupFn:V.emitOriginsSyncedEvent})}))])}function s(e,t){q.dispatch(L.SET_RUM_DATA,{data:{extras:{xdAttempt:e,xdError:t?t.toString():void 0}}})}function c(e){var t=Se.getVisitorProfile();return ce.populateEagerVisitorData(e,t)}function u(e,t,i){e=e||[];var n=Ie.getAllPlugins(j.PluginTypes.visitorProfileProviders),r=he.getGlobalHoldbackThreshold(),a=Se.getVisitorProfile();ce.populateLazyVisitorData(n,a);var o=Re.getBucketingId();if(!o)throw new Error("bucketingId not set");var s,c=Se.getVisitorProfile();if(t&&!Pe){var u=we.getVariationIdMap();s=u[t.id]}var l={bucketingId:o,visitorProfile:c,audiences:e,globalHoldback:r,preferredVariationMap:s,layer:t};return t&&i&&U.isPageIdRelevant(t)?b.map(i,(function(e){return U.createTicket(b.extend({},l,{pageId:e}))})):[U.createTicket(l)]}function l(e){return{bucketingId:Re.getBucketingId(),preferredLayerId:we.getPreferredLayerMap()[e.id]}}function d(e){var i=ve.getAllByPageIds(e),n=ge.getForceVariationIds(),r=ge.getForceAudienceIds(),a=!b.isEmpty(n);a&&$.log("Force variations are in use. Disabling mutual exclusivity.");var o=a?{individual:i}:b.reduce(i,(function(e,t){return t.groupId?e.groups[t.groupId]||(e.groups[t.groupId]=_e.get(t.groupId)):e.individual.push(t),e}),{groups:{},individual:[]});$.log("Deciding Campaigns/Experiments for Page(s)",e);var s=b.map(o.groups,W.description).join(", ");$.log("Groups:",s);var c=b.map(o.individual,X.description).join(", ");$.log("Campaigns/Experiments not in Groups (by Campaign id):",c);var u=b.map(o.groups,b.partial(f,n,r,e))||[],l=b.map(o.individual,(function(i){var a=b.filter(i.pageIds,b.partial(b.includes,e));return t.decideAndExecuteLayerASAP(n,r,a,i)})),d=u.concat(l);return ie.all(d).then((function(t){var i=b.filter(t,(function(e){return!!e}));return $.log("All Campaigns/Experiments for Page(s) (by Campaign id)",e,"resolved:",b.map(i,X.description).join(", ")),i}))}function f(e,i,n,r){try{var a=l(r),o=U.decideGroup(r,a);if(o.reason)return $.debug("Not activating Group",W.description(r),"; reason:",o.reason),ye.getSampleRum()&&q.dispatch(L.RECORD_LAYER_FEATURE_USAGE,{feature:"mutex",entityId:r.id}),ie.resolve();var s=ve.get(o.layerId);if(!s)return $.debug("Visitor was bucketed into a Campaign ("+o.layerId+") which is not in this snippet"),ie.resolve();var c=b.filter(s.pageIds,b.partial(b.includes,n));return b.isEmpty(c)?($.debug("Not activating Group",W.description(r),"; reason: visitor was bucketed into a Campaign/Experiment not related to the currently-activating Page(s)"),ie.resolve()):(ye.getSampleRum()&&q.dispatch(L.RECORD_LAYER_FEATURE_USAGE,{feature:"mutex",entityId:r.id}),t.decideAndExecuteLayerASAP(e,i,c,s))}catch(e){return $.error("Error getting decision for Group",W.description(r),"; ",e),ie.reject(e)}}function p(e,t,i,n){return new ie(function(r,a){try{E(n,e,t,i,(function(a){b.each(a,(function(r){var a=r.pageId?[r.pageId]:i;$.debug("Deciding layer: ",n,"with decisionTicket: ",r,"and actionViewIds: ",a),g(n,e,t,a,r)})),r(n)}))}catch(e){$.error("Error getting decision for Campaign: "+X.description(n),e),a(e)}})}function g(e,i,n,r,a){var o=X.description(e);$.log("Activating Campaign",o,"on Page(s)",r),n.length&&($.log("Applying force audienceIds:",n,"to Campaign",o),a=b.cloneDeep(a),a.audienceIds=n);var s=t.decideLayer(e,a,i),c=!(!i.length&&!n.length),u=t.getActionsForDecision(e,s,c),l=w(u.actions,r);if(u.maybeExecute&&h(l,e,s,r),b.forEach(r,(function(){P.trackDecisionEvent(s,a)})),V.emitLayerDecided({layer:e,decisionTicket:a,decision:s}),s.error)throw s.error;if(ye.getSampleRum()){q.dispatch(L.RECORD_LAYER_POLICY_USAGE,{policy:e.policy,layerId:e.id});var d=v(u.actions);q.dispatch(L.RECORD_CHANGE_TYPE_USAGE,{changeTypes:b.keys(d),layerId:e.id}),b.isEmpty(e.integrationSettings)||q.dispatch(L.RECORD_INTEGRATION_USAGE,{integrations:X.getIntegrationTypes(e),layerId:e.id})}return U.isInCohort(s)?void(u.maybeExecute&&_(l,e,s,r)):void $.log("Not activating Campaign: "+X.description(e)+"; not in the cohort because:",s.reason)}function h(e,t,i,n){var r=X.description(t);$.log("Preparing actions",e,"for Campaign",r,"on Page(s)",n),b.forEach(e,N.prepareAction)}function _(e,t,i,n){var r=X.description(t);return $.log("Executing actions",e,"for Campaign",r,"on Page(s)",n),ie.all(b.map(e,(function(e){return N.executePreparedAction(e).then(b.partial(V.emitActionAppliedEvent,e))}))).then((function(){$.log("All page actions for",i,"applied:",e),V.emitActionsForDecisionAppliedEvent(i,e)}))["catch"]((function(e){$.warn("Error evaluating page actions for decision",i,"because:",e)}))}function v(e){var t={};return b.each(e,(function(e){b.each(e.changeSet,(function(e){t[e.type]||(t[e.type]=!0)}))})),t}function E(e,t,i,n,r){if(t.length||i.length)return void r(u([],void 0,n));var a=X.relatedAudienceIds(e),o=b.reduce(a,(function(e,t){var i=de.get(t);return i&&e.push(i),e}),[]),s=Ie.getAllPlugins(j.PluginTypes.audienceMatchers);if(ye.getSampleRum()){var c={};if(b.each(o,(function(e){b.extend(c,m(e.conditions,s))})),!b.isEmpty(c)){var l=b.keys(c);q.dispatch(L.RECORD_AUDIENCE_USAGE,{audienceTypes:l,layerId:e.id})}}S(o,s,X.getActivationTimeout(e),(function(){var t=u(o,e,n);b.map(t,(function(t){I(t,o,e)})),r(t)}))}function m(e,t){var i={};return b.each(e,(function(e){b.isArray(e)?b.extend(i,m(e,t)):b.isObject(e)&&t[e.type]&&(i[e.type]=!0)})),i}function I(e,t,i){var n=b.map(e.audienceIds,b.bind(de.get,de)),r=b.filter(t,(function(t){return!b.includes(e.audienceIds,t.id)}));$.log("When deciding Campaign",X.description(i),"visitor is in audiences:",y(n),"and not in audiences:",y(r))}function y(e){var t=[];return b.each(e,(function(e){t.push(e.name,e)})),t}function S(e,t,i,n){var r=b.reduce(e,(function(e,i){return b.extend(e,k.requiredAudienceFieldsForConditions(i.conditions,t))}),{}),a=b.reduce(r,(function(e,t){if(b.isUndefined(ce.getAttribute(t))){var i=ce.getPendingAttributeValue(t);b.isUndefined(i)||e.push(i)}return e}),[]);if(0===a.length)return n();var o=[].concat(e),s=ne.firstToResolve(b.map(a,(function(e){return ie.resolve(e).then((function(){var e=Se.getVisitorProfile();if(o=b.filter(o,(function(i){return b.isUndefined(k.isInAudience(e,i,t))})),!b.isEmpty(o))throw new Error("At least one audience is still pending")}))})));ie.race([s,new ie(function(e,t){
ue.setTimeout(t,i)})]).then((function(){$.log("Activating Campaign after pending Audiences resolved",e),n()}),(function(){$.log("Activating Campaign after timeout on Audiences",e),n()}))}function T(e,t,i){var n,r=X.description(e);return n=i.length?U.getDummyLayerDecision(e,i):U.decideLayer(e,t),$.log("Recording decision for Campaign",r,t,"->",n),X.recordLayerDecision(e.id,t,n),Pe||(n.variationId&&n.experimentId&&ce.updateVariationIdMap(e.id,n.experimentId,n.variationId),e.groupId&&ce.updatePreferredLayerMap(e.groupId,e.id)),n}function A(e){var t=pe.getCleanupFns(e);if(t.length>0){for(;t.length>0;)t.shift()();q.dispatch(L.CLEAR_CLEANUP_FN,{lifecycle:e})}}function R(e,t,i){var n=X.description(e),r="NOT applying changes for Campaign",a={actions:[],maybeExecute:!1};return a.actions=[].concat(fe.getLayerActions(t.layerId)||[],fe.getExperimentActions(t.experimentId)||[],fe.getExperimentVariationActions(t.experimentId,t.variationId)||[]),!i&&he.isGlobalHoldback()?($.log(r,n,"(visitor is in global holdback)"),a):t.isLayerHoldback?($.log(r,n,"(visitor is in layer holdback)"),a):t.experimentId&&t.variationId?(a.maybeExecute=!0,$.log("Got Actions for Campaign:",n,a.actions),a):($.log(r,n,"(visitor is not eligible for any Experiments)"),a)}function w(e,t){return b.filter(e,(function(e){return b.isUndefined(e.pageId)||b.includes(t,e.pageId)}))}var b=i(2),D=i(76).create,O=t.ActivationCodeError=D("ActivationCodeError"),C=t.ProjectJSError=D("ProjectJSError"),N=i(134),L=i(7),P=i(110),V=i(117),k=i(138),x=i(86),F=i(109),M=i(24),U=i(139),G=i(16),B=i(118),z=i(80),j=i(25),H=i(87),K=i(111),Y=i(144),q=i(9),W=i(143),X=i(113),Q=i(81).LocalStorage,$=i(23),J=i(145),Z=i(83),ee=i(122),te=i(88),ie=i(12).Promise,ne=i(146),re=i(114),ae=i(116),oe=i(136),se=i(123),ce=i(74),ue=i(40),G=i(16),le=G.get("stores/session"),de=G.get("stores/audience_data"),fe=G.get("stores/action_data"),pe=G.get("stores/cleanup"),ge=G.get("stores/directive"),he=G.get("stores/global"),_e=G.get("stores/group_data"),ve=G.get("stores/layer_data"),Ee=G.get("stores/layer"),me=G.get("stores/pending_events"),Ie=G.get("stores/plugins"),ye=G.get("stores/rum"),Se=G.get("stores/visitor"),Te=G.get("stores/view_data"),Ae=G.get("stores/view"),Re=G.get("stores/visitor_id"),we=G.get("stores/visitor_bucketing"),be=G.get("stores/xdomain"),De=i(93),Oe=i(120),Ce=i(1),Ne=1e3,Le=!1,Pe=!1,Ve=!1,ke=Pe||Ve,xe=1e3,Fe=t;t.initialize=function(e){return this.initGlobalStore(e.clientData),this.initializePlugins(e.plugins)},t.initGlobalStore=function(e){var e=e;F.normalizeClientData(e),H.on({filter:{type:"error"},handler:r}),q.dispatch(L.DATA_LOADED,{data:e}),$.log("Initialized with DATA:",e)},t.initializePlugins=function(e){if(a(),B.setOptOut(ge.shouldOptOut()),ge.isDisabled()||ge.shouldOptOut())return void $.log("Controller / Is disabled");if(Ce.queueBeacons(),z.isReady()?q.dispatch(L.SET_DOMCONTENTLOADED):z.addReadyHandler((function(){q.dispatch(L.SET_DOMCONTENTLOADED)})),!ke){Z.time("projectJS");var i=he.getProjectJS();if(b.isFunction(i))try{Y.apply(i)}catch(e){$.error("Error while executing projectJS: ",e),x.emitError(new C(e))}Z.timeEnd("projectJS")}b.each(e||[],(function(e){try{e(ee)}catch(e){x.emitInternalError(e)}})),b.each(he.getPlugins()||[],(function(e){try{Y.apply(e,[ee])}catch(e){x.emitError(e)}})),re.load();var r=H.on({filter:{type:"lifecycle",name:"activated"},handler:function(){Se.observe(ce.persistVisitorProfile),Ee.observe(ce.persistLayerStates),le.observe(ce.persistSessionState),me.observe(J.persistPendingEvents),Pe||we.observe(ce.persistVisitorBucketingStore),H.off(r)}});H.on({filter:{type:"lifecycle",name:"viewsActivated"},handler:t.onViewsActivated}),H.on({filter:{type:"lifecycle",name:"pageDeactivated"},handler:t.onPageDeactivated}),t.initializeApi();var o=J.getPendingEvents();if(o&&(q.dispatch(L.LOAD_PENDING_EVENTS,{events:o}),J.retryPendingEvents(o)),H.on({filter:{type:"lifecycle",name:"activate"},handler:t.activate}),V.emitInitializedEvent(),!ge.shouldActivate())return ie.resolve();var s=[];if(be.isDisabled())n();else{var c=t.initializeXDomainStorage();s.push(c);var u=Boolean(be.getCanonicalOrigins());if(u){var l=ae.makeTimeoutPromise(xe);ie.race([c,l])["catch"]((function(e){$.error("Failed to initialize xDomain storage: ",e)})).then(n)["catch"](Oe.handleError)}else n()}return ie.all(s)},t.activate=function(){try{var e=[];$.log("Activated client"),A(j.Lifecycle.preActivate);var t=M.now();q.dispatch(L.ACTIVATE,{activationId:String(t),activationTimestamp:t});var i=Te.getAll();se.registerViews(i),ce.setId(ce.getOrGenerateId()),e.push(P.trackPostRedirectDecisionEvent()),q.dispatch(L.MERGE_VARIATION_ID_MAP,{variationIdMap:ce.getVariationIdMap()}),q.dispatch(L.MERGE_PREFERRED_LAYER_MAP,{preferredLayerMap:ce.getPreferredLayerMap()}),A(j.Lifecycle.postVisitorProfileLoad),e.push(c(Ie.getAllPlugins(j.PluginTypes.visitorProfileProviders)).then((function(){$.log("Populated visitor profile")})));var n=u(),r=U.decideGlobal(n);$.log("Made global decision",n,"->",r),q.dispatch(L.RECORD_GLOBAL_DECISION,r);var a=P.trackClientActivation();a?$.log("Tracked activation event",a):$.log("Not tracking activation event");var o=Fe.setUpViewActivation(i),s=[];return Le?s=se.activateMultiple(o):b.each(o,(function(e){s=s.concat(se.activateMultiple([e]))})),Pe&&ye.getSampleRum()&&q.dispatch(L.RECORD_VIEWS_INITIALLY_ACTIVATED_COUNT,{viewsInitiallyActivatedCount:s.length}),A(j.Lifecycle.postViewsActivated),A(j.Lifecycle.postActivate),V.emitActivatedEvent(),ie.all(e).then((function(){H.emit({type:K.TYPES.LIFECYCLE,name:"activateDeferredDone"}),$.log("All immediate effects of activation resolved")}),x.emitError)}catch(e){return x.emitError(e),ie.reject(e)}},Fe.setUpViewActivation=function(e){var t=[];return b.each(e,(function(e){b.isBoolean(Ae.getViewState(e.id).isActive)&&se.isActivationTypeImmediate(e.activationType)?$.debug("Skipping page: already evaluated, presumably at the edge",se.description(e)):se.shouldTriggerImmediately(e.activationType)?t.push(e):e.activationType===j.ViewActivationTypes.callback?($.debug("Setting up conditional activation for Page",se.description(e)),Fe.activateViewOnCallback(e)):e.activationType===j.ViewActivationTypes.polling?($.debug("Setting up polling activation for Page",se.description(e)),te.pollFor(b.partial(Y.apply,e.activationCode),null,b.partial(oe.isTimedOut,M.now())).then((function(){se.activateMultiple([e])}))["catch"]((function(t){$.warn("Failed to activate view ",e,t)}))):e.activationType!==j.ViewActivationTypes.manual&&x.emitError(new Error("Unknown view activationType: "+e.activationType))})),t},Fe.activateViewOnCallback=function(e){var t=function(t){var i=b.extend({},t,{pageName:e.apiName,type:"page"});De.push(i)},i={pageId:e.id};Object.defineProperty(i,"isActive",{get:function(){return Ae.isViewActive(e.id)}});try{Y.apply(e.activationCode,[t,i])}catch(t){var n=new O("("+t.toString()+") in activationCode for "+se.description(e));x.emitError(n,{originalError:t,userError:!0})}},t.onViewsActivated=function(e){var t,i=e.data.views,n=b.map(i,"id");try{if(!Re.getBucketingId())throw new Error("View activated with no visitorId set");var r=d(n)["catch"](x.emitError);return t=ie.all(b.map(i,(function(e){var t=function(){se.parseViewTags(e);var t=P.trackViewActivation(e);t?$.log("Tracked activation for Page",se.description(e),t):$.log("Not Tracking activation for Page",se.description(e))};return z.isReady()?ie.resolve(t()):te.pollFor(z.isReady,Ne).then(t)}))),ie.all([r,t])}catch(e){x.emitError(e)}},t.onPageDeactivated=function(e){var t=e.data.page,i=fe.getAllActionIdsByPageId(t.id);b.each(i,(function(e){var i=fe.getActionState(e);i&&(b.each(i,(function(e,i){if(e.cancel)try{e.cancel(),$.debug("Controller / Canceled change",i,"observation due to deactivation of page:",t)}catch(e){$.error("Controller / Error canceling change",i,"observation upon deactivation of page.",e)}if(t.undoOnDeactivation&&e.undo)try{e.undo(),$.debug("Controller / Undid change",i,"due to deactivation of page:",t)}catch(e){$.error("Controller / Error undoing change upon deactivation of page.",e)}})),q.dispatch(L.REMOVE_ACTION_STATE,{actionId:e}),$.debug("Controller / Undid changes and/or canceled change observation due to deactivation of page:",t,e))}))},t.initializeApi=function(){var e={push:De.push};Ve||(e.get=De.get);var t=window.optimizely;b.isArray(t)&&b.each(t,(function(t){e.push(t)})),e.data={note:"Obsolete, use optimizely.get('data') instead"},e.state={},window.optimizely=e},t.persistItemsWithId=function(e){return b.each(e,(function(e,t){ce.checkKeyForVisitorId(t)&&Q.setItem(t,e)})),e},t.initializeXDomainStorage=o,t.decideAndExecuteLayerASAP=p,t.decideLayer=T,t.getActionsForDecision=R}),(function(e,t,i){function n(e,t,i){var n=v.getActionState(t.id);if(!n)return void p.warn("Action / Attempted to prepare change for inactive action: ",t);var r=v.getChangeApplier(e.id,t.id);if(!a.isUndefined(r))return void p.warn("Action / Attempted to prepare a change which is already being applied: ",e);var s={changeId:e.id,actionId:t.id,changeApplier:I.create(e,t,i)};f.dispatch(o.SET_CHANGE_APPLIER,s)}function r(e,t,i,o){if(a.includes(o,t))return void p.error("Change with id "+t+" has circular dependencies: "+o.concat(t));if(!e[t]){var u=E.getChange(t);if(!u){var d="Change with id "+t+" is absent";return o.length&&(d+=" but listed as a dependency for "+o[o.length-1]),void p.warn(d)}e[t]=new g(function(d){var f=a.map(u.dependencies||[],(function(n){return r(e,n,i,o.concat([t]))}));if(u.src){var _="change_"+u.src,m=c.makeAsyncRequest(_,(function(){return h.addScriptAsync("https://cdn.optimizely.com/public/11391265293/data"+u.src,(function(){c.resolveRequest(_)}))})).then((function(){var e=E.getChange(u.id);e||s.emitError(new S("Failed to load async change from src: "+u.src)),n(e,i,l.now())}));f.push(m)}g.all(f).then((function(){var e=l.now(),n=v.getChangeApplier(t,i.id);return n?(p.debug("Action / Applying change:",u),n.apply().then((function(t){t?p.log(t):p.debug("Action / Applied change for the first time in "+(l.now()-e)+"ms:",u),d()}))):(p.debug("Action / Not applying change ",t," - No changeApplier found."),void d())}))["catch"]((function(e){p.error("Action / Failed to apply change:",u,e),d()}))})}return e[t]}var a=i(2),o=i(7),s=i(86),c=i(6),u=i(76).create,l=i(24),d=i(16),f=i(9),p=i(23),g=i(12).Promise,h=i(132),_=d.get("stores/global"),v=d.get("stores/action_data"),E=d.get("stores/change_data"),m=d.get("stores/session"),I=i(135),y=i(136);y.initialize();var S=u("ActionError");t.prepareAction=function(e){p.debug("Action / Preparing:",e),f.dispatch(o.ACTION_EXECUTED,{actionId:e.id,sessionId:m.getSessionId(),layerId:e.layerId,pageId:e.pageId,timestamp:l.now(),activationId:_.getActivationId()});var t=l.now();a.forEach(e.changeSet,(function(i){var r=a.isObject(i)?i.id:i,s=E.getChange(r);s||(f.dispatch(o.ADD_CHANGE,i),s=E.getChange(i.id)),s.src||n(s,e,t)}))},t.executePreparedAction=function(e){p.debug("Action / Executing:",e);var t={},i=a.map(e.changeSet,(function(i){var n=a.isObject(i)?i.id:i;return r(t,n,e,[])}));return g.all(i).then((function(){p.debug("changes for action id="+e.id+" applied")}))}}),(function(e,t,i){var n=i(13).Promise,r=i(24),a=i(16),o=a.get("stores/plugins"),s=i(25),c=i(23);t.create=function(e,t,i){var a={identifier:e.id,action:t,startTime:i||r.now()};try{var u=o.getPlugin(s.PluginTypes.changeAppliers,e.type);if(!u)throw new Error("Unrecognized change type "+e.type);return new u(e,a)}catch(e){c.error("Change applier was never properly constructed:",e);var l={apply:function(){return n.reject(e)}};return l}}}),(function(e,t,i){function n(){"interactive"!==document.readyState&&"complete"!==document.readyState||(t.domReadyTime=Date.now())}var r=i(137),a=i(16).get("stores/directive");t.domReadyTime=null,t.initialize=function(){n(),document.addEventListener("readystatechange",n,!0)},t.isTimedOut=function(e){var i=Date.now();if(!t.domReadyTime||!e)return!1;var n=Math.max(e,t.domReadyTime);return a.isEditor()&&(n=t.domReadyTime),!(i-n<r.SELECTOR_POLLING_MAX_TIME)}}),(function(e,t){e.exports={SELECTOR_POLLING_MAX_TIME:2e3,CHANGE_DATA_KEY:"optimizelyChangeData",CHANGE_ID_ATTRIBUTE_PREFIX:"data-optly-"}}),(function(e,t,i){function n(e,t){return function(i){var n=i.type,a=t[n];if(!a)throw new Error("Audience / No matcher found for type="+n);if(a.fieldsNeeded)for(var s=r(a.fieldsNeeded,i),l=0;l<s.length;l++){var d=s[l],f=c.getFieldValue(e,d);if(o.isUndefined(f))return void u.debug("Audience / Required field",d,"for type",n,"has no value")}u.debug("Matching condition:",i,"to values:",e);var p=a.match(e,i);if(!o.isUndefined(p))return!!p}}function r(e,t){var i="function"==typeof e?e(t):e;return o.isString(i)&&(i=[i]),o.isArray(i)?i:(u.warn("Couldn't determine fieldsNeeded for matcher; assuming []"),[])}function a(e){return e.name?e.name+" ("+e.id+")":e.id}var o=i(2),s=i(124),c=i(19),u=i(23),l=i(74);t.isInAudience=function(e,t,i){var r=n(e,i);u.groupCollapsed("Checking audience",t.name,t.id,t),u.debug("Visitor Profile:",e);var o;try{var c=s.evaluate(t.conditions,r)}catch(e){o=e,c=!1}return u.groupEnd(),o&&u.error("Audience / Error evaluating audience",a(t),":",o),u.log("Is "+(c?"in":"NOT in")+" audience:",a(t)),c},t.requiredAudienceFieldsForConditions=function e(t,i){var n={};return o.each(t,(function(t){if(o.isArray(t))o.extend(n,e(t,i));else if(o.isObject(t)){var a=i[t.type];if(a){var s=r(a.fieldsNeeded,t);o.each(s,(function(e){n[l.serializeFieldKey(e)]=e}))}}})),n}}),(function(e,t,i){function n(e,t){m.debug("Decision / Deciding layer for group: ",v.description(e));var i,n,r=t.preferredLayerId,a=!!r;try{i=d.chooseWeightedCandidate(t.bucketingId,e.id,e.weightDistributions),i&&"None"!==i||(n='Group traffic allocation. Visitor maps to a "hole" in the bucket space left by an experiment or campaign that\'s since been removed from the group')}catch(e){n="Group traffic allocation. Visitor maps to a point in the bucket space which has never been covered by any experiment or campaign."}if(a&&(m.debug("Decision / Using preferredLayerMap to select layer for group:",v.description(e)),r!==i&&(_.dispatch(c.RECORD_STICKY_BUCKETING_FEATURE,{feature:"preferredLayer",id:e.id}),i=r)),n)return{layerId:null,reason:n};if(!s.find(e.weightDistributions,{entityId:i})){var o=a?" sticky-":" non-sticky ",u="Visitor was"+o+"bucketed into a campaign ("+i+") which is not in the group";if(!a)throw new p(u);return{layerId:null,reason:u}}return{layerId:i}}function r(e,t){for(var i=0;i<e.experiments.length;i++)for(var n=0;n<e.experiments[i].variations.length;n++)if(t.indexOf(e.experiments[i].variations[n].id)>-1)return{experimentId:e.experiments[i].id,variationId:e.experiments[i].variations[n].id};return null}function a(e){var t=y.getPlugin(h.PluginTypes.deciders,e);if(s.isEmpty(t))throw new Error("No deciders found for policy: "+e);return t}function o(e,t){var i=y.getAllPlugins(h.PluginTypes.audienceMatchers);return s.reduce(t,(function(t,n){return l.isInAudience(e,n,i)&&t.push(n.id),t}),[])}var s=i(2),c=i(7),u=i(86),l=i(138),d=i(140),f=i(141),p=i(142).DecisionError,g=i(16),h=i(25),_=i(9),v=i(143),E=i(113),m=i(23),I=i(44),y=g.get("stores/plugins"),S=g.get("stores/global"),T=g.get("stores/layer_data");t.isPageIdRelevant=function(e){if(!e)return!1;var t=a(e.policy);return s.isFunction(t.includePageIdInDecisionTicket)?t.includePageIdInDecisionTicket(e):t.includePageIdInDecisionTicket===!0},t.createTicket=function(e){var t=s.pick(e,["bucketingId","globalHoldback","preferredVariationMap","pageId"]);return s.extend(t,{audienceIds:o(e.visitorProfile,e.audiences),activationId:S.getActivationId()}),t},t.decideGlobal=function(e){var t=d.isHoldback(e.bucketingId,{id:null,holdback:e.globalHoldback});return{isGlobalHoldback:t}},t.decideGroup=n,t.decideLayer=function(e,t){m.debug("Deciding: ",e,t);var i,n,r=a(e.policy),o={layerId:e.id,experimentId:null,variationId:null,isLayerHoldback:d.isHoldback(t.bucketingId,e)};if(s.isEmpty(e.experiments))throw new p("No experiments in layer.");try{if(r.decideLayer){m.debug("Decision / Using decider's custom decideLayer.");var c=r.decideLayer(e,t);i=c.experiment,n=c.variation}else m.debug("Decision / Using default decideLayer behavior."),i=r.selectExperiment(e,t.audienceIds,t.bucketingId),n=f.selectVariation(i,t.audienceIds,t.bucketingId,t.activationId,t.preferredVariationMap)}catch(e){e instanceof p?o.reason=e.message:o.error=e}return o.experimentId=i?i.id:null,o.variationId=n?n.id:null,o.error&&(o.error.name="DecisionEngineError",u.emitError(o.error)),o},t.getDummyLayerDecision=function(e,t){var i,n=r(e,t);return n?(m.log("Decision / Applying force variation:",n.variationId,"to Campaign",E.description(e)),i={layerId:e.id,variationId:n.variationId,experimentId:n.experimentId,isLayerHoldback:!1,reason:"force"}):(m.log("No variation matches ids:",t,"in Campaign",E.description(e)),i={layerId:e.id,variationId:null,experimentId:null,isLayerHoldback:!1,reason:"force"}),i},t.isInCohort=function(e){if(!e.experimentId||!e.variationId)return!1;var t=T.get(e.layerId);return!(I.isSingleExperimentPolicy(t.policy)&&e.isLayerHoldback)}}),(function(e,t,i){var n=i(64),r=t.TOTAL_POINTS=1e4;t.bucketingNumber=function(e,t,i){var a=n.hashToInt(e+t,i,r);return a},t.isHoldback=function(e,i){return t.bucketingNumber(e,i.id,n.Seed.IGNORING)<(i.holdback||0)},t.chooseWeightedCandidate=function(e,i,r){for(var a=t.bucketingNumber(e,i,n.Seed.BUCKETING),o=0;o<r.length;o++)if(r[o].endOfRange>a)return r[o].entityId;throw new Error("Unable to choose candidate")}}),(function(e,t,i){var n=i(2),r=i(7),a=i(140),o=i(124),s=i(142).DecisionError,c=i(9),u=i(23),l="impression";t.isValidExperiment=function(e,t){var i,r=n.partial(n.includes,e);return u.groupCollapsed("Decision / Evaluating audiences for experiment:",t,e),i=!t.audienceIds||o.evaluate(t.audienceIds,r),u.groupEnd(),u.debug("Decision / Experiment",t,"is valid?",i),i},t.selectVariation=function(e,t,i,o,d){if(!e.variations||0===e.variations.length)throw new s('No variations in selected experiment "'+e.id+'"');if(!e.weightDistributions&&e.variations.length>1)throw new s('On selected experiment "'+e.id+'", weightDistributions must be defined if # variations > 1');var f;if(e.bucketingStrategy&&e.bucketingStrategy===l)if(1===e.variations.length)f=e.variations[0].id;else{var p=o;f=a.chooseWeightedCandidate(i+p,e.id,e.weightDistributions)}else if(f=1===e.variations.length?e.variations[0].id:a.chooseWeightedCandidate(i,e.id,e.weightDistributions),d&&d[e.id]){u.debug("Decision / Using preferredVariationMap to select variation for experiment:",e.id);var g=d[e.id];if(!n.find(e.variations,{id:g}))return c.dispatch(r.RECORD_STICKY_BUCKETING_FEATURE,{feature:"stoppedVariation",id:e.id}),u.debug("Decision / Preferred variation:",g,"not found on experiment:",e.id,". Visitor not bucketed."),null;g!==f&&(c.dispatch(r.RECORD_STICKY_BUCKETING_FEATURE,{feature:"preferredVariation",id:e.id}),f=g)}var h=n.find(e.variations,{id:f});if(h)return u.debug("Decision / Selected variation:",h),h;throw new s('Unable to find selected variation: "'+f+'".')},t.getExperimentById=function(e,t){var i=n.find(e.experiments,{id:t});if(i)return i;throw new s("Unable to find selected experiment.")},t.hasVariationActionsOnView=function(e,t){return u.debug("Decision / Checking variation:",e,"for actions on pageId:",t),!!n.find(e.actions,(function(e){return e.pageId===t&&!n.isEmpty(e.changes)}))}}),(function(e,t){function i(e){this.message=e}i.prototype=new Error,t.DecisionError=i}),(function(e,t,i){function n(e){return r.map(e.weightDistributions,"entityId")}var r=i(2);t.description=function(e){var t=!!e.name,i=t?'"'+e.name+'" ':"",r=n(e).join(", ");return i+"(id "+e.id+", campaigns: "+r+")"}}),(function(module,exports,__webpack_require__){var createError=__webpack_require__(77),di=__webpack_require__(16),Logger=__webpack_require__(23),CSP_MODE=!1,EXEC_WITH_JQUERY=!0,ExecError=exports.Error=createError("ExecError");exports.apply=function(e,t){t=t||[],EXEC_WITH_JQUERY&&(t=t.concat(di.get("env/jquery")));try{return e.apply(void 0,t)}catch(i){throw Logger.warn("Error applying function",e,"with args:",t,i),new ExecError(i)}},exports.eval=function(str){if(CSP_MODE)throw new ExecError("eval is not supported in CSP mode");try{return EXEC_WITH_JQUERY&&(str="var $ = optimizely.get('jquery');"+str),eval(str)}catch(e){throw Logger.warn("Error executing JS:",str,e),new ExecError(e)}}}),(function(e,t,i){var n=i(2),r=i(86),a=i(25),o=i(26),s=i(81).LocalStorage,c=i(23),u=i(91),l=i(16),d=l.get("stores/pending_events"),f=a.StorageKeys.PENDING_EVENTS;t.persistPendingEvents=function(){try{var e=d.getEventsString();s.setItem(f,e),i(85).setItem(f,e)}catch(e){c.warn("PendingEvents / Unable to set localStorage key, error was: ",e),r.emitInternalError(e)}},t.getPendingEvents=function(){try{return o.parse(s.getItem(f))}catch(e){return null}},t.retryPendingEvents=function(e){n.forOwn(e,(function(e,t){u.retryableRequest(e.data,t,e.retryCount)})),n.isEmpty(e)||c.log("Retried pending events: ",e)}}),(function(e,t,i){var n=i(2),r=i(12).Promise;t.firstToResolve=function(e){return new r(function(t){n.each(e,(function(e){r.resolve(e).then(t,(function(){}))}))})}}),(function(e,t,i){function n(e){var t=!1;if(a.isArray(window.optimizely)&&a.each(window.optimizely,(function(i){a.isArray(i)&&"verifyPreviewProject"===i[0]&&String(i[1])===e&&(t=!0)})),!t)throw new Error("Preview projectId: "+e+" does not match expected")}function r(){s.on({filter:{type:c.TYPES.ANALYTICS,name:"trackEvent"},handler:f}),s.on({filter:{type:c.TYPES.LIFECYCLE,name:"viewActivated"},handler:f}),s.on({filter:{type:c.TYPES.LIFECYCLE,name:"layerDecided"},handler:f}),s.on({filter:{type:"error"},publicOnly:!0,handler:f})}var a=i(2),o=i(16),s=i(87),c=i(111),u=i(40),l=o.get("stores/directive"),d="optimizelyPreview",f=function(e){var t=u.getGlobal(d);t.push(e)};t.initialize=function(e){l.isSlave()&&n(e),r()},t.setupPreviewGlobal=function(){u.getGlobal(d)||u.setGlobal(d,[])},t.pushToPreviewGlobal=function(e){f(e)}}),(function(e,t,i){e.exports=function(e){e.registerVisitorProfileProvider(i(149))}}),(function(e,t){e.exports={provides:"visitorId",getter:["stores/visitor_id",function(e){return e.getRandomId()}]}}),(function(e,t,i){e.exports=function(e){e.registerVisitorProfileProvider(i(151)),e.registerAudienceMatcher("behavior",i(153))}}),(function(e,t,i){var n=i(152);e.exports={provides:"events",isTransient:!0,getter:[function(){return n.getEvents()}]}}),(function(e,t,i){var n=i(2),r=i(72),a=i(16),o=a.get("stores/visitor_events"),s=1e3;t.getEvents=function(){var e=r.getEvents(),t=[].concat.apply([],n.values(o.getForeignEvents())),i=[].concat.apply([],n.values(o.getForeignEventQueues())),a=r.mergeAllEvents([e,t,i]);return a.slice(a.length-s)}}),(function(e,t,i){var n=i(2),r=i(26),a=i(154),o=i(155);e.exports={fieldsNeeded:["events"],match:function(e,t){var i=[],s=r.parse(t.value);return i=n.isUndefined(s.version)?[s]:a.buildFromSpecV0_1(s),n.every(i,(function(t){return o.isSatisfied(t,e.events)}))}}}),(function(e,t,i){function n(e){return e=(e||"").toString().trim(),p[e]||e}function r(e,t,i){var n={where:t};if(e.count&&(n["limit"]=e.count),e.modifier===s.FREQUENCY_FILTERS.MOST_FREQUENT){var r=s.getFieldKeyPathForSource(e.name,i),a=s.aggregate("count"),o=s.aggregateField("count"),l=s.groupField(r);return c.extend(n,{select:[{field:l}],groupBy:s.groupBy([r]),aggregate:[a],orderBy:[{field:o,direction:"DESC"}]})}return c.extend(n,{orderBy:[{field:[u.FIELDS.TIME],direction:"DESC"}]})}function a(e){var t=[];if(c.isUndefined(e))throw new Error("rule is undefined");if(!c.isObject(e))throw new Error("rule is not an Object");"0.2"!==e["version"]&&t.push('version: not "0.2"'),e["filter"]&&(c.isArray(e["filter"])?c.each(e["filter"],(function(e,i){var n=s.validateFieldKeyPathV0_2(e["field"],s.FieldPurpose.FILTER);n&&t.push("filter["+i+"]: "+n);var r=s.validateComparatorAndValue(e["comparator"],e["value"]);r&&t.push("filter["+i+"]: "+r)})):t.push("filter: not an array"));var i=[],n=[];if(e["sort"]&&(e["reduce"]&&e["reduce"]["aggregator"]&&"nth"!==e["reduce"]["aggregator"]&&t.push("sort: superfluous because we can apply aggregator "+l.stringify(e["reduce"]["aggregator"])+" to unsorted items"),c.isArray(e["sort"])?c.each(e["sort"],(function(e,r){var a=s.validateFieldKeyPathV0_2(e["field"],s.FieldPurpose.SORT);a&&t.push("sort["+r+"]: "+a),e["field"]&&"frequency"===e["field"][0]?i.push(e):n.push(e);var c=o(e["direction"]);c&&t.push("sort["+r+"]: "+c)})):t.push("sort: not an array"),i.length&&n.length&&t.push('sort: sorting by non-["frequency"] field is pointless because we are going to sort the picked values by ["frequency"]'),i.length&&!e["pick"]&&t.push('sort: sorting by ["frequency"] is impossible because no values have been picked')),e["pick"]){e["reduce"]&&"count"===e["reduce"]["aggregator"]&&t.push('pick: superfluous because we can apply aggregator "count" to raw events');var r=s.validateFieldKeyPathV0_2(e["pick"]["field"]);r&&t.push("pick: "+r)}if(e["reduce"]){var a=e["reduce"]["aggregator"],u="aggregator "+(l.stringify(a)||String(a)),d=e["reduce"]["n"],f="index "+(l.stringify(d)||String(d));c.includes(["sum","avg","max","min","count","nth"],a)||t.push("reduce: "+u+" is unknown"),c.includes(["sum","avg","max","min"],a)&&(e["pick"]||t.push("reduce: "+u+" is impossible to use because no values have been picked")),"nth"===a?((!c.isNumber(d)||isNaN(d)||parseInt(d,10)!==d||d<0)&&t.push("reduce: "+f+" is not a non-negative integer (mandated by "+u+")"),e["sort"]||t.push('reduce: aggregator "nth" is meaningless without a specific sort order')):c.isUndefined(d)||t.push("reduce: "+f+" is defined (not mandated by "+u+")")}if(t.length)throw new Error(t.join("\n"))}function o(e){var t="direction "+(l.stringify(e)||String(e));if(!c.includes(["ascending","descending"],e))return t+' is not "ascending" or "descending"'}var s=t,c=i(2),u={FIELDS:i(63).FIELDS,FIELDS_V0_2:i(63).FIELDS_V0_2},l=i(26),d=i(23),f=i(155);s.MILLIS_IN_A_DAY=864e5,s.aggregateField=function(e,t){return c.isString(t)&&(t=[t]),t=t||f.DEFAULT_FIELD,[f.generateAlias(e,t)]},s.groupField=function(e){return c.isString(e)&&(e=[e]),e=e||f.DEFAULT_FIELD,[e.join(".")]};var p={"<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","==":"eq"};s.fieldComparison=function(e,t,i){return e=n(e),c.isString(t)&&(t=[t]),"exists"===e?{op:e,args:[{field:t}]}:{op:e,args:[{field:t},{value:i}]}},s.relativeTimeComparison=function(e,t){return{op:n(e),args:[{op:"-",args:[{eval:"now"},{field:[u.FIELDS.TIME]}]},{value:t*s.MILLIS_IN_A_DAY}]}},s.rangeTimeComparison=function(e){return c.isArray(e)?{op:"between",args:[{field:[u.FIELDS.TIME]},{value:[e[0]||+new Date(0),e[1]||+new Date]}]}:(d.error("Rule builder","rangeTimeComparison passed invalid range",e),null)},s.groupBy=function(e){for(var t=[],i=0;i<e.length;i++)t[i]={field:e[i]};return t},s.aggregate=function(e,t){return c.isString(t)&&(t=[t]),t=t||f.DEFAULT_FIELD,{op:e,args:[{field:t}]}},s.SOURCE_TYPES={BEHAVIOR:"events",CUSTOM_BEHAVIOR:"custom_behavior",DCP:"dcp"},s.FREQUENCY_FILTERS={MOST_FREQUENT:"most_frequent",LEAST_FREQUENT:"least_frequent"},s.RECENCY_FILTERS={MOST_RECENT:"most_recent",LEAST_RECENT:"least_recent"},s.getFieldKeyPathForSource=function(e,t){t=t||s.SOURCE_TYPES.BEHAVIOR;var i=[];return c.isString(e)?(i=[e],t!==s.SOURCE_TYPES.BEHAVIOR||c.includes(c.values(u.FIELDS),e)||(i=[u.FIELDS.OPTIONS,e])):i=e,i},s.buildFromSpecV0_1=function(e){if(!(e.action||e.filters&&0!==e.filters.length))throw new Error('Audience spec must have an "action" field or at least one "filter" '+l.stringify(e));var t=s.fieldComparison("gt",u.FIELDS.TIME,0),i=[],n=[];if(e.action&&(n.push(s.fieldComparison("eq",u.FIELDS.NAME,e.action.value)),e.action.type&&n.push(s.fieldComparison("eq",u.FIELDS.TYPE,e.action.type))),e.time)if("last_days"===e.time.type)n.push(s.relativeTimeComparison("lte",e.time.days));else if("range"===e.time.type){var a=s.rangeTimeComparison([e.time.start,e.time.stop]);a&&n.push(a)}else d.error("Rule builder",'Audience spec has bad "time" type',e.time.type);if(t={op:"and",args:n},e.count&&i.push({where:s.fieldComparison(e.count.comparator,"0",e.count.value),from:{select:[{field:s.aggregateField("count")}],where:t,aggregate:[s.aggregate("count")]}}),e.filters&&c.each(e.filters,(function(r){var a,o,c=s.getFieldKeyPathForSource(r.name,e.source);if(r.modifier===s.FREQUENCY_FILTERS.MOST_FREQUENT?(a=s.aggregate("count"),o=s.aggregateField("count")):r.modifier===s.RECENCY_FILTERS.MOST_RECENT&&(a=s.aggregate("max",u.FIELDS.TIME),o=s.aggregateField("max",u.FIELDS.TIME)),a){var l=c,d=s.groupField(l);i.push({where:s.fieldComparison(r.comparator,"0",r.value),from:{select:[{field:d}],where:t,groupBy:s.groupBy([l]),aggregate:[a],orderBy:[{field:o,direction:"DESC"}],limit:1}})}else n.push(s.fieldComparison(r.comparator,c,r.value))})),e.pick){if(i.length>0)throw new Error('A "pick" clause must not be specified with "count" or "most_recent", "most_frequent" modifiers'+l.stringify(e));return[r(e.pick,t,e.source)]}return i.length>0?i:[{where:t}]},s.buildFromSpecV0_2=function(e){a(e);var t={where:{op:"and",args:c.map(e["filter"]||[],(function(e){return"age"===e["field"][0]?s.relativeTimeComparison(e["comparator"]||"eq",e["value"]/s.MILLIS_IN_A_DAY):s.fieldComparison(e["comparator"]||"eq",s.convertFieldKeyPathFromSpecV0_2(e["field"]),e["value"])}))}};if(e["reduce"]&&"count"===e["reduce"]["aggregator"])return c.extend(t,{aggregate:[{op:"count",args:[{field:["*"]}]}],select:[{field:["_count_*"]}]});var i=[],n=[];if(e["sort"]&&(c.each(e["sort"],(function(e){c.includes(["ascending","descending"],e["direction"])&&(c.includes(["time","age"],e["field"][0])&&n.push(e),"frequency"===e["field"][0]&&i.push(e))})),n.length&&!i.length&&(t["orderBy"]=c.filter(c.map(n,(function(e){return"time"===e["field"][0]?{field:s.convertFieldKeyPathFromSpecV0_2(["time"]),direction:"ascending"===e["direction"]?"ASC":"DESC"}:"age"===e["field"][0]?{field:s.convertFieldKeyPathFromSpecV0_2(["time"]),direction:"ascending"===e["direction"]?"DESC":"ASC"}:void 0}))))),e["pick"]&&e["pick"]["field"]){var r=s.convertFieldKeyPathFromSpecV0_2(e["pick"]["field"]);if(e["reduce"]&&c.includes(["avg","max","min","sum"],e["reduce"]["aggregator"]))return c.extend(t,{aggregate:[{op:e["reduce"]["aggregator"],args:[{field:r}]}],select:[{field:[f.generateAlias(e["reduce"]["aggregator"],r)]}]});t=i.length?c.extend(t,{groupBy:[{field:r}],aggregate:[{op:"count",args:[{field:["*"]}]}],orderBy:[{field:["_count_*"],direction:"ascending"===i[0]["direction"]?"ASC":"DESC"}],select:[{field:[r.join(".")]}]}):c.extend(t,{select:[{field:r}]})}if(e["reduce"]&&"nth"===e["reduce"]["aggregator"]){var o=e["reduce"]["n"];if(c.isNumber(o)&&o>=0&&Number(o)===Math.floor(Number(o)))return c.extend(t,{offset:o,limit:1})}return t},s.convertFieldKeyPathFromSpecV0_2=function(e){return"tags"===e[0]&&"revenue"===e[1]?["r"]:[u.FIELDS_V0_2[e[0]]].concat(e.slice(1))},s.FieldPurpose={FILTER:"filter",SORT:"sort",PICK:"pick"},s.validateFieldKeyPathV0_2=function(e,t){var i="field "+(l.stringify(e)||String(e));if(!c.isArray(e)||!c.every(e,c.isString))return i+" is not an array of strings";if("tags"===e[0]&&e.length>2||"tags"!==e[0]&&e.length>1)return i+" includes too many strings";if("tags"===e[0]&&e.length<2)return i+" does not specify an exact tag";if(e.length<1)return i+" does not specify a top-level field";var n=c.keys(u.FIELDS_V0_2),r=["age","frequency"];return t===s.FieldPurpose.FILTER&&(n.push("age"),r=["frequency"]),t===s.FieldPurpose.SORT&&(n=["time","age","frequency"],r=["name","type","category","tags"]),c.includes(r,e[0])?i+" is not supported here":c.includes(n,e[0])?void 0:i+" is unknown"},s.validateComparatorAndValue=function(e,t){var i="comparator "+(l.stringify(e)||String(e)),n="value "+(l.stringify(t)||String(t));if(!c.isString(e)&&!c.isUndefined(e))return i+" is not a string";switch(e){case void 0:case"eq":case"is":case"contains":break;case"lt":case"gt":case"lte":case"gte":if(!c.isNumber(t))return n+" is not a number (mandated by "+i+")";break;case"in":if(!c.isArray(t))return n+" is not an array (mandated by "+i+")";break;case"between":if(!(c.isArray(t)&&2===t.length&&c.isNumber(t[0])&&c.isNumber(t[1])&&t[0]<=t[1]))return n+" is not a pair of increasing numbers (mandated by "+i+")";
break;case"regex":if(!(c.isString(t)||c.isArray(t)&&2===t.length&&c.isString(t[0])&&c.isString(t[1])))return n+" is not a pattern string or a [pattern string, flags string] array (mandated by "+i+")";break;case"exists":if(!c.isUndefined(t))return n+" is not undefined (mandated by "+i+")";break;default:return i+" is unknown"}}}),(function(e,t,i){var n=i(2),r=i(25),a=i(23),o=n.bind(a.log,a),s=i(24),c=i(19).getFieldValue,u=i(26),l=function(e,t,i){if(e.getValueOrDefault)return e.getValueOrDefault(t,i);if(!n.isArray(t))return i;var r=c(e,t);return"undefined"==typeof r&&(r=i),r},d=function(e){return"string"==typeof e?e.trim().toLowerCase():e};t.clause={WHERE:"where",GROUP_BY:"groupBy",AGGREGATE:"aggregate",HAVING:"having",ORDER_BY:"orderBy",SELECT:"select",OFFSET:"offset",LIMIT:"limit",FROM:"from"},t.DEFAULT_FIELD=["*"],t.booleanOperators={eq:function(e){var t=n.map(e,d);return t[0]==t[1]},is:function(e){return e[0]===e[1]},gt:function(e){return e[0]>e[1]},lt:function(e){return e[0]<e[1]},gte:function(e){return e[0]>=e[1]},lte:function(e){return e[0]<=e[1]},"in":function(e){var t=n.map(e[1]||[],d);return n.includes(t,d(e[0]))},between:function(e){return e[1][0]<=e[0]&&e[0]<=e[1][1]},contains:function(e){var t=n.map(e,(function(e){return"string"==typeof e?e.toLowerCase():e}));return(t[0]||"").indexOf(t[1])!==-1},regex:function(e){try{var t,i;return n.isString(e[1])?(t=e[1],i="i"):(t=e[1][0]||"",i=e[1][1]||""),new RegExp(t,i).test(e[0])}catch(e){return a.error("Rules",'In operator "regex", error: '+(e.message||"invalid RegExp /"+[t,i].join("/"))),!1}},exists:function(e){return"undefined"!=typeof e[0]},and:function(e){return n.every(e,(function(e){return e}))},or:function(e){return n.some(e,(function(e){return e}))},not:function(e){return!e[0]}},t.arithmeticOperators={"+":function(e){return(e[0]||0)+(e[1]||0)},"-":function(e){return(e[0]||0)-(e[1]||0)},"/":function(e){return(e[0]||0)/(e[1]||1)},"%":function(e){return(e[0]||0)%(e[1]||1)}},t.aggregateOperators={sum:function(e,i){for(var n=e[0]||t.DEFAULT_FIELD,r=0,a=0;a<i.length;a++)r+=l(i[a],n,0);return r},avg:function(e,i){if(0===i.length)return 0;for(var n=e[0]||t.DEFAULT_FIELD,r=0,a=0;a<i.length;a++)r+=l(i[a],n,0);return r/i.length},max:function(e,i){for(var n=e[0]||t.DEFAULT_FIELD,r=Number.NEGATIVE_INFINITY,a=0;a<i.length;a++)r=Math.max(r,l(i[a],n,Number.NEGATIVE_INFINITY));return r},min:function(e,i){for(var n=e[0]||t.DEFAULT_FIELD,r=Number.POSITIVE_INFINITY,a=0;a<i.length;a++)r=Math.min(r,l(i[a],n,Number.POSITIVE_INFINITY));return r},count:function(e,t){return t.length}};var f={now:function(){return s.now()}},p=function(e){return e in t.booleanOperators?t.booleanOperators[e]:e in t.arithmeticOperators?t.arithmeticOperators[e]:null},g=function(e,t){if(t.hasOwnProperty("value"))return t["value"];if(t.hasOwnProperty("field"))return l(e,t["field"]);if(t.hasOwnProperty("eval"))return t["eval"]in f?f[t["eval"]]():void a.error("Rules","Unknown function: "+t["eval"]);if(!t["op"])return void a.error("Rules","No operator specified: "+u.stringify(t));var i=p(t["op"]);if(!i)return void a.error("Rules","Unknown operator: "+t["op"]);var r=n.partial(g,e),o=t["args"]||[],s=n.map(o,(function(e){return r(e)}));return i(s,e)},h=function(e,t){var i={};if("undefined"==typeof e||!n.isArray(e)||0===e.length)return i["*"]={fieldValues:{},events:t},i;for(var r=n.map(e,(function(e){return e["field"]})),a=0;a<t.length;a++){for(var o=t[a],s=[],c={},d=0;d<r.length;d++){var f=r[d],p=l(o,f),g=f.join(".");c[g]=p,s.push(encodeURIComponent(g)+"="+encodeURIComponent(u.stringify(p)))}var h=s.join("&");i.hasOwnProperty(h)||(i[h]={fieldValues:c,events:[]}),i[h].events.push(o)}return i};t.generateAlias=function(e,t){return"_"+e+"_"+t.join(".")};var _=function(e,i){var r={};return n.each(i,(function(i,n){r[n]={};for(var o=0;o<e.length;o++){var s=e[o],c=s["op"];if(c in t.aggregateOperators){var u=(s["args"]&&s["args"][0]||{})["field"]||t.DEFAULT_FIELD,l=t.generateAlias(c,u),d=t.aggregateOperators[c]([u],i.events);r[n][l]=d}else a.error("Rules","Unknown aggregate operator "+c)}})),r},v=function(e,t){var i=[];return n.each(e,(function(e,r){var a=n.extend({},e.fieldValues),o=t[r]||{};n.extend(a,o),i.push(a)})),i},E=function(e,t){return n.isArray(e)?0===e.length?t:t.sort((function(t,i){for(var n=0;n<e.length;n++){var r=e[n],a=r["direction"]||"ASC",o="ASC"===a?1:-1,s=r["field"],c=l(t,s,0),u=l(i,s,0);if(c<u)return-o;if(c>u)return o}return 0})):(o("Rules","groupBy rule must be an array"),t)};t.rewrite=function(e){function i(e,s){if(n.isArray(e)&&("and"!==e[0]&&"or"!==e[0]&&"not"!==e[0]&&a.error("Rules","Unexpected operation "+e[0]+". Continuing optimistically."),e={op:e[0],args:e.slice(1)}),e.hasOwnProperty("field")||e.hasOwnProperty("value")||e.hasOwnProperty("eval"))return e;if(s&&e["op"]in t.aggregateOperators){var c=(e["args"]&&e["args"][0]||{})["field"]||t.DEFAULT_FIELD,u=t.generateAlias(e["op"],c);return u in o||(r.push({op:e["op"],args:e["args"]}),o[u]=!0),{field:[u]}}for(var l=[],d=e["args"]||[],f=0;f<d.length;f++)l[f]=i(d[f],s);return{op:e["op"],args:l}}var r=[],o={},s={};e.hasOwnProperty(t.clause.WHERE)&&(s[t.clause.WHERE]=i(e[t.clause.WHERE],!1)),e.hasOwnProperty(t.clause.HAVING)&&(s[t.clause.HAVING]=i(e[t.clause.HAVING],!0)),(e.hasOwnProperty(t.clause.AGGREGATE)||r.length>0)&&(s[t.clause.AGGREGATE]=(e[t.clause.AGGREGATE]||[]).concat(r));for(var c=[t.clause.GROUP_BY,t.clause.ORDER_BY,t.clause.SELECT,t.clause.OFFSET,t.clause.LIMIT],u=0;u<c.length;u++)e.hasOwnProperty(c[u])&&(s[c[u]]=e[c[u]]);return e.hasOwnProperty(t.clause.FROM)&&(s[t.clause.FROM]=t.rewrite(e[t.clause.FROM])),s};var m=function(e,i){i=i||0;var r=[];if(e.hasOwnProperty(t.clause.WHERE)?e[t.clause.WHERE]["op"]?e[t.clause.WHERE]["op"]in t.booleanOperators||r.push("Non-boolean WHERE clause operator"):r.push("Missing WHERE clause operator"):r.push("Missing WHERE clause"),e.hasOwnProperty(t.clause.HAVING)&&(e[t.clause.HAVING]["op"]?e[t.clause.HAVING]["op"]in t.booleanOperators||r.push("Non-boolean HAVING clause operator"):r.push("Missing HAVING clause operator")),e.hasOwnProperty(t.clause.GROUP_BY)&&!e.hasOwnProperty(t.clause.AGGREGATE)&&r.push("No AGGREGATE clause specified with GROUP_BY clause"),e.hasOwnProperty(t.clause.SELECT)){var a=e[t.clause.SELECT];if(n.isArray(a))for(var o=0;o<a.length;o++)a[o]["op"]&&a[o]["op"]in t.aggregateOperators&&r.push('In SELECT clause, aggregate operator "'+a[o]["op"]+'" specified in selector at index '+o);else r.push("SELECT clause must be an array")}if(e.hasOwnProperty(t.clause.OFFSET)){var s=e[t.clause.OFFSET];(!n.isNumber(s)||Number(s)<0||Number(s)!==Math.floor(Number(s)))&&r.push("OFFSET must be a non-negative integer")}if(e.hasOwnProperty(t.clause.LIMIT)){var c=e[t.clause.LIMIT];(!n.isNumber(c)||Number(c)<0||Number(c)!==Math.floor(Number(c)))&&r.push("LIMIT must be a non-negative integer")}return i>0&&(r=n.map(r,(function(e){return"Sub-rule "+i+": "+e}))),e.hasOwnProperty(t.clause.FROM)&&(r=r.concat(m(e[t.clause.FROM],i+1))),r},I=function(e,t){return n.map(t,(function(t){return n.map(e,(function(e){return g(t,e)}))}))},y=function(e,i){var r=i;if(e.hasOwnProperty(t.clause.FROM)&&(a.debug("Evaluating FROM clause:",e[t.clause.FROM]),r=y(e[t.clause.FROM],r),a.debug("Results after FROM:",r)),a.debug("Evaluating WHERE clause:",e[t.clause.WHERE]),r=n.filter(r,(function(i){return g(i,e[t.clause.WHERE])})),a.debug("Results after WHERE:",r),e.hasOwnProperty(t.clause.AGGREGATE)){a.debug("Evaluating AGGREGATE clause:",e[t.clause.AGGREGATE]);var o=h(e[t.clause.GROUP_BY],r),s=_(e[t.clause.AGGREGATE],o);r=v(o,s),a.debug("Results after AGGREGATE:",r)}e.hasOwnProperty(t.clause.HAVING)&&(a.debug("Evaluating HAVING clause:",e[t.clause.HAVING]),r=n.filter(r,(function(i){return g(i,e[t.clause.HAVING])})),a.debug("Results after HAVING:",r)),e.hasOwnProperty(t.clause.ORDER_BY)&&(a.debug("Evaluating ORDER_BY clause:",e[t.clause.ORDER_BY]),r=E(e[t.clause.ORDER_BY],r),a.debug("Results after ORDER_BY:",r));var c=0;e.hasOwnProperty(t.clause.OFFSET)&&(a.debug("Evaluating OFFSET clause:",e[t.clause.OFFSET]),c=Number(e[t.clause.OFFSET]));var u;return e.hasOwnProperty(t.clause.LIMIT)&&(a.debug("Evaluating LIMIT clause:",e[t.clause.LIMIT]),u=c+Number(e[t.clause.LIMIT])),(c>0||!n.isUndefined(u))&&(r=r.slice(c,u),a.debug("Results after OFFSET/LIMIT:",r)),e.hasOwnProperty(t.clause.SELECT)&&(a.debug("Evaluating SELECT clause:",e[t.clause.SELECT]),r=I(e[t.clause.SELECT],r),a.debug("Results after SELECT:",r)),r};t.execute=function(e,i){e=t.rewrite(e),a.shouldLog(r.LogLevel.DEBUG)&&a.groupCollapsed("Evaluating Behavioral Rule"),a.debug("Rule:",e,u.stringify(e)),a.debug("Events:",i);var n=m(e);if(n.length>0)throw new Error("Rule "+u.stringify(e)+" has violations: "+n.join("\n"));var o=y(e,i);return a.debug("Rule result:",o),a.shouldLog(r.LogLevel.DEBUG)&&a.groupEnd(),o},t.isSatisfied=function(e,i){try{return t.execute(e,i).length>0}catch(t){return a.error("Rules","Error "+t.toString()+" while evaluating rule "+u.stringify(e)),!1}}}),(function(e,t,i){e.exports=function(e){e.registerVisitorProfileProvider(i(157))}}),(function(e,t,i){var n=i(2),r=i(158),a=i(152),o=i(26),s=i(154);e.exports={provides:"customBehavior",shouldTrack:!0,isLazy:!1,getter:["stores/global","stores/visitor_attribute_entity",function(e,t){var i=e.getProjectId(),c=n.filter(n.map(t.getCustomBehavioralAttributes(i),(function(e){try{return{id:e.id,granularity:r.GRANULARITY.ALL,rule:s.buildFromSpecV0_2(o.parse(e.rule_json))}}catch(e){return}}))),u=a.getEvents();return r.evaluate(c,u)}]}}),(function(e,t,i){function n(e){if(0===e.length)return[];for(var t=e.length-1,i=o.FIELDS.SESSION_ID,n=e[t][i];t>0&&n===e[t-1][i];)t--;return e.slice(t)}function r(e,t){if(0===e.length||t<=0)return[];var i=+new Date-t*s.MILLIS_IN_A_DAY;i-=i%s.MILLIS_IN_A_DAY;for(var n=e.length;n>0&&i<=e[n-1][o.FIELDS.TIME];)n--;return e.slice(n)}var a=i(23),o={FIELDS:i(63).FIELDS},s=i(154),c=i(155);t.GRANULARITY={ALL:"all",CURRENT_SESSION:"current_session",LAST_30_DAYS:"last_30_days",LAST_60_DAYS:"last_60_days"},t.evaluate=function(e,i){var o={};if(0===i.length){for(var s=0;s<e.length;s++)o[e[s].id]=e[s].defaultValue;return o}var u=n(i),l=r(i,60);for(s=0;s<e.length;s++){var d=e[s],f=i;d.granularity===t.GRANULARITY.CURRENT_SESSION?f=u:d.granularity===t.GRANULARITY.LAST_60_DAYS&&(f=l);try{var p=f;d.rule&&(p=c.execute(d.rule,f)),o[d.id]=d.defaultValue,1===p.length?o[d.id]=p[0][0]||d.defaultValue:a.debug("Behavior / Rule for",d.id,"returned",p.length,"results, expected 1")}catch(e){a.error("Behavior / Rule for",d.id,"failed with",e.message||"")}}return o}}),(function(e,t,i){e.exports=function(e){e.registerVisitorProfileProvider(i(160)),e.registerAudienceMatcher("first_session",i(161))}}),(function(e,t,i){var n=i(63),r=i(152),a=i(19).getFieldValue,o=i(89).CURRENT_SESSION_INDEX;e.exports={provides:"first_session",shouldTrack:!0,getter:[function(){var e=r.getEvents();if(e&&e.length>0){var t=e[0],i=a(t,[n.FIELDS.SESSION_INDEX]);return i===o}return!0}]}}),(function(e,t){e.exports={fieldsNeeded:["first_session"],match:function(e){return!!e.first_session}}}),(function(e,t,i){e.exports=function(e){e.registerApiModule("behavior",i(163))}}),(function(e,t,i){function n(e,t){var i=d.buildFromSpecV0_1(t);if(1!==i.length)throw new Error("Invalid query descriptor; verify that no aggregators are specified");return f.execute(i[0],e)}function r(e,t){return u.map(e,(function(e){return u.isFunction(e.toObject)?e.toObject(t):e}))}function a(e,t){if(!e)return["Descriptor not defined"];var i=[];return e.count&&i.push('Unexpected "count" clause specified'),e.pick&&e.pick.modifier&&t.indexOf(e.pick.modifier)===-1&&i.push('Invalid "pick" modifier "'+e.pick.modifier+'"'),u.each(e.filters,(function(e){u.isUndefined(e.modifier)||i.push('Unexpected "filter" modifier "'+e.modifier+'"')})),i.length>0?i:void 0}function o(e,t){var i,o={revenueAsTag:!1,timeAsTimestamp:!0};if(u.isUndefined(t))return i=l.getEvents(e),r(i,o);if(u.isNumber(t)){if(t<=0)throw new Error("Count must be a positive integer, got "+t);return i=l.getEvents(e),r(i.slice(-t),o)}var s=a(t,u.values(d.RECENCY_FILTERS));if(s)throw new Error(s.join("\n"));return i=l.getEvents(e),r(n(i,t),o)}function s(e,t){if(t=u.cloneDeep(t)||{},!t.pick)throw new Error('No "pick" clause provided in query descriptor');if(!t.pick.name)throw new Error('No field name provided in "pick" clause');t.pick.modifier=t.pick.modifier||d.FREQUENCY_FILTERS.MOST_FREQUENT;var i=a(t,u.values(d.FREQUENCY_FILTERS));if(i)throw new Error(i.join("\n"));var r=l.getEvents(e);return n(r,t)}function c(e,t){var i=d.buildFromSpecV0_2(t),n=l.getEvents(e),a=r(f.execute(i,n),{revenueAsTag:!0,timeAsTimestamp:!1});return(t.pick||t.reduce&&"count"===t.reduce.aggregator)&&(a=u.flatten(a)),t.reduce&&(a=a[0]),a}var u=i(2),l=i(152),d=i(154),f=i(155);e.exports=["stores/visitor_events",function(e){return{getEvents:u.partial(o,e),getByFrequency:u.partial(s,e),query:u.partial(c,e)}}]}),(function(e,t,i){e.exports=function(e){e.registerDependency("sources/browser_id",i(165)),e.registerVisitorProfileProvider(i(169)),e.registerVisitorProfileProvider(i(170)),e.registerAudienceMatcher("browser_version",i(171))}}),(function(e,t,i){var n=i(166);t.getId=function(){return n.get().browser.id},t.getVersion=function(){return n.get().browser.version}}),(function(e,t,i){var n=i(2),r=i(167),a=i(40),o=i(7),s=i(16),c=i(9),u=s.get("stores/ua_data");t.get=function(){var e=u.get();return n.isEmpty(e)&&(e=r.parseUA(a.getUserAgent()),c.dispatch(o.SET_UA_DATA,{data:e})),e}}),(function(e,t,i){function n(e){if(e=(e||"").toLowerCase(),e in c)return e;var t=a.keys(c);return a.find(t,(function(t){var i=c[t];return a.includes(i,e)}))||"unknown"}function r(e,t,i){return t?t:"unknown"===e?"unknown":i?"mobile":"desktop_laptop"}var a=i(2),o=i(168);t.parseUA=function(e){var t=new o(e),i=t.getBrowser(),a=t.getOS(),c=t.getDevice(),l=(a.name||"unknown").toLowerCase(),d=(i.name||"unknown").toLowerCase(),f=s(c.type,d,l);return{browser:{id:n(i.name),version:i.version},platform:{name:l,version:a.version},device:{model:u[c.model]||"unknown",type:r(d,c.type,f),isMobile:f}}};var s=function(e,t,i){if(a.includes(["mobile","tablet"],e))return!0;if(a.includes(["opera mini"],t))return!0;var n=["android","blackberry","ios","windows phone"];return!!a.includes(n,i)},c={gc:["chrome","chromium","silk","yandex","maxthon","chrome webview"],edge:["edge"],ie:["internet explorer","iemobile"],ff:["firefox","iceweasel"],opera:["opera","opera mini","opera tablet"],safari:["safari","mobile safari","webkit"],ucbrowser:["uc browser"]},u={iPhone:"iphone",iPad:"ipad"}}),(function(e,t,i){var n;/*!
	 * UAParser.js v0.7.24
	 * Lightweight JavaScript-based User-Agent string parser
	 * https://github.com/faisalman/ua-parser-js
	 *
	 * Copyright © 2012-2021 Faisal Salman <f@faisalman.com>
	 * Licensed under MIT License
	 */
!(function(r,a){"use strict";var o="0.7.24",s="",c="?",u="function",l="undefined",d="object",f="string",p="major",g="model",h="name",_="type",v="vendor",E="version",m="architecture",I="console",y="mobile",S="tablet",T="smarttv",A="wearable",R="embedded",w={extend:function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2===0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i},has:function(e,t){return"string"==typeof e&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===f?e.replace(/[^\d\.]/g,"").split(".")[0]:a},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},b={rgx:function(e,t){for(var i,n,r,o,s,c,l=0;l<t.length&&!s;){var f=t[l],p=t[l+1];for(i=n=0;i<f.length&&!s;)if(s=f[i++].exec(e))for(r=0;r<p.length;r++)c=s[++n],o=p[r],typeof o===d&&o.length>0?2==o.length?typeof o[1]==u?this[o[0]]=o[1].call(this,c):this[o[0]]=o[1]:3==o.length?typeof o[1]!==u||o[1].exec&&o[1].test?this[o[0]]=c?c.replace(o[1],o[2]):a:this[o[0]]=c?o[1].call(this,c,o[2]):a:4==o.length&&(this[o[0]]=c?o[3].call(this,c.replace(o[1],o[2])):a):this[o]=c?c:a;l+=2}},str:function(e,t){for(var i in t)if(typeof t[i]===d&&t[i].length>0){for(var n=0;n<t[i].length;n++)if(w.has(t[i][n],e))return i===c?a:i}else if(w.has(t[i],e))return i===c?a:i;return e}},D={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},O={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6}).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[h,E],[/(opios)[\/\s]+([\w\.]+)/i],[[h,"Opera Mini"],E],[/\s(opr)\/([\w\.]+)/i],[[h,"Opera"],E],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[h,E],[/(konqueror)\/([\w\.]+)/i],[[h,"Konqueror"],E],[/(trident).+rv[:\s]([\w\.]{1,9}).+like\sgecko/i],[[h,"IE"],E],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[h,"Edge"],E],[/(yabrowser)\/([\w\.]+)/i],[[h,"Yandex"],E],[/(Avast)\/([\w\.]+)/i],[[h,"Avast Secure Browser"],E],[/(AVG)\/([\w\.]+)/i],[[h,"AVG Secure Browser"],E],[/(puffin)\/([\w\.]+)/i],[[h,"Puffin"],E],[/(focus)\/([\w\.]+)/i],[[h,"Firefox Focus"],E],[/(opt)\/([\w\.]+)/i],[[h,"Opera Touch"],E],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[h,"UCBrowser"],E],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],E],[/(windowswechat qbcore)\/([\w\.]+)/i],[[h,"WeChat(Win) Desktop"],E],[/(micromessenger)\/([\w\.]+)/i],[[h,"WeChat"],E],[/(brave)\/([\w\.]+)/i],[[h,"Brave"],E],[/(whale)\/([\w\.]+)/i],[[h,"Whale"],E],[/(qqbrowserlite)\/([\w\.]+)/i],[h,E],[/(QQ)\/([\d\.]+)/i],[h,E],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[h,E],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[h,E],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[h,E],[/(MetaSr)[\/\s]?([\w\.]+)/i],[h],[/(LBBROWSER)/i],[h],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[E,[h,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[E,[h,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[h,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[h,E],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[E,[h,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[h,/(.+)/,"$1 WebView"],E],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[h,/(.+(?:g|us))(.+)/,"$1 $2"],E],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[E,[h,"Android Browser"]],[/(coc_coc_browser)\/([\w\.]+)/i],[[h,"Coc Coc"],E],[/(sailfishbrowser)\/([\w\.]+)/i],[[h,"Sailfish Browser"],E],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[h,E],[/(dolfin)\/([\w\.]+)/i],[[h,"Dolphin"],E],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[h,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[h,"Chrome"],E],[/(coast)\/([\w\.]+)/i],[[h,"Opera Coast"],E],[/fxios\/([\w\.-]+)/i],[E,[h,"Firefox"]],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[E,[h,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[E,h],[/webkit.+?(gsa)\/([\w\.]+)\s.*(mobile\s?safari|safari)(\/[\w\.]+)/i],[[h,"GSA"],E],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[h,[E,b.str,D.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[h,E],[/(navigator|netscape)\/([\w\.-]+)/i],[[h,"Netscape"],E],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[h,E]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,w.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[m,/ower/,"",w.lowerize]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[m,w.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[g,v,[_,S]],[/applecoremedia\/[\w\.]+ \((ipad)/],[g,[v,"Apple"],[_,S]],[/(apple\s{0,1}tv)/i],[[g,"Apple TV"],[v,"Apple"],[_,T]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[v,g,[_,S]],[/(kf[A-z]+)(\sbuild\/|\)).+silk\//i],[g,[v,"Amazon"],[_,S]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[g,b.str,D.device.amazon.model],[v,"Amazon"],[_,y]],[/android.+aft([\w])(\sbuild\/|\))/i],[g,[v,"Amazon"],[_,T]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[g,v,[_,y]],[/\((ip[honed|\s\w*]+);/i],[g,[v,"Apple"],[_,y]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[v,g,[_,y]],[/\(bb10;\s(\w+)/i],[g,[v,"BlackBerry"],[_,y]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[g,[v,"Asus"],[_,S]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[v,"Sony"],[g,"Xperia Tablet"],[_,S]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[g,[v,"Sony"],[_,y]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[v,g,[_,I]],[/android.+;\s(shield)\sbuild/i],[g,[v,"Nvidia"],[_,I]],[/(playstation\s[34portablevi]+)/i],[g,[v,"Sony"],[_,I]],[/(sprint\s(\w+))/i],[[v,b.str,D.device.sprint.vendor],[g,b.str,D.device.sprint.model],[_,y]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[v,[g,/_/g," "],[_,y]],[/(nexus\s9)/i],[g,[v,"HTC"],[_,S]],[/d\/huawei([\w\s-]+)[;\)]/i,/android.+\s(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?)/i],[g,[v,"Huawei"],[_,y]],[/android.+(bah2?-a?[lw]\d{2})/i],[g,[v,"Huawei"],[_,S]],[/(microsoft);\s(lumia[\s\w]+)/i],[v,g,[_,y]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[g,[v,"Microsoft"],[_,I]],[/(kin\.[onetw]{3})/i],[[g,/\./g," "],[v,"Microsoft"],[_,y]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[g,[v,"Motorola"],[_,y]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[g,[v,"Motorola"],[_,S]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[v,w.trim],[g,w.trim],[_,T]],[/hbbtv.+maple;(\d+)/i],[[g,/^/,"SmartTV"],[v,"Samsung"],[_,T]],[/\(dtv[\);].+(aquos)/i],[g,[v,"Sharp"],[_,T]],[/android.+((sch-i[89]0\d|shw-m380s|SM-P605|SM-P610|SM-P587|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[v,"Samsung"],g,[_,S]],[/smart-tv.+(samsung)/i],[v,[_,T],g],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[v,"Samsung"],g,[_,y]],[/sie-(\w*)/i],[g,[v,"Siemens"],[_,y]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[v,"Nokia"],g,[_,y]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[g,[v,"Acer"],[_,S]],[/android.+([vl]k\-?\d{3})\s+build/i],[g,[v,"LG"],[_,S]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[v,"LG"],g,[_,S]],[/linux;\snetcast.+smarttv/i,/lg\snetcast\.tv-201\d/i],[[v,"LG"],g,[_,T]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[g,[v,"LG"],[_,y]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[v,g,[_,S]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[g,[v,"Lenovo"],[_,S]],[/(lenovo)[_\s-]?([\w-]+)/i],[v,g,[_,y]],[/linux;.+((jolla));/i],[v,g,[_,y]],[/((pebble))app\/[\d\.]+\s/i],[v,g,[_,A]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[v,g,[_,y]],[/crkey/i],[[g,"Chromecast"],[v,"Google"],[_,T]],[/android.+;\s(glass)\s\d/i],[g,[v,"Google"],[_,A]],[/android.+;\s(pixel c)[\s)]/i],[g,[v,"Google"],[_,S]],[/android.+;\s(pixel( [2-9]a?)?( xl)?)[\s)]/i],[g,[v,"Google"],[_,y]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/android.+(redmi[\s\-_]?(?:note|k)?(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i,/android.+(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[g,/_/g," "],[v,"Xiaomi"],[_,y]],[/android.+(mi[\s\-_]?(?:pad)(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i],[[g,/_/g," "],[v,"Xiaomi"],[_,S]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[g,[v,"Meizu"],[_,y]],[/(mz)-([\w-]{2,})/i],[[v,"Meizu"],g,[_,y]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[g,[v,"OnePlus"],[_,y]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[g,[v,"RCA"],[_,S]],[/android.+[;\/\s](Venue[\d\s]{2,7})\s+build/i],[g,[v,"Dell"],[_,S]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[g,[v,"Verizon"],[_,S]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(\S(?:.*\S)?)\s+build/i],[[v,"Barnes & Noble"],g,[_,S]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[g,[v,"NuVision"],[_,S]],[/android.+;\s(k88)\sbuild/i],[g,[v,"ZTE"],[_,S]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[g,[v,"Swiss"],[_,y]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[g,[v,"Swiss"],[_,S]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[g,[v,"Zeki"],[_,S]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[v,"Dragon Touch"],g,[_,S]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[g,[v,"Insignia"],[_,S]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[g,[v,"NextBook"],[_,S]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[v,"Voice"],g,[_,y]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[v,"LvTel"],g,[_,y]],[/android.+;\s(PH-1)\s/i],[g,[v,"Essential"],[_,y]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[g,[v,"Envizen"],[_,S]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[v,g,[_,S]],[/android.+[;\/]\s*(Trio[\s\w\-\.]+)\s+build/i],[g,[v,"MachSpeed"],[_,S]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[v,g,[_,S]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[g,[v,"Rotor"],[_,S]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[v,g,[_,S]],[/android .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[g,[_,y]],[/android .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[g,[_,S]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[_,w.lowerize],v,g],[/[\s\/\(](smart-?tv)[;\)]/i],[[_,T]],[/(android[\w\.\s\-]{0,9});.+build/i],[g,[v,"Generic"]],[/(phone)/i],[[_,y]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[E,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[E,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[h,E],[/rv\:([\w\.]{1,9}).+(gecko)/i],[E,h]],os:[[/(xbox);\s+xbox\s([^\);]+)/i,/microsoft\s(windows)\s(vista|xp)/i],[h,E],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[h,[E,b.str,D.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[h,"Windows"],[E,b.str,D.os.windows.version]],[/\((bb)(10);/i],[[h,"BlackBerry"],E],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[h,E],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[h,"Symbian"],E],[/\((series40);/i],[h],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[h,"Firefox OS"],E],[/crkey\/([\d\.]+)/i],[E,[h,"Chromecast"]],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[h,E],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[h,"Chromium OS"],E],[/(sunos)\s?([\w\.\d]*)/i],[[h,"Solaris"],E],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[h,E],[/(haiku)\s(\w+)/i],[h,E],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[E,/_/g,"."],[h,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[h,"Mac OS"],[E,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[h,E]]},C=function(e,t){if("object"==typeof e&&(t=e,e=a),!(this instanceof C))return new C(e,t).getResult();var i=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:s),n=t?w.extend(O,t):O;return this.getBrowser=function(){var e={name:a,version:a};return b.rgx.call(e,i,n.browser),e.major=w.major(e.version),e},this.getCPU=function(){var e={architecture:a};return b.rgx.call(e,i,n.cpu),e},this.getDevice=function(){var e={vendor:a,model:a,type:a};return b.rgx.call(e,i,n.device),e},this.getEngine=function(){var e={name:a,version:a};return b.rgx.call(e,i,n.engine),e},this.getOS=function(){var e={name:a,version:a};return b.rgx.call(e,i,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this};C.VERSION=o,C.BROWSER={NAME:h,MAJOR:p,VERSION:E},C.CPU={ARCHITECTURE:m},C.DEVICE={MODEL:g,VENDOR:v,TYPE:_,CONSOLE:I,MOBILE:y,SMARTTV:T,TABLET:S,WEARABLE:A,EMBEDDED:R},C.ENGINE={NAME:h,VERSION:E},C.OS={NAME:h,VERSION:E},typeof t!==l?(typeof e!==l&&e.exports&&(t=e.exports=C),t.UAParser=C):(n=function(){return C}.call(t,i,t,e),!(n!==a&&(e.exports=n)))})("object"==typeof window?window:this)}),(function(e,t){e.exports={provides:"browserId",shouldTrack:!0,isSticky:!0,getter:["sources/browser_id",function(e){return e.getId()}]}}),(function(e,t){e.exports={provides:"browserVersion",getter:["sources/browser_id",function(e){return e.getVersion()}]}}),(function(e,t,i){var n=i(172).compareVersion;e.exports={fieldsNeeded:["browserVersion","browserId"],match:function(e,t){var i=t.value,r=e.browserId,a=e.browserVersion;if(0===i.indexOf(r)){var o=i.substr(r.length);return 0===n(a,o)}return!1}}}),(function(e,t,i){var n=i(2);t.compareVersion=function(e,t){if(!t)return 0;for(var i=t.toString().split("."),r=e.toString().split("."),a=0;a<i.length;a++){if(n.isUndefined(r[a]))return-1;if(isNaN(Number(r[a]))){if(r[a]!==i[a])return-1}else{if(Number(r[a])<Number(i[a]))return-1;if(Number(r[a])>Number(i[a]))return 1}}return 0}}),(function(e,t,i){e.exports=function(e){e.registerVisitorProfileProvider(i(174)),e.registerAudienceMatcher("campaign",i(175))}}),(function(e,t,i){var n=i(119);e.exports={provides:"campaign",shouldTrack:!0,isSticky:!0,getter:[function(){return n.getQueryParamValue("utm_campaign")}]}}),(function(e,t,i){var n=i(20);e.exports={fieldsNeeded:["campaign"],match:function(e,t){return n.hasMatch(t.value,t.match,e.campaign)}}}),(function(e,t,i){e.exports=function(e){e.registerAudienceMatcher("code",i(177))}}),(function(e,t,i){var n=i(2),r=i(144);t.fieldsNeeded=[],t.match=function(e,t){if(n.isUndefined(t.value))return!0;if("function"==typeof t.value)try{return Boolean(r.apply(t.value))}catch(e){return!1}else try{return Boolean(r.eval(t.value))}catch(e){return!1}return!1}}),(function(e,t,i){e.exports=function(e){e.registerVisitorProfileProvider(i(179));var t=i(180);e.registerAudienceMatcher("custom_attribute",t),e.registerAudienceMatcher("custom_dimension",t)}}),(function(e,t,i){var n=i(2),r=i(25),a=i(23),o=i(16),s=o.get("stores/dimension_data");e.exports={provides:"custom",attributionType:r.AttributionTypes.LAST_TOUCH,restorer:function(e){return n.reduce(e,(function(e,t,i){var r=i,o=s.getByApiName(i),c=s.getById(i),u=c;return n.isObject(t)?(!t.id&&o&&(u=o,r=o.id,n.extend(t,{id:u.segmentId||u.id})),t.name||u&&u.apiName&&(t.name=u.apiName),t.id||u||a.warn("Unable to determine ID for custom attribute:",i,"; segmentation is disabled."),e[r]=t,e):(a.error('Unable to restore custom attribute "'+i+'" because value is not an object'),e)}),{})},shouldTrack:!0}}),(function(e,t,i){var n=i(2),r=i(20);t.match=function(e,t){var i;return e.custom&&(i=e.custom[t.name]),n.isObject(i)&&(i=i.value),r.hasMatch(t.value,t.match,i)}}),(function(e,t,i){e.exports=function(e){e.registerDependency("sources/device",i(182)),e.registerVisitorProfileProvider(i(183)),e.registerAudienceMatcher("device",i(184))}}),(function(e,t,i){var n=i(166);t.getDevice=function(){var e=n.get().device;return"unknown"!==e.model?e.model:"tablet"===e.type?"tablet":e.isMobile?"mobile":"desktop"}}),(function(e,t){e.exports={provides:"device",shouldTrack:!0,isSticky:!0,getter:["sources/device",function(e){return e.getDevice()}]}}),(function(e,t){e.exports={fieldsNeeded:["device"],match:function(e,t){return e.device===t.value}}}),(function(e,t,i){e.exports=function(e){e.registerVisitorProfileProvider(i(186)),e.registerAudienceMatcher("device_type",i(187))}}),(function(e,t,i){var n=i(166);e.exports={provides:"device_type",shouldTrack:!0,isSticky:!0,getter:[function(){var e=n.get().device;switch(e.type){case"mobile":return"phone";case"tablet":case"desktop_laptop":return e.type;default:return"other"}}]}}),(function(e,t){e.exports={fieldsNeeded:["device_type"],match:function(e,t){return e.device_type===t.value}}}),(function(e,t,i){e.exports=function(e){e.registerVisitorProfileProvider(i(189)),e.registerAudienceMatcher("referrer",i(190))}}),(function(e,t,i){var n=i(80),r=i(99);e.exports={provides:"referrer",shouldTrack:!0,isSticky:!0,getter:[function(){var e=r.getReferrer()||n.getReferrer();return""===e&&(e=null),e}]}}),(function(e,t,i){var n=i(191);t.fieldsNeeded=["referrer"],t.match=function(e,t){return null!==e.referrer&&n(e.referrer,t)}}),(function(e,t,i){function n(e){var t=e.indexOf("?");return t!==-1&&(e=e.substring(0,t)),t=e.indexOf("#"),t!==-1&&(e=e.substring(0,t)),e}function r(e){return a(n(e))}function a(e,t){e=e.replace("/?","?"),e=e.toLowerCase().replace(/[\/&?]+$/,"");var i=l.slice(0);t||(i=i.concat(c));for(var n=i.length,r=0;r<n;r++){var a=i[r],o=new RegExp("^"+a);e=e.replace(o,"")}return e}function o(e){var t=e.split("?");if(t[1]){var i=t[1].split("#"),n=i[0],r=i[1],a=n.split("&"),o=[];return s.each(a,(function(e){0!==e.indexOf(u)&&o.push(e)})),t[1]="",o.length>0&&(t[1]="?"+o.join("&")),r&&(t[1]+="#"+r),t.join("")}return e}var s=i(2);e.exports=function(e,t){e=o(e);var i=t.value;switch(t.match){case"exact":return e=a(e),e===a(i);case"regex":try{return Boolean(e.match(i))}catch(e){}return!1;case"simple":return e=r(e),i=r(i),e===i;case"substring":return e=a(e,!0),i=a(i,!0),e.indexOf(i)!==-1;default:return!1}};var c=["www."],u="optimizely_",l=["https?://.*?.?optimizelyedit.(com|test)/","https?://.*.?optimizelypreview.(com|test)/","https?://(edit|preview)(-hrd|-devel)?.optimizely.(com|test)/","https?://.*?.?optimizelyedit(-hrd)?.appspot.com/","https?://"]}),(function(e,t,i){e.exports=function(e){e.registerVisitorProfileProvider(i(193)),e.registerAudienceMatcher("source_type",i(195))}}),(function(e,t,i){var n=i(119),r=i(80),a=i(99),o=i(194),s=["google\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","bing\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","yahoo\\.\\w{2,3}(\\.\\w{2,3})?/search","baidu\\.\\w{2,3}(\\.\\w{2,3})?/","https://(www)?\\.google\\..*?/?$","https://search\\.yahoo\\..*?/?$","https://(www)?\\.bing\\..*?/?$"];e.exports={provides:"source_type",shouldTrack:!0,isSticky:!1,getter:[function(){return function(e,t){var i=function(){if(n.getQueryParamValue("utm_source")||n.getQueryParamValue("gclid")||n.getQueryParamValue("otm_source"))return"campaign";for(var e=a.getReferrer()||r.getReferrer(),t=0;t<s.length;t++){var i=s[t],c=e.match(i);if(c)return"search"}return e&&o.guessDomain(e)!==o.guessDomain(n.getUrl())?"referral":"direct"},c=function(e,t){return!e||"direct"!==t},u=e(),l=i();c(u,l)&&t(l)}}]}}),(function(e,t){t.guessDomain=function(e,t){if(!e)return"";try{return t?e.match(/:\/\/(.[^\/]+)/)[1]:e.match(/:\/\/(?:www[0-9]?\.)?(.[^\/:]+)/)[1]}catch(e){return""}}}),(function(e,t,i){var n=i(20);t.fieldsNeeded=["source_type"],t.match=function(e,t){return n.hasMatch(t.value,t.match,e.source_type)}}),(function(e,t,i){e.exports=function(e){e.registerVisitorProfileProvider(i(197)),e.registerVisitorProfileProvider(i(198)),e.registerAudienceMatcher("time_and_day",i(199))}}),(function(e,t,i){var n=i(24);e.exports={provides:"currentTimestamp",shouldTrack:!0,isLazy:!0,getter:[function(){return n.now()}]}}),(function(e,t){e.exports={provides:"offset",shouldTrack:!0,isLazy:!0,getter:[function(){return(new Date).getTimezoneOffset()}]}}),(function(e,t,i){var n=i(200);t.fieldsNeeded=["currentTimestamp"],t.match=function(e,t){return n.test(t.value,new Date(e.currentTimestamp))}}),(function(e,t,i){function n(e){var t=e.split(o);if(3!==t.length)throw new Error("Invalid time and day string "+e);var i=t[2].split(s);return{start_time:t[0],end_time:t[1],days:i}}function r(e){var t=e.split(c);if(2!==t.length)throw new Error("optly.timeAndDayInterval.timeStringToMinutes: Invalid time string "+e);return 60*parseInt(t[0],10)+parseInt(t[1],10)}var a=i(2),o="_",s=",",c=":";t.test=function(e,t){var i=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],o=n(e),s=r(o.start_time),c=r(o.end_time),u=60*t.getHours()+t.getMinutes(),l=i[t.getDay()];return u>=s&&u<=c&&a.includes(o.days,l)}}),(function(e,t,i){function n(e){function t(e,t,i){try{c(t),e[i]=t}catch(e){N.emitError(new X("Bad value for eventTags["+i+"]: "+e.message))}return e}var i=C.keys(ie),n=C.omit(e,i),r=C.pick(e,i),a=C.reduce(n,t,{}),o=C.reduce(r,(function(e,i,n){var r=ie[n];r.excludeFeature||t(a,i,n);try{r.validate(i),e[n]=r.sanitize(i),a[n]=e[n]}catch(e){N.emitError(new X("Bad value for eventMetrics["+n+"]: "+e.message))}return e}),{});return o.tags=a,o}function r(e){var t=C.extend({entity_id:e.pageId,key:e.pageApiName,timestamp:e.timestamp,uuid:e.eventId,type:J},n(e.eventTags));return t}function a(e){return C.extend({entity_id:e.eventEntityId,key:e.eventApiName,timestamp:e.timestamp,uuid:e.eventId,type:e.eventCategory},n(e.eventTags))}function o(e){return C.extend({entity_id:e.eventEntityId,key:e.eventApiName,timestamp:e.timestamp,uuid:e.eventId,type:e.eventCategory},n(e.eventTags))}function s(e){return{entity_id:null,type:Q,uuid:e.eventId,timestamp:e.timestamp}}function c(e){if(null==e)throw new Error("Feature value is null");if("object"==typeof e){var t;try{t=x.stringify(e)}catch(e){}throw new Error('Feature value is complex: "'+t||'[object]"')}}function u(e){if(null==e)throw new Error("Metric value is null");if(!C.isNumber(e))throw new Error("Metric value is not numeric")}function l(e){return C.reduce(e,(function(e,t){try{c(t.value),e.push({entity_id:t.id||null,key:t.name,type:t.type,value:t.value})}catch(e){F.warn("Error evaluating user feature",t,e)}return e}),[])}function d(e,t,i){Y.dispatch(V.REGISTER_TRACKER_EVENT,{event:e,decisions:i}),f(t),b()}function f(e){var t=l(e);Y.dispatch(V.UPDATE_TRACKER_VISITOR_ATTRIBUTES,{attributes:t})}function p(e){var t=l(e.userFeatures),i={account_id:e.accountId,anonymize_ip:e.anonymizeIP,client_name:e.clientName,client_version:e.clientVersion,project_id:e.projectId,visitors:[{session_id:h(e.sessionId),visitor_id:e.visitorId,attributes:t,snapshots:[{decisions:[{campaign_id:e.layerId,experiment_id:e.experimentId,variation_id:e.variationId,is_campaign_holdback:e.isLayerHoldback}],events:[{uuid:e.decisionId,entity_id:e.layerId,timestamp:e.timestamp,type:$}]}]}]};Y.dispatch(V.REGISTER_PREVIOUS_BATCH,i),b()}function g(e){var t=C.isNull(q.getAnonymizeIP())?void 0:q.getAnonymizeIP(),i={account_id:e.accountId,anonymize_ip:t,client_name:e.clientName,client_version:e.clientVersion,project_id:e.projectId,visitors:[]};i.revision=e.revision,Z&&(i.enrich_decisions=!0);var n={session_id:h(e.sessionId),visitor_id:e.visitorId,attributes:[],snapshots:[]},r=D(e.layerStates);Y.dispatch(V.REGISTER_TRACKER_VISITOR,{data:i,visitor:n,decisions:r}),b()}function h(e){return oe?ae:e}function _(e){var t={entity_id:e.layerId,type:$,uuid:e.decisionId,timestamp:e.timestamp};Y.dispatch(V.REGISTER_TRACKER_DECISION,{decisionEvent:t,decisions:D(e.layerStates)}),f(e.userFeatures),b()}function v(){if(!W.canSend())return void F.debug("Not sending events (holding)");var e=W.hasEventsToSend(),t=W.hasPreviousBatchesToSend();return e||t?(t&&(C.each(W.getPreviousBatches(),E),Y.dispatch(V.RESET_TRACKER_PREVIOUS_BATCHES)),void(e&&(Y.dispatch(V.FINALIZE_BATCH_SNAPSHOT),E(W.getEventBatch()),Y.dispatch(V.RESET_TRACKER_EVENTS)))):void F.debug("Not sending events because there are no events to send")}function E(e){F.debug("Sending ticket:",e);var t=L.generate();B.retryableRequest({url:P,method:"POST",data:m(e)},t)}function m(e){var t=C.extend({},C.pick(e,["account_id","anonymize_ip","client_name","client_version","enrich_decisions","project_id","revision"]),{visitors:C.map(e.visitors,I)});return t}function I(e){return{visitor_id:e.visitor_id,session_id:ae,attributes:C.map(e.attributes,y),snapshots:C.map(e.snapshots,S)}}function y(e){return w(e,{entity_id:"e",key:"k",type:"t",value:"v"})}function S(e){var t=e.events;return t=T(t),{activationTimestamp:q.getActivationTimestamp(),decisions:C.map(e.decisions,A),events:C.map(t,R)}}function T(e){var t=C.reduce(e,(function(e,t){var i,n=t.type===J&&C.isEmpty(t.tags)&&C.isEmpty(C.pick(t,C.keys(ie)));if(i=n?t.type:t.uuid,e[i]){var r=e[i].timestamp;t.timestamp>r&&(r=t.timestamp),e[i]=C.extend({},e[i],{key:e[i].key+"-"+(t.key||""),entity_id:e[i].entity_id+"-"+t.entity_id,timestamp:r})}else e[i]=t;return e}),{});return C.values(t)}function A(e){return w(e,{campaign_id:"c",experiment_id:"x",is_campaign_holdback:"h",variation_id:"v"})}function R(e){return e.key===$&&(e.type=$,delete e.key),w(e,{entity_id:"e",key:"k",quantity:"q",revenue:"$",tags:"a",timestamp:"t",uuid:"u",value:"v",type:"y"})}function w(e,t){return C.reduce(e,(function(e,i,n){return n in t&&(e[t[n]||n]=i),e}),{})}function b(){function e(){var t=!ne||j.isLoaded();t&&v(),W.isPolling()&&G.setTimeout(e,te)}return W.shouldBatch()?void(W.isPolling()||(G.setTimeout(e,te),Y.dispatch(V.SET_TRACKER_POLLING,!0),G.setTimeout((function(){Y.dispatch(V.SET_TRACKER_BATCHING,!1),Y.dispatch(V.SET_TRACKER_POLLING,!1)}),ee))):void v()}function D(e){return C.map(e,(function(e){return{campaign_id:e.layerId,experiment_id:e.decision.experimentId,variation_id:e.decision.variationId,is_campaign_holdback:e.decision.isLayerHoldback}}))}function O(){var e=W.getPersistableState();if(e)try{F.debug("Persisting pending batch:",e),U.persistTrackerOptimizelyData(e),Y.dispatch(V.SET_TRACKER_DIRTY,!1)}catch(e){F.debug("Failed to persist pending batch:",e)}}var C=i(2),N=i(86),L=i(5),P="https://logx.optimizely.com/v1/events",V=i(7),k=i(76).create,x=i(26),F=i(23),M=i(115),U=i(74),G=i(40),B=i(91),z=i(16),j=i(80),H=i(87),K=i(111),Y=i(9),q=z.get("stores/global"),W=z.get("stores/tracker_optimizely"),X=t.Error=k("OptimizelyTrackerError"),Q="client_activation",$="campaign_activated",J="view_activated",Z=!0,ee=1e4,te=1e3,ie={revenue:{validate:u,sanitize:Math.floor,excludeFeature:!0},quantity:{validate:u,sanitize:Math.floor,excludeFeature:!0},value:{validate:u,sanitize:C.identity}},ne=!1,re=!1,ae="AUTO",oe=!0,se=function(e){e.timing===M.TrackLayerDecisionTimingFlags.postRedirectPolicy?p(e):_(e)},ce=[function(){return function(e){d(r(e),e.userFeatures,D(e.layerStates))}}],ue=[function(){return function(e){g(e),d(s(e),e.userFeatures,D(e.layerStates))}}],le=[function(){return function(e){d(o(e),e.userFeatures,D(e.layerStates))}}],de=[function(){return function(e){d(a(e),e.userFeatures,D(e.layerStates))}}],fe={trackLayerDecision:se,postRedirectPolicy:M.PostRedirectPolicies.TRACK_AFTER_SYNC,nonRedirectPolicy:M.NonRedirectPolicies.TRACK_IMMEDIATELY,onPageActivated:ce,onClientActivation:ue,onClickEvent:de,onCustomEvent:le};e.exports=function(e){e.registerAnalyticsTracker("optimizely",fe),H.on({filter:{type:K.TYPES.ANALYTICS,name:"sendEvents"},handler:function(){Y.dispatch(V.SET_TRACKER_SEND_EVENTS,!0),W.isPolling()||v()}}),H.on({filter:{type:K.TYPES.ANALYTICS,name:"holdEvents"},handler:function(){Y.dispatch(V.SET_TRACKER_SEND_EVENTS,!1)}}),Y.dispatch(V.SET_TRACKER_SEND_EVENTS,!re);var t=H.on({filter:{type:"lifecycle",name:"activated"},handler:function(){W.observe(O),H.off(t)}})}}),(function(e,t,i){e.exports=function(e){e.registerViewProvider(i(203)),e.registerViewMatcher("url",i(204))}}),(function(e,t,i){var n=i(119);e.exports={provides:"url",getter:[function(){return n.getUrl()}]}}),(function(e,t,i){var n=i(191);e.exports={fieldsNeeded:["url"],match:function(e,t){return n(e.url,t)}}}),(function(e,t,i){var n=i(144),r="custom_code",a={match:function(e,t){return n.apply(t.value)}};e.exports=function(e){e.registerViewMatcher(r,a)}}),(function(e,t,i){var n="element_present",r={match:function(e,t){return!!document.querySelector(t.value)}};e.exports=function(e){e.registerViewMatcher(n,r)}}),(function(e,t,i){var n=i(80),r=i(25),a=i(87),o=i(208),s=i(123),c="DOMChanged",u={token:void 0,setUpObserver:function(){o.createDOMChangedObserver(),this.token=a.on({filter:{type:"viewTrigger",name:"DOMChanged"},handler:function(){s.getViewsAndActivate(r.ViewActivationTypes.DOMChanged)}})},turnOffObserver:function(){a.off(this.token)}};e.exports=function(e){n.isReady()?u.setUpObserver():n.addReadyHandler(u.setUpObserver),e.registerViewTrigger(c,u)}}),(function(e,t,i){var n=i(80),r=i(87),a=i(209);t.createDOMChangedObserver=function(){var e=n.getDocumentElement(),t={type:"viewTrigger",name:"DOMChanged"},i={attributes:!0,childList:!0,subtree:!0,characterData:!0},o=a.create((function(){r.emit(t,!0)}));a.observe(o,e,i)}}),(function(e,t){t.create=function(e){return new MutationObserver(e)},t.observe=function(e,t,i){e.observe(t,i)}}),(function(e,t,i){function n(){r(),a(),_.addEventListener("popstate",E,!1),_.addEventListener("hashchange",m,!1),d.on({filter:{type:"viewTrigger",name:"URLChanged"},handler:function(){h.getViewsAndActivate(l.ViewActivationTypes.URLChanged)}})}function r(){function e(){var e=p.getOriginalPushState().apply(this,arguments);return g.resolve().then((function(){o("pushState")})),e}f.dispatch(c.ENSURE_ORIGINAL_PUSHSTATE),_.getGlobal("history").pushState=e}function a(){function e(){var e=p.getOriginalReplaceState().apply(this,arguments);return g.resolve().then((function(){o("replaceState")})),e}f.dispatch(c.ENSURE_ORIGINAL_REPLACESTATE),_.getGlobal("history").replaceState=e}function o(e){d.emit({type:"viewTrigger",name:"URLChanged",data:{source:e,newURL:_.getHref()}},!0)}var s=i(2),c=i(7),u=i(16),l=i(25),d=i(87),f=i(9),p=u.get("stores/history"),g=i(12).Promise,h=i(123),_=i(40),v="URLChanged";
e.exports=function(e){n(),e.registerViewTrigger(v)};var E=s.partial(o,"popstate"),m=s.partial(o,"hashchange")}),(function(e,t,i){function n(e){return"apiName: "+e.apiName+", selector: "+e.eventFilter.selector}var r=i(110),a=i(212),o=i(23),s=i(123);e.exports=function(e){var t=new a(function(e){s.updateAllViewTags();var t=r.trackClickEvent(e);t?o.log("Tracking click event:",e):o.log("Not tracking click event:",e)});e.registerEventImplementation("click",{attach:function(e){t.hasEvents()||t.listen(),t.addEvent(e),o.debug("Started listening for click event ("+n(e)+"):",e)},detach:function(e){t.removeEvent(e),t.hasEvents()||t.unlisten(),o.debug("Stopped listening for click event ("+n(e)+"):",e)}})}}),(function(e,t,i){function n(e){this.handler=e,this.events=[],this.unlistenFn=null,this.clickHandler=a.bind((function(e){a.forEach(this.events,a.bind((function(t){try{var i=t.config&&t.config.selector?t.config.selector:t.eventFilter.selector;r(e,i,t)&&this.handler(t)}catch(e){o.emitError(new l("Unable to handle click for selector"+i+":"+e.message))}}),this))}),this)}function r(e,t,i){for(var n=e.target,r=0;n;){var s;try{s=u(n,t)}catch(s){var c={typeofElementValue:typeof n,nodeName:a.result(n,["nodeName"],null),nodeType:a.result(n,["nodeType"],null),targetName:a.result(e,["target","nodeName"],null),targetType:a.result(e,["target","nodeType"],null),numParentsTraversed:r,selector:t,errorMessage:s.message,eventId:i.id};return o.emitError(new l("Unable to evaluate match for element"),c),!1}if(s)return!0;n=n.parentElement,r++}return!1}var a=i(2),o=i(86),s=i(76).create,c=i(80),u=i(213),l=t.Error=s("ClickDelegateError");n.prototype.listen=function(){this.unlistenFn=c.addEventListener("click",this.clickHandler,!0)},n.prototype.unlisten=function(){this.unlistenFn&&(this.unlistenFn(),this.unlistenFn=null)},n.prototype.hasEvents=function(){return this.events.length>0},n.prototype.addEvent=function(e){this.events.push(e)},n.prototype.removeEvent=function(e){this.events=a.filter(this.events,(function(t){return t.apiName!==e.apiName}))},e.exports=n}),(function(e,t,i){e.exports=i(214)}),(function(e,t){"use strict";function i(e,t){if(r)return r.call(e,t);for(var i=e.parentNode.querySelectorAll(t),n=0;n<i.length;n++)if(i[n]==e)return!0;return!1}var n=Element.prototype,r=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;e.exports=i}),(function(e,t,i){function n(e,t){if(this.change=e,this.identifier=t.identifier,this.startTime=t.startTime,d.shouldObserveChangesIndefinitely()){g.dispatch(a.INITIALIZE_CHANGE_METRICS),this.rateMeter=new _(m.MOVING_WINDOW_MILLISECONDS);var i=r.isNull(m.MAX_MACROTASKS_IN_MOVING_WINDOW)?Number.POSITIVE_INFINITY:m.MAX_MACROTASKS_IN_MOVING_WINDOW;this.rateMeter.addListener(i,r.bind((function(){h.warn("AppendChange",this,"has overheated and will no longer apply or reapply"),this.cancel(),g.dispatch(a.RECORD_CHANGE_OVERHEATED),o.emitError(new I("Change "+this.identifier+" has overheated"),{layerId:t.action&&t.action.layerId,experimentId:t.action&&t.action.experimentId,variationId:t.action&&t.action.variationId,changeId:e.id,changeType:e.type,movingWindowMilliseconds:m.MOVING_WINDOW_MILLISECONDS,maxMacroTasksInMovingWindow:i})}),this));for(var n=Math.min(i,50),s=0;s<=n;s++)this.rateMeter.addListener(s,r.partial((function(e){g.dispatch(a.RECORD_CHANGE_MACROTASK_RATE,{changeMacrotaskRate:e})}),s))}}var r=i(2),a=i(7),o=i(86),s=i(137),c=i(76).create,u=i(216),l=i(217),d=i(16).get("stores/directive"),f=i(80),p=i(218),g=i(9),h=i(23),_=i(219),v=i(136),E=i(100).create(),m={MOVING_WINDOW_MILLISECONDS:1e3,MAX_MACROTASKS_IN_MOVING_WINDOW:10},I=c("ChangeOverheatError");n.prototype.numberOfRootNodes=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes.length},n.prototype.getSiblingElements=function(e,t,i){for(var n=e,r=[],a=0;a<t;a++)i?(r.push(n.nextSibling),n=n.nextSibling):(r.push(n.previousSibling),n=n.previousSibling);return r},n.prototype.apply=function(){this.applyDeferred=l();try{var e=this.numberOfRootNodes(this.change.value);if(!e)throw new Error("No DOM elements to be created for this change: "+this.change.value);var t=r.partial(this.applyDeferred.reject,new Error("Unable to find selector.")),i={};d.shouldObserveChangesUntilTimeout()?i={timeout:r.partial(v.isTimedOut,this.startTime),onTimeout:t}:d.isEditor()&&E.waitUntil(r.partial(v.isTimedOut,this.startTime)).then(t,t),this.unobserveSelector=E.observeSelector(this.change.selector,r.bind(this.maybeApplyToElement,this),i);var n=f.querySelectorAll(this.change.selector);r.each(n,r.bind(this.maybeApplyToElement,this))}catch(e){this.applyDeferred.reject(e)}return this.applyDeferred},n.prototype.maybeApplyToElement=function(e){var t=s.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id;if(e.hasAttribute(t))return h.debug("Not applying AppendChange to element",e,"because it was inserted by this change"),void this.applyDeferred.resolve();this.rateMeter&&this.rateMeter.countCurrentTick();var i=r.bind(this.applyOrReapplyToElement,this,e,t);i(),this.applyDeferred.resolve()},n.prototype.applyOrReapplyToElement=function(e,t){var i;switch(this.change.operator){case p.DOMInsertionType.AFTER:i=p.insertAdjacentHTMLType.AFTER_END;break;case p.DOMInsertionType.APPEND:i=p.insertAdjacentHTMLType.BEFORE_END;break;case p.DOMInsertionType.BEFORE:i=p.insertAdjacentHTMLType.BEFORE_BEGIN;break;case p.DOMInsertionType.PREPEND:i=p.insertAdjacentHTMLType.AFTER_BEGIN;break;default:i=p.insertAdjacentHTMLType.BEFORE_END}e.insertAdjacentHTML(i,this.change.value),e.setAttribute(t,""),u.setData(e,this.change.id,this.identifier,[]);var n,a,o=this.numberOfRootNodes(this.change.value)-1;i===p.insertAdjacentHTMLType.BEFORE_END?(n=e.lastChild,a=this.getSiblingElements(n,o,!1)):i===p.insertAdjacentHTMLType.AFTER_BEGIN?(n=e.firstChild,a=this.getSiblingElements(n,o,!0)):i===p.insertAdjacentHTMLType.BEFORE_BEGIN?(n=e.previousSibling,a=this.getSiblingElements(n,o,!1)):i===p.insertAdjacentHTMLType.AFTER_END&&(n=e.nextSibling,a=this.getSiblingElements(n,o,!0)),a.unshift(n),r.each(a,r.bind((function(e){var i=e.nodeType===Node.ELEMENT_NODE?e:f.parentElement(e);i.setAttribute(t,"");var n=u.getData(i,this.change.id,this.identifier)||[];n.push(e),u.setData(i,this.change.id,this.identifier,n),r.each(f.childrenOf(i),(function(e){e.setAttribute(t,"")}))}),this))},n.prototype.cancel=function(){this.unobserveSelector&&this.unobserveSelector()},n.prototype.undo=function(){var e=s.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id,t=document.querySelectorAll("["+e+"]");return r.each(t,r.bind((function(t){var i=u.getData(t,this.change.id,this.identifier)||[];r.each(i,(function(e){e.parentNode.removeChild(e)})),t.removeAttribute(e),u.removeData(t,this.change.id,this.identifier),r.each(f.childrenOf(t),(function(t){t.removeAttribute(e)}))}),this)),l().resolve(p.changeState.UNAPPLIED)},e.exports=function(e){e.registerChangeApplier(p.changeType.APPEND,n)}}),(function(e,t,i){function n(e,t){return[e,t].join("_")}var r=i(2),a=i(137).CHANGE_DATA_KEY;t.getData=function(e,t,i){var r=n(t,i);return e[a]&&e[a][r]?e[a][r]:null},t.hasData=function(e){return Boolean(e&&e[a]&&!r.isEmpty(e[a]))},t.removeData=function(e,t,i){e[a]&&delete e[a][n(t,i)]},t.setData=function(e,t,i,r){if("object"!=typeof r)throw new Error("setData expects an object");e[a]||(e[a]={}),e[a][n(t,i)]=r}}),(function(e,t,i){var n=i(2),r=i(12).Promise,a=function(){var e,t,i=new r(function(i,n){e=i,t=n});return i.resolve=function(){return e.apply(null,n.toArray(arguments)),i},i.reject=function(){return t.apply(null,n.toArray(arguments)),i},i};e.exports=a}),(function(e,t,i){var n=i(8);e.exports={changeType:{CUSTOM_CODE:"custom_code",ATTRIBUTE:"attribute",APPEND:"append",REARRANGE:"rearrange",REDIRECT:"redirect",WIDGET:"widget"},DOMInsertionType:{AFTER:"after",APPEND:"append",BEFORE:"before",PREPEND:"prepend"},insertAdjacentHTMLType:{AFTER_BEGIN:"afterbegin",AFTER_END:"afterend",BEFORE_BEGIN:"beforebegin",BEFORE_END:"beforeend"},selectorChangeType:{CLASS:"class",HTML:"html",HREF:"href",SRC:"src",STYLE:"style",TEXT:"text",HIDE:"hide",REMOVE:"remove"},changeApplierState:n({APPLIED:null,APPLYING:null,UNAPPLIED:null,UNDOING:null}),changeState:n({BLOCKED:null,UNAPPLIED:null,APPLIED:null,APPLYING:null,UNDOING:null,TIMED_OUT:null,IGNORED:null,ERROR:null})}}),(function(e,t,i){function n(e){this.windowLength=e,this.count=0,this.listeners={},this.isIncrementingTick=!1}var r=i(2),a=i(23),o=i(40);n.prototype.countCurrentTick=function(){this.isIncrementingTick||(this.isIncrementingTick=!0,this.increment(),o.setTimeout(r.bind((function(){this.isIncrementingTick=!1}),this),0))},n.prototype.increment=function(){this.count+=1,r.forEach(this.listeners[String(this.count)],(function(e){e()})),o.setTimeout(r.bind(this.decrement,this),this.windowLength)},n.prototype.decrement=function(){this.count-=1,this.count<0&&(a.warn("Decremented down to negative count: ",this.count),this.count=0)},n.prototype.addListener=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.exports=n}),(function(e,t,i){function n(e,t){if(this.change=r.cloneDeep(e),this.change=I.transformVisibilityAttributesToCSS(this.change),this.identifier=t.identifier,this.startTime=t.startTime,this.disconnectObserverQueue=[],d.shouldObserveChangesIndefinitely()){g.dispatch(a.INITIALIZE_CHANGE_METRICS),this.rateMeter=new v(T.MOVING_WINDOW_MILLISECONDS);var i=r.isNull(T.MAX_MACROTASKS_IN_MOVING_WINDOW)?Number.POSITIVE_INFINITY:T.MAX_MACROTASKS_IN_MOVING_WINDOW;this.rateMeter.addListener(i,r.bind((function(){h.warn("AttributeChange",this,"has overheated and will no longer apply or reapply"),this.cancel(),g.dispatch(a.RECORD_CHANGE_OVERHEATED),o.emitError(new R("Change "+this.identifier+" has overheated"),{layerId:t.action&&t.action.layerId,experimentId:t.action&&t.action.experimentId,variationId:t.action&&t.action.variationId,changeId:e.id,changeType:e.type,movingWindowMilliseconds:T.MOVING_WINDOW_MILLISECONDS,maxMacroTasksInMovingWindow:i})}),this));for(var n=Math.min(i,50),s=0;s<=n;s++)this.rateMeter.addListener(s,r.partial((function(e){g.dispatch(a.RECORD_CHANGE_MACROTASK_RATE,{changeMacrotaskRate:e})}),s))}this.cancelled=!1}var r=i(2),a=(i(12).Promise,i(7)),o=i(86),s=i(137),c=i(76).create,u=i(216),l=i(217),d=i(16).get("stores/directive"),f=i(80),p=i(218),g=i(9),h=i(23),_=i(209),v=i(219),E=i(136),m=i(40),I=i(221),y=i(100).create(),S={attributes:!0,childList:!0,subtree:!0,characterData:!0},T={MOVING_WINDOW_MILLISECONDS:1e3,MAX_MACROTASKS_IN_MOVING_WINDOW:10},A=!0,R=c("ChangeOverheatError");n.prototype.apply=function(){this.applyDeferred=l();try{if(r.isEmpty(this.change.attributes)&&r.isEmpty(this.change.css))return h.debug("Not applying empty AttributeChange"),this.applyDeferred.resolve(),this.applyDeferred;var e=r.partial(this.applyDeferred.reject,new Error("Unable to find selector.")),t={};d.shouldObserveChangesUntilTimeout()?t={timeout:r.partial(E.isTimedOut,this.startTime),onTimeout:e}:d.isEditor()&&y.waitUntil(r.partial(E.isTimedOut,this.startTime)).then(e,e),this.unobserveSelector=y.observeSelector(this.change.selector,r.bind(this.maybeApplyToElement,this),t);var i=f.querySelectorAll(this.change.selector);r.each(i,r.bind(this.maybeApplyToElement,this))}catch(e){this.applyDeferred.reject(e)}return this.applyDeferred},n.prototype.maybeApplyToElement=function(e){var t=s.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id;if(e.hasAttribute(t))return h.debug("AttributeChange not being applied. Element already changed, or is a child of an element that was changed by this AttributeChange. "+e),void this.applyDeferred.resolve();this.rateMeter&&this.rateMeter.countCurrentTick();var i=r.bind(this.applyOrReapplyToElement,this,e,t);if(i(),A){var n=r.bind((function(){var t=r.bind((function(){this.cancelled||_.observe(a,e,S)}),this);m.setTimeout(t)}),this),a=_.create(r.bind((function(){this.rateMeter&&this.rateMeter.countCurrentTick(),a.disconnect(),i(),n()}),this));n(),this.disconnectObserverQueue.push(r.bind(a.disconnect,a))}this.applyDeferred.resolve()},n.prototype.applyOrReapplyToElement=function(e,t){var i={};r.forOwn(this.change.attributes,(function(n,a){switch(a){case p.selectorChangeType.CLASS:r.isUndefined(e.className)||(i[p.selectorChangeType.CLASS]=e.className,e.className=n);break;case p.selectorChangeType.HREF:r.isUndefined(e.href)||(i[p.selectorChangeType.HREF]=e.href,e.href=n);break;case p.selectorChangeType.HTML:r.isUndefined(e.innerHTML)||(i[p.selectorChangeType.HTML]=e.innerHTML,e.innerHTML=n,r.each(f.childrenOf(e),(function(e){e.setAttribute(t,"")})));break;case p.selectorChangeType.SRC:r.isUndefined(e.src)||(i[p.selectorChangeType.SRC]=e.src,e.src=n);break;case p.selectorChangeType.STYLE:break;case p.selectorChangeType.TEXT:r.isUndefined(e.textContent)||(i[p.selectorChangeType.TEXT]=e.textContent,e.textContent=n);break;default:throw new Error("Unrecognized attribute: "+a)}}));var n=I.createStylesFromChange(e.style.cssText,this.change);r.isString(n)&&(i[p.selectorChangeType.STYLE]=e.style.cssText,e.style.cssText=n),e.setAttribute(t,""),u.setData(e,this.change.id,this.identifier,i)},n.prototype.cancel=function(){this.cancelled=!0,this.unobserveSelector&&this.unobserveSelector(),r.each(this.disconnectObserverQueue,(function(e){try{e()}catch(e){}}))},n.prototype.undo=function(){var e=document.querySelectorAll("["+s.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id+"]");return r.each(e,r.bind((function(e){var t=u.getData(e,this.change.id,this.identifier);t&&r.forOwn(t,(function(t,i){switch(i){case p.selectorChangeType.CLASS:e.className=t;break;case p.selectorChangeType.HREF:e.href=t;break;case p.selectorChangeType.HTML:e.innerHTML=t;break;case p.selectorChangeType.SRC:e.src=t;break;case p.selectorChangeType.STYLE:e.style.cssText=t;break;case p.selectorChangeType.TEXT:e.textContent=t;break;case p.selectorChangeType.HIDE:e.style.visibility=t;break;case p.selectorChangeType.REMOVE:e.style.display=t;break;default:throw new Error("Unrecognized attribute: "+i)}})),e.removeAttribute(s.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id),u.removeData(e,this.change.id,this.identifier)}),this)),l().resolve(p.changeState.UNAPPLIED)},e.exports=function(e){e.registerChangeApplier(p.changeType.ATTRIBUTE,n)}}),(function(e,t,i){var n=i(2),r=i(218);t.transformVisibilityAttributesToCSS=function(e){if(!e.attributes)return e;if(e.attributes[r.selectorChangeType.HIDE]||e.attributes[r.selectorChangeType.REMOVE]){var t=n.extend({css:{}},n.cloneDeep(e));return e.attributes[r.selectorChangeType.HIDE]&&(t.css.visibility="hidden",delete t.attributes[r.selectorChangeType.HIDE]),e.attributes[r.selectorChangeType.REMOVE]&&(t.css.display="none",delete t.attributes[r.selectorChangeType.REMOVE]),t}return e},t.createStylesFromChange=function(e,t){if(n.isEmpty(t.css))return t.attributes.style;var i="",r=t.attributes.style||"";return n.each(t.css,(function(e,t){var n=new RegExp(t+"\\s?:");n.test(r)||(i+=t+":"+e+";")})),n.isUndefined(t.attributes.style)?(e||"")+i:i+r}}),(function(e,t,i){function n(e,t){if(!r.isFunction(e.value))throw new Error("Custom code must be a function");this.change=e}var r=i(2),a=i(217),o=i(218),s=i(144);n.prototype.apply=function(){var e=a();try{s.apply(this.change.value),e.resolve()}catch(t){e.reject(t)}return e},n.prototype.undo=function(){return a().resolve(o.changeState.IGNORED)},e.exports=function(e){e.registerChangeApplier(o.changeType.CUSTOM_CODE,n)}}),(function(e,t,i){var n=i(141),r=i(142).DecisionError,a="single_experiment",o="multivariate",s={selectExperiment:function(e,t,i){if(e.experiments.length<1)throw new r("Unable to find experiment to bucket user into");var a=e.experiments[0];if(!n.isValidExperiment(t,a))throw new r('Audience conditions failed for experiment: "'+a.id+'".');return a}};e.exports=function(e){e.registerDecider(a,s),e.registerDecider(o,s)}})]);